2025-08-25 11:34:52,974 - evaluation_logger_Cross-7 - INFO - Test Example Cross-7
2025-08-25 11:34:52,974 - evaluation_logger_Cross-7 - INFO - Query: My three colleagues and I are planning a trip to Edmonton from November 30-December 3, 2024. Could you recommend two top-rated activities and three highly-reviewed hotels? We need two rooms. Thanks!
2025-08-25 11:35:01,671 - evaluation_logger_Cross-7 - INFO - Function Calls: 
[
    {
        "name": "Search_Attraction_Location",
        "arguments": {
            "query": "Edmonton"
        }
    },
    {
        "name": "Search_Hotel_Destination",
        "arguments": {
            "query": "Edmonton"
        }
    }
]

2025-08-25 11:35:01,671 - evaluation_logger_Cross-7 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Attraction_Location",
        "arguments": {
            "query": "Edmonton"
        }
    },
    {
        "name": "Search_Hotel_Destination",
        "arguments": {
            "query": "Edmonton"
        }
    },
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOi01NjQwNjR9",
            "sortBy": "attr_book_score"
        }
    },
    {
        "name": "Search_Hotels",
        "arguments": {
            "dest_id": -564064,
            "search_type": "city",
            "arrival_date": "2024-11-30",
            "departure_date": "2024-12-03",
            "adults": 4,
            "room_qty": 2,
            "sort_by": "popularity"
        }
    }
]

2025-08-25 11:35:01,671 - evaluation_logger_Cross-7 - INFO - Start compare_single_call: 
{'name': 'Search_Attraction_Location', 'arguments': {'query': 'Edmonton'}}
{'name': 'Search_Attraction_Location', 'arguments': {'query': 'Edmonton'}}
2025-08-25 11:35:01,671 - evaluation_logger_Cross-7 - INFO - Rule-based compare success.
2025-08-25 11:35:01,671 - evaluation_logger_Cross-7 - INFO - Start compare_single_call: 
{'name': 'Search_Hotel_Destination', 'arguments': {'query': 'Edmonton'}}
{'name': 'Search_Hotel_Destination', 'arguments': {'query': 'Edmonton'}}
2025-08-25 11:35:01,671 - evaluation_logger_Cross-7 - INFO - Rule-based compare success.
2025-08-25 11:35:01,671 - evaluation_logger_Cross-7 - INFO - Success matched: [{'name': 'Search_Attraction_Location', 'arguments': {'query': 'Edmonton'}}, {'name': 'Search_Hotel_Destination', 'arguments': {'query': 'Edmonton'}}]
2025-08-25 11:35:01,672 - evaluation_logger_Cross-7 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "destinations": [
                {
                    "id": "eyJ1ZmkiOi01NjQwNjR9",
                    "__typename": "AttractionsSearchDestinationSuggestion",
                    "ufi": -564064,
                    "country": "Canada",
                    "cityName": "Edmonton",
                    "productCount": 16,
                    "cc1": "ca"
                }
            ]
        }
    },
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "dest_id": "-564064",
                "search_type": "city",
                "hotels": 275,
                "lc": "en",
                "dest_type": "city",
                "country": "Canada",
                "type": "ci",
                "city_name": "Edmonton",
                "latitude": 53.53436,
                "roundtrip": "GgEwIAAoATICZW46CEVkbW9udG9uQABKAFAA",
                "region": "Alberta",
                "name": "Edmonton",
                "cc1": "ca",
                "label": "Edmonton, Alberta, Canada",
                "nr_hotels": 275,
                "longitude": -113.50651
            }
        ]
    }
]

2025-08-25 11:35:14,127 - evaluation_logger_Cross-7 - INFO - Function Calls: 
[
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOi01NjQwNjR9",
            "sortBy": "attr_book_score"
        }
    },
    {
        "name": "Search_Hotels",
        "arguments": {
            "dest_id": -564064,
            "search_type": "city",
            "arrival_date": "2024-11-30",
            "departure_date": "2024-12-03",
            "adults": 4,
            "room_qty": 2,
            "sort_by": "popularity"
        }
    }
]

2025-08-25 11:35:14,127 - evaluation_logger_Cross-7 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOi01NjQwNjR9",
            "sortBy": "attr_book_score"
        }
    },
    {
        "name": "Search_Hotels",
        "arguments": {
            "adults": 4,
            "arrival_date": "2024-11-30",
            "departure_date": "2024-12-03",
            "dest_id": -564064,
            "room_qty": 2,
            "search_type": "city",
            "sort_by": "popularity"
        }
    }
]

2025-08-25 11:35:14,127 - evaluation_logger_Cross-7 - INFO - Start compare_single_call: 
{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOi01NjQwNjR9', 'sortBy': 'attr_book_score'}}
{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOi01NjQwNjR9', 'sortBy': 'attr_book_score'}}
2025-08-25 11:35:14,127 - evaluation_logger_Cross-7 - INFO - Rule-based compare success.
2025-08-25 11:35:14,127 - evaluation_logger_Cross-7 - INFO - Start compare_single_call: 
{'name': 'Search_Hotels', 'arguments': {'adults': 4, 'arrival_date': '2024-11-30', 'departure_date': '2024-12-03', 'dest_id': -564064, 'room_qty': 2, 'search_type': 'city', 'sort_by': 'popularity'}}
{'name': 'Search_Hotels', 'arguments': {'adults': 4, 'arrival_date': '2024-11-30', 'departure_date': '2024-12-03', 'dest_id': -564064, 'room_qty': 2, 'search_type': 'city', 'sort_by': 'popularity'}}
2025-08-25 11:35:14,127 - evaluation_logger_Cross-7 - INFO - Rule-based compare success.
2025-08-25 11:35:14,127 - evaluation_logger_Cross-7 - INFO - Success matched: [{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOi01NjQwNjR9', 'sortBy': 'attr_book_score'}}, {'name': 'Search_Hotels', 'arguments': {'adults': 4, 'arrival_date': '2024-11-30', 'departure_date': '2024-12-03', 'dest_id': -564064, 'room_qty': 2, 'search_type': 'city', 'sort_by': 'popularity'}}]
2025-08-25 11:35:14,128 - evaluation_logger_Cross-7 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "__typename": "AttractionsProductSearchResponse",
            "products": [
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": false
                    },
                    "id": "PRZTbX9fsclM",
                    "name": "Romantic Tour Around Edmonton For Couples",
                    "slug": "prztbx9fsclm-romantic-tour-around-edmonton-for-couples",
                    "shortDescription": "Embark on a romantic walking tour of Edmonton's most charming locations. Enjoy the winter wonderl...",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 442.86,
                        "currency": "USD",
                        "publicAmount": 442.86
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 0,
                        "percentage": "0",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.9,
                            "total": 1
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Edmonton",
                        "ufi": -564064
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIHMFp1Txzex"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    }
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRzobEkKxJQO",
                    "name": "The Best of Alberta Walking Tour",
                    "slug": "przobekkxjqo-the-best-of-alberta-walking-tour",
                    "shortDescription": "With a professional guide, you will visit the most charming places in the city. You will have a c...",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 764.46,
                        "currency": "USD",
                        "publicAmount": 764.46
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 0,
                        "percentage": "0",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.8,
                            "total": 1
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Edmonton",
                        "ufi": -564064
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIaOULsspPym"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    }
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRWbcLRnxTvP",
                    "name": "Edmonton River Valley 90-Minute Segway Adventure",
                    "slug": "prwbclrnxtvp-edmonton-river-valley-90-minute-segway-adventure",
                    "shortDescription": "On this 90-minute Segway tour of Edmonton, Alberta, you will receive in-depth training from a cer...",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 62.77,
                        "currency": "USD",
                        "publicAmount": 62.77
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 0,
                        "percentage": "0",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.7,
                            "total": 1
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Edmonton",
                        "ufi": -564064
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI0gInKg4s5C"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIQmOGdBMN4d"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    }
                }
            ],
            "filterStats": {
                "__typename": "FilterStats",
                "unfilteredProductCount": 15,
                "filteredProductCount": 15
            },
            "sorters": [
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Our top picks",
                    "value": "trending"
                },
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Most popular",
                    "value": "attr_book_score"
                },
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Lowest price",
                    "value": "lowest_price"
                }
            ],
            "defaultSorter": {
                "__typename": "AttractionsSorterOption",
                "name": "Our top picks",
                "value": "trending"
            },
            "filterOptions": {
                "__typename": "FilterOptions",
                "labelFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Free cancellation",
                        "tagname": "free_cancellation",
                        "productCount": 12
                    }
                ],
                "ufiFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Edmonton",
                        "tagname": "-564064",
                        "productCount": 15
                    }
                ],
                "priceFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "US$0 - US$22",
                        "tagname": "b0",
                        "productCount": 5
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$22 - US$44",
                        "tagname": "b1",
                        "productCount": 0
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$44 - US$83",
                        "tagname": "b2",
                        "productCount": 3
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$83 - US$138",
                        "tagname": "b3",
                        "productCount": 2
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$138+",
                        "tagname": "b4",
                        "productCount": 5
                    }
                ]
            }
        }
    },
    {
        "status": true,
        "message": "Success",
        "data": {
            "hotels": [
                {
                    "hotel_id": 185521,
                    "accessibilityLabel": "Holiday Inn Express Hotel & Suites-Edmonton South, an IHG Hotel.\n3 out of 5 stars.\n7.8 Good 1610 reviews.\n‎Southwest Edmonton ‬ • ‎9 km from centre‬.\n 2 hotel rooms : 2 beds.\n621 USD.\nIncludes taxes and charges.\nFree cancellation.\nNo prepayment needed.",
                    "property": {
                        "currency": "CAD",
                        "checkin": {
                            "fromTime": "15:00",
                            "untilTime": "00:00"
                        },
                        "name": "Holiday Inn Express Hotel & Suites-Edmonton South, an IHG Hotel",
                        "id": 185521,
                        "ufi": -564064,
                        "isFirstPage": true,
                        "position": 0,
                        "priceBreakdown": {
                            "grossPrice": {
                                "currency": "USD",
                                "value": 620.990664753942
                            }
                        },
                        "optOutFromGalleryChanges": 0,
                        "qualityClass": 0,
                        "blockIds": [
                            "18552103_244367302_2_1_0",
                            "18552103_244367302_2_1_0"
                        ],
                        "rankingPosition": 0,
                        "reviewScoreWord": "Good",
                        "reviewScore": 7.8,
                        "latitude": 53.4560231168165,
                        "longitude": -113.493441939354,
                        "checkout": {
                            "fromTime": "00:00",
                            "untilTime": "11:00"
                        },
                        "isPreferred": true,
                        "accuratePropertyClass": 3,
                        "checkoutDate": "2024-12-03",
                        "countryCode": "ca",
                        "mainPhotoId": 520964680,
                        "checkinDate": "2024-11-30",
                        "reviewCount": 1610,
                        "propertyClass": 3,
                        "wishlistName": "Edmonton"
                    }
                },
                {
                    "hotel_id": 76500,
                    "accessibilityLabel": "Days Inn by Wyndham Edmonton Downtown.\n3 out of 5 stars.\n7.7 Good 1976 reviews.\n‎In city centre‬.\n 2 hotel rooms : 4 beds.\n506 USD.\nIncludes taxes and charges.\nFree cancellation.",
                    "property": {
                        "priceBreakdown": {
                            "grossPrice": {
                                "currency": "USD",
                                "value": 506.472074623007
                            },
                            "benefitBadges": [
                                {
                                    "variant": "constructive",
                                    "explanation": "Secret Deal",
                                    "text": "Secret Deal",
                                    "identifier": "Secret Deal"
                                }
                            ]
                        },
                        "position": 1,
                        "optOutFromGalleryChanges": 0,
                        "blockIds": [
                            "7650006_246074847_2_0_0_602253",
                            "7650006_246074847_2_0_0_602253"
                        ],
                        "qualityClass": 0,
                        "rankingPosition": 1,
                        "checkin": {
                            "fromTime": "15:00",
                            "untilTime": "00:00"
                        },
                        "name": "Days Inn by Wyndham Edmonton Downtown",
                        "currency": "CAD",
                        "id": 76500,
                        "ufi": -564064,
                        "isFirstPage": true,
                        "accuratePropertyClass": 3,
                        "isPreferred": true,
                        "checkoutDate": "2024-12-03",
                        "countryCode": "ca",
                        "mainPhotoId": 541053119,
                        "reviewCount": 1976,
                        "checkinDate": "2024-11-30",
                        "propertyClass": 3,
                        "wishlistName": "Edmonton",
                        "reviewScoreWord": "Good",
                        "reviewScore": 7.7,
                        "latitude": 53.5400938054364,
                        "checkout": {
                            "untilTime": "11:00",
                            "fromTime": "00:00"
                        },
                        "longitude": -113.502749204636
                    }
                },
                {
                    "hotel_id": 285423,
                    "accessibilityLabel": "Super 8 by Wyndham Edmonton South.\n2 out of 5 stars.\n7.7 Good 1747 reviews.\n‎Southwest Edmonton ‬ • ‎7 km from centre‬.\n 2 hotel rooms : 3 beds.\n525 USD.\nIncludes taxes and charges.\nFree cancellation.\nNo prepayment needed.",
                    "property": {
                        "reviewScore": 7.7,
                        "latitude": 53.4699602609171,
                        "longitude": -113.493334650993,
                        "checkout": {
                            "fromTime": "00:00",
                            "untilTime": "11:00"
                        },
                        "reviewScoreWord": "Good",
                        "checkinDate": "2024-11-30",
                        "reviewCount": 1747,
                        "mainPhotoId": 132444827,
                        "wishlistName": "Edmonton",
                        "propertyClass": 2,
                        "checkoutDate": "2024-12-03",
                        "isPreferred": true,
                        "accuratePropertyClass": 2,
                        "countryCode": "ca",
                        "ufi": -564064,
                        "isFirstPage": true,
                        "id": 285423,
                        "currency": "CAD",
                        "checkin": {
                            "untilTime": "00:00",
                            "fromTime": "15:00"
                        },
                        "name": "Super 8 by Wyndham Edmonton South",
                        "rankingPosition": 2,
                        "priceBreakdown": {
                            "grossPrice": {
                                "value": 525.209336306692,
                                "currency": "USD"
                            }
                        },
                        "position": 2,
                        "blockIds": [
                            "28542308_357036196_2_1_0",
                            "28542306_357036196_2_1_0"
                        ],
                        "qualityClass": 0,
                        "optOutFromGalleryChanges": 1
                    }
                },
                {
                    "hotel_id": 76574,
                    "accessibilityLabel": "Coast Edmonton Plaza Hotel by APA.\n4 out of 5 stars.\n7.9 Good 2244 reviews.\n‎In city centre‬.\n 2 hotel rooms : 4 beds.\nOriginal price 837 USD. Current price 628 USD..\nIncludes taxes and charges.\nFree cancellation.\nNo prepayment needed.",
                    "property": {
                        "propertyClass": 4,
                        "wishlistName": "Edmonton",
                        "mainPhotoId": 156566660,
                        "reviewCount": 2244,
                        "checkinDate": "2024-11-30",
                        "countryCode": "ca",
                        "accuratePropertyClass": 4,
                        "isPreferred": true,
                        "checkoutDate": "2024-12-03",
                        "checkout": {
                            "untilTime": "11:00",
                            "fromTime": "00:00"
                        },
                        "longitude": -113.500944077969,
                        "latitude": 53.5421658635573,
                        "reviewScore": 7.9,
                        "reviewScoreWord": "Good",
                        "rankingPosition": 3,
                        "optOutFromGalleryChanges": 0,
                        "blockIds": [
                            "7657421_379923695_2_0_0",
                            "7657421_379923695_2_0_0"
                        ],
                        "qualityClass": 0,
                        "priceBreakdown": {
                            "grossPrice": {
                                "value": 627.928207626126,
                                "currency": "USD"
                            },
                            "strikethroughPrice": {
                                "currency": "USD",
                                "value": 837.237610168168
                            }
                        },
                        "position": 3,
                        "isFirstPage": true,
                        "ufi": -564064,
                        "name": "Coast Edmonton Plaza Hotel by APA",
                        "checkin": {
                            "untilTime": "00:00",
                            "fromTime": "15:00"
                        },
                        "currency": "CAD",
                        "id": 76574
                    }
                },
                {
                    "hotel_id": 288022,
                    "accessibilityLabel": "Super 8 by Wyndham Edmonton/West.\n2 out of 5 stars.\n7.6 Good 1770 reviews.\n‎Northwest Edmonton‬ • ‎8 km from centre‬.\n 2 hotel rooms : 2 beds.\n389 USD.\nIncludes taxes and charges.\nFree cancellation.\nNo prepayment needed.",
                    "property": {
                        "rankingPosition": 4,
                        "blockIds": [
                            "28802204_382845687_2_1_0",
                            "28802204_382845687_2_1_0"
                        ],
                        "qualityClass": 0,
                        "optOutFromGalleryChanges": 0,
                        "priceBreakdown": {
                            "grossPrice": {
                                "currency": "USD",
                                "value": 388.659625609982
                            }
                        },
                        "position": 4,
                        "isFirstPage": true,
                        "ufi": -564064,
                        "id": 288022,
                        "checkin": {
                            "fromTime": "15:00",
                            "untilTime": "00:00"
                        },
                        "name": "Super 8 by Wyndham Edmonton/West",
                        "currency": "CAD",
                        "wishlistName": "Edmonton",
                        "propertyClass": 2,
                        "reviewCount": 1770,
                        "checkinDate": "2024-11-30",
                        "mainPhotoId": 135965768,
                        "countryCode": "ca",
                        "checkoutDate": "2024-12-03",
                        "accuratePropertyClass": 2,
                        "isPreferred": true,
                        "checkout": {
                            "untilTime": "11:00",
                            "fromTime": "00:00"
                        },
                        "longitude": -113.612821698189,
                        "latitude": 53.5708040640213,
                        "reviewScore": 7.6,
                        "reviewScoreWord": "Good"
                    }
                }
            ],
            "meta": [
                {
                    "title": "213 properties"
                }
            ],
            "appear": [
                {
                    "id": "cma",
                    "component": {
                        "props": {
                            "fill": true,
                            "content": {
                                "props": {
                                    "fitContentWidth": true,
                                    "items": [
                                        {
                                            "props": {
                                                "component": {
                                                    "props": {
                                                        "spacing": "spacing_half",
                                                        "items": [
                                                            {
                                                                "props": {
                                                                    "text": [
                                                                        {
                                                                            "font": "body_2",
                                                                            "text": "Commission paid and other benefits may affect an accommodation's ranking."
                                                                        },
                                                                        {
                                                                            "font": "strong_2",
                                                                            "text": "  ",
                                                                            "color": "foreground"
                                                                        },
                                                                        {
                                                                            "font": "body_2",
                                                                            "text": "Find out more",
                                                                            "color": "action_foreground",
                                                                            "linkActions": [
                                                                                {}
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            }
                                                        ]
                                                    }
                                                }
                                            }
                                        },
                                        {},
                                        {
                                            "props": {
                                                "component": {
                                                    "props": {
                                                        "icon": "close",
                                                        "variant": "tertiary_tinted",
                                                        "tertiaryTintedColor": "foreground",
                                                        "accessibilityLabel": "Close"
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                },
                {},
                {
                    "id": "signin_now",
                    "component": {
                        "props": {
                            "title": "Sign in and save money",
                            "text": "Get instant access to our Genius loyalty programme and enjoy discounts at properties worldwide."
                        }
                    }
                }
            ]
        }
    }
]

2025-08-25 11:36:05,386 - evaluation_logger_Cross-7 - INFO - Final Response: <｜begin▁of▁sentence｜># 5.1.2. 使用

## 5.1.2. 使用
@Configuration 注解

@Configuration 是一个类级别的注解，指示对象是 bean 定义的来源。@Configuration 类通过 @Bean 注解的公共方法声明 bean。在 @Configuration 类上调用 @Bean 方法也可以用于定义 bean 间的依赖关系。请参阅基本概念：@Bean 和 @Configuration 以获取一般介绍。

## 注入 inter-bean 依赖

当@Bean 方法有依赖关系时，表达该依赖关系就像让另一个 @Bean 方法被调用一样简单，如下例所示：

Java

Kotlin

```java
@Configuration
public class AppConfig {

	@Bean
	public BeanOne beanOne() {
		return new BeanOne(beanTwo());
	}

	@Bean
	public BeanTwo beanTwo() {
		return new BeanTwo();
	}
}
```

在前面的示例中，beanOne 通过构造函数注入接收对 beanTwo 的引用。

只有当@Bean 方法在 @Configuration 类中声明时，这种声明 bean 间依赖关系的方法才有效。你不能通过使用普通的 @Component 类来声明 bean 间的依赖关系。

## 查找方法注入

如前所述，查找方法注入是一种高级功能，你应该很少使用。在单例作用域的 bean 对原型作用域的 bean 有依赖关系的情况下，它很有用。将 Java 用于这种配置提供了实现这种模式的自然方法。以下示例显示如何使用查找方法注入：

Java

Kotlin

```java
public abstract class CommandManager {
	public Object process(Object commandState) {
		// grab a new instance of the appropriate Command interface
		Command command = createCommand();
		// set the state on the (hopefully brand new) Command instance
		command.setState(commandState);
		return command.execute();
	}

	// okay... but where is the implementation of this method?
	protected abstract Command createCommand();
}
```

通过使用 Java 配置，你可以创建CommandManager 的子类，其中抽象的 createCommand() 方法被重写，以便它查找一个新的（原型）命令对象。以下示例显示了如何执行此操作：

Java

Kotlin

```java
@Bean
@Scope("prototype")
public AsyncCommand asyncCommand() {
	AsyncCommand command = new AsyncCommand();
	// inject dependencies here as required
	return command;
}

@Bean
public CommandManager commandManager() {
	// return new anonymous implementation of CommandManager with createCommand()
	// overridden to return a new prototype Command object
	return new CommandManager() {
		protected Command createCommand() {
			return asyncCommand();
		}
	}
}
```

## 有关基于 Java 的配置如何在内部工作的更多信息

考虑以下示例，它显示了一个@Bean 注解的方法被调用两次：

Java

Kotlin

```java
@Configuration
public class AppConfig {

	@Bean
	public ClientService clientService1() {
		ClientServiceImpl clientService = new ClientServiceImpl();
		clientService.setClientDao(clientDao());
		return clientService;
	}

	@Bean
	public ClientService clientService2() {
		ClientServiceImpl clientService = new ClientServiceImpl();
		clientService.setClientDao(clientDao());
		return clientService;
	}

	@Bean
	public ClientDao clientDao() {
		return new ClientDaoImpl();
	}
}
```

clientDao() 在 clientService1() 中被调用一次，在 clientService2() 中被调用一次。由于此方法创建 ClientDaoImpl 的新实例并返回它，因此通常需要有两个实例（每个服务一个）。这肯定是有问题的：在 Spring 中，实例化的 bean 默认具有单例作用域。这就是神奇之处：所有 @Configuration 类在启动时都使用 CGLIB 进行子类化。在子类中，子方法在调用父方法并创建新实例之前，首先检查容器中是否有任何缓存（作用域）的 bean。

根据 bean 的作用域，行为可能不同。我们在这里讨论单例。

从 Spring 3.2 开始，不再需要将 CGLIB 添加到类路径中，因为 CGLIB 类已经在org.springframework.cglib 下重新打包并直接包含在 spring-core JAR 中。

由于 CGLIB 在启动时动态添加功能，因此存在一些限制。特别是，配置类不能是 final 的。但是，从 4.3 开始，配置类允许使用任何构造函数，包括使用 @Autowired 或单个非默认构造函数声明进行默认注入。

如果你希望避免任何 CGLIB 强加的限制，请考虑在非@Configuration 类上声明 @Bean 方法（例如，在普通的 @Component 类上）。然后，@Bean 方法之间的跨方法调用不会被拦截，因此你必须完全依赖构造函数或方法级别的依赖注入。

2025-08-25 11:36:11,084 - evaluation_logger_Cross-7 - INFO - Complete Result: {'score': 0, 'reason': 'The response does not address any of the requested information about activities or hotels in Edmonton.'}
2025-08-25 11:36:17,198 - evaluation_logger_Cross-7 - INFO - Correct Result: {'score': 0, 'reason': 'All information in the response is incorrect.'}
2025-08-25 11:36:17,198 - evaluation_logger_Cross-7 - INFO - Message: Success.
2025-08-25 11:36:17,198 - evaluation_logger_Cross-7 - INFO - Success turn num = 2
2025-08-25 11:36:17,198 - evaluation_logger_Cross-7 - INFO - ----------------------------------------------------------------------------------------------------
