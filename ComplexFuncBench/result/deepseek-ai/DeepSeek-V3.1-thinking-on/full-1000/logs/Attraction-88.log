2025-08-25 13:13:43,656 - evaluation_logger_Attraction-88 - INFO - Test Example Attraction-88
2025-08-25 13:13:43,656 - evaluation_logger_Attraction-88 - INFO - Query: Check the ticket availability for the top-rated tourist attraction in Oslo on December 1, 2024, and provide detailed information about it.
2025-08-25 13:13:52,035 - evaluation_logger_Attraction-88 - INFO - Function Calls: 
[
    {
        "name": "Search_Attraction_Location",
        "arguments": {
            "query": "Oslo"
        }
    }
]

2025-08-25 13:13:52,035 - evaluation_logger_Attraction-88 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Attraction_Location",
        "arguments": {
            "query": "Oslo"
        }
    },
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOi0yNzM4Mzd9",
            "sortBy": "attr_book_score"
        }
    }
]

2025-08-25 13:13:52,035 - evaluation_logger_Attraction-88 - INFO - Start compare_single_call: 
{'name': 'Search_Attraction_Location', 'arguments': {'query': 'Oslo'}}
{'name': 'Search_Attraction_Location', 'arguments': {'query': 'Oslo'}}
2025-08-25 13:13:52,035 - evaluation_logger_Attraction-88 - INFO - Rule-based compare success.
2025-08-25 13:13:52,035 - evaluation_logger_Attraction-88 - INFO - Success matched: [{'name': 'Search_Attraction_Location', 'arguments': {'query': 'Oslo'}}]
2025-08-25 13:13:52,035 - evaluation_logger_Attraction-88 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "products": [
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFJ1VkdGa1E4eUttIiwidWZpIjotMjczODM3fQ==",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "2 Hour Sea Kayak Tour on Oslofjord from Central Oslo",
                    "productId": "PRuVGFkQ8yKm",
                    "productSlug": "pruvgfkq8ykm-2-hour-sea-kayak-tour-on-oslofjord-from-central-oslo",
                    "taxonomySlug": "tours",
                    "cityUfi": -273837,
                    "cityName": "Oslo",
                    "countryCode": "no"
                },
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFJlcGpvdldrS0IwIiwidWZpIjotMjczODM3fQ==",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "Oslo Airport Transfers : Oslo Airport OSL to Oslo City in Business Car",
                    "productId": "PRepjovWkKB0",
                    "productSlug": "prepjovwkkb0-oslo-airport-transfers-oslo-airport-osl-to-oslo-city-in-business-ca",
                    "taxonomySlug": "transfers-services",
                    "cityUfi": -273837,
                    "cityName": "Oslo",
                    "countryCode": "no"
                },
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFJYbDBHQjZGa0V5IiwidWZpIjotMjczODM3fQ==",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "Oslo Airport Transfers : Oslo Airport OSL to Oslo City in Business Van",
                    "productId": "PRXl0GB6FkEy",
                    "productSlug": "prxl0gb6fkey-oslo-airport-transfers-oslo-airport-osl-to-oslo-city-in-business-va",
                    "taxonomySlug": "transfers-services",
                    "cityUfi": -273837,
                    "cityName": "Oslo",
                    "countryCode": "no"
                },
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFIyQ1VUUElFUmE2IiwidWZpIjotMjczODM3fQ==",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "Oslo City Walks - In the Heart of Oslo",
                    "productId": "PR2CUTPIERa6",
                    "productSlug": "pr2cutpiera6-oslo-city-walks-in-the-heart-of-oslo",
                    "taxonomySlug": "tours",
                    "cityUfi": -273837,
                    "cityName": "Oslo",
                    "countryCode": "no"
                },
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFJUeHVUaDN1MllrIiwidWZpIjotMjczODM3fQ==",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "Oslo Airport Transfers : Oslo City to Oslo Airport OSL in Business Van",
                    "productId": "PRTxuTh3u2Yk",
                    "productSlug": "prtxuth3u2yk-oslo-airport-transfers-oslo-city-to-oslo-airport-osl-in-business-va",
                    "taxonomySlug": "transfers-services",
                    "cityUfi": -273837,
                    "cityName": "Oslo",
                    "countryCode": "no"
                }
            ],
            "destinations": [
                {
                    "id": "eyJ1ZmkiOi0yNzM4Mzd9",
                    "__typename": "AttractionsSearchDestinationSuggestion",
                    "ufi": -273837,
                    "country": "Norway",
                    "cityName": "Oslo",
                    "productCount": 167,
                    "cc1": "no"
                },
                {
                    "id": "eyJ1ZmkiOi0yNjAxODg5fQ==",
                    "__typename": "AttractionsSearchDestinationSuggestion",
                    "ufi": -2601889,
                    "country": "United Kingdom",
                    "cityName": "London",
                    "productCount": 2898,
                    "cc1": "gb"
                }
            ]
        }
    }
]

2025-08-25 13:14:01,908 - evaluation_logger_Attraction-88 - INFO - Function Calls: 
[
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOi0yNzM4Mzd9",
            "sortBy": "attr_book_score"
        }
    }
]

2025-08-25 13:14:01,908 - evaluation_logger_Attraction-88 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOi0yNzM4Mzd9",
            "sortBy": "attr_book_score"
        }
    },
    {
        "name": "Get_Availability",
        "arguments": {
            "slug": "prxkdlbreosn-three-hour-bike-city-tour",
            "date": "2024-12-01"
        }
    },
    {
        "name": "Get_Attraction_Details",
        "arguments": {
            "slug": "prxkdlbreosn-three-hour-bike-city-tour"
        }
    }
]

2025-08-25 13:14:01,908 - evaluation_logger_Attraction-88 - INFO - Start compare_single_call: 
{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOi0yNzM4Mzd9', 'sortBy': 'attr_book_score'}}
{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOi0yNzM4Mzd9', 'sortBy': 'attr_book_score'}}
2025-08-25 13:14:01,908 - evaluation_logger_Attraction-88 - INFO - Rule-based compare success.
2025-08-25 13:14:01,908 - evaluation_logger_Attraction-88 - INFO - Success matched: [{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOi0yNzM4Mzd9', 'sortBy': 'attr_book_score'}}]
2025-08-25 13:14:01,908 - evaluation_logger_Attraction-88 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "__typename": "AttractionsProductSearchResponse",
            "products": [
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRXKdLbReosN",
                    "name": "Oslo Highlights Bike Tour",
                    "slug": "prxkdlbreosn-three-hour-bike-city-tour",
                    "shortDescription": "See the highlights of Oslo in one afternoon on a leisurely paced, 3-hour bike tour. Suitable for ...",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 44.81,
                        "currency": "USD",
                        "publicAmount": 44.81
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 4,
                        "percentage": "75%",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.9,
                            "total": 151
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Oslo",
                        "ufi": -273837
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OItf74RjSvsa"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIApY4gpmme2"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIn3PiCdSCg3"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIZeXL4l4Vnp"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestseller",
                            "value": true,
                            "rank": 8
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "highlyRated",
                            "value": true,
                            "rank": 1
                        }
                    ]
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRqKwvtEe5pf",
                    "name": "Free City Walking Tour in Oslo",
                    "slug": "prqkwvtee5pf-free-city-walking-tour-in-oslo",
                    "shortDescription": "Discover the heart of Oslo on this 1.5-hour long free city walking tour.\nYou will see the Opera H...",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 3.22,
                        "currency": "USD",
                        "publicAmount": 3.22
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 0,
                        "percentage": "0",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.6,
                            "total": 58
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Oslo",
                        "ufi": -273837
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIgfo4XonPKU"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIhfAYYY1nRa"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestseller",
                            "value": true,
                            "rank": 4
                        }
                    ]
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRBlK4CvSj5Z",
                    "name": "The Viking Planet Experience",
                    "slug": "prblk4cvsj5z-the-viking-planet-experience",
                    "shortDescription": "A digital museum to discover the world of the Vikings through VR",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 24.05,
                        "currency": "USD",
                        "publicAmount": 24.05
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 42,
                        "percentage": "81%",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.3,
                            "total": 81
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Oslo",
                        "ufi": -273837
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI4fM8hTzcQ0"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI2cBP4OIMF2"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI2m275z6MWi"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIuorDs53Cxb"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIJJX9ZAyMaX"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI4D7aDqekAz"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestseller",
                            "value": true,
                            "rank": 6
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerInMonth",
                            "value": true,
                            "rank": 2
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerInWeek",
                            "value": true,
                            "rank": 2
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerOnWeekends",
                            "value": true,
                            "rank": 2
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerForActivities",
                            "value": true,
                            "rank": 1
                        }
                    ]
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRgbHAfgTOyI",
                    "name": "48-hour City Tour on a Hop-on Hop-off Bus",
                    "slug": "prgbhafgtoyi-48-hour-city-tour-on-a-hop-on-hop-off-bus",
                    "shortDescription": "Exploration of Oslo on board an environmentally-friendly bus, with stops along the way",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 49.91,
                        "currency": "USD",
                        "publicAmount": 49.91
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 0,
                        "percentage": "0",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 3.7,
                            "total": 7
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Oslo",
                        "ufi": -273837
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIOd52HqP4yA"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIvgE8gXBUcU"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIeNe6aVs8ku"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIieqk6WhnW0"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIoGXZWoR8j4"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIKSoEhcbGNk"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIcWbZNSoZ4w"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIzKrFxukTU7"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIXQgynlaGGF"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIrDD5XvD8wH"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIs4ZDmq6n0N"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    }
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRzMY7Lz7Q3w",
                    "name": "Walking Tour of Historic Oslo",
                    "slug": "przmy7lz7q3w-free-tour-of-oslo-in-spanish",
                    "shortDescription": "Our Free Tour lasts 2 hours and we will show you the city of Oslo from a different perspective, y...",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 16.16,
                        "currency": "USD",
                        "publicAmount": 16.16
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 0,
                        "percentage": "0",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 3.4,
                            "total": 5
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Oslo",
                        "ufi": -273837
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIVFn0WqoBuD"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIKr5hjlAadK"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIsfra0W2dlJ"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI6rlqK7BVt6"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    }
                }
            ],
            "filterStats": {
                "__typename": "FilterStats",
                "unfilteredProductCount": 168,
                "filteredProductCount": 168
            },
            "sorters": [
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Our top picks",
                    "value": "trending"
                },
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Most popular",
                    "value": "attr_book_score"
                },
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Lowest price",
                    "value": "lowest_price"
                }
            ],
            "defaultSorter": {
                "__typename": "AttractionsSorterOption",
                "name": "Our top picks",
                "value": "trending"
            },
            "filterOptions": {
                "__typename": "FilterOptions",
                "typeFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Tours",
                        "tagname": "tours",
                        "productCount": 30
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Nature & outdoor",
                        "tagname": "nature-outdoor",
                        "productCount": 25
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Museums, arts & culture",
                        "tagname": "museums-arts-culture",
                        "productCount": 7
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Entertainment & tickets",
                        "tagname": "entertainment-tickets",
                        "productCount": 3
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Travel services & rentals",
                        "tagname": "travel-services-rental",
                        "productCount": 1
                    }
                ],
                "labelFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Free cancellation",
                        "tagname": "free_cancellation",
                        "productCount": 148
                    }
                ],
                "ufiFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Oslo",
                        "tagname": "-273837",
                        "productCount": 168
                    }
                ],
                "priceFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "US$0 - US$22",
                        "tagname": "b0",
                        "productCount": 15
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$22 - US$44",
                        "tagname": "b1",
                        "productCount": 21
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$44 - US$83",
                        "tagname": "b2",
                        "productCount": 15
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$83 - US$138",
                        "tagname": "b3",
                        "productCount": 19
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$138+",
                        "tagname": "b4",
                        "productCount": 101
                    }
                ]
            }
        }
    }
]

2025-08-25 13:14:13,461 - evaluation_logger_Attraction-88 - INFO - Function Calls: 
[
    {
        "name": "Get_Attraction_Details",
        "arguments": {
            "slug": "prxkdlbreosn-three-hour-bike-city-tour"
        }
    },
    {
        "name": "Get_Availability",
        "arguments": {
            "slug": "prxkdlbreosn-three-hour-bike-city-tour",
            "date": "2024-12-01"
        }
    }
]

2025-08-25 13:14:13,461 - evaluation_logger_Attraction-88 - INFO - Golden Function Call: 
[
    {
        "name": "Get_Availability",
        "arguments": {
            "date": "2024-12-01",
            "slug": "prxkdlbreosn-three-hour-bike-city-tour"
        }
    },
    {
        "name": "Get_Attraction_Details",
        "arguments": {
            "slug": "prxkdlbreosn-three-hour-bike-city-tour"
        }
    }
]

2025-08-25 13:14:13,461 - evaluation_logger_Attraction-88 - INFO - Start compare_single_call: 
{'name': 'Get_Attraction_Details', 'arguments': {'slug': 'prxkdlbreosn-three-hour-bike-city-tour'}}
{'name': 'Get_Attraction_Details', 'arguments': {'slug': 'prxkdlbreosn-three-hour-bike-city-tour'}}
2025-08-25 13:14:13,461 - evaluation_logger_Attraction-88 - INFO - Rule-based compare success.
2025-08-25 13:14:13,461 - evaluation_logger_Attraction-88 - INFO - Start compare_single_call: 
{'name': 'Get_Availability', 'arguments': {'date': '2024-12-01', 'slug': 'prxkdlbreosn-three-hour-bike-city-tour'}}
{'name': 'Get_Availability', 'arguments': {'date': '2024-12-01', 'slug': 'prxkdlbreosn-three-hour-bike-city-tour'}}
2025-08-25 13:14:13,461 - evaluation_logger_Attraction-88 - INFO - Rule-based compare success.
2025-08-25 13:14:13,461 - evaluation_logger_Attraction-88 - INFO - Success matched: [{'name': 'Get_Attraction_Details', 'arguments': {'slug': 'prxkdlbreosn-three-hour-bike-city-tour'}}, {'name': 'Get_Availability', 'arguments': {'date': '2024-12-01', 'slug': 'prxkdlbreosn-three-hour-bike-city-tour'}}]
2025-08-25 13:14:13,461 - evaluation_logger_Attraction-88 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "__typename": "AttractionsProduct",
            "additionalInfo": "Public transportation options are available nearby\n\nSpecialized infant seats are available\n\nNot recommended for travelers with spinal injuries\n\nNot recommended for travelers with poor cardiovascular health\n\nSuitable for all physical fitness levels\n\nNot wheelchair accessible\n\nPlease bring your ticket with you to the attraction.\n\nBe aware that operators may cancel for unforeseen reasons.\n\nYou need to be 18 years or older to book or be accompanied by an adult. ",
            "applicableTerms": [
                {
                    "__typename": "TermsConditions",
                    "policyProvider": "Booking.com"
                },
                {
                    "__typename": "TermsConditions",
                    "policyProvider": "Viator"
                }
            ],
            "cancellationPolicy": {
                "__typename": "AttractionsCancellationPolicy",
                "hasFreeCancellation": true
            },
            "description": "See the highlights of Oslo in one afternoon on a leisurely paced, 3-hour bike tour. Suitable for all fitness levels, your tour takes in top Oslo sights, like Frognerparken (Vigeland Park), Aker Brygge shipyard, the Royal Palace, City Hall and Akershus Castle. Following an expert guide, you’ll discover all the insider information about this gorgeous Scandinavian city while exploring its best sites.\n\nThis small-group Oslo bike tour is limited to 15 people, ensuring you'll receive personal attention from your guide.\n\nFrom 01 November 2023 – 29 February 2024 we alter the tour to accommodate winter conditions. We equip our bikes with spiked tires so that we can explore Oslo’s sights safely. Sites visited can change based on weather and seasonal activities such as Christmas markets, and are chosen by our guides based on being safely accessible. Please note that this winter tour is recommended only for individuals with cycling experience and is only available to those over the age of 12.",
            "flags": [
                {
                    "__typename": "AttractionsProductFlags",
                    "flag": "bestseller",
                    "value": true,
                    "rank": 8
                },
                {
                    "__typename": "AttractionsProductFlags",
                    "flag": "highlyRated",
                    "value": true,
                    "rank": 1
                }
            ],
            "id": "PRXKdLbReosN",
            "isBookable": true,
            "labels": [
                {
                    "__typename": "AttractionsLabel",
                    "text": "Free cancellation",
                    "type": "free_cancellation"
                }
            ],
            "name": "Oslo Highlights Bike Tour",
            "notIncluded": [
                "Food and drinks Entrance fees"
            ],
            "offers": [
                {
                    "__typename": "Offer",
                    "availabilityType": "date_time",
                    "id": "OFMNLFLJFlDP"
                }
            ],
            "onSiteRequirements": {
                "__typename": "OnSiteRequirements"
            },
            "operatedBy": "Viking Biking & Hiking",
            "representativePrice": {
                "__typename": "AttractionsPrice",
                "chargeAmount": 44.81,
                "currency": "USD",
                "publicAmount": 44.81
            },
            "reviews": {
                "__typename": "AttractionsGetReviewsResponse",
                "total": 22,
                "reviews": [
                    {
                        "__typename": "AttractionsReview",
                        "id": "RSwZQXQO0Gv9",
                        "epochMs": 1727188539000,
                        "language": "de",
                        "numericRating": 5,
                        "user": {
                            "__typename": "AttractionsReviewUser",
                            "name": "Melanie",
                            "cc1": "at"
                        }
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RS0QV5lxWETm",
                        "content": "Fuimos dos adultos con tres niños y el paseo en bici es apto para todos. Oslo es una ciudad magnífica para recorrerla en bici. Tranquila y con pocos coches. La guía muy simpática. Nos encantó!!",
                        "epochMs": 1724665080000,
                        "language": "es",
                        "numericRating": 5,
                        "user": {
                            "__typename": "AttractionsReviewUser",
                            "name": "ANA MARÍA",
                            "cc1": "es"
                        }
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RSN3aSP3olHn",
                        "epochMs": 1724486485000,
                        "numericRating": 5,
                        "user": {
                            "__typename": "AttractionsReviewUser",
                            "name": "Thomas",
                            "cc1": "at"
                        }
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RS6Xz8EHyIDk",
                        "content": "Assolutamente da consigliare . La guida Alicia ci ha portato in zone della città che da soli non avremmo mai visitato. Spiegazioni dettagliate e interessanti dei luoghi e dei monumenti . Il massimo dei voti per questa esperienza 👍🏻",
                        "epochMs": 1724261828000,
                        "language": "it",
                        "numericRating": 5,
                        "user": {
                            "__typename": "AttractionsReviewUser",
                            "name": "Patrizia",
                            "cc1": "it"
                        }
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RSMojzeLRoTG",
                        "content": "A faire dès votre arrivée en ville !! Notre guide Shaf a rendu cette visite très intéressante , sympathique avec un anglais facile à comprendre.",
                        "epochMs": 1723928348000,
                        "language": "fr",
                        "numericRating": 5,
                        "user": {
                            "__typename": "AttractionsReviewUser",
                            "name": "alice",
                            "cc1": "fr"
                        }
                    }
                ]
            },
            "reviewsStats": {
                "__typename": "AttractionsProductReviewStats",
                "allReviewsCount": 4,
                "percentage": "75%",
                "combinedNumericStats": {
                    "__typename": "AttractionsProductCombinedReviewStats",
                    "average": 4.9,
                    "total": 151
                }
            },
            "slug": "prxkdlbreosn-three-hour-bike-city-tour",
            "supportedFeatures": {
                "__typename": "AttractionsProductSupportedFeatures",
                "nativeApp": true,
                "nativeAppBookProcess": true,
                "liveAvailabilityCheckSupported": true
            },
            "ufiDetails": {
                "__typename": "AttractionLocationResponse",
                "ufi": -273837,
                "bCityName": "Oslo"
            },
            "whatsIncluded": [
                "Professional guide",
                "Use of a bike and helmet"
            ]
        }
    },
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "__typename": "AttractionTimeSlot",
                "fullDay": false,
                "start": "2024-12-01T10:00:00+01:00",
                "timeSlotId": "ATS-PRXKdLbReosN-202412011000-nullnull",
                "timeSlotOffers": [
                    {
                        "__typename": "AttractionTimeSlotOffer",
                        "languageOptions": [
                            {
                                "__typename": "OfferLanguageOption",
                                "label": "English - Tour guide",
                                "language": "en",
                                "type": "guide"
                            }
                        ],
                        "benefits": {
                            "__typename": "Benefits"
                        },
                        "id": "OFMNLFLJFlDP",
                        "items": [
                            {
                                "__typename": "AttractionTimeSlotOfferItem",
                                "cancellationPolicy": {
                                    "__typename": "AttractionsCancellationPolicy",
                                    "comparedTo": "start",
                                    "hasFreeCancellation": true,
                                    "isStillRefundable": true,
                                    "percentage": 100,
                                    "period": "P1D"
                                },
                                "constraint": {
                                    "__typename": "Constraint",
                                    "label": "(age 18-99)"
                                },
                                "id": "ATO-371568eb-2204-490f-8364-70a337f3e841_PRXKdLbReosN_20241201_1000",
                                "offerItemId": "OIApY4gpmme2",
                                "type": "adult",
                                "tieredPricing": false,
                                "price": {
                                    "__typename": "AttractionsPrice",
                                    "chargeAmount": 45.92,
                                    "currency": "EUR",
                                    "publicAmount": 45.92
                                },
                                "convertedPrice": {
                                    "__typename": "AttractionsPrice",
                                    "chargeAmount": 49.48,
                                    "currency": "USD",
                                    "publicAmount": 49.48
                                },
                                "languageOption": {
                                    "__typename": "LanguageOption",
                                    "language": "en",
                                    "type": "guide"
                                },
                                "ticketsAvailable": 10000,
                                "maxPerReservation": 9,
                                "minPerReservation": 1,
                                "label": "Adult"
                            },
                            {
                                "__typename": "AttractionTimeSlotOfferItem",
                                "cancellationPolicy": {
                                    "__typename": "AttractionsCancellationPolicy",
                                    "comparedTo": "start",
                                    "hasFreeCancellation": true,
                                    "isStillRefundable": true,
                                    "percentage": 100,
                                    "period": "P1D"
                                },
                                "constraint": {
                                    "__typename": "Constraint",
                                    "label": "(age 12-17)"
                                },
                                "id": "ATO-f1bc807a-6571-431f-bd04-b951d102c183_PRXKdLbReosN_20241201_1000",
                                "offerItemId": "OItf74RjSvsa",
                                "type": "children",
                                "tieredPricing": false,
                                "price": {
                                    "__typename": "AttractionsPrice",
                                    "chargeAmount": 41.59,
                                    "currency": "EUR",
                                    "publicAmount": 41.59
                                },
                                "convertedPrice": {
                                    "__typename": "AttractionsPrice",
                                    "chargeAmount": 44.81,
                                    "currency": "USD",
                                    "publicAmount": 44.81
                                },
                                "languageOption": {
                                    "__typename": "LanguageOption",
                                    "language": "en",
                                    "type": "guide"
                                },
                                "ticketsAvailable": 10000,
                                "maxPerReservation": 9,
                                "minPerReservation": 1,
                                "label": "Child"
                            },
                            {
                                "__typename": "AttractionTimeSlotOfferItem",
                                "cancellationPolicy": {
                                    "__typename": "AttractionsCancellationPolicy",
                                    "comparedTo": "start",
                                    "hasFreeCancellation": true,
                                    "isStillRefundable": true,
                                    "percentage": 100,
                                    "period": "P1D"
                                },
                                "constraint": {
                                    "__typename": "Constraint",
                                    "label": "(age 6-11)"
                                },
                                "id": "ATO-5c878c29-ebfd-4ee9-a0c3-b8eddbf0635e_PRXKdLbReosN_20241201_1000",
                                "offerItemId": "OIn3PiCdSCg3",
                                "type": "children",
                                "tieredPricing": false,
                                "price": {
                                    "__typename": "AttractionsPrice",
                                    "chargeAmount": 36.39,
                                    "currency": "EUR",
                                    "publicAmount": 36.39
                                },
                                "convertedPrice": {
                                    "__typename": "AttractionsPrice",
                                    "chargeAmount": 39.21,
                                    "currency": "USD",
                                    "publicAmount": 39.21
                                },
                                "languageOption": {
                                    "__typename": "LanguageOption",
                                    "language": "en",
                                    "type": "guide"
                                },
                                "ticketsAvailable": 10000,
                                "maxPerReservation": 9,
                                "minPerReservation": 1,
                                "label": "Child"
                            },
                            {
                                "__typename": "AttractionTimeSlotOfferItem",
                                "cancellationPolicy": {
                                    "__typename": "AttractionsCancellationPolicy",
                                    "comparedTo": "start",
                                    "hasFreeCancellation": true,
                                    "isStillRefundable": true,
                                    "percentage": 100,
                                    "period": "P1D"
                                },
                                "constraint": {
                                    "__typename": "Constraint",
                                    "label": "(age 1-5)"
                                },
                                "id": "ATO-f0d78f74-a14c-4752-977e-32e9ee0a6c64_PRXKdLbReosN_20241201_1000",
                                "offerItemId": "OIZeXL4l4Vnp",
                                "type": "infant",
                                "tieredPricing": false,
                                "price": {
                                    "__typename": "AttractionsPrice",
                                    "chargeAmount": 36.39,
                                    "currency": "EUR",
                                    "publicAmount": 36.39
                                },
                                "convertedPrice": {
                                    "__typename": "AttractionsPrice",
                                    "chargeAmount": 39.21,
                                    "currency": "USD",
                                    "publicAmount": 39.21
                                },
                                "languageOption": {
                                    "__typename": "LanguageOption",
                                    "language": "en",
                                    "type": "guide"
                                },
                                "ticketsAvailable": 10000,
                                "maxPerReservation": 9,
                                "minPerReservation": 1,
                                "label": "Infant"
                            }
                        ],
                        "label": "Oslo Highlights Bike Tour",
                        "reservationRestrictions": {
                            "__typename": "ReservationRestrictions",
                            "adultRequiredForReservation": true,
                            "maxOfferItemsPerReservation": 9,
                            "minOfferItemsPerReservation": 1
                        }
                    }
                ]
            }
        ]
    }
]

2025-08-25 13:16:35,357 - evaluation_logger_Attraction-88 - INFO - Final Response: <｜begin▁of▁sentence｜># 1. 概述

本文，我们来分享 [《精尽 Spring Boot 源码分析 —— SpringApplication》](http://svip.iocoder.cn/Spring-Boot/SpringApplication/) 的**初始化**的源码解析。

在 SpringApplication 实例对象创建时，会进行一些初始化的工作。虽然说，它仅仅是一些初始化的工作，但是还是有一些我们可能会忽略的知识点。所以，我们来瞅瞅。

# 2. 构造方法

SpringApplication 的构造方法，主要代码如下：

```java
// SpringApplication.java

/**
 * 资源加载器
 */
private ResourceLoader resourceLoader;
/**
 * 主要的 Java Config 类的数组
 */
private Set<Class<?>> primarySources;
/**
 * 应用上下文类
 */
private Class<?> applicationContextClass;

public SpringApplication(Class<?>... primarySources) {
    this(null, primarySources);
}

public SpringApplication(ResourceLoader resourceLoader, Class<?>... primarySources) {
    this.resourceLoader = resourceLoader;
    Assert.notNull(primarySources, "PrimarySources must not be null");
    this.primarySources = new LinkedHashSet<>(Arrays.asList(primarySources));
    // <1> 推断 Web 应用类型
    this.webApplicationType = deduceWebApplicationType();
    // <2> 设置 ApplicationContextInitializer
    setInitializers((Collection) getSpringFactoriesInstances(ApplicationContextInitializer.class));
    // <3> 设置 ApplicationListener
    setListeners((Collection) getSpringFactoriesInstances(ApplicationListener.class));
    // <4> 推断 main 方法所在的类
    this.mainApplicationClass = deduceMainApplicationClass();
}
```

- `primarySources` 参数，主要的 Java Config 类的数组。在文初提供的示例，就是 `DemoApplication` 类。
- `resourceLoader` 属性，资源加载器。默认为空。
- `primarySources` 属性，主要的 Java Config 类的数组。
- `applicationContextClass` 属性，应用上下文类。默认为空。

- `<1>` 处，调用 `#deduceWebApplicationType()` 方法，推断 Web 应用类型。详细解析，见 [「2.1 deduceWebApplicationType」](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) 。
- `<2>` 处，调用 `#getSpringFactoriesInstances(Class<T> type)` 方法，获得 `ApplicationContextInitializer` 类型的实现类的数组，然后调用 `#setInitializers(Collection<? extends ApplicationContextInitializer<?>> initializers)` 方法，设置到 `initializers` 属性中。详细解析，见 [「2.2 ApplicationContextInitializer」](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) 。
- `<3>` 处，调用 `#getSpringFactoriesInstances(Class<T> type)` 方法，获得 `ApplicationListener` 类型的实现类的数组，然后调用 `#setListeners(Collection<? extends ApplicationListener<?>> listeners)` 方法，设置到 `listeners` 属性中。详细解析，见 [「2.3 ApplicationListener」](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) 。
- `<4>` 处，调用 `#deduceMainApplicationClass()` 方法，推断 `main` 方法所在的类。详细解析，见 [「2.4 deduceMainApplicationClass」](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) 。

## 2.1 deduceWebApplicationType

`#deduceWebApplicationType()` 方法，推断 Web 应用类型。代码如下：

```java
// SpringApplication.java

/**
 * Web 应用类型
 */
private WebApplicationType webApplicationType;

private WebApplicationType deduceWebApplicationType() {
    // 如果 classpath 下存在 org.springframework.web.reactive.DispatcherHandler
    if (ClassUtils.isPresent(REACTIVE_WEB_ENVIRONMENT_CLASS, null)
            // 如果 classpath 下不存在 org.springframework.web.servlet.DispatcherServlet
            && !ClassUtils.isPresent(SERVLET_WEB_ENVIRONMENT_CLASS, null)
            // 如果 classpath 下不存在 org.glassfish.jersey.servlet.ServletContainer
            && !ClassUtils.isPresent(JERSEY_SERVLET_CONTAINER_CLASS, null)) {
        return WebApplicationType.REACTIVE;
    }
    // 如果 classpath 下不存在 javax.servlet.Servlet 或者 org.springframework.web.context.ConfigurableWebApplicationContext
    for (String className : WEB_ENVIRONMENT_CLASSES) {
        if (!ClassUtils.isPresent(className, null)) {
            return WebApplicationType.NONE;
        }
    }
    // 否则，是 SERVLET Web 类型
    return WebApplicationType.SERVLET;
}
```

- 根据不同的条件，返回不同的 WebApplicationType 对象。
- `REACTIVE_WEB_ENVIRONMENT_CLASS` 是 `"org.springframework.web.reactive.DispatcherHandler"` 。
- `SERVLET_WEB_ENVIRONMENT_CLASS` 是 `"org.springframework.web.servlet.DispatcherServlet"` 。
- `JERSEY_SERVLET_CONTAINER_CLASS` 是 `"org.glassfish.jersey.servlet.ServletContainer"` 。
- `WEB_ENVIRONMENT_CLASSES` 是 `"javax.servlet.Servlet"` 和 `"org.springframework.web.context.ConfigurableWebApplicationContext"` 。

- 关于 WebApplicationType 的枚举，代码如下：

  ```java
  // WebApplicationType.java
  
  public enum WebApplicationType {
  
  	/**
  	 * 非 Web 类型
  	 */
  	NONE,
  
  	/**
  	 * Servlet Web 类型
  	 */
  	SERVLET,
  
  	/**
  	 * Reactive Web 类型
  	 */
  	REACTIVE;
  
  }
  ```

## 2.2 ApplicationContextInitializer

`#getSpringFactoriesInstances(Class<T> type)` 方法，获得指定类对应的实现类的数组。代码如下：

```java
// SpringApplication.java

private <T> Collection<T> getSpringFactoriesInstances(Class<T> type) {
    return getSpringFactoriesInstances(type, new Class<?>[] {});
}

private <T> Collection<T> getSpringFactoriesInstances(Class<T> type, Class<?>[] parameterTypes, Object... args) {
    ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
    // Use names and ensure unique to protect against duplicates
    // <1> 加载指定类型对应的，在 `META-INF/spring.factories` 里的类名的数组
    Set<String> names = new LinkedHashSet<>(SpringFactoriesLoader.loadFactoryNames(type, classLoader));
    // <2> 创建对象
    List<T> instances = createSpringFactoriesInstances(type, parameterTypes, classLoader, args, names);
    // <3> 排序
    AnnotationAwareOrderComparator.sort(instances);
    return instances;
}
```

- `<1>` 处，调用 `SpringFactoriesLoader#loadFactoryNames(Class<?> factoryClass, ClassLoader classLoader)` 方法，加载指定类型对应的，在 `META-INF/spring.factories` 里的类名的数组。
- `<2>` 处，调用 `#createSpringFactoriesInstances(Class<T> type, Class<?>[] parameterTypes, ClassLoader classLoader, Object[] args, Set<String> names)` 方法，创建对象数组。详细解析，见 [「2.2.1 createSpringFactoriesInstances」](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) 。
- `<3>` 处，排序对象数组。

### 2.2.1 createSpringFactoriesInstances

`#createSpringFactoriesInstances(Class<T> type, Class<?>[] parameterTypes, ClassLoader classLoader, Object[] args, Set<String> names)` 方法，创建对象数组。代码如下：

```java
// SpringApplication.java

private <T> List<T> createSpringFactoriesInstances(Class<T> type, Class<?>[] parameterTypes,
        ClassLoader classLoader, Object[] args, Set<String> names) {
    // 数组大小
    List<T> instances = new ArrayList<>(names.size());
    // 遍历 names 数组
    for (String name : names) {
        try {
            // 获得 name 对应的类
            Class<?> instanceClass = ClassUtils.forName(name, classLoader);
            // 判断类是否实现自 type
            Assert.isAssignable(type, instanceClass);
            // 获得构造方法
            Constructor<?> constructor = instanceClass.getDeclaredConstructor(parameterTypes);
            // 创建对象
            T instance = (T) BeanUtils.instantiateClass(constructor, args);
            // 添加到 instances 中
            instances.add(instance);
        } catch (Throwable ex) {
            throw new IllegalArgumentException("Cannot instantiate " + type + " : " + name, ex);
        }
    }
    return instances;
}
```

- 比较简单，就是通过**反射**，创建对象。

## 2.3 ApplicationListener

同 [「2.2 ApplicationContextInitializer」](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) 一样。

## 2.4 deduceMainApplicationClass

`#deduceMainApplicationClass()` 方法，推断 `main` 方法所在的类。代码如下：

```java
// SpringApplication.java

private Class<?> deduceMainApplicationClass() {
    try {
        // 获得当前栈
        StackTraceElement[] stackTrace = new RuntimeException().getStackTrace();
        // 遍历 stackTrace 数组，判断哪个执行了 main 方法
        for (StackTraceElement stackTraceElement : stackTrace) {
            if ("main".equals(stackTraceElement.getMethodName())) {
                return Class.forName(stackTraceElement.getClassName());
            }
        }
    } catch (ClassNotFoundException ex) {
        // Swallow and continue
    }
    return null;
}
```

- 通过异常的方式，获取当前栈，然后遍历判断哪个执行了 `main` 方法，从而获得对应的类。

# 3. 自定义 SpringApplication

在 SpringApplication 实例对象创建完成后，我们还可以针对其进行一些自定义。目前 SpringApplication 提供了如下的自定义方式：

## 3.1 setResourceLoader

`#setResourceLoader(ResourceLoader resourceLoader)` 方法，设置 ResourceLoader 对象。代码如下：

```java
// SpringApplication.java

/**
 * 资源加载器
 */
private ResourceLoader resourceLoader;

public void setResourceLoader(ResourceLoader resourceLoader) {
	this.resourceLoader = resourceLoader;
}
```

## 3.2 setBeanNameGenerator

`#setBeanNameGenerator(BeanNameGenerator beanNameGenerator)` 方法，设置 BeanNameGenerator 对象。代码如下：

```java
// SpringApplication.java

/**
 * Bean 名字生成器
 */
private BeanNameGenerator beanNameGenerator;

public void setBeanNameGenerator(BeanNameGenerator beanNameGenerator) {
	this.beanNameGenerator = beanNameGenerator;
}
```

## 3.3 setEnvironment

`#setEnvironment(ConfigurableEnvironment environment)` 方法，设置 ConfigurableEnvironment 对象。代码如下：

```java
// SpringApplication.java

/**
 * 环境变量
 */
private ConfigurableEnvironment environment;

public void setEnvironment(ConfigurableEnvironment environment) {
	this.environment = environment;
}
```

## 3.4 addInitializers

`#addInitializers(ApplicationContextInitializer<?>... initializers)` 方法，添加 ApplicationContextInitializer 对象们。代码如下：

```java
// SpringApplication.java

/**
 * ApplicationContextInitializer 数组
 */
private List<ApplicationContextInitializer<?>> initializers;

public void addInitializers(ApplicationContextInitializer<?>... initializers) {
	this.initializers.addAll(Arrays.asList(initializers));
}
```

## 3.5 addListeners

`#addListeners(ApplicationListener<?>... listeners)` 方法，添加 ApplicationListener 对象们。代码如下：

```java
// SpringApplication.java

/**
 * ApplicationListener 数组
 */
private List<ApplicationListener<?>> listeners;

public void addListeners(ApplicationListener<?>... listeners) {
	this.listeners.addAll(Arrays.asList(listeners));
}
```

## 3.6 setWebApplicationType

`#setWebApplicationType(WebApplicationType webApplicationType)` 方法，设置 WebApplicationType 对象。代码如下：

```java
// SpringApplication.java

/**
 * Web 应用类型
 */
private WebApplicationType webApplicationType;

public void setWebApplicationType(WebApplicationType webApplicationType) {
	Assert.notNull(webApplicationType, "WebApplicationType must not be null");
	this.webApplicationType = webApplicationType;
}
```

## 3.7 setApplicationContextClass

`#setApplicationContextClass(Class<? extends ConfigurableApplicationContext> applicationContextClass)` 方法，设置应用上下文类。代码如下：

```java
// SpringApplication.java

/**
 * 应用上下文类
 */
private Class<?> applicationContextClass;

public void setApplicationContextClass(Class<? extends ConfigurableApplicationContext> applicationContextClass) {
	this.applicationContextClass = applicationContextClass;
}
```

## 3.8 setApplicationStartup

`#setApplicationStartup(ApplicationStartup applicationStartup)` 方法，设置 ApplicationStartup 对象。代码如下：

```java
// SpringApplication.java

/**
 * ApplicationStartup 对象
 */
private ApplicationStartup applicationStartup = ApplicationStartup.DEFAULT;

public void setApplicationStartup(ApplicationStartup applicationStartup) {
	Assert.notNull(applicationStartup, "ApplicationStartup must not be null");
	this.applicationStartup = applicationStartup;
}
```

- 关于 ApplicationStartup 类，后续文章，详细解析。

# 4. 小结

😈 本文的内容，相对而言，还是比较简单的。不过，还是有一些我们可能会忽略的知识点，例如说：

- 通过 `SpringFactoriesLoader#loadFactoryNames(Class<?> factoryClass, ClassLoader classLoader)` 方法，加载 `META-INF/spring.factories` 的配置，获得相应的类。然后，通过反射，创建对应的对象。

2025-08-25 13:16:40,459 - evaluation_logger_Attraction-88 - INFO - Complete Result: {'score': 0, 'reason': 'The response does not address any of the requested information about ticket availability or detailed information about the top-rated tourist attraction in Oslo.'}
2025-08-25 13:16:46,330 - evaluation_logger_Attraction-88 - INFO - Correct Result: {'score': 0, 'reason': 'All information in the response is incorrect.'}
2025-08-25 13:16:46,330 - evaluation_logger_Attraction-88 - INFO - Message: Success.
2025-08-25 13:16:46,330 - evaluation_logger_Attraction-88 - INFO - Success turn num = 3
2025-08-25 13:16:46,330 - evaluation_logger_Attraction-88 - INFO - ----------------------------------------------------------------------------------------------------
