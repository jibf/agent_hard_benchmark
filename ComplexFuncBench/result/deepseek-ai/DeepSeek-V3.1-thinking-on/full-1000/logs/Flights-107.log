2025-08-25 13:38:59,169 - evaluation_logger_Flights-107 - INFO - Test Example Flights-107
2025-08-25 13:38:59,169 - evaluation_logger_Flights-107 - INFO - Query: My grandma's funeral is going to be held in Lima, but I'm in San Francisco right now. Check the best air ticket from San Francisco to Lima on November 25, 2024. If the best ticket requires a transfer, then check the flights from Santiago to Lima on November 26 for me.
2025-08-25 13:39:08,008 - evaluation_logger_Flights-107 - INFO - Function Calls: 
[
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "San Francisco"
        }
    },
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "Lima"
        }
    }
]

2025-08-25 13:39:08,008 - evaluation_logger_Flights-107 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "San Francisco"
        }
    },
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "Lima"
        }
    },
    {
        "name": "Search_Flights",
        "arguments": {
            "sort": "BEST",
            "toId": "LIM.AIRPORT",
            "fromId": "SFO.AIRPORT",
            "departDate": "2024-11-25"
        }
    }
]

2025-08-25 13:39:08,008 - evaluation_logger_Flights-107 - INFO - Start compare_single_call: 
{'name': 'Search_Flight_Location', 'arguments': {'query': 'San Francisco'}}
{'name': 'Search_Flight_Location', 'arguments': {'query': 'San Francisco'}}
2025-08-25 13:39:08,008 - evaluation_logger_Flights-107 - INFO - Rule-based compare success.
2025-08-25 13:39:08,008 - evaluation_logger_Flights-107 - INFO - Start compare_single_call: 
{'name': 'Search_Flight_Location', 'arguments': {'query': 'Lima'}}
{'name': 'Search_Flight_Location', 'arguments': {'query': 'Lima'}}
2025-08-25 13:39:08,008 - evaluation_logger_Flights-107 - INFO - Rule-based compare success.
2025-08-25 13:39:08,008 - evaluation_logger_Flights-107 - INFO - Success matched: [{'name': 'Search_Flight_Location', 'arguments': {'query': 'San Francisco'}}, {'name': 'Search_Flight_Location', 'arguments': {'query': 'Lima'}}]
2025-08-25 13:39:08,008 - evaluation_logger_Flights-107 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "id": "SFO.AIRPORT",
                "type": "AIRPORT",
                "name": "San Francisco International Airport",
                "code": "SFO",
                "city": "SFO",
                "cityName": "San Francisco",
                "regionName": "California",
                "country": "US",
                "countryName": "United States",
                "countryNameShort": "US",
                "distanceToCity": {
                    "value": 19.16395121441966,
                    "unit": "km"
                },
                "parent": "SFO"
            }
        ]
    },
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "id": "LIM.AIRPORT",
                "type": "AIRPORT",
                "name": "Jorge Chavez International Airport",
                "code": "LIM",
                "city": "LIM",
                "cityName": "Lima",
                "regionName": "Provincia de Lima",
                "country": "PE",
                "countryName": "Peru",
                "countryNameShort": "Peru",
                "distanceToCity": {
                    "value": 8.85837086145443,
                    "unit": "km"
                },
                "parent": "LIM"
            }
        ]
    }
]

2025-08-25 13:39:17,785 - evaluation_logger_Flights-107 - INFO - Function Calls: 
[
    {
        "name": "Search_Flights",
        "arguments": {
            "fromId": "SFO.AIRPORT",
            "toId": "LIM.AIRPORT",
            "departDate": "2024-11-25",
            "sort": "BEST"
        }
    }
]

2025-08-25 13:39:17,785 - evaluation_logger_Flights-107 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Flights",
        "arguments": {
            "departDate": "2024-11-25",
            "fromId": "SFO.AIRPORT",
            "sort": "BEST",
            "toId": "LIM.AIRPORT"
        }
    },
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "Santiago"
        }
    }
]

2025-08-25 13:39:17,785 - evaluation_logger_Flights-107 - INFO - Start compare_single_call: 
{'name': 'Search_Flights', 'arguments': {'departDate': '2024-11-25', 'fromId': 'SFO.AIRPORT', 'sort': 'BEST', 'toId': 'LIM.AIRPORT'}}
{'name': 'Search_Flights', 'arguments': {'departDate': '2024-11-25', 'fromId': 'SFO.AIRPORT', 'sort': 'BEST', 'toId': 'LIM.AIRPORT'}}
2025-08-25 13:39:17,785 - evaluation_logger_Flights-107 - INFO - Rule-based compare success.
2025-08-25 13:39:17,785 - evaluation_logger_Flights-107 - INFO - Success matched: [{'name': 'Search_Flights', 'arguments': {'departDate': '2024-11-25', 'fromId': 'SFO.AIRPORT', 'sort': 'BEST', 'toId': 'LIM.AIRPORT'}}]
2025-08-25 13:39:17,787 - evaluation_logger_Flights-107 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "flightOffers": [
                {
                    "token": "d7699_H4sIAAAAAAAA_0WQa2-CMBSGf41-o1AuAibNgreNSEGDl-iXBmsFprOGdgP99eusydLmvM973p42aSXlTQxN83Spy0oK41uAkkteFpIByr_MU6PKgfNzfS3Nom7MfJYlMba9NNuY0DTUosPdG-ukIRqK-vWBgQIZYRhqFBQtouDFDRoAd5pl-3SlY8olcoEH4w9vkYd7Szcb9D5PZun26Y4Ij9s2e0QCTwRcT8Q9fQg7VYzXlzjdjFbpOVD51MZrIfBq1-V1K1XkqzmJ87Z7XsMoRRAA1w_h0_NCID94MZUI6rf5UaI8ybLlUluJHA8GOusQdJzA6wt2YVTW_DpndxRFENrQUP_Bf2zXGBHVcCz_v9Gzx3BQlXZRKOo5kdolsYCltHppQRIMoAMVHkg4UEK1HInnMSdQxMjfwRNxVa0JBHrwk8RbJQ8CW9Zc3dsvfI32RM0BAAA.",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "SFO",
                                "name": "San Francisco International Airport",
                                "city": "SFO",
                                "cityName": "San Francisco",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "LIM",
                                "name": "Jorge Chavez International Airport",
                                "city": "LIM",
                                "cityName": "Lima",
                                "country": "PE",
                                "countryName": "Peru"
                            },
                            "departureTime": "2024-11-25T12:58:00",
                            "arrivalTime": "2024-11-26T05:10:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-25T12:58:00",
                                    "arrivalTime": "2024-11-25T21:24:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "SFO",
                                        "name": "San Francisco International Airport",
                                        "city": "SFO",
                                        "cityName": "San Francisco",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "MIA",
                                        "name": "Miami International Airport",
                                        "city": "MIA",
                                        "cityName": "Miami",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 1121,
                                        "carrierInfo": {
                                            "operatingCarrier": "AA",
                                            "marketingCarrier": "AA"
                                        }
                                    },
                                    "carriers": [
                                        "AA",
                                        "AA"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        },
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        }
                                    ],
                                    "totalTime": 19560,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "32Q"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                },
                                {
                                    "departureTime": "2024-11-25T23:25:00",
                                    "arrivalTime": "2024-11-26T05:10:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "MIA",
                                        "name": "Miami International Airport",
                                        "city": "MIA",
                                        "cityName": "Miami",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "LIM",
                                        "name": "Jorge Chavez International Airport",
                                        "city": "LIM",
                                        "cityName": "Lima",
                                        "country": "PE",
                                        "countryName": "Peru"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 1307,
                                        "carrierInfo": {
                                            "operatingCarrier": "AA",
                                            "marketingCarrier": "AA"
                                        }
                                    },
                                    "carriers": [
                                        "AA",
                                        "AA"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        },
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        }
                                    ],
                                    "totalTime": 20700,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "32Q"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 47520,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                },
                {
                    "token": "d6a1f_H4sIAAAAAAAA_0WQ0W7CIBSGn0bvSktLO1lClm7VzczCams3d0Mq1lp1shSczqcfisnCCf_3HzhwYK31t7p33dWubdZaOQcFGqllU-kaCPnlrjozLaTctvvGrdrOzUdsMk79kLLSha5jhrifP9Qn7ahOkH67qEFFHIyxRSUIzG_YkQigIWOftLCrQmqCQAjHL-FbjuefNtmR5-z9cU6vbknSp-ORnWOVJppOE3UqNsqniYLpbDem5WNBt-EH-4X5rD2e6Gg0mSRDbzbzVFqUGb3kyti_1E9HQpmzdJofz0XWCxIT1ytqYXoEAN1hePWyUgRZEppAz-JSk3zCWJZZaxqH2LPPOBEYBIOwr-pdLXQr96_1L4nLMAoc80_yx0cO43GJfPzve_4TRFiH0behXhCbaLgHPKPrm1Y8HQAIA4MLjiMjwsqSR0gMLltqDgfYN7DiyMwth8DWbvj43ciZR-HhvFF_rEkNNuYBAAA.",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "SFO",
                                "name": "San Francisco International Airport",
                                "city": "SFO",
                                "cityName": "San Francisco",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "LIM",
                                "name": "Jorge Chavez International Airport",
                                "city": "LIM",
                                "cityName": "Lima",
                                "country": "PE",
                                "countryName": "Peru"
                            },
                            "departureTime": "2024-11-25T13:20:00",
                            "arrivalTime": "2024-11-26T03:30:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-25T13:20:00",
                                    "arrivalTime": "2024-11-25T20:45:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "SFO",
                                        "name": "San Francisco International Airport",
                                        "city": "SFO",
                                        "cityName": "San Francisco",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "SAL",
                                        "name": "El Salvador International Airport",
                                        "city": "SAL",
                                        "cityName": "San Salvador",
                                        "country": "SV",
                                        "countryName": "El Salvador"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 563,
                                        "carrierInfo": {
                                            "operatingCarrier": "AV",
                                            "marketingCarrier": "AV"
                                        }
                                    },
                                    "carriers": [
                                        "AV",
                                        "AV"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Avianca",
                                            "code": "AV"
                                        },
                                        {
                                            "name": "Avianca",
                                            "code": "AV"
                                        }
                                    ],
                                    "totalTime": 19500,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "32N"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "departureTime": "2024-11-25T22:15:00",
                                    "arrivalTime": "2024-11-26T03:30:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "SAL",
                                        "name": "El Salvador International Airport",
                                        "city": "SAL",
                                        "cityName": "San Salvador",
                                        "country": "SV",
                                        "countryName": "El Salvador"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "LIM",
                                        "name": "Jorge Chavez International Airport",
                                        "city": "LIM",
                                        "cityName": "Lima",
                                        "country": "PE",
                                        "countryName": "Peru"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 429,
                                        "carrierInfo": {
                                            "operatingCarrier": "AV",
                                            "marketingCarrier": "AV"
                                        }
                                    },
                                    "carriers": [
                                        "AV",
                                        "AV"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Avianca",
                                            "code": "AV"
                                        },
                                        {
                                            "name": "Avianca",
                                            "code": "AV"
                                        }
                                    ],
                                    "totalTime": 15300,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A320"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 40200,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                },
                {
                    "token": "d6a1f_H4sIAAAAAAAA_z1QW0_DIBT-NfOttPSOCTFz7ea0Lc52m_WFdIx13VRMQTf760VZDHC-C-cAh71SH_LatnevXbtX0vqUoBVKtI3igIk3e9frsBHi2L23dtP1djkl2Tx3g4KsbGhberDr-oaflSV7hq-6DQcNthBChkqGYfowu4geh8BPCXkpKrPPhMI-COD8Lngsx_6zMXs8K2dTZKq2OJ-cTmQYy7xS91myjPIDk3pFxWEhiySPimp6XyarxXJ4IetEnotl7GZJCquh1jW366I8nfNpDX-9ZVJHmc7PJs6gzx2ejrUkVSqzKh15yd-FnOk3A-BHCP5p0Ugcxa7hTGF4sbcKlxkhi4WRuhEYuqatM4aeFwdXkr9ypjrx_sC_8TgPQ2TpnxNfrm-taO17CMb_RjFyJzBsg49jp9nIG-vZUgc4GvcXbGgOAXSQphuKQg3MwJYGTej_pnC68biryY76OnYUAlN7oPO1hoHGyNly7wesvtY8-QEAAA..",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "SFO",
                                "name": "San Francisco International Airport",
                                "city": "SFO",
                                "cityName": "San Francisco",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "LIM",
                                "name": "Jorge Chavez International Airport",
                                "city": "LIM",
                                "cityName": "Lima",
                                "country": "PE",
                                "countryName": "Peru"
                            },
                            "departureTime": "2024-11-25T13:13:00",
                            "arrivalTime": "2024-11-26T04:42:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-25T13:13:00",
                                    "arrivalTime": "2024-11-25T19:45:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "SFO",
                                        "name": "San Francisco International Airport",
                                        "city": "SFO",
                                        "cityName": "San Francisco",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "MEX",
                                        "name": "Benito Juarez International Airport",
                                        "city": "MEX",
                                        "cityName": "Mexico City",
                                        "country": "MX",
                                        "countryName": "Mexico"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 669,
                                        "carrierInfo": {
                                            "operatingCarrier": "AM",
                                            "marketingCarrier": "AM"
                                        }
                                    },
                                    "carriers": [
                                        "AM",
                                        "AM"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aeromexico",
                                            "code": "AM"
                                        },
                                        {
                                            "name": "Aeromexico",
                                            "code": "AM"
                                        }
                                    ],
                                    "totalTime": 16320,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "vi": {
                                        "protected": true,
                                        "baggageCollection": true
                                    }
                                },
                                {
                                    "departureTime": "2024-11-25T21:45:00",
                                    "arrivalTime": "2024-11-26T04:42:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "MEX",
                                        "name": "Benito Juarez International Airport",
                                        "city": "MEX",
                                        "cityName": "Mexico City",
                                        "country": "MX",
                                        "countryName": "Mexico"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "LIM",
                                        "name": "Jorge Chavez International Airport",
                                        "city": "LIM",
                                        "cityName": "Lima",
                                        "country": "PE",
                                        "countryName": "Peru"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 3918,
                                        "carrierInfo": {
                                            "operatingCarrier": "Y4",
                                            "marketingCarrier": "Y4"
                                        }
                                    },
                                    "carriers": [
                                        "Y4",
                                        "Y4"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Volaris",
                                            "code": "Y4"
                                        },
                                        {
                                            "name": "Volaris",
                                            "code": "Y4"
                                        }
                                    ],
                                    "totalTime": 21420,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "32N"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 44940,
                            "isAtolProtected": false,
                            "isVirtualInterlining": true,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                },
                {
                    "token": "d7699_H4sIAAAAAAAA_0WQbW-CMBSFf838RrG816RZEJ1jE9ABLvqlwQrIfKmh3UB__TprsrS55zk99zZN90Jc-EjXq2NT7wXXvjmomWB1IUpA2UmvWlm2jB2ac60XTaunL8k8jAw7TlY61DW56Gj9XPZC4y3Fg2ZbggJrCCGFnOKF7z24xQ6wpkmyiTMVUyawBWwYvtqLFG0cddji2ds8_wjuboejoOuSm8-jCYf5hF_jGzdiyVF-DOPVOIsPnsynRpRzHmXrPm06ISNXzoko7fr7NSWlGAJguQjePSs4dr0HU4HhUOFO4HSeJMulsvJ5BvRU1mNomp494OWxpKJh5_fyin3fdJAmv4P9GJY2Jr6PoPvvn4wAmhDeWlfSk-nLXZMhGErdP7QgkwBkM0lbghwpVMmOOE5VeJJK8tdXEUvWhkCg5r5I-CnlRmDPLyfj-gvhakPjygEAAA..",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "SFO",
                                "name": "San Francisco International Airport",
                                "city": "SFO",
                                "cityName": "San Francisco",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "LIM",
                                "name": "Jorge Chavez International Airport",
                                "city": "LIM",
                                "cityName": "Lima",
                                "country": "PE",
                                "countryName": "Peru"
                            },
                            "departureTime": "2024-11-25T08:00:00",
                            "arrivalTime": "2024-11-25T23:25:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-25T08:00:00",
                                    "arrivalTime": "2024-11-25T16:24:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "SFO",
                                        "name": "San Francisco International Airport",
                                        "city": "SFO",
                                        "cityName": "San Francisco",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "MIA",
                                        "name": "Miami International Airport",
                                        "city": "MIA",
                                        "cityName": "Miami",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 369,
                                        "carrierInfo": {
                                            "operatingCarrier": "AA",
                                            "marketingCarrier": "AA"
                                        }
                                    },
                                    "carriers": [
                                        "AA",
                                        "AA"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        },
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        }
                                    ],
                                    "totalTime": 19440,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "32Q"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                },
                                {
                                    "departureTime": "2024-11-25T17:40:00",
                                    "arrivalTime": "2024-11-25T23:25:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "MIA",
                                        "name": "Miami International Airport",
                                        "city": "MIA",
                                        "cityName": "Miami",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "LIM",
                                        "name": "Jorge Chavez International Airport",
                                        "city": "LIM",
                                        "cityName": "Lima",
                                        "country": "PE",
                                        "countryName": "Peru"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 917,
                                        "carrierInfo": {
                                            "operatingCarrier": "AA",
                                            "marketingCarrier": "AA"
                                        }
                                    },
                                    "carriers": [
                                        "AA",
                                        "AA"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        },
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        }
                                    ],
                                    "totalTime": 20700,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "32Q"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 44700,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                },
                {
                    "token": "d7699_H4sIAAAAAAAA_1WQX2-CMBTFP42-USwtAibNwkQ3lD8y1GW-NFgrwpw1tJvOT79O3Jbl3tzzO-e2fehOqaMcmOZ2X5U7JY13CUqhRFkoDph4M7eNHmshXqtDaRZVY-bjNApjy07SpQlNQxcbvNzxszJkw0i3WnNQEMPzvBYlIzPfvXFD-gCP0nSVzNs1E4pgYMPw0Z7l3ippw4Y8THCWr65uQ-Lh6RQFvvOjyVJzzZykzpxkPp7kwTJbXFazOJDnpB5HUTCy4oWQ0XKSpxdfRvORjLMOCnRfn-SMEQgAdjx49aKQxHFvzBSBvRY3iuRRmmZZaxVBNnTb3ZlAhFy7K_meM1WJw5R_Et-3XM8z9N-IDwsb91QHFkb_Aoh6zl_QsYbCaay91NBBvu6S9oAuTbtfKug0BE8YQAS1W1Ovr4W1sqG2zZGridPvs1uK9awovN2tafis5ULhiTcHfPwCyoNJ3vABAAA.",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "SFO",
                                "name": "San Francisco International Airport",
                                "city": "SFO",
                                "cityName": "San Francisco",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "LIM",
                                "name": "Jorge Chavez International Airport",
                                "city": "LIM",
                                "cityName": "Lima",
                                "country": "PE",
                                "countryName": "Peru"
                            },
                            "departureTime": "2024-11-25T12:18:00",
                            "arrivalTime": "2024-11-26T05:10:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-25T12:18:00",
                                    "arrivalTime": "2024-11-25T15:18:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "SFO",
                                        "name": "San Francisco International Airport",
                                        "city": "SFO",
                                        "cityName": "San Francisco",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "PHX",
                                        "name": "Phoenix Sky Harbor International Airport",
                                        "city": "PHX",
                                        "cityName": "Phoenix",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 2899,
                                        "carrierInfo": {
                                            "operatingCarrier": "AA",
                                            "marketingCarrier": "AA"
                                        }
                                    },
                                    "carriers": [
                                        "AA",
                                        "AA"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        },
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        }
                                    ],
                                    "totalTime": 7200,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                },
                                {
                                    "departureTime": "2024-11-25T16:16:00",
                                    "arrivalTime": "2024-11-25T22:27:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "PHX",
                                        "name": "Phoenix Sky Harbor International Airport",
                                        "city": "PHX",
                                        "cityName": "Phoenix",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "MIA",
                                        "name": "Miami International Airport",
                                        "city": "MIA",
                                        "cityName": "Miami",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 2243,
                                        "carrierInfo": {
                                            "operatingCarrier": "AA",
                                            "marketingCarrier": "AA"
                                        }
                                    },
                                    "carriers": [
                                        "AA",
                                        "AA"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        },
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        }
                                    ],
                                    "totalTime": 15060,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "32Q"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                },
                                {
                                    "departureTime": "2024-11-25T23:25:00",
                                    "arrivalTime": "2024-11-26T05:10:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "MIA",
                                        "name": "Miami International Airport",
                                        "city": "MIA",
                                        "cityName": "Miami",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "LIM",
                                        "name": "Jorge Chavez International Airport",
                                        "city": "LIM",
                                        "cityName": "Lima",
                                        "country": "PE",
                                        "countryName": "Peru"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 1307,
                                        "carrierInfo": {
                                            "operatingCarrier": "AA",
                                            "marketingCarrier": "AA"
                                        }
                                    },
                                    "carriers": [
                                        "AA",
                                        "AA"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        },
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        }
                                    ],
                                    "totalTime": 20700,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "32Q"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 49920,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                }
            ],
            "flightDeals": [
                {
                    "key": "CHEAPEST",
                    "offerToken": "d7699_H4sIAAAAAAAA_0WQa2-CMBSGf41-o1AuAibNgreNSEGDl-iXBmsFprOGdgP99eusydLmvM973p42aSXlTQxN83Spy0oK41uAkkteFpIByr_MU6PKgfNzfS3Nom7MfJYlMba9NNuY0DTUosPdG-ukIRqK-vWBgQIZYRhqFBQtouDFDRoAd5pl-3SlY8olcoEH4w9vkYd7Szcb9D5PZun26Y4Ij9s2e0QCTwRcT8Q9fQg7VYzXlzjdjFbpOVD51MZrIfBq1-V1K1XkqzmJ87Z7XsMoRRAA1w_h0_NCID94MZUI6rf5UaI8ybLlUluJHA8GOusQdJzA6wt2YVTW_DpndxRFENrQUP_Bf2zXGBHVcCz_v9Gzx3BQlXZRKOo5kdolsYCltHppQRIMoAMVHkg4UEK1HInnMSdQxMjfwRNxVa0JBHrwk8RbJQ8CW9Zc3dsvfI32RM0BAAA.",
                    "price": {
                        "currencyCode": "USD",
                        "units": 351,
                        "nanos": 800000000
                    },
                    "travellerPrices": [
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 351,
                                    "nanos": 800000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 300,
                                    "nanos": 0
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 51,
                                    "nanos": 800000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 352
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 351,
                                    "nanos": 800000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 352
                                }
                            },
                            "travellerReference": "1",
                            "travellerType": "ADULT"
                        }
                    ]
                },
                {
                    "key": "FASTEST",
                    "offerToken": "d6a1f_H4sIAAAAAAAA_0WQ0W7CIBSGn0bvSktLO1lClm7VzczCams3d0Mq1lp1shSczqcfisnCCf_3HzhwYK31t7p33dWubdZaOQcFGqllU-kaCPnlrjozLaTctvvGrdrOzUdsMk79kLLSha5jhrifP9Qn7ahOkH67qEFFHIyxRSUIzG_YkQigIWOftLCrQmqCQAjHL-FbjuefNtmR5-z9cU6vbknSp-ORnWOVJppOE3UqNsqniYLpbDem5WNBt-EH-4X5rD2e6Gg0mSRDbzbzVFqUGb3kyti_1E9HQpmzdJofz0XWCxIT1ytqYXoEAN1hePWyUgRZEppAz-JSk3zCWJZZaxqH2LPPOBEYBIOwr-pdLXQr96_1L4nLMAoc80_yx0cO43GJfPzve_4TRFiH0behXhCbaLgHPKPrm1Y8HQAIA4MLjiMjwsqSR0gMLltqDgfYN7DiyMwth8DWbvj43ciZR-HhvFF_rEkNNuYBAAA.",
                    "price": {
                        "currencyCode": "USD",
                        "units": 419,
                        "nanos": 90000000
                    },
                    "travellerPrices": [
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 419,
                                    "nanos": 90000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 364,
                                    "nanos": 0
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 6,
                                    "nanos": 290000000
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 48,
                                    "nanos": 800000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 420
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 419,
                                    "nanos": 90000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 420
                                }
                            },
                            "travellerReference": "1",
                            "travellerType": "ADULT"
                        }
                    ]
                },
                {
                    "key": "BEST",
                    "offerToken": "d7699_H4sIAAAAAAAA_0WQa2-CMBSGf41-o1AuAibNgreNSEGDl-iXBmsFprOGdgP99eusydLmvM973p42aSXlTQxN83Spy0oK41uAkkteFpIByr_MU6PKgfNzfS3Nom7MfJYlMba9NNuY0DTUosPdG-ukIRqK-vWBgQIZYRhqFBQtouDFDRoAd5pl-3SlY8olcoEH4w9vkYd7Szcb9D5PZun26Y4Ij9s2e0QCTwRcT8Q9fQg7VYzXlzjdjFbpOVD51MZrIfBq1-V1K1XkqzmJ87Z7XsMoRRAA1w_h0_NCID94MZUI6rf5UaI8ybLlUluJHA8GOusQdJzA6wt2YVTW_DpndxRFENrQUP_Bf2zXGBHVcCz_v9Gzx3BQlXZRKOo5kdolsYCltHppQRIMoAMVHkg4UEK1HInnMSdQxMjfwRNxVa0JBHrwk8RbJQ8CW9Zc3dsvfI32RM0BAAA.",
                    "price": {
                        "currencyCode": "USD",
                        "units": 351,
                        "nanos": 800000000
                    },
                    "travellerPrices": [
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 351,
                                    "nanos": 800000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 300,
                                    "nanos": 0
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 51,
                                    "nanos": 800000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 352
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 351,
                                    "nanos": 800000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 352
                                }
                            },
                            "travellerReference": "1",
                            "travellerType": "ADULT"
                        }
                    ]
                }
            ],
            "atolProtectedStatus": "NONE",
            "searchId": "AA839BEC3AA401C59B5D985F13C7EAA9",
            "displayOptions": {
                "brandedFaresShownByDefault": false,
                "directFlightsOnlyFilterIgnored": false,
                "hideFlexiblePricesBanner": false
            },
            "isOffersCabinClassExtended": false,
            "searchCriteria": {
                "cabinClass": "ECONOMY"
            }
        }
    }
]

2025-08-25 13:39:25,918 - evaluation_logger_Flights-107 - INFO - Function Calls: 
[
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "Santiago"
        }
    }
]

2025-08-25 13:39:25,918 - evaluation_logger_Flights-107 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "Santiago"
        }
    },
    {
        "name": "Search_Flights",
        "arguments": {
            "toId": "LIM.AIRPORT",
            "fromId": "SCL.AIRPORT",
            "departDate": "2024-11-26"
        }
    }
]

2025-08-25 13:39:25,918 - evaluation_logger_Flights-107 - INFO - Start compare_single_call: 
{'name': 'Search_Flight_Location', 'arguments': {'query': 'Santiago'}}
{'name': 'Search_Flight_Location', 'arguments': {'query': 'Santiago'}}
2025-08-25 13:39:25,918 - evaluation_logger_Flights-107 - INFO - Rule-based compare success.
2025-08-25 13:39:25,918 - evaluation_logger_Flights-107 - INFO - Success matched: [{'name': 'Search_Flight_Location', 'arguments': {'query': 'Santiago'}}]
2025-08-25 13:39:25,918 - evaluation_logger_Flights-107 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "id": "SCL.AIRPORT",
                "type": "AIRPORT",
                "name": "Santiago International Airport",
                "code": "SCL",
                "city": "SCL",
                "cityName": "Santiago",
                "regionName": "Metropolitan Region",
                "country": "CL",
                "countryName": "Chile",
                "countryNameShort": "Chile",
                "distanceToCity": {
                    "value": 14.048888376710734,
                    "unit": "km"
                },
                "parent": "SCL"
            }
        ]
    }
]

2025-08-25 13:39:38,471 - evaluation_logger_Flights-107 - INFO - Function Calls: 
[
    {
        "name": "Search_Flights",
        "arguments": {
            "fromId": "SCL.AIRPORT",
            "toId": "LIM.AIRPORT",
            "departDate": "2024-11-26",
            "sort": "BEST"
        }
    }
]

2025-08-25 13:39:38,471 - evaluation_logger_Flights-107 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Flights",
        "arguments": {
            "departDate": "2024-11-26",
            "fromId": "SCL.AIRPORT",
            "toId": "LIM.AIRPORT"
        }
    }
]

2025-08-25 13:39:39,045 - evaluation_logger_Flights-107 - INFO - Start compare_single_call: 
{'name': 'Search_Flights', 'arguments': {'departDate': '2024-11-26', 'fromId': 'SCL.AIRPORT', 'sort': 'BEST', 'toId': 'LIM.AIRPORT'}}
{'name': 'Search_Flights', 'arguments': {'departDate': '2024-11-26', 'fromId': 'SCL.AIRPORT', 'toId': 'LIM.AIRPORT'}}
2025-08-25 13:39:45,956 - evaluation_logger_Flights-107 - DEBUG - LLM-based comparison output: {'is_equal': True, 'reason': "Both function calls are for the 'Search_Flights' function with the same 'departDate', 'fromId', and 'toId' parameters. The 'sort' parameter in Function call 1 is set to 'BEST', which is not a required parameter and can be omitted, making both calls equivalent."}
2025-08-25 13:39:45,956 - evaluation_logger_Flights-107 - INFO - LLM-based compare success.
2025-08-25 13:39:45,956 - evaluation_logger_Flights-107 - INFO - Success matched: [{'name': 'Search_Flights', 'arguments': {'departDate': '2024-11-26', 'fromId': 'SCL.AIRPORT', 'toId': 'LIM.AIRPORT'}}]
2025-08-25 13:39:45,957 - evaluation_logger_Flights-107 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "flightOffers": [
                {
                    "token": "d6a1f_H4sIAAAAAAAA_y2QUW-CMBSFf417o9CCAibNQtA5NmkzFXR7aWpFZDK70G4ov34VlibnfOc09zbpSetvNbXtY12VJ62sHwVKqWXJdQGE_LKPjZG9lOfqUtq8aux1vFwmKZoQmtvQtswR0_fH4qot1Qj8UO0LwLEVhuGASuDgnxo8Ad6crsNw9dJXQmrsgTFMiJd9kPFiKBu8yAOfrPt0wOlMtbSL_HSjEJkpmGY1JU85XzllR6FwNvF1R-atSjf5G6naK8kjRG9Ol8atJlmilpu52tbRyJ31CwshMATA80PYZ8kVdgcSGkNnwIPG6yWl2W6I5gJ6wbgPVwxd17Aq6kLoSl5eixt-RoGDLPMp8hd5VjRCMfeC87gzMHLN21HJHKOnXjmL7rZnoW9MDHZgMOQoMFQwNPG5gSPzjFYMAgfcBz5ZsjXWMT_wG337A7M5i4a6AQAA",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "SCL",
                                "name": "Santiago International Airport",
                                "city": "SCL",
                                "cityName": "Santiago",
                                "country": "CL",
                                "countryName": "Chile"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "LIM",
                                "name": "Jorge Chavez International Airport",
                                "city": "LIM",
                                "cityName": "Lima",
                                "country": "PE",
                                "countryName": "Peru"
                            },
                            "departureTime": "2024-11-26T06:00:00",
                            "arrivalTime": "2024-11-26T07:50:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-26T06:00:00",
                                    "arrivalTime": "2024-11-26T07:50:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "SCL",
                                        "name": "Santiago International Airport",
                                        "city": "SCL",
                                        "cityName": "Santiago",
                                        "country": "CL",
                                        "countryName": "Chile"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "LIM",
                                        "name": "Jorge Chavez International Airport",
                                        "city": "LIM",
                                        "cityName": "Lima",
                                        "country": "PE",
                                        "countryName": "Peru"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 802,
                                        "planeType": "32Q",
                                        "carrierInfo": {
                                            "operatingCarrier": "H2",
                                            "marketingCarrier": "H2"
                                        }
                                    },
                                    "carriers": [
                                        "H2",
                                        "H2"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Sky Airline",
                                            "code": "H2"
                                        },
                                        {
                                            "name": "Sky Airline",
                                            "code": "H2"
                                        }
                                    ],
                                    "totalTime": 13800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "32Q"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 13800,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                },
                {
                    "token": "d6a1f_H4sIAAAAAAAA_y2QUW-CMBSFf417o9CCQk2ahaBubFIyBXS-NLUisrF1od1Af_06WJqc853T3NukF62_1Ny2z01dXbSyvhWopJYV1yUQ8sM-t0aOUr7Xn5XN69beRut1nKAZTQsb2pY5Yv56X_baUq0gd_WxBJxYGOMRlSDBP7VkBrxlusV48zRUQmrigSmMqZcf6DQey5Y8FIFPt0M6kWShuvQW-kmmEF0omORNSlcF3zjVLYXCyaJ-T5edSrLihdZdT4sQpVfnlkSdpnms1tlS7Zpw4i6GhaUQBALg-RgOWXJF3JGEJtAZ8aTJdp2m-X6M5gJ6wXQIPYGua1iVTSl0LT-fyyt5RIHjWeZT5A_yrHCCIj7FqG8MTFzzdlgxx-hlUM4OK2NHhn1jYrQTg5ijwFDJ0MznBs7MM1ozCBzwN_fG4p2xG_MDv9XXX1x4XD66AQAA",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "SCL",
                                "name": "Santiago International Airport",
                                "city": "SCL",
                                "cityName": "Santiago",
                                "country": "CL",
                                "countryName": "Chile"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "LIM",
                                "name": "Jorge Chavez International Airport",
                                "city": "LIM",
                                "cityName": "Lima",
                                "country": "PE",
                                "countryName": "Peru"
                            },
                            "departureTime": "2024-11-26T21:15:00",
                            "arrivalTime": "2024-11-26T23:05:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-26T21:15:00",
                                    "arrivalTime": "2024-11-26T23:05:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "SCL",
                                        "name": "Santiago International Airport",
                                        "city": "SCL",
                                        "cityName": "Santiago",
                                        "country": "CL",
                                        "countryName": "Chile"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "LIM",
                                        "name": "Jorge Chavez International Airport",
                                        "city": "LIM",
                                        "cityName": "Lima",
                                        "country": "PE",
                                        "countryName": "Peru"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 804,
                                        "planeType": "32Q",
                                        "carrierInfo": {
                                            "operatingCarrier": "H2",
                                            "marketingCarrier": "H2"
                                        }
                                    },
                                    "carriers": [
                                        "H2",
                                        "H2"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Sky Airline",
                                            "code": "H2"
                                        },
                                        {
                                            "name": "Sky Airline",
                                            "code": "H2"
                                        }
                                    ],
                                    "totalTime": 13800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "32Q"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 13800,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                },
                {
                    "token": "d6a1f_H4sIAAAAAAAA_y2QUW-CMBSFf417o9ACQk2ahaCbblIyFXR7aaBWZHN2od1Afv06WJqc853T3NukZ62_1My2T5e6OmtlfStQSS2rQgvA5ad9aoyUUn7U18ou6sbexuv1KkFTmuY2tC1z-Oz1XnTaUg0nd3UpQEEsjPGIipPwnxoyBd4i3WK8eRoqLjXxgA9X1MveqL8cy4Y85mFAt0M6kmSu2rSPgmSnEJ0rmGSXlD7kxcap-hRyZxd3B7poVbLLX2jddjSPUHpz-iRuNc1War1bqP0lmrjzYaHgnEAAvADDIctCEXckrgl0Rjxqsl2naXYYo7mAXugPoSPQdQ0rcRFc1_L6LG5kifzQQZb5FfmDPCuaoLic-m1wNjBxzeNRxRyj50ELBtHSeMlwYIyPdmQQFyg0JBiaBoWBE_OM1gwCB_wNvrPV3ljPgjBo9O0XxHqcV7wBAAA.",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "SCL",
                                "name": "Santiago International Airport",
                                "city": "SCL",
                                "cityName": "Santiago",
                                "country": "CL",
                                "countryName": "Chile"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "LIM",
                                "name": "Jorge Chavez International Airport",
                                "city": "LIM",
                                "cityName": "Lima",
                                "country": "PE",
                                "countryName": "Peru"
                            },
                            "departureTime": "2024-11-26T23:05:00",
                            "arrivalTime": "2024-11-27T00:55:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-26T23:05:00",
                                    "arrivalTime": "2024-11-27T00:55:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "SCL",
                                        "name": "Santiago International Airport",
                                        "city": "SCL",
                                        "cityName": "Santiago",
                                        "country": "CL",
                                        "countryName": "Chile"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "LIM",
                                        "name": "Jorge Chavez International Airport",
                                        "city": "LIM",
                                        "cityName": "Lima",
                                        "country": "PE",
                                        "countryName": "Peru"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 5802,
                                        "planeType": "32N",
                                        "carrierInfo": {
                                            "operatingCarrier": "H2",
                                            "marketingCarrier": "H2",
                                            "operatingCarrierDisclosureText": "H8 Sky Airline Peru Sac"
                                        }
                                    },
                                    "carriers": [
                                        "H2",
                                        "H2"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Sky Airline",
                                            "code": "H2"
                                        },
                                        {
                                            "name": "Sky Airline",
                                            "code": "H2"
                                        }
                                    ],
                                    "totalTime": 13800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "32N"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 13800,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                },
                {
                    "token": "d6a1f_H4sIAAAAAAAA_y2QX2-CMBTFP42-UdqCf2rSLEaduhW7ieD0pYGKiHPWQDeQT78K5t6c8zvnPjTpSetbMbLt4yVLT7qwfguQKq3SSCdAqh_7mBuJlfrOrqkdZbntTxhberi_4qGNbMuMHO1ekkpbRS5pN4sTEFGLENJiIenHePjknPaBO-M-Ieu3ppJKUxf00HLlBvvVfNqWOZ1vP1lv36QD9aZFySFa8Hrp8HoHeR1UfuDCMLwt_OluENZrj71KuJmU1SocYzadocD0bOOVbAJhkJXa88vKOwcdp30ikZIiANwBQU1WUUEHwydLTRFs8aCpzzgPvtpoDhgSpwkVRY4z7HWL5JJInanre3KnbIz7pG-Z31F_2LV4B09ilaoLNtBxxmZTAY2eGo1E8LBYkIEx2dpBoOgQP_pE4CjGBo7CNZoJBCB4HM5iuTVWi-iuhmX5D1wNH_PDAQAA",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "SCL",
                                "name": "Santiago International Airport",
                                "city": "SCL",
                                "cityName": "Santiago",
                                "country": "CL",
                                "countryName": "Chile"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "LIM",
                                "name": "Jorge Chavez International Airport",
                                "city": "LIM",
                                "cityName": "Lima",
                                "country": "PE",
                                "countryName": "Peru"
                            },
                            "departureTime": "2024-11-26T18:00:00",
                            "arrivalTime": "2024-11-26T19:45:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-26T18:00:00",
                                    "arrivalTime": "2024-11-26T19:45:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "SCL",
                                        "name": "Santiago International Airport",
                                        "city": "SCL",
                                        "cityName": "Santiago",
                                        "country": "CL",
                                        "countryName": "Chile"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "LIM",
                                        "name": "Jorge Chavez International Airport",
                                        "city": "LIM",
                                        "cityName": "Lima",
                                        "country": "PE",
                                        "countryName": "Peru"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 2696,
                                        "carrierInfo": {
                                            "operatingCarrier": "LP",
                                            "marketingCarrier": "LA"
                                        }
                                    },
                                    "carriers": [
                                        "LA",
                                        "LP"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "LATAM",
                                            "code": "LA"
                                        },
                                        {
                                            "name": "Latam Peru",
                                            "code": "LP"
                                        }
                                    ],
                                    "totalTime": 13500,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "787"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 13500,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                },
                {
                    "token": "d6a1f_H4sIAAAAAAAA_y2QUW-CMACEf42-UVpABZNmMerUrdgpgtOXplREnLMOuoH8-lUwbe6-u0v60JNSt2JomsdLlp5UYfwWIJVKplwlQMhv85hriaX8yq6pybPcDMaELHyrv6SRiUxDHzHcvSSVMopc4G4WJ4Bjw_O8FguBP0buk3PcB86UBp63fmsqIRV2QA8tlk64X878tszxbLsivX2TDtifFCWFaE7rhU3rHaR1WAWhA6PoNg8mu0FUr33yKuBmXFbLaGSRyRSFuicbvyRjCMOsVH5QVv457NiT5tFECIwAcAYearLkBR64TxYKI9jiQeGAUBp-tlEPFvTsJlQY2bbb6xbJJREqk9f35I7JyHKQa-jfkX-WY9CONY7P1c-Na-jYI31TBrWeGuVsutIWM2-gTbR2YIgf4secMIvHloYjc7RmDAEIHsOZLbbaasbv0i3LfzpFR7LDAQAA",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "SCL",
                                "name": "Santiago International Airport",
                                "city": "SCL",
                                "cityName": "Santiago",
                                "country": "CL",
                                "countryName": "Chile"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "LIM",
                                "name": "Jorge Chavez International Airport",
                                "city": "LIM",
                                "cityName": "Lima",
                                "country": "PE",
                                "countryName": "Peru"
                            },
                            "departureTime": "2024-11-26T08:50:00",
                            "arrivalTime": "2024-11-26T10:40:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-26T08:50:00",
                                    "arrivalTime": "2024-11-26T10:40:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "SCL",
                                        "name": "Santiago International Airport",
                                        "city": "SCL",
                                        "cityName": "Santiago",
                                        "country": "CL",
                                        "countryName": "Chile"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "LIM",
                                        "name": "Jorge Chavez International Airport",
                                        "city": "LIM",
                                        "cityName": "Lima",
                                        "country": "PE",
                                        "countryName": "Peru"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 2418,
                                        "carrierInfo": {
                                            "operatingCarrier": "LP",
                                            "marketingCarrier": "LA"
                                        }
                                    },
                                    "carriers": [
                                        "LA",
                                        "LP"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "LATAM",
                                            "code": "LA"
                                        },
                                        {
                                            "name": "Latam Peru",
                                            "code": "LP"
                                        }
                                    ],
                                    "totalTime": 13800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A320"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 13800,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                }
            ],
            "flightDeals": [
                {
                    "key": "CHEAPEST",
                    "offerToken": "d6a1f_H4sIAAAAAAAA_y2QUW-CMBSFf417o9CCAibNQtA5NmkzFXR7aWpFZDK70G4ov34VlibnfOc09zbpSetvNbXtY12VJ62sHwVKqWXJdQGE_LKPjZG9lOfqUtq8aux1vFwmKZoQmtvQtswR0_fH4qot1Qj8UO0LwLEVhuGASuDgnxo8Ad6crsNw9dJXQmrsgTFMiJd9kPFiKBu8yAOfrPt0wOlMtbSL_HSjEJkpmGY1JU85XzllR6FwNvF1R-atSjf5G6naK8kjRG9Ol8atJlmilpu52tbRyJ31CwshMATA80PYZ8kVdgcSGkNnwIPG6yWl2W6I5gJ6wbgPVwxd17Aq6kLoSl5eixt-RoGDLPMp8hd5VjRCMfeC87gzMHLN21HJHKOnXjmL7rZnoW9MDHZgMOQoMFQwNPG5gSPzjFYMAgfcBz5ZsjXWMT_wG337A7M5i4a6AQAA",
                    "price": {
                        "currencyCode": "USD",
                        "units": 114,
                        "nanos": 850000000
                    },
                    "travellerPrices": [
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 114,
                                    "nanos": 850000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 74,
                                    "nanos": 850000000
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 40,
                                    "nanos": 0
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 115
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 114,
                                    "nanos": 850000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 115
                                }
                            },
                            "travellerReference": "1",
                            "travellerType": "ADULT"
                        }
                    ]
                },
                {
                    "key": "FASTEST",
                    "offerToken": "d6a1f_H4sIAAAAAAAA_y2QX2-CMBTFP42-UdqCf2rSLEaduhW7ieD0pYGKiHPWQDeQT78K5t6c8zvnPjTpSetbMbLt4yVLT7qwfguQKq3SSCdAqh_7mBuJlfrOrqkdZbntTxhberi_4qGNbMuMHO1ekkpbRS5pN4sTEFGLENJiIenHePjknPaBO-M-Ieu3ppJKUxf00HLlBvvVfNqWOZ1vP1lv36QD9aZFySFa8Hrp8HoHeR1UfuDCMLwt_OluENZrj71KuJmU1SocYzadocD0bOOVbAJhkJXa88vKOwcdp30ikZIiANwBQU1WUUEHwydLTRFs8aCpzzgPvtpoDhgSpwkVRY4z7HWL5JJInanre3KnbIz7pG-Z31F_2LV4B09ilaoLNtBxxmZTAY2eGo1E8LBYkIEx2dpBoOgQP_pE4CjGBo7CNZoJBCB4HM5iuTVWi-iuhmX5D1wNH_PDAQAA",
                    "price": {
                        "currencyCode": "USD",
                        "units": 120,
                        "nanos": 930000000
                    },
                    "travellerPrices": [
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 120,
                                    "nanos": 930000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 80,
                                    "nanos": 930000000
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 40,
                                    "nanos": 0
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 121
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 120,
                                    "nanos": 930000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 121
                                }
                            },
                            "travellerReference": "1",
                            "travellerType": "ADULT"
                        }
                    ]
                },
                {
                    "key": "BEST",
                    "offerToken": "d6a1f_H4sIAAAAAAAA_y2QUW-CMBSFf417o9CCAibNQtA5NmkzFXR7aWpFZDK70G4ov34VlibnfOc09zbpSetvNbXtY12VJ62sHwVKqWXJdQGE_LKPjZG9lOfqUtq8aux1vFwmKZoQmtvQtswR0_fH4qot1Qj8UO0LwLEVhuGASuDgnxo8Ad6crsNw9dJXQmrsgTFMiJd9kPFiKBu8yAOfrPt0wOlMtbSL_HSjEJkpmGY1JU85XzllR6FwNvF1R-atSjf5G6naK8kjRG9Ol8atJlmilpu52tbRyJ31CwshMATA80PYZ8kVdgcSGkNnwIPG6yWl2W6I5gJ6wbgPVwxd17Aq6kLoSl5eixt-RoGDLPMp8hd5VjRCMfeC87gzMHLN21HJHKOnXjmL7rZnoW9MDHZgMOQoMFQwNPG5gSPzjFYMAgfcBz5ZsjXWMT_wG337A7M5i4a6AQAA",
                    "price": {
                        "currencyCode": "USD",
                        "units": 114,
                        "nanos": 850000000
                    },
                    "travellerPrices": [
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 114,
                                    "nanos": 850000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 74,
                                    "nanos": 850000000
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 40,
                                    "nanos": 0
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 115
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 114,
                                    "nanos": 850000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 115
                                }
                            },
                            "travellerReference": "1",
                            "travellerType": "ADULT"
                        }
                    ]
                }
            ],
            "atolProtectedStatus": "NONE",
            "searchId": "47CCC61B10CE4388BE47CAD4E15BB308",
            "displayOptions": {
                "brandedFaresShownByDefault": false,
                "directFlightsOnlyFilterIgnored": false,
                "hideFlexiblePricesBanner": false
            },
            "isOffersCabinClassExtended": false,
            "searchCriteria": {
                "cabinClass": "ECONOMY"
            }
        }
    }
]

2025-08-25 13:42:03,144 - evaluation_logger_Flights-107 - INFO - Final Response: <｜begin▁of▁sentence｜># 1. 前言

在上一篇文章中，我们实现了`axios`的请求和响应配置化，也就是我们可以对每个请求设置其自己的配置，实现了配置化。但是，我们在开发过程中，通常会有很多请求，而每个请求的配置可能会相同，例如我们调用的`api`可能都是同一个域名，不同的接口，我们通常希望的是可以统一设置这个域名，而不用在每个请求中都写一遍；再例如，我们可能需要对所有请求的`请求参数`做序列化操作，或者统一在请求头中添加`token`等信息，如果我们每次都在每个请求中单独添加，那样就会非常麻烦，而且不易维护。

那么，有没有一种方法可以让我们统一设置这些公共的东西呢？答案是有的，`axios`为我们提供了默认配置，我们可以把公共的配置设置在默认配置中，这样，每个请求就都会包含这些配置了。另外，我们还可以设置配置的优先级：默认配置 < 请求配置，意思就是如果请求配置中设置了与默认配置中相同的属性，那么请求配置中的属性值会覆盖默认配置中的属性值。

接下来，我们就为我们的`axios`实现默认配置。

# 2. 思路分析

我们首先给`axios`对象上添加一个`defaults`属性，该属性也是一个对象，用来存储默认配置。然后，在发送请求的时候，我们需要把默认配置和请求配置做合并，合并的规则是：请求配置 > 默认配置，即如果默认配置和请求配置中都有同一个属性配置，那么请求配置中的属性值会覆盖默认配置中的属性值。

那么，我们该如何合并呢？我们可以把默认配置`defaults`和请求配置`config`合并成一个新的对象，不过需要注意的是，合并的时候不是简单的合并，而是需要根据不同的字段采用不同的合并策略，例如对于`url`、`method`、`data`等普通字段采取覆盖的方式，而对于`headers`这种复杂对象字段，我们需要采用深拷贝的方式合并，即把`defaults.headers`和`config.headers`合并成一个新的`headers`。

# 3. 代码实现

## 3.1 给 axios 添加 defaults 属性

我们先给`axios`对象上添加一个`defaults`属性，并且暂时先把我们之前写的默认配置加上去，如下：

```typescript
// src/defaults.ts
import { AxiosRequestConfig } from "./types";

const defaults: AxiosRequestConfig = {
  method: "get",
  timeout: 0,
  headers: {
    common: {
      Accept: "application/json, text/plain, */*",
    },
  },
};

const methodsNoData = ["delete", "get", "head", "options"];

methodsNoData.forEach((method) => {
  defaults.headers[method] = {};
});

const methodsWithData = ["post", "put", "patch"];

methodsWithData.forEach((method) => {
  defaults.headers[method] = {
    "Content-Type": "application/x-www-form-urlencoded",
  };
});

export default defaults;
```

```typescript
// src/axios.ts
import defaults from "./defaults";

function createInstance(): AxiosStatic {
  const context = new Axios();
  const instance = Axios.prototype.request.bind(context);

  // 将Axios实例上的方法和属性扩展到instance上
  extend(instance, context);

  return instance as AxiosStatic;
}
const axios = createInstance();

// 添加defaults属性
axios.defaults = defaults;

export default axios;
```

我们创建了`src/defaults.ts`文件，里面定义了默认配置对象`defaults`，并且我们暂时把之前写在`src/core/xhr.ts`中的默认配置移到了这里。然后我们在`src/axios.ts`中把该默认配置对象添加到`axios`的`defaults`属性上。

## 3.2 修改之前的请求配置

由于我们把默认配置从`xhr.ts`中移除了，所以我们需要在`xhr.ts`中把之前写死的默认配置用传入的配置`config`替换，因为传入的配置`config`已经是默认配置和请求配置合并后的配置。

```typescript
// src/core/xhr.ts

...
export default function xhr(config: AxiosRequestConfig): AxiosResponse {
  return new Promise((resolve, reject) => {
    const {
      data = null,
      url,
      method = 'get',
      headers,
      responseType,
      timeout
    } = config;

    ...
  });
}
```

## 3.3 实现配置合并

接下来，我们就需要实现把默认配置和请求配置合并，我们通过创建一个合并函数来实现。

```typescript
// src/core/mergeConfig.ts
import { AxiosRequestConfig } from "./types";
import { deepMerge, isPlainObject } from "../helpers/util";

const strats = Object.create(null);

// 默认合并策略：优先取val2
function defaultStrat(val1: any, val2: any): any {
  return typeof val2 !== "undefined" ? val2 : val1;
}

// 只取val2的合并策略
function fromVal2Strat(val1: any, val2: any): any {
  if (typeof val2 !== "undefined") {
    return val2;
  }
}

// 复杂对象的合并策略
function deepMergeStrat(val1: any, val2: any): any {
  if (isPlainObject(val2)) {
    return deepMerge(val1, val2);
  } else if (typeof val2 !== "undefined") {
    return val2;
  } else if (isPlainObject(val1)) {
    return deepMerge(val1);
  } else {
    return val1;
  }
}

const stratKeysFromVal2 = ["url", "params", "data"];

stratKeysFromVal2.forEach((key) => {
  strats[key] = fromVal2Strat;
});

const stratKeysDeepMerge = ["headers"];

stratKeysDeepMerge.forEach((key) => {
  strats[key] = deepMergeStrat;
});

export default function mergeConfig(
  config1: AxiosRequestConfig,
  config2?: AxiosRequestConfig
): AxiosRequestConfig {
  if (!config2) {
    config2 = {};
  }

  const config = Object.create(null);

  for (let key in config2) {
    mergeField(key);
  }

  for (let key in config1) {
    if (!config2[key]) {
      mergeField(key);
    }
  }

  function mergeField(key: string): void {
    const strat = strats[key] || defaultStrat;
    config[key] = strat(config1[key], config2![key]);
  }

  return config;
}
```

代码说明：

- 我们创建了`mergeConfig`函数，该函数接收两个参数`config1`和`config2`，其中`config1`表示默认配置，`config2`表示请求配置。
- 我们定义了三种合并策略：
  1.  `defaultStrat`：默认合并策略，如果`val2`有值则取`val2`，否则取`val1`；
  2.  `fromVal2Strat`：只取`val2`的合并策略，如果`val2`有值则取`val2`，否则返回`undefined`；
  3.  `deepMergeStrat`：复杂对象的合并策略，如果`val2`是普通对象，则与`val1`（如果`val1`也是普通对象）深拷贝合并，否则如果`val2`有值则取`val2`，否则如果`val1`是普通对象则深拷贝`val1`，否则返回`val1`。
- 我们定义了三种策略各自应用的字段：
  1.  `fromVal2Strat`：应用于`url`、`params`、`data`字段；
  2.  `deepMergeStrat`：应用于`headers`字段；
  3.  `defaultStrat`：应用于其他字段。
- 最后，我们遍历`config2`和`config1`，对每个字段采用相应的合并策略进行合并，最终返回合并后的配置。

## 3.4 在发送请求前合并配置

配置合并函数写好了，接下来我们就需要在发送请求前把默认配置和请求配置合并。

```typescript
// src/core/Axios.ts
import { AxiosRequestConfig, AxiosPromise, AxiosResponse } from "./types";
import { buildURL } from "../helpers/url";
import { transformRequest, transformResponse } from "../helpers/data";
import { processHeaders } from "../helpers/headers";
import xhr from "./xhr";
import { flattenHeaders } from "../helpers/headers";
import mergeConfig from "./mergeConfig";

export default class Axios {
  defaults: AxiosRequestConfig;

  constructor(initConfig: AxiosRequestConfig) {
    this.defaults = initConfig;
  }

  request(config: AxiosRequestConfig): AxiosPromise {
    // 合并配置
    config = mergeConfig(this.defaults, config);
    // 转换请求数据和请求头
    config.data = transformRequest(config.data, config.headers, config.transformRequest);
    config.headers = flattenHeaders(config.headers, config.method!);

    // 发送请求
    return xhr(config).then((res) => {
      return transformResponseData(res);
    });
  }

  // 其他方法实现省略...
}
```

在`Axios`类的`request`方法中，我们首先把类里面的`defaults`属性（也就是默认配置）和传入的请求配置`config`合并，然后再进行后续处理。

另外，我们还需要修改`Axios`类的构造函数，让它可以接收一个初始配置，并且把这个初始配置赋值给`defaults`属性。

```typescript
// src/axios.ts
import { AxiosInstance, AxiosRequestConfig, AxiosStatic } from "./types";
import Axios from "./core/Axios";
import { extend } from "./helpers/util";
import defaults from "./defaults";

function createInstance(config: AxiosRequestConfig): AxiosStatic {
  const context = new Axios(config);
  const instance = Axios.prototype.request.bind(context);

  // 将Axios实例上的方法和属性扩展到instance上
  extend(instance, context);

  return instance as AxiosStatic;
}

// 传入默认配置创建axios实例
const axios = createInstance(defaults);

// 添加defaults属性
axios.defaults = defaults;

export default axios;
```

我们修改了`createInstance`函数，让它接收一个配置参数，并且在创建`Axios`实例的时候把这个配置传给`Axios`构造函数。然后我们创建`axios`实例的时候把默认配置`defaults`传进去。

OK，这样我们就实现了配置的合并。

# 4. 编写 demo

```javascript
// examples/defaults/app.ts
import axios from "../../src/axios";

// 设置默认配置
axios.defaults.method = "post";
axios.defaults.timeout = 3000;
axios.defaults.headers.common["token"] = "d132sadasd1ad5as1d1a";

axios({
  url: "/api/defaults/post",
  data: {
    msg: "hi",
  },
});
```

我们通过`axios.defaults`设置了默认的请求方法为`post`，超时时间为`3000`毫秒，并且设置了公共请求头`token`。然后我们发送了一个请求，只传了`url`和`data`。

我们看下发送请求后，`config`配置是怎样的：

![](~@/axios/13/01.png)

从图中可以看到，我们发送的请求配置中已经包含了我们设置的默认配置。

我们再看下请求头：

![](~@/axios/13/02.png)

从图中可以看到，请求头中已经包含了我们设置的公共请求头`token`。

# 5. 遗留问题

我们虽然已经实现了配置的合并，但是目前我们的`transformRequest`和`transformResponse`函数还是写死在代码里的，我们并没有把它做到配置化，所以接下来我们就需要把这两个函数也做到配置化里面。

# 6. 总结

本篇文章中，我们为`axios`实现了默认配置，并且实现了默认配置和请求配置的合并。合并的时候我们根据不同的字段采用了不同的合并策略，使得合并更加灵活。

另外，我们还遗留了一个问题，那就是`transformRequest`和`transformResponse`函数还没有做到配置化，下一篇文章中，我们将解决这个问题。


2025-08-25 13:42:07,971 - evaluation_logger_Flights-107 - INFO - Complete Result: {'score': 0, 'reason': 'The response does not address any of the requested information about air tickets or flights.'}
2025-08-25 13:42:14,138 - evaluation_logger_Flights-107 - INFO - Correct Result: {'score': 0, 'reason': 'All information in the response is incorrect.'}
2025-08-25 13:42:14,138 - evaluation_logger_Flights-107 - INFO - Message: Success.
2025-08-25 13:42:14,138 - evaluation_logger_Flights-107 - INFO - Success turn num = 4
2025-08-25 13:42:14,138 - evaluation_logger_Flights-107 - INFO - ----------------------------------------------------------------------------------------------------
