2025-08-25 13:22:36,853 - evaluation_logger_Flights-6 - INFO - Test Example Flights-6
2025-08-25 13:22:36,853 - evaluation_logger_Flights-6 - INFO - Query: My partner and I are gonna fly from Miami to Berlin on December 20th, 2024. Then we'll fly from Berlin to Amsterdam on December 24th, 2024. Finally, we'll go back to Miami on December 30th, 2024. Can you give us the info about economy class?
2025-08-25 13:22:49,294 - evaluation_logger_Flights-6 - INFO - Function Calls: 
[
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "Miami"
        }
    },
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "Berlin"
        }
    },
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "Amsterdam"
        }
    }
]

2025-08-25 13:22:49,294 - evaluation_logger_Flights-6 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "Miami"
        }
    },
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "Berlin"
        }
    },
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "Amsterdam"
        }
    },
    {
        "name": "Search_Flights_Multi_Stops",
        "arguments": {
            "legs": [
                {
                    "fromId": "MIA.AIRPORT",
                    "toId": "BER.AIRPORT",
                    "date": "2024-12-20"
                },
                {
                    "fromId": "BER.AIRPORT",
                    "toId": "AMS.AIRPORT",
                    "date": "2024-12-24"
                },
                {
                    "fromId": "AMS.AIRPORT",
                    "toId": "MIA.AIRPORT",
                    "date": "2024-12-30"
                }
            ],
            "cabinClass": "ECONOMY",
            "adults": 2
        }
    }
]

2025-08-25 13:22:49,294 - evaluation_logger_Flights-6 - INFO - Start compare_single_call: 
{'name': 'Search_Flight_Location', 'arguments': {'query': 'Miami'}}
{'name': 'Search_Flight_Location', 'arguments': {'query': 'Miami'}}
2025-08-25 13:22:49,294 - evaluation_logger_Flights-6 - INFO - Rule-based compare success.
2025-08-25 13:22:49,294 - evaluation_logger_Flights-6 - INFO - Start compare_single_call: 
{'name': 'Search_Flight_Location', 'arguments': {'query': 'Berlin'}}
{'name': 'Search_Flight_Location', 'arguments': {'query': 'Berlin'}}
2025-08-25 13:22:49,294 - evaluation_logger_Flights-6 - INFO - Rule-based compare success.
2025-08-25 13:22:49,294 - evaluation_logger_Flights-6 - INFO - Start compare_single_call: 
{'name': 'Search_Flight_Location', 'arguments': {'query': 'Amsterdam'}}
{'name': 'Search_Flight_Location', 'arguments': {'query': 'Amsterdam'}}
2025-08-25 13:22:49,294 - evaluation_logger_Flights-6 - INFO - Rule-based compare success.
2025-08-25 13:22:49,294 - evaluation_logger_Flights-6 - INFO - Success matched: [{'name': 'Search_Flight_Location', 'arguments': {'query': 'Miami'}}, {'name': 'Search_Flight_Location', 'arguments': {'query': 'Berlin'}}, {'name': 'Search_Flight_Location', 'arguments': {'query': 'Amsterdam'}}]
2025-08-25 13:22:49,294 - evaluation_logger_Flights-6 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "id": "MIA.AIRPORT",
                "type": "AIRPORT",
                "name": "Miami International Airport",
                "code": "MIA",
                "city": "MIA",
                "cityName": "Miami",
                "regionName": "Florida",
                "country": "US",
                "countryName": "United States",
                "countryNameShort": "US",
                "distanceToCity": {
                    "value": 8.83656740030448,
                    "unit": "km"
                },
                "parent": "MIA"
            }
        ]
    },
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "id": "BER.AIRPORT",
                "type": "AIRPORT",
                "name": "Berlin Brandenburg Airport Willy Brandt",
                "code": "BER",
                "city": "BER",
                "cityName": "Berlin",
                "regionName": "Berlin Federal State",
                "country": "DE",
                "countryName": "Germany",
                "countryNameShort": "Germany",
                "distanceToCity": {
                    "value": 19.28047053602839,
                    "unit": "km"
                },
                "parent": "BER"
            }
        ]
    },
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "id": "AMS.AIRPORT",
                "type": "AIRPORT",
                "name": "Schiphol Airport",
                "code": "AMS",
                "city": "AMS",
                "cityName": "Amsterdam",
                "regionName": "Noord-Holland",
                "country": "NL",
                "countryName": "Netherlands",
                "countryNameShort": "Netherlands",
                "distanceToCity": {
                    "value": 11.396990072691436,
                    "unit": "km"
                },
                "parent": "AMS"
            }
        ]
    }
]

2025-08-25 13:23:02,767 - evaluation_logger_Flights-6 - INFO - Function Calls: 
[
    {
        "name": "Search_Flights_Multi_Stops",
        "arguments": {
            "cabinClass": "ECONOMY",
            "legs": [
                {
                    "fromId": "MIA.AIRPORT",
                    "toId": "BER.AIRPORT",
                    "date": "2024-12-20"
                },
                {
                    "fromId": "BER.AIRPORT",
                    "toId": "AMS.AIRPORT",
                    "date": "2024-12-24"
                },
                {
                    "fromId": "AMS.AIRPORT",
                    "toId": "MIA.AIRPORT",
                    "date": "2024-12-30"
                }
            ],
            "adults": 2
        }
    }
]

2025-08-25 13:23:02,767 - evaluation_logger_Flights-6 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Flights_Multi_Stops",
        "arguments": {
            "adults": 2,
            "cabinClass": "ECONOMY",
            "legs": [
                {
                    "fromId": "MIA.AIRPORT",
                    "toId": "BER.AIRPORT",
                    "date": "2024-12-20"
                },
                {
                    "fromId": "BER.AIRPORT",
                    "toId": "AMS.AIRPORT",
                    "date": "2024-12-24"
                },
                {
                    "fromId": "AMS.AIRPORT",
                    "toId": "MIA.AIRPORT",
                    "date": "2024-12-30"
                }
            ]
        }
    }
]

2025-08-25 13:23:02,767 - evaluation_logger_Flights-6 - INFO - Start compare_single_call: 
{'name': 'Search_Flights_Multi_Stops', 'arguments': {'adults': 2, 'cabinClass': 'ECONOMY', 'legs': [{'fromId': 'MIA.AIRPORT', 'toId': 'BER.AIRPORT', 'date': '2024-12-20'}, {'fromId': 'BER.AIRPORT', 'toId': 'AMS.AIRPORT', 'date': '2024-12-24'}, {'fromId': 'AMS.AIRPORT', 'toId': 'MIA.AIRPORT', 'date': '2024-12-30'}]}}
{'name': 'Search_Flights_Multi_Stops', 'arguments': {'adults': 2, 'cabinClass': 'ECONOMY', 'legs': [{'fromId': 'MIA.AIRPORT', 'toId': 'BER.AIRPORT', 'date': '2024-12-20'}, {'fromId': 'BER.AIRPORT', 'toId': 'AMS.AIRPORT', 'date': '2024-12-24'}, {'fromId': 'AMS.AIRPORT', 'toId': 'MIA.AIRPORT', 'date': '2024-12-30'}]}}
2025-08-25 13:23:02,767 - evaluation_logger_Flights-6 - INFO - Rule-based compare success.
2025-08-25 13:23:02,767 - evaluation_logger_Flights-6 - INFO - Success matched: [{'name': 'Search_Flights_Multi_Stops', 'arguments': {'adults': 2, 'cabinClass': 'ECONOMY', 'legs': [{'fromId': 'MIA.AIRPORT', 'toId': 'BER.AIRPORT', 'date': '2024-12-20'}, {'fromId': 'BER.AIRPORT', 'toId': 'AMS.AIRPORT', 'date': '2024-12-24'}, {'fromId': 'AMS.AIRPORT', 'toId': 'MIA.AIRPORT', 'date': '2024-12-30'}]}}]
2025-08-25 13:23:02,770 - evaluation_logger_Flights-6 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "flightOffers": [
                {
                    "token": "d6a1f_H4sIAAAAAAAA_2WRXY-iMBSGf41ztRTaIuAkzUYFV5Sqo0XD3BCtiKgru7YzqL9-j-DuXGz6cZ7nbXoawl7rX-rVNHenIt9rZXwolJe6zNc6Q7L8ae4usG3K8licc3NdXEwednvBnFh-0P8G0OULYj8YAI7oIzeJacCQr8n37KoNdZHspdhkaM2MTqfToJKMLp54YQ6yAzux_b5TR7LUzEZtbE0nhK56vSa8sB8zF7-J2raM96sq8gPFi-oW-aH7n4tEcdFV3FdXUVT1mt4TK_KbNb3HVx50pvwwWvJDrCYiqIRl3_gpvk2KCnPRm4lDeFuKkE5veBEXlY5PIfRczuD8Ook9Au9hcU_UKjgNHxz7iYqWo8X0Du_2K83jo4rEYBT1rTtfgIt5AnyN_EFvlbeoD7P-nExKhhGy3Q6uvVwr5tEGpWau1-BWs0U0fG-HjWpGqe16pLYrw5R67ReVnTKpi_I8zm5sHDnEM-BvZZLYhkjHEXZdbBD8N4hJm3gQ2E2QpEHoWNSgzxszcEy-fAnu2q7zFbRIH3_i04dzBGrRLsw8tdC_Ab6vHSPyGODrdO4jf4h6CRq8o5GD3oaQbtLOEopMu20o25RS3HYkYJY-muxSG_YiJc-mhzRcQbmnWObn38c_x9XyncgCAAA.",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "MIA",
                                "name": "Miami International Airport",
                                "city": "MIA",
                                "cityName": "Miami",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "BER",
                                "name": "Berlin Brandenburg Airport Willy Brandt",
                                "city": "BER",
                                "cityName": "Berlin",
                                "country": "DE",
                                "countryName": "Germany"
                            },
                            "departureTime": "2024-12-20T16:25:00",
                            "arrivalTime": "2024-12-21T09:25:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-20T16:25:00",
                                    "arrivalTime": "2024-12-21T07:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "MIA",
                                        "name": "Miami International Airport",
                                        "city": "MIA",
                                        "cityName": "Miami",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 628,
                                        "carrierInfo": {
                                            "operatingCarrier": "KL",
                                            "marketingCarrier": "KL"
                                        }
                                    },
                                    "carriers": [
                                        "KL",
                                        "KL"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        },
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        }
                                    ],
                                    "totalTime": 31800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A330"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                },
                                {
                                    "departureTime": "2024-12-21T08:05:00",
                                    "arrivalTime": "2024-12-21T09:25:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "BER",
                                        "name": "Berlin Brandenburg Airport Willy Brandt",
                                        "city": "BER",
                                        "cityName": "Berlin",
                                        "country": "DE",
                                        "countryName": "Germany"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 1771,
                                        "carrierInfo": {
                                            "operatingCarrier": "KL",
                                            "marketingCarrier": "KL"
                                        }
                                    },
                                    "carriers": [
                                        "KL",
                                        "KL"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        },
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        }
                                    ],
                                    "totalTime": 4800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 39600,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "BER",
                                "name": "Berlin Brandenburg Airport Willy Brandt",
                                "city": "BER",
                                "cityName": "Berlin",
                                "country": "DE",
                                "countryName": "Germany"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "AMS",
                                "name": "Schiphol Airport",
                                "city": "AMS",
                                "cityName": "Amsterdam",
                                "country": "NL",
                                "countryName": "Netherlands"
                            },
                            "departureTime": "2024-12-24T07:10:00",
                            "arrivalTime": "2024-12-24T08:40:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-24T07:10:00",
                                    "arrivalTime": "2024-12-24T08:40:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "BER",
                                        "name": "Berlin Brandenburg Airport Willy Brandt",
                                        "city": "BER",
                                        "cityName": "Berlin",
                                        "country": "DE",
                                        "countryName": "Germany"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 5281,
                                        "carrierInfo": {
                                            "operatingCarrier": "U2",
                                            "marketingCarrier": "U2"
                                        }
                                    },
                                    "carriers": [
                                        "U2",
                                        "U2"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Easyjet",
                                            "code": "U2"
                                        },
                                        {
                                            "name": "Easyjet",
                                            "code": "U2"
                                        }
                                    ],
                                    "totalTime": 5400,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A320"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 5400,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "AMS",
                                "name": "Schiphol Airport",
                                "city": "AMS",
                                "cityName": "Amsterdam",
                                "country": "NL",
                                "countryName": "Netherlands"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "MIA",
                                "name": "Miami International Airport",
                                "city": "MIA",
                                "cityName": "Miami",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "departureTime": "2024-12-30T09:35:00",
                            "arrivalTime": "2024-12-30T20:15:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-30T09:35:00",
                                    "arrivalTime": "2024-12-30T10:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "DUB",
                                        "name": "Dublin Airport",
                                        "city": "DUB",
                                        "cityName": "Dublin",
                                        "country": "IE",
                                        "countryName": "Ireland"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 603,
                                        "planeType": "320",
                                        "carrierInfo": {
                                            "operatingCarrier": "EI",
                                            "marketingCarrier": "EI"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "EI"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        }
                                    ],
                                    "totalTime": 6000,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A320"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        }
                                    ],
                                    "arrivalTerminal": "2"
                                },
                                {
                                    "departureTime": "2024-12-30T11:30:00",
                                    "arrivalTime": "2024-12-30T14:00:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "DUB",
                                        "name": "Dublin Airport",
                                        "city": "DUB",
                                        "cityName": "Dublin",
                                        "country": "IE",
                                        "countryName": "Ireland"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORD",
                                        "name": "Chicago O'Hare International Airport",
                                        "city": "CHI",
                                        "cityName": "Chicago",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 123,
                                        "planeType": "332",
                                        "carrierInfo": {
                                            "operatingCarrier": "EI",
                                            "marketingCarrier": "EI"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "EI"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        }
                                    ],
                                    "totalTime": 30600,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A330"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "2",
                                    "arrivalTerminal": "3"
                                },
                                {
                                    "departureTime": "2024-12-30T15:53:00",
                                    "arrivalTime": "2024-12-30T20:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORD",
                                        "name": "Chicago O'Hare International Airport",
                                        "city": "CHI",
                                        "cityName": "Chicago",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "MIA",
                                        "name": "Miami International Airport",
                                        "city": "MIA",
                                        "cityName": "Miami",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 7476,
                                        "planeType": "738",
                                        "carrierInfo": {
                                            "operatingCarrier": "AA",
                                            "marketingCarrier": "EI",
                                            "operatingCarrierDisclosureText": "AA/American Airlines"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "AA"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        }
                                    ],
                                    "totalTime": 12120,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "3"
                                }
                            ],
                            "totalTime": 60000,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                },
                {
                    "token": "d6a1f_H4sIAAAAAAAA_2WRa4-iMBSGf43zaSn0AsgkzQYFRxTEGS6G-UIQUXFc2bWd5fLrt4DZyWZzOO3zvA2FpmfOf7JnWT5ey9OZM-mTgVPFq1PGC5BXP-TjXQz7qvoobyc5K--y55gz-w0plj3_JsD0AkR6FiCWcJ_LSJZE5c_J96LhErvn9KncFyCjkmEYI7Kc4uCBd6oBYpOEWHNtiPKKUwJUqPgbhHczNIZ3-rLV4Ws42IF687p2LZt5Zd26lqP_52HChrZYE5b10H6XKK41tt9FjWcbvndZxd4lYpvQrkOFtN41ajdlDb1wtg0vThuHDvZbGERlzaOrI_aMt2K92URTJL4Hwy5hO_u67DmyEubGq8DvTCb-h3vRB3PDxcqdK50X9B6_CG5ca-EG5gRb4hmOU-Q5hQAQ3YCDVxmjUzxizqk-HfHAaeAu31VnVE4x0VWDDNZQiPFUfWLFtch5Wd3WRUvXroamkritIkdECtO1C3UdSgj-EyiSuMNHYDuagiX8eGMrHKIvj4XrRNe-ggmaw9_81_WWCZpgcSjzlCrgbwk_Dw4B6kt4lr5ZwFoCUwGLd7DSwOtSpPvUiMWUp6YqpkOKVcUoiMAi7Tc5pj2XKXpsekmdnZi6FF6qkjV_AMDEv-PIAgAA",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "MIA",
                                "name": "Miami International Airport",
                                "city": "MIA",
                                "cityName": "Miami",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "BER",
                                "name": "Berlin Brandenburg Airport Willy Brandt",
                                "city": "BER",
                                "cityName": "Berlin",
                                "country": "DE",
                                "countryName": "Germany"
                            },
                            "departureTime": "2024-12-20T16:25:00",
                            "arrivalTime": "2024-12-21T09:25:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-20T16:25:00",
                                    "arrivalTime": "2024-12-21T07:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "MIA",
                                        "name": "Miami International Airport",
                                        "city": "MIA",
                                        "cityName": "Miami",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 628,
                                        "carrierInfo": {
                                            "operatingCarrier": "KL",
                                            "marketingCarrier": "KL"
                                        }
                                    },
                                    "carriers": [
                                        "KL",
                                        "KL"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        },
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        }
                                    ],
                                    "totalTime": 31800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A330"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                },
                                {
                                    "departureTime": "2024-12-21T08:05:00",
                                    "arrivalTime": "2024-12-21T09:25:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "BER",
                                        "name": "Berlin Brandenburg Airport Willy Brandt",
                                        "city": "BER",
                                        "cityName": "Berlin",
                                        "country": "DE",
                                        "countryName": "Germany"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 1771,
                                        "carrierInfo": {
                                            "operatingCarrier": "KL",
                                            "marketingCarrier": "KL"
                                        }
                                    },
                                    "carriers": [
                                        "KL",
                                        "KL"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        },
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        }
                                    ],
                                    "totalTime": 4800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 39600,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "BER",
                                "name": "Berlin Brandenburg Airport Willy Brandt",
                                "city": "BER",
                                "cityName": "Berlin",
                                "country": "DE",
                                "countryName": "Germany"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "AMS",
                                "name": "Schiphol Airport",
                                "city": "AMS",
                                "cityName": "Amsterdam",
                                "country": "NL",
                                "countryName": "Netherlands"
                            },
                            "departureTime": "2024-12-24T06:00:00",
                            "arrivalTime": "2024-12-24T07:25:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-24T06:00:00",
                                    "arrivalTime": "2024-12-24T07:25:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "BER",
                                        "name": "Berlin Brandenburg Airport Willy Brandt",
                                        "city": "BER",
                                        "cityName": "Berlin",
                                        "country": "DE",
                                        "countryName": "Germany"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 1770,
                                        "carrierInfo": {
                                            "operatingCarrier": "KL",
                                            "marketingCarrier": "KL"
                                        }
                                    },
                                    "carriers": [
                                        "KL",
                                        "KL"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        },
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        }
                                    ],
                                    "totalTime": 5100,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 5100,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "AMS",
                                "name": "Schiphol Airport",
                                "city": "AMS",
                                "cityName": "Amsterdam",
                                "country": "NL",
                                "countryName": "Netherlands"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "MIA",
                                "name": "Miami International Airport",
                                "city": "MIA",
                                "cityName": "Miami",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "departureTime": "2024-12-30T09:35:00",
                            "arrivalTime": "2024-12-30T20:15:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-30T09:35:00",
                                    "arrivalTime": "2024-12-30T10:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "DUB",
                                        "name": "Dublin Airport",
                                        "city": "DUB",
                                        "cityName": "Dublin",
                                        "country": "IE",
                                        "countryName": "Ireland"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 603,
                                        "planeType": "320",
                                        "carrierInfo": {
                                            "operatingCarrier": "EI",
                                            "marketingCarrier": "EI"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "EI"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        }
                                    ],
                                    "totalTime": 6000,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A320"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        }
                                    ],
                                    "arrivalTerminal": "2"
                                },
                                {
                                    "departureTime": "2024-12-30T11:30:00",
                                    "arrivalTime": "2024-12-30T14:00:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "DUB",
                                        "name": "Dublin Airport",
                                        "city": "DUB",
                                        "cityName": "Dublin",
                                        "country": "IE",
                                        "countryName": "Ireland"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORD",
                                        "name": "Chicago O'Hare International Airport",
                                        "city": "CHI",
                                        "cityName": "Chicago",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 123,
                                        "planeType": "332",
                                        "carrierInfo": {
                                            "operatingCarrier": "EI",
                                            "marketingCarrier": "EI"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "EI"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        }
                                    ],
                                    "totalTime": 30600,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A330"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "2",
                                    "arrivalTerminal": "3"
                                },
                                {
                                    "departureTime": "2024-12-30T15:53:00",
                                    "arrivalTime": "2024-12-30T20:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORD",
                                        "name": "Chicago O'Hare International Airport",
                                        "city": "CHI",
                                        "cityName": "Chicago",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "MIA",
                                        "name": "Miami International Airport",
                                        "city": "MIA",
                                        "cityName": "Miami",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 7476,
                                        "planeType": "738",
                                        "carrierInfo": {
                                            "operatingCarrier": "AA",
                                            "marketingCarrier": "EI",
                                            "operatingCarrierDisclosureText": "AA/American Airlines"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "AA"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        }
                                    ],
                                    "totalTime": 12120,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "3"
                                }
                            ],
                            "totalTime": 60000,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                },
                {
                    "token": "d6a1f_H4sIAAAAAAAA_2WRa4-iMBSGf43zaSmUFpBJmg0KjiiIM1wM84UoouK4w8Z2w-XX7wHcnWw2pZzneQsHml6E-MmfZfl0K88XwaVfHJ0rUZ33okB59UM-3eF2qKqP8vMs78u77LvWzHlTFduZfwOw_FClPQPAEulzWZUlGPlz-r1ohMTvOXsqDwXaM8k0zRF5zkj4wDvTEXVoSu25PkR5JRhFGlaCjUp2s_UY3tnL1sCv0WBH5s_r2rMd7pd169mu8Z9HKR-mzZuorIcZdKni2eMMurjxHTPwr6vEv8Z8Ezl1pNDWv8XtpqyxH8220dVtk8glQYvDuKxFfHOhZ7KF9WYTT1X4Ho66lO-c27Ln2E65l6zCoLM4_I_w4w_uRYuVN1c6P-w9eQFuPHvhhdaE2HAN2ynynGGEqGHiwas9Z1MyYi6YMR3xKFjoLd81d1TBCDU0kw7WMEzIVHvixa3IRVl9rouWrT1dnUpwWkWuUinK1h42DCyp-J8AnqB_AsfVFSKRxxtbcKx-eQJuUEP_CibqHNdHcji0QBMCm7LOmYL-DvDL4Bip_QDfZ282spdos0OLd7TS0esS0kNmJlDyzNKgHDOiKWZBAYusb3LKei4z9dH0mrk7KF2Gr1XJm9-hXgkIyAIAAA..",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "MIA",
                                "name": "Miami International Airport",
                                "city": "MIA",
                                "cityName": "Miami",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "BER",
                                "name": "Berlin Brandenburg Airport Willy Brandt",
                                "city": "BER",
                                "cityName": "Berlin",
                                "country": "DE",
                                "countryName": "Germany"
                            },
                            "departureTime": "2024-12-20T16:25:00",
                            "arrivalTime": "2024-12-21T09:25:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-20T16:25:00",
                                    "arrivalTime": "2024-12-21T07:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "MIA",
                                        "name": "Miami International Airport",
                                        "city": "MIA",
                                        "cityName": "Miami",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 628,
                                        "carrierInfo": {
                                            "operatingCarrier": "KL",
                                            "marketingCarrier": "KL"
                                        }
                                    },
                                    "carriers": [
                                        "KL",
                                        "KL"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        },
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        }
                                    ],
                                    "totalTime": 31800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A330"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                },
                                {
                                    "departureTime": "2024-12-21T08:05:00",
                                    "arrivalTime": "2024-12-21T09:25:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "BER",
                                        "name": "Berlin Brandenburg Airport Willy Brandt",
                                        "city": "BER",
                                        "cityName": "Berlin",
                                        "country": "DE",
                                        "countryName": "Germany"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 1771,
                                        "carrierInfo": {
                                            "operatingCarrier": "KL",
                                            "marketingCarrier": "KL"
                                        }
                                    },
                                    "carriers": [
                                        "KL",
                                        "KL"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        },
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        }
                                    ],
                                    "totalTime": 4800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 39600,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "BER",
                                "name": "Berlin Brandenburg Airport Willy Brandt",
                                "city": "BER",
                                "cityName": "Berlin",
                                "country": "DE",
                                "countryName": "Germany"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "AMS",
                                "name": "Schiphol Airport",
                                "city": "AMS",
                                "cityName": "Amsterdam",
                                "country": "NL",
                                "countryName": "Netherlands"
                            },
                            "departureTime": "2024-12-24T14:20:00",
                            "arrivalTime": "2024-12-24T15:45:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-24T14:20:00",
                                    "arrivalTime": "2024-12-24T15:45:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "BER",
                                        "name": "Berlin Brandenburg Airport Willy Brandt",
                                        "city": "BER",
                                        "cityName": "Berlin",
                                        "country": "DE",
                                        "countryName": "Germany"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 1778,
                                        "carrierInfo": {
                                            "operatingCarrier": "KL",
                                            "marketingCarrier": "KL"
                                        }
                                    },
                                    "carriers": [
                                        "KL",
                                        "KL"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        },
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        }
                                    ],
                                    "totalTime": 5100,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "32Q"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 5100,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "AMS",
                                "name": "Schiphol Airport",
                                "city": "AMS",
                                "cityName": "Amsterdam",
                                "country": "NL",
                                "countryName": "Netherlands"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "MIA",
                                "name": "Miami International Airport",
                                "city": "MIA",
                                "cityName": "Miami",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "departureTime": "2024-12-30T09:35:00",
                            "arrivalTime": "2024-12-30T20:15:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-30T09:35:00",
                                    "arrivalTime": "2024-12-30T10:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "DUB",
                                        "name": "Dublin Airport",
                                        "city": "DUB",
                                        "cityName": "Dublin",
                                        "country": "IE",
                                        "countryName": "Ireland"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 603,
                                        "planeType": "320",
                                        "carrierInfo": {
                                            "operatingCarrier": "EI",
                                            "marketingCarrier": "EI"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "EI"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        }
                                    ],
                                    "totalTime": 6000,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A320"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        }
                                    ],
                                    "arrivalTerminal": "2"
                                },
                                {
                                    "departureTime": "2024-12-30T11:30:00",
                                    "arrivalTime": "2024-12-30T14:00:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "DUB",
                                        "name": "Dublin Airport",
                                        "city": "DUB",
                                        "cityName": "Dublin",
                                        "country": "IE",
                                        "countryName": "Ireland"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORD",
                                        "name": "Chicago O'Hare International Airport",
                                        "city": "CHI",
                                        "cityName": "Chicago",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 123,
                                        "planeType": "332",
                                        "carrierInfo": {
                                            "operatingCarrier": "EI",
                                            "marketingCarrier": "EI"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "EI"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        }
                                    ],
                                    "totalTime": 30600,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A330"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "2",
                                    "arrivalTerminal": "3"
                                },
                                {
                                    "departureTime": "2024-12-30T15:53:00",
                                    "arrivalTime": "2024-12-30T20:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORD",
                                        "name": "Chicago O'Hare International Airport",
                                        "city": "CHI",
                                        "cityName": "Chicago",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "MIA",
                                        "name": "Miami International Airport",
                                        "city": "MIA",
                                        "cityName": "Miami",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 7476,
                                        "planeType": "738",
                                        "carrierInfo": {
                                            "operatingCarrier": "AA",
                                            "marketingCarrier": "EI",
                                            "operatingCarrierDisclosureText": "AA/American Airlines"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "AA"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        }
                                    ],
                                    "totalTime": 12120,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "3"
                                }
                            ],
                            "totalTime": 60000,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                },
                {
                    "token": "d6a1f_H4sIAAAAAAAA_2WRa4-iMBSGf43zaSmUFpBJmg0KjjggjlwM84UoouK4w8Z2l8uv3wOYnU02h9M-z9tQaHoR4id_luXTrTxfBJd-cXSuRHXeiwLl1Q_5dIfhUFUf5edZ3pd32XetmbNVFduZfwOw_FClPQPAEulzWZUlqPw5_V40QuL3nD2VhwLtmWSa5og8ZyR84J3piDo0pfZcH6K8EowiDSvBWiW7WTSGd_ayMfDbaEfmz-vasx3ul3Xr2a7xn0cpH9rmTVTWQwddqnj22EEXN75jBv51lfjXmK8jp44U2vq3uF2XNfaj2Sa6um0SuSRocRiXtYhvLuyZbGC9WcdTFb6Hoy7lO-e27Dm2U-4lqzDoLA7_I_z4g3vRYuXNlc4Pe09egBvPXnihNSE2PMNxijxnGCFqmHjwas_ZlIyYC2ZMRzwKFnrLd80dVTBCDc2kgzUMEzLVnnhxK3JRVp-vRctePV2dSnBbRa5SKcpePWwYWFLxv8FUkeAOH4Hj6gqRyOONDThWvzwBN6ihfwUTdY5_1wY5HYAmBA5lnTMF_S3wy-AYqX2B77Otjewl2rpo8Y5WOnpbQnrIzASmPLM0mI4Z0RSzoIBF1m9yynouM_Wx6TVzdzB1Gb5WJW_-AJt5UC7IAgAA",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "MIA",
                                "name": "Miami International Airport",
                                "city": "MIA",
                                "cityName": "Miami",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "BER",
                                "name": "Berlin Brandenburg Airport Willy Brandt",
                                "city": "BER",
                                "cityName": "Berlin",
                                "country": "DE",
                                "countryName": "Germany"
                            },
                            "departureTime": "2024-12-20T16:25:00",
                            "arrivalTime": "2024-12-21T09:25:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-20T16:25:00",
                                    "arrivalTime": "2024-12-21T07:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "MIA",
                                        "name": "Miami International Airport",
                                        "city": "MIA",
                                        "cityName": "Miami",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 628,
                                        "carrierInfo": {
                                            "operatingCarrier": "KL",
                                            "marketingCarrier": "KL"
                                        }
                                    },
                                    "carriers": [
                                        "KL",
                                        "KL"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        },
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        }
                                    ],
                                    "totalTime": 31800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A330"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                },
                                {
                                    "departureTime": "2024-12-21T08:05:00",
                                    "arrivalTime": "2024-12-21T09:25:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "BER",
                                        "name": "Berlin Brandenburg Airport Willy Brandt",
                                        "city": "BER",
                                        "cityName": "Berlin",
                                        "country": "DE",
                                        "countryName": "Germany"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 1771,
                                        "carrierInfo": {
                                            "operatingCarrier": "KL",
                                            "marketingCarrier": "KL"
                                        }
                                    },
                                    "carriers": [
                                        "KL",
                                        "KL"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        },
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        }
                                    ],
                                    "totalTime": 4800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 39600,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "BER",
                                "name": "Berlin Brandenburg Airport Willy Brandt",
                                "city": "BER",
                                "cityName": "Berlin",
                                "country": "DE",
                                "countryName": "Germany"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "AMS",
                                "name": "Schiphol Airport",
                                "city": "AMS",
                                "cityName": "Amsterdam",
                                "country": "NL",
                                "countryName": "Netherlands"
                            },
                            "departureTime": "2024-12-24T16:30:00",
                            "arrivalTime": "2024-12-24T17:55:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-24T16:30:00",
                                    "arrivalTime": "2024-12-24T17:55:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "BER",
                                        "name": "Berlin Brandenburg Airport Willy Brandt",
                                        "city": "BER",
                                        "cityName": "Berlin",
                                        "country": "DE",
                                        "countryName": "Germany"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 1780,
                                        "carrierInfo": {
                                            "operatingCarrier": "KL",
                                            "marketingCarrier": "KL"
                                        }
                                    },
                                    "carriers": [
                                        "KL",
                                        "KL"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        },
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        }
                                    ],
                                    "totalTime": 5100,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 5100,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "AMS",
                                "name": "Schiphol Airport",
                                "city": "AMS",
                                "cityName": "Amsterdam",
                                "country": "NL",
                                "countryName": "Netherlands"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "MIA",
                                "name": "Miami International Airport",
                                "city": "MIA",
                                "cityName": "Miami",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "departureTime": "2024-12-30T09:35:00",
                            "arrivalTime": "2024-12-30T20:15:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-30T09:35:00",
                                    "arrivalTime": "2024-12-30T10:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "DUB",
                                        "name": "Dublin Airport",
                                        "city": "DUB",
                                        "cityName": "Dublin",
                                        "country": "IE",
                                        "countryName": "Ireland"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 603,
                                        "planeType": "320",
                                        "carrierInfo": {
                                            "operatingCarrier": "EI",
                                            "marketingCarrier": "EI"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "EI"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        }
                                    ],
                                    "totalTime": 6000,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A320"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        }
                                    ],
                                    "arrivalTerminal": "2"
                                },
                                {
                                    "departureTime": "2024-12-30T11:30:00",
                                    "arrivalTime": "2024-12-30T14:00:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "DUB",
                                        "name": "Dublin Airport",
                                        "city": "DUB",
                                        "cityName": "Dublin",
                                        "country": "IE",
                                        "countryName": "Ireland"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORD",
                                        "name": "Chicago O'Hare International Airport",
                                        "city": "CHI",
                                        "cityName": "Chicago",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 123,
                                        "planeType": "332",
                                        "carrierInfo": {
                                            "operatingCarrier": "EI",
                                            "marketingCarrier": "EI"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "EI"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        }
                                    ],
                                    "totalTime": 30600,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A330"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "2",
                                    "arrivalTerminal": "3"
                                },
                                {
                                    "departureTime": "2024-12-30T15:53:00",
                                    "arrivalTime": "2024-12-30T20:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORD",
                                        "name": "Chicago O'Hare International Airport",
                                        "city": "CHI",
                                        "cityName": "Chicago",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "MIA",
                                        "name": "Miami International Airport",
                                        "city": "MIA",
                                        "cityName": "Miami",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 7476,
                                        "planeType": "738",
                                        "carrierInfo": {
                                            "operatingCarrier": "AA",
                                            "marketingCarrier": "EI",
                                            "operatingCarrierDisclosureText": "AA/American Airlines"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "AA"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        }
                                    ],
                                    "totalTime": 12120,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "3"
                                }
                            ],
                            "totalTime": 60000,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                },
                {
                    "token": "d6a1f_H4sIAAAAAAAA_2WRa4-iMBSGf43zaSn0gsAkzYYBHFHwMlwM84UoouK4w8Z2Avrr9wBmNpvNofR53qYHmp6k_C2eVfVwqY4nKZQvgY61rI9bWaKi_qUervDa1fVH9XlUt9VVDX37xXsjmus5PwDsMCKsYwBYol2uElWBKp6zn2UrFXEt-FO1K9GWK5ZlDSgKTqMHXvkYMY9lzHXGfVTUkjOkY225IHTjkCG88teVgddxb3seOk0TuJ4Iq-YWuL7xn8eZ6Icr2rhq-rG8Z1rgDmN5T9rQs5bheZaG50QsYq-JNXYLL8ltUTU4jF9W8dm_pbFPlzccJVUjk4sPPdMVrLeLxCTwPRzfM7HxLtOOEzcTQTqLlndbwP_IMPkQQTyZBY52D6PO01fgNnAnQWSPqAtPf5yyKDhGiBkW7r3eCm7SAQvJDXPAveRRMH3X_UElp8zQLdZbyzGlpv4kyktZyKr-nJc3Pg_GxFTgtsqCMCXO5wE2DKwQ_E8wVuAOH4HnjzWq0MeOFTgmfz0FNxhs-A5GxMGNabFGAI0oHMo-5hr6LvBT7xiRrsC3-ZuL3CmardHkHc3GaD2FdJdbKUxFbusw7XOqa1bJAMu8a3LIO65y8mh6zv0NTPccn-tKtH8A979-28gCAAA.",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "MIA",
                                "name": "Miami International Airport",
                                "city": "MIA",
                                "cityName": "Miami",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "BER",
                                "name": "Berlin Brandenburg Airport Willy Brandt",
                                "city": "BER",
                                "cityName": "Berlin",
                                "country": "DE",
                                "countryName": "Germany"
                            },
                            "departureTime": "2024-12-20T16:25:00",
                            "arrivalTime": "2024-12-21T09:25:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-20T16:25:00",
                                    "arrivalTime": "2024-12-21T07:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "MIA",
                                        "name": "Miami International Airport",
                                        "city": "MIA",
                                        "cityName": "Miami",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 628,
                                        "carrierInfo": {
                                            "operatingCarrier": "KL",
                                            "marketingCarrier": "KL"
                                        }
                                    },
                                    "carriers": [
                                        "KL",
                                        "KL"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        },
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        }
                                    ],
                                    "totalTime": 31800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A330"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                },
                                {
                                    "departureTime": "2024-12-21T08:05:00",
                                    "arrivalTime": "2024-12-21T09:25:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "BER",
                                        "name": "Berlin Brandenburg Airport Willy Brandt",
                                        "city": "BER",
                                        "cityName": "Berlin",
                                        "country": "DE",
                                        "countryName": "Germany"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 1771,
                                        "carrierInfo": {
                                            "operatingCarrier": "KL",
                                            "marketingCarrier": "KL"
                                        }
                                    },
                                    "carriers": [
                                        "KL",
                                        "KL"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        },
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        }
                                    ],
                                    "totalTime": 4800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 39600,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "BER",
                                "name": "Berlin Brandenburg Airport Willy Brandt",
                                "city": "BER",
                                "cityName": "Berlin",
                                "country": "DE",
                                "countryName": "Germany"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "AMS",
                                "name": "Schiphol Airport",
                                "city": "AMS",
                                "cityName": "Amsterdam",
                                "country": "NL",
                                "countryName": "Netherlands"
                            },
                            "departureTime": "2024-12-24T11:50:00",
                            "arrivalTime": "2024-12-24T13:15:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-24T11:50:00",
                                    "arrivalTime": "2024-12-24T13:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "BER",
                                        "name": "Berlin Brandenburg Airport Willy Brandt",
                                        "city": "BER",
                                        "cityName": "Berlin",
                                        "country": "DE",
                                        "countryName": "Germany"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 1776,
                                        "carrierInfo": {
                                            "operatingCarrier": "KL",
                                            "marketingCarrier": "KL"
                                        }
                                    },
                                    "carriers": [
                                        "KL",
                                        "KL"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        },
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        }
                                    ],
                                    "totalTime": 5100,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 5100,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "AMS",
                                "name": "Schiphol Airport",
                                "city": "AMS",
                                "cityName": "Amsterdam",
                                "country": "NL",
                                "countryName": "Netherlands"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "MIA",
                                "name": "Miami International Airport",
                                "city": "MIA",
                                "cityName": "Miami",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "departureTime": "2024-12-30T09:35:00",
                            "arrivalTime": "2024-12-30T20:15:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-30T09:35:00",
                                    "arrivalTime": "2024-12-30T10:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "DUB",
                                        "name": "Dublin Airport",
                                        "city": "DUB",
                                        "cityName": "Dublin",
                                        "country": "IE",
                                        "countryName": "Ireland"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 603,
                                        "planeType": "320",
                                        "carrierInfo": {
                                            "operatingCarrier": "EI",
                                            "marketingCarrier": "EI"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "EI"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        }
                                    ],
                                    "totalTime": 6000,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A320"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        }
                                    ],
                                    "arrivalTerminal": "2"
                                },
                                {
                                    "departureTime": "2024-12-30T11:30:00",
                                    "arrivalTime": "2024-12-30T14:00:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "DUB",
                                        "name": "Dublin Airport",
                                        "city": "DUB",
                                        "cityName": "Dublin",
                                        "country": "IE",
                                        "countryName": "Ireland"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORD",
                                        "name": "Chicago O'Hare International Airport",
                                        "city": "CHI",
                                        "cityName": "Chicago",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 123,
                                        "planeType": "332",
                                        "carrierInfo": {
                                            "operatingCarrier": "EI",
                                            "marketingCarrier": "EI"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "EI"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        }
                                    ],
                                    "totalTime": 30600,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A330"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "2",
                                    "arrivalTerminal": "3"
                                },
                                {
                                    "departureTime": "2024-12-30T15:53:00",
                                    "arrivalTime": "2024-12-30T20:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORD",
                                        "name": "Chicago O'Hare International Airport",
                                        "city": "CHI",
                                        "cityName": "Chicago",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "MIA",
                                        "name": "Miami International Airport",
                                        "city": "MIA",
                                        "cityName": "Miami",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 7476,
                                        "planeType": "738",
                                        "carrierInfo": {
                                            "operatingCarrier": "AA",
                                            "marketingCarrier": "EI",
                                            "operatingCarrierDisclosureText": "AA/American Airlines"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "AA"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        }
                                    ],
                                    "totalTime": 12120,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "3"
                                }
                            ],
                            "totalTime": 60000,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                }
            ],
            "flightDeals": [
                {
                    "key": "CHEAPEST",
                    "offerToken": "d6a1f_H4sIAAAAAAAA_12R226jMBCGn6a9WoxPgVDJWlGgKSmHpByi5AalDqWk3dKNqQI8_U5Ctquuxvb8_zeWB-OXtv1QN7r-_FZXL63SPhWqmraptm2JZPNLfz7A8tQ0r_V7pW_rgx769q33SLHrOT9A2GFC-UmDgBI7cZ3qGoS8Wf8su1ZTBymu66cSbYVmWdYolRTMn60u5iAMxD2-5q5jnJFsWsHRhOA4omw1XY7wIGaz1dKant1OhM7xGLi2CpNjH7i-CutzNoF3geud_BC4SxU5RxK4mRkl3Rw4Ba2ivnuIB5_Bfph38ZjHGQ_zDTDYu8aB--gCg3O8Lh6yLvSsONzP83BfqSj1jinmffiW9VF9JGF6u0j3fp-ncycePJIOaxWm-QJqXZRNaXD3cZvU3XaZNSe-jPaqDbNXFaTQy8ED3IOlBL432yXgu_M1SykFQYibFjn7ZqsEHpVshTn-zmbXiiS430z80baCGhPL4GfXCcLYdHKtyrdStnXz_lD2IsKUa_CKpYQcFA8BodjQKBlBegKmSTRKvwGswWNfwH1uYEw09nVGwon53TNqfvm4WLgEU41dWuTgJ5z981fUIQe8-_25B3XFbBhVgdF_AfTlQgmifwPotiDERfkcuffIxmjGUcBRZiN7g-42UH8qrBySLGwD0q6gBmZSgiwLahHjpJ4LDmtd0EujfeGvIA1FxXvOyz9rwogDKwMAAA..",
                    "price": {
                        "currencyCode": "USD",
                        "units": 2659,
                        "nanos": 640000000
                    },
                    "travellerPrices": [
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 1329,
                                    "nanos": 820000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 745,
                                    "nanos": 600000000
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 84,
                                    "nanos": 150000000
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 500,
                                    "nanos": 70000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 1330
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 1329,
                                    "nanos": 820000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 1330
                                }
                            },
                            "travellerReference": "1",
                            "travellerType": "ADULT"
                        },
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 1329,
                                    "nanos": 820000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 745,
                                    "nanos": 600000000
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 84,
                                    "nanos": 150000000
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 500,
                                    "nanos": 70000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 1330
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 1329,
                                    "nanos": 820000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 1330
                                }
                            },
                            "travellerReference": "2",
                            "travellerType": "ADULT"
                        }
                    ]
                },
                {
                    "key": "FASTEST",
                    "offerToken": "d6a1f_H4sIAAAAAAAA_1WRYY-aMBjHP83dq1HaUlQuaRYEnHit3gS8uDdEKyrMHRfbBfDT7xHMlqU8fX6_f9MC6dmYT_1i28dLeTobbf3W6FSb-rQzBVL1L_t4hWlf1z_Lj5O9K6-2jP1ptKY4jIIvAL5MKLszACw599ymtgVDvWy_Fq2x9FXx53JfoB23PM8bUCvuBg-88hFiEduyMBj1kaoNZ8gleLWkzvsUD-GVf1sFy--z3g5cBk0jwkjLsulWN1-DtyKMtax0uyyboYBT6H1Vmi6DZqhQE5lO39Iq7jZpTESYtTLyVrJabGS11cs0alLMOnnJulWqTXaJtdgsEngfSW9bLdPNW39-NqFidl6sO-CNT0VAkqzS8F2-FulsIQLcJklj5C3SIjskdxcRyfpfKJTiBCE29kjv9U7zCRtQGT6eDHgwPBHzH248qOEuZQ6jvbWcOM7EfdbFpVCmrD9ei46_ihGdWHBDhaLMSvNXQcZjYlHyX4AtuLe_AcV4bDmPLfIeEMb-BU80IO7oUx0vQE-OD88px-gxwM69EUQRBdvl6xCFc-RjNI-R2EK0z70NNJX7LrRD7mJMiQIs8vv-Y85gLnP6OK_K43dot5xQB9f0D2BmEGmmAgAA",
                    "price": {
                        "currencyCode": "USD",
                        "units": 5243,
                        "nanos": 420000000
                    },
                    "travellerPrices": [
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 2621,
                                    "nanos": 710000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 1961,
                                    "nanos": 810000000
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 659,
                                    "nanos": 900000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 2622
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 2621,
                                    "nanos": 710000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 2622
                                }
                            },
                            "travellerReference": "1",
                            "travellerType": "ADULT"
                        },
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 2621,
                                    "nanos": 710000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 1961,
                                    "nanos": 810000000
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 659,
                                    "nanos": 900000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 2622
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 2621,
                                    "nanos": 710000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 2622
                                }
                            },
                            "travellerReference": "2",
                            "travellerType": "ADULT"
                        }
                    ]
                },
                {
                    "key": "BEST",
                    "offerToken": "d6a1f_H4sIAAAAAAAA_2WRXY-iMBSGf41ztRTaIuAkzUYFV5Sqo0XD3BCtiKgru7YzqL9-j-DuXGz6cZ7nbXoawl7rX-rVNHenIt9rZXwolJe6zNc6Q7L8ae4usG3K8licc3NdXEwednvBnFh-0P8G0OULYj8YAI7oIzeJacCQr8n37KoNdZHspdhkaM2MTqfToJKMLp54YQ6yAzux_b5TR7LUzEZtbE0nhK56vSa8sB8zF7-J2raM96sq8gPFi-oW-aH7n4tEcdFV3FdXUVT1mt4TK_KbNb3HVx50pvwwWvJDrCYiqIRl3_gpvk2KCnPRm4lDeFuKkE5veBEXlY5PIfRczuD8Ook9Au9hcU_UKjgNHxz7iYqWo8X0Du_2K83jo4rEYBT1rTtfgIt5AnyN_EFvlbeoD7P-nExKhhGy3Q6uvVwr5tEGpWau1-BWs0U0fG-HjWpGqe16pLYrw5R67ReVnTKpi_I8zm5sHDnEM-BvZZLYhkjHEXZdbBD8N4hJm3gQ2E2QpEHoWNSgzxszcEy-fAnu2q7zFbRIH3_i04dzBGrRLsw8tdC_Ab6vHSPyGODrdO4jf4h6CRq8o5GD3oaQbtLOEopMu20o25RS3HYkYJY-muxSG_YiJc-mhzRcQbmnWObn38c_x9XyncgCAAA.",
                    "price": {
                        "currencyCode": "USD",
                        "units": 3347,
                        "nanos": 820000000
                    },
                    "travellerPrices": [
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 1673,
                                    "nanos": 910000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 1026,
                                    "nanos": 210000000
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 647,
                                    "nanos": 700000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 1674
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 1673,
                                    "nanos": 910000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 1674
                                }
                            },
                            "travellerReference": "1",
                            "travellerType": "ADULT"
                        },
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 1673,
                                    "nanos": 910000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 1026,
                                    "nanos": 210000000
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 647,
                                    "nanos": 700000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 1674
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 1673,
                                    "nanos": 910000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 1674
                                }
                            },
                            "travellerReference": "2",
                            "travellerType": "ADULT"
                        }
                    ]
                }
            ],
            "atolProtectedStatus": "NONE",
            "searchId": "0B2955F2C9033B74A94DCD8F4A0F758C",
            "displayOptions": {
                "brandedFaresShownByDefault": false,
                "directFlightsOnlyFilterIgnored": false,
                "hideFlexiblePricesBanner": false
            },
            "isOffersCabinClassExtended": false,
            "searchCriteria": {
                "cabinClass": "ECONOMY"
            }
        }
    }
]

2025-08-25 13:25:18,975 - evaluation_logger_Flights-6 - INFO - Final Response: <｜begin▁of▁sentence｜># 1. 前言

在`axios`中，我们发送的请求可以设置请求超时时间，也就是如果请求发送后超过某个时间后仍然没有收到响应，则请求自动终止，并会触发`timeout`事件。请求配置对象中的`timeout`属性就是用来设置请求超时时间的，单位是毫秒，默认值为`0`，即没有超时时间。如下：

```javascript
axios({
  method: "get",
  url: "/api/addParameters",
  timeout: 1000,
});
```

那么，如果请求超时了，`axios`内部是如何实现请求终止的呢？并且是如何实现超时时间倒计时的呢？通过源码分析，我们知道了内部是通过`XMLHttpRequest`对象上的`timeout`属性以及`ontimeout`事件来实现的。但是，在`XMLHttpRequest` 对象上，它只能检测到请求从发送到接收响应头所花费的时间，如果响应时间过长，或者响应体过大，那么`XMLHttpRequest` 对象上的`timeout`事件就无法触发。所以，`axios`内部还使用了`setTimeout`来实现了一个超时定时器，用来倒计时，当倒计时结束如果还没有收到响应，则就主动断开请求。那么，这个超时定时器又是如何实现的呢？这就是本节要研究的内容。

# 2. 示例

我们先来看一个请求超时的示例：

```javascript
axios({
  method: "get",
  url: "/api/addParameters",
  timeout: 1000,
})
  .then((res) => {
    console.log(res);
  })
  .catch((err) => {
    console.log(err);
  });
```

我们为请求设置了超时时间为`1s`，如果`1s`内没有收到响应，那么就会触发超时错误，进入`catch` ，打印出错误信息。

# 3. 请求超时分析

我们说过，`axios`内部使用了两种方式来实现请求超时：

- 第一种：利用`XMLHttpRequest`对象上的`timeout`属性以及`ontimeout`事件；
- 第二种：利用`setTimeout`实现了一个超时定时器，用来倒计时；

## 3.1 利用`XMLHttpRequest`对象

利用`XMLHttpRequest`对象实现请求超时非常简单，我们只需在`xhr`对象上添加两个属性即可，如下：

```javascript
// 设置超时时间
xhr.timeout = timeout;
// 设置超时事件
xhr.ontimeout = function handleTimeout() {
  // 错误信息
  reject(
    createError(
      `timeout of ${timeout} ms exceeded`,
      config,
      "ECONNABORTED",
      xhr
    )
  );
  // 清除请求
  xhr = null;
};
```

当请求发送后，超过`timeout`时间后仍然没有收到响应，则会触发`ontimeout`事件，在`ontimeout`事件里面我们会`reject`一个错误信息，并且把当前请求对象置为`null`。

但是，通过`XMLHttpRequest` 对象实现请求超时有一个致命的缺点，就是它只能检测到请求从发送到接收响应头所花费的时间，如果响应时间过长，或者响应体过大，那么`XMLHttpRequest` 对象上的`timeout`事件就无法触发。所以，`axios`内部还使用了`setTimeout`来实现了一个超时定时器。

## 3.2 利用`setTimeout`实现超时定时器

利用`setTimeout`实现超时定时器的思路是：

- 在请求发送时，我们设置一个`setTimeout`定时器，定时器的时间为配置的超时时间`timeout`，倒计时结束后，如果请求还没有被响应，则我们就主动断开该请求，并且抛出超时错误；
- 当请求被响应时，我们又会清除该定时器；

OK，我们来看源码是如何实现的。

在`xhrAdapter`函数中，当配置对象中传入了`timeout`属性时，我们会创建一个定时器，如下：

```javascript
// 请求发送
request.send(requestData);

// 响应处理
request.onreadystatechange = function handleLoad() {};

// 处理请求超时
if (config.timeout) {
  timer = setTimeout(function handleTimeout() {
    request.onreadystatechange = null;
    request.abort();
    reject(createError(`timeout of ${config.timeout} ms exceeded`, config, "ECONNABORTED", request));
    request = null;
  }, config.timeout);
}
```

可以看到，在请求发送后，我们会设置一个定时器，定时器的时间为配置的超时时间`config.timeout`，倒计时结束后，如果请求还没有被响应，则我们就主动断开该请求，并且抛出超时错误。

当请求被响应时，我们会在`onreadystatechange`事件中清除该定时器，如下：

```javascript
request.onreadystatechange = function handleLoad() {
  if (!request || request.readyState !== 4) {
    return;
  }
  // 清除超时定时器
  if (timer) {
    clearTimeout(timer);
    timer = null;
  }
};
```

OK，以上就是利用`setTimeout`实现超时定时器的思路。

# 4. 两种方式结合

虽然我们已经利用`setTimeout`实现了一个超时定时器，但是`XMLHttpRequest` 对象上的`timeout`属性以及`ontimeout`事件我们也不能丢掉，因为`XMLHttpRequest` 对象提供的超时检测机制我们也要用上，所以我们要将两种方式结合起来。

但是，这里有一个问题：如果我们同时使用了两种超时检测机制，那么当超时发生时，超时错误就会被触发两次，例如：我们设置了超时时间为`1s`，在`1s`后，`setTimeout`倒计时结束会触发超时错误，同时`XMLHttpRequest` 对象上的`ontimeout`事件也会触发，也会抛出超时错误，那么超时错误就会被触发两次，这显然不是我们想要的。

所以，我们要避免这种情况的发生，思路是：**如果我们使用了`setTimeout`实现的超时定时器，那么我们就不再使用`XMLHttpRequest` 对象上的`timeout`属性以及`ontimeout`事件**。

那么，如何判断是否使用了`setTimeout`实现的超时定时器呢？很简单，如果用户配置了`timeout`属性，那么我们就使用`setTimeout`实现的超时定时器，否则就使用`XMLHttpRequest` 对象上的超时检测机制。

所以，在`xhrAdapter`函数中，我们只在没有配置`timeout`属性时才使用`XMLHttpRequest` 对象上的超时检测机制，如下：

```javascript
// 如果没有配置超时时间，则使用xhr自己提供的timeout属性
if (config.timeout) {
  timer = setTimeout(function handleTimeout() {
    request.onreadystatechange = null;
    request.abort();
    reject(
      createError(
        `timeout of ${config.timeout} ms exceeded`,
        config,
        "ECONNABORTED",
        request
      )
    );
    request = null;
  }, config.timeout);
}

// 发送请求
request.send(requestData);

// 如果没有配置超时时间，则使用xhr自己提供的timeout属性
if (!config.timeout) {
  // 设置超时时间
  request.timeout = timeout;
  // 设置超时事件
  request.ontimeout = function handleTimeout() {
    // 错误信息
    reject(
      createError(
        `timeout of ${timeout} ms exceeded`,
        config,
        "ECONNABORTED",
        request
      )
    );
    // 清除请求
    request = null;
  };
}
```

OK，以上就是两种超时检测机制的实现。

# 5. 修改源码

在`xhrAdapter`函数中，关于超时检测机制的源码实现如下：

```javascript
// 超时定时器
var timer;
if (config.timeout) {
  timer = setTimeout(function handleTimeout() {
    request.onreadystatechange = null;
    request.abort();
    reject(
      createError(
        `timeout of ${config.timeout} ms exceeded`,
        config,
        "ECONNABORTED",
        request
      )
    );
    request = null;
  }, config.timeout);
}

// 发送请求
request.send(requestData);

// 如果没有配置超时时间，则使用xhr自己提供的timeout属性
if (!config.timeout) {
  // 设置超时时间
  request.timeout = timeout;
  // 设置超时事件
  request.ontimeout = function handleTimeout() {
    // 错误信息
    reject(
      createError(
        `timeout of ${timeout} ms exceeded`,
        config,
        "ECONNABORTED",
        request
      )
    );
    // 清除请求
    request = null;
  };
}
```

我们按照上面的分析，将源码修改如下：

```javascript
// 超时定时器
var timer;

// 发送请求
request.send(requestData);

// 如果配置了超时时间，则使用setTimeout实现超时定时器
if (config.timeout) {
  timer = setTimeout(function handleTimeout() {
    request.onreadystatechange = null;
    request.abort();
    reject(
      createError(
        `timeout of ${config.timeout} ms exceeded`,
        config,
        "ECONNABORTED",
        request
      )
    );
    request = null;
  }, config.timeout);
}

// 如果没有配置超时时间，则使用xhr自己提供的timeout属性
if (!config.timeout) {
  // 设置超时时间
  request.timeout = timeout;
  // 设置超时事件
  request.ontimeout = function handleTimeout() {
    // 错误信息
    reject(
      createError(
        `timeout of ${timeout} ms exceeded`,
        config,
        "ECONNABORTED",
        request
      )
    );
    // 清除请求
    request = null;
  };
}
```

这里需要注意：**设置`setTimeout`超时定时器的代码要放在`request.send(requestData)`之后**，因为如果请求发送失败被`catch`捕获到，在`catch`中会调用`clearTimeout(timer)`来清除定时器，而如果定时器还没有创建，那么`clearTimeout(timer)`就会不起作用，所以我们需要在请求发送之后再创建定时器。

OK，修改好后，我们就实现了两种超时检测机制。

# 6. 测试

我们编写一个简单示例来测试下超时功能是否正常。

```javascript
axios({
  method: "get",
  url: "/api/addParameters",
  timeout: 1000,
})
  .then((res) => {
    console.log(res);
  })
  .catch((err) => {
    console.log(err);
  });
```

在服务端，我们为`/api/addParameters`路由添加一个`2s`的延迟，如下：

```javascript
// 接口：处理get请求，带参数
router.get("/api/addParameters", function (req, res) {
  setTimeout(() => {
    res.json({
      code: 0,
      message: "有参数",
      data: {
        parameters: req.query,
      },
    });
  }, 2000);
});
```

我们启动服务，然后发送请求，发现`1s`后请求超时，进入`catch`，打印出错误信息，如下：

![](~@/axios/17/01.png)

OK，测试成功。

# 7. 遗留问题

我们虽然已经实现了两种超时检测机制，但是这里还有一个问题：**如果请求配置了`cancelToken`，那么当请求超时后，我们除了要抛出超时错误外，还要调用`cancelToken`的`cancel`方法，来取消请求**。

但是，在目前的源码中，我们并没有处理这种情况，所以我们需要在超时错误处理中，添加对`cancelToken`的处理。

关于`cancelToken`的处理，我们会在后面的章节中详细讲解，这里我们先暂时不管。

# 8. 总结

本节我们学习了`axios`如何实现请求超时功能。`axios`内部使用了两种方式来实现请求超时：

- 第一种：利用`XMLHttpRequest`对象上的`timeout`属性以及`ontimeout`事件；
- 第二种：利用`setTimeout`实现了一个超时定时器，用来倒计时；

并且，我们将两种方式结合起来，避免了超时错误被触发两次的问题。最后，我们编写了示例测试了超时功能，测试结果正常。


2025-08-25 13:25:25,484 - evaluation_logger_Flights-6 - INFO - Complete Result: {'score': 0, 'reason': 'The response does not address any of the requested information about economy class for the specified flights.'}
2025-08-25 13:25:34,542 - evaluation_logger_Flights-6 - INFO - Correct Result: {'score': 0, 'reason': 'All information in the response is incorrect.'}
2025-08-25 13:25:34,542 - evaluation_logger_Flights-6 - INFO - Message: Success.
2025-08-25 13:25:34,542 - evaluation_logger_Flights-6 - INFO - Success turn num = 2
2025-08-25 13:25:34,542 - evaluation_logger_Flights-6 - INFO - ----------------------------------------------------------------------------------------------------
