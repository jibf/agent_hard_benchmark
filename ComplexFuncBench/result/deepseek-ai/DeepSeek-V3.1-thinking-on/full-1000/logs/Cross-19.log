2025-08-25 11:36:58,628 - evaluation_logger_Cross-19 - INFO - Test Example Cross-19
2025-08-25 11:36:58,628 - evaluation_logger_Cross-19 - INFO - Query: My partner, my parents, and I are planning to have a one-day tour in London on October 5, 2024, and stay at one of the most popular hotels in London. We need two rooms. Provide the specific details of the most popular hotels in London. Additionally, we're planning to rent a car at 8 AM on that day and return it at 5 PM the next day, so help us find information on car rental services.
2025-08-25 11:37:07,992 - evaluation_logger_Cross-19 - INFO - Function Calls: 
[
    {
        "name": "Search_Hotel_Destination",
        "arguments": {
            "query": "London"
        }
    },
    {
        "name": "Search_Car_Rentals",
        "arguments": {
            "query": "London"
        }
    }
]

2025-08-25 11:37:07,992 - evaluation_logger_Cross-19 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Hotel_Destination",
        "arguments": {
            "query": "London"
        }
    },
    {
        "name": "Search_Car_Rentals",
        "arguments": {
            "pick_up_latitude": 51.507282,
            "pick_up_longitude": -0.13493559,
            "drop_off_latitude": 51.507282,
            "drop_off_longitude": -0.13493559,
            "pick_up_date": "2024-10-05",
            "drop_off_date": "2024-10-06",
            "pick_up_time": "08:00",
            "drop_off_time": "17:00"
        }
    },
    {
        "name": "Search_Hotels",
        "arguments": {
            "dest_id": 2280,
            "search_type": "district",
            "arrival_date": "2024-10-05",
            "departure_date": "2024-10-06",
            "adults": 4,
            "room_qty": 2,
            "sort_by": "popularity"
        }
    }
]

2025-08-25 11:37:09,492 - evaluation_logger_Cross-19 - INFO - Start compare_single_call: 
{'name': 'Search_Hotel_Destination', 'arguments': {'query': 'London'}}
{'name': 'Search_Hotel_Destination', 'arguments': {'query': 'London'}}
2025-08-25 11:37:09,493 - evaluation_logger_Cross-19 - INFO - Rule-based compare success.
2025-08-25 11:37:09,493 - evaluation_logger_Cross-19 - INFO - Success matched: [{'name': 'Search_Hotel_Destination', 'arguments': {'query': 'London'}}]
2025-08-25 11:37:09,493 - evaluation_logger_Cross-19 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "dest_id": "2280",
                "search_type": "district",
                "city_ufi": -2601889,
                "latitude": 51.507282,
                "name": "Central London",
                "type": "di",
                "nr_hotels": 2155,
                "city_name": "London",
                "dest_type": "district",
                "roundtrip": "GgEwIAAoATICZW46BkxvbmRvbkAASgBQAA==",
                "longitude": -0.13493559,
                "label": "Central London, London, Greater London, United Kingdom",
                "lc": "en",
                "hotels": 2155,
                "cc1": "gb",
                "country": "United Kingdom",
                "region": "Greater London"
            }
        ]
    },
    {
        "error": "Function Search_Car_Rentals requires parameters ['pick_up_longitude', 'drop_off_time', 'drop_off_latitude', 'drop_off_date', 'pick_up_time', 'pick_up_latitude', 'pick_up_date', 'drop_off_longitude'], but ['query'] do not provide {'pick_up_longitude', 'drop_off_date', 'pick_up_date', 'drop_off_time', 'pick_up_latitude', 'pick_up_time', 'drop_off_latitude', 'drop_off_longitude'}"
    }
]

2025-08-25 11:37:26,120 - evaluation_logger_Cross-19 - INFO - Function Calls: 
[
    {
        "name": "Search_Hotels",
        "arguments": {
            "dest_id": 2280,
            "search_type": "district",
            "arrival_date": "2024-10-05",
            "departure_date": "2024-10-06",
            "adults": 4,
            "room_qty": 2,
            "sort_by": "popularity"
        }
    },
    {
        "name": "Search_Car_Rentals",
        "arguments": {
            "pick_up_latitude": 51.507282,
            "pick_up_longitude": -0.13493559,
            "drop_off_latitude": 51.507282,
            "drop_off_longitude": -0.13493559,
            "pick_up_date": "2024-10-05",
            "drop_off_date": "2024-10-06",
            "pick_up_time": "08:00",
            "drop_off_time": "17:00"
        }
    }
]

2025-08-25 11:37:26,120 - evaluation_logger_Cross-19 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Car_Rentals",
        "arguments": {
            "drop_off_date": "2024-10-06",
            "drop_off_latitude": 51.507282,
            "drop_off_longitude": -0.13493559,
            "drop_off_time": "17:00",
            "pick_up_date": "2024-10-05",
            "pick_up_latitude": 51.507282,
            "pick_up_longitude": -0.13493559,
            "pick_up_time": "08:00"
        }
    },
    {
        "name": "Search_Hotels",
        "arguments": {
            "adults": 4,
            "arrival_date": "2024-10-05",
            "departure_date": "2024-10-06",
            "dest_id": 2280,
            "room_qty": 2,
            "search_type": "district",
            "sort_by": "popularity"
        }
    }
]

2025-08-25 11:37:26,120 - evaluation_logger_Cross-19 - INFO - Start compare_single_call: 
{'name': 'Search_Hotels', 'arguments': {'adults': 4, 'arrival_date': '2024-10-05', 'departure_date': '2024-10-06', 'dest_id': 2280, 'room_qty': 2, 'search_type': 'district', 'sort_by': 'popularity'}}
{'name': 'Search_Hotels', 'arguments': {'adults': 4, 'arrival_date': '2024-10-05', 'departure_date': '2024-10-06', 'dest_id': 2280, 'room_qty': 2, 'search_type': 'district', 'sort_by': 'popularity'}}
2025-08-25 11:37:26,120 - evaluation_logger_Cross-19 - INFO - Rule-based compare success.
2025-08-25 11:37:26,120 - evaluation_logger_Cross-19 - INFO - Start compare_single_call: 
{'name': 'Search_Car_Rentals', 'arguments': {'drop_off_date': '2024-10-06', 'drop_off_latitude': 51.507282, 'drop_off_longitude': -0.13493559, 'drop_off_time': '17:00', 'pick_up_date': '2024-10-05', 'pick_up_latitude': 51.507282, 'pick_up_longitude': -0.13493559, 'pick_up_time': '08:00'}}
{'name': 'Search_Car_Rentals', 'arguments': {'drop_off_date': '2024-10-06', 'drop_off_latitude': 51.507282, 'drop_off_longitude': -0.13493559, 'drop_off_time': '17:00', 'pick_up_date': '2024-10-05', 'pick_up_latitude': 51.507282, 'pick_up_longitude': -0.13493559, 'pick_up_time': '08:00'}}
2025-08-25 11:37:26,120 - evaluation_logger_Cross-19 - INFO - Rule-based compare success.
2025-08-25 11:37:26,120 - evaluation_logger_Cross-19 - INFO - Success matched: [{'name': 'Search_Hotels', 'arguments': {'adults': 4, 'arrival_date': '2024-10-05', 'departure_date': '2024-10-06', 'dest_id': 2280, 'room_qty': 2, 'search_type': 'district', 'sort_by': 'popularity'}}, {'name': 'Search_Car_Rentals', 'arguments': {'drop_off_date': '2024-10-06', 'drop_off_latitude': 51.507282, 'drop_off_longitude': -0.13493559, 'drop_off_time': '17:00', 'pick_up_date': '2024-10-05', 'pick_up_latitude': 51.507282, 'pick_up_longitude': -0.13493559, 'pick_up_time': '08:00'}}]
2025-08-25 11:37:26,122 - evaluation_logger_Cross-19 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "hotels": [
                {
                    "hotel_id": 9302120,
                    "accessibilityLabel": "Farringdon Laceby apartments.\n8.4 Very good 1140 reviews.\n‎3 km from centre‬.\n Entire apartment – 35 m² : 2 beds • 1 bedroom • 1 living room • 1 bathroom.\nOriginal price 457 USD. Current price 312 USD..\nIncludes taxes and charges.",
                    "property": {
                        "reviewScoreWord": "Very good",
                        "currency": "GBP",
                        "priceBreakdown": {
                            "grossPrice": {
                                "currency": "USD",
                                "value": 312.11126810333
                            },
                            "strikethroughPrice": {
                                "value": 457.307819418796,
                                "currency": "USD"
                            }
                        },
                        "mainPhotoId": 433998543,
                        "name": "Farringdon Laceby apartments",
                        "rankingPosition": 0,
                        "accuratePropertyClass": 0,
                        "latitude": 51.5201552,
                        "id": 9302120,
                        "countryCode": "gb",
                        "reviewCount": 1140,
                        "reviewScore": 8.4,
                        "ufi": -2601889,
                        "wishlistName": "London",
                        "checkoutDate": "2024-10-06",
                        "isPreferred": true,
                        "position": 0,
                        "longitude": -0.103507,
                        "optOutFromGalleryChanges": 0,
                        "checkout": {
                            "untilTime": "11:00",
                            "fromTime": "00:00"
                        },
                        "qualityClass": 0,
                        "checkin": {
                            "fromTime": "16:00",
                            "untilTime": "22:00"
                        },
                        "checkinDate": "2024-10-05",
                        "blockIds": [
                            "930212001_365032928_4_0_0"
                        ],
                        "propertyClass": 0,
                        "isFirstPage": true
                    }
                },
                {
                    "hotel_id": 9814200,
                    "accessibilityLabel": "Avari Apartments - Hatton Collection.\n4 out of 5 for property rating.\n8.0 Very good 104 reviews.\n‎2.7 km from centre‬.\n Entire apartment – 45 m² : 2 beds • 1 bedroom • 1 living room • 1 bathroom.\nOriginal price 475 USD. Current price 389 USD..\nIncludes taxes and charges.",
                    "property": {
                        "wishlistName": "London",
                        "ufi": -2601889,
                        "reviewScore": 8,
                        "reviewCount": 104,
                        "id": 9814200,
                        "countryCode": "gb",
                        "longitude": -0.109204060119,
                        "position": 1,
                        "isPreferred": true,
                        "checkoutDate": "2024-10-06",
                        "checkinDate": "2024-10-05",
                        "checkin": {
                            "untilTime": "22:00",
                            "fromTime": "15:00"
                        },
                        "qualityClass": 4,
                        "checkout": {
                            "fromTime": "10:30",
                            "untilTime": "11:00"
                        },
                        "optOutFromGalleryChanges": 0,
                        "isFirstPage": true,
                        "blockIds": [
                            "981420006_370415512_0_0_0"
                        ],
                        "propertyClass": 0,
                        "reviewScoreWord": "Very good",
                        "name": "Avari Apartments - Hatton Collection",
                        "mainPhotoId": 507369508,
                        "priceBreakdown": {
                            "grossPrice": {
                                "value": 388.790765505876,
                                "currency": "USD"
                            },
                            "strikethroughPrice": {
                                "currency": "USD",
                                "value": 474.713999396674
                            },
                            "benefitBadges": [
                                {
                                    "explanation": "Mobile-only price",
                                    "text": "Mobile-only price",
                                    "identifier": "Mobile Rate",
                                    "variant": "constructive"
                                }
                            ]
                        },
                        "currency": "GBP",
                        "latitude": 51.52143704073,
                        "accuratePropertyClass": 0,
                        "rankingPosition": 1,
                        "isPreferredPlus": true
                    }
                },
                {
                    "hotel_id": 10790856,
                    "accessibilityLabel": "Signature London, The J Marylebone.\n4 out of 5 stars.\n7.9 Good 2153 reviews.\n‎2 km from centre‬.\n 2 hotel rooms : 2 beds.\nOriginal price 854 USD. Current price 769 USD..\nIncludes taxes and charges.\nFree cancellation.\nNo prepayment needed.",
                    "property": {
                        "isFirstPage": true,
                        "propertyClass": 4,
                        "blockIds": [
                            "1079085604_381825946_2_2_0",
                            "1079085604_381825946_2_2_0"
                        ],
                        "checkout": {
                            "fromTime": "11:00",
                            "untilTime": "12:00"
                        },
                        "optOutFromGalleryChanges": 0,
                        "qualityClass": 0,
                        "checkinDate": "2024-10-05",
                        "checkin": {
                            "fromTime": "15:00",
                            "untilTime": "00:00"
                        },
                        "checkoutDate": "2024-10-06",
                        "isPreferred": true,
                        "position": 2,
                        "longitude": -0.1661561,
                        "reviewScore": 7.9,
                        "ufi": -2601889,
                        "wishlistName": "London",
                        "id": 10790856,
                        "countryCode": "gb",
                        "reviewCount": 2153,
                        "isPreferredPlus": true,
                        "latitude": 51.5186535,
                        "rankingPosition": 2,
                        "accuratePropertyClass": 4,
                        "priceBreakdown": {
                            "benefitBadges": [
                                {
                                    "variant": "constructive",
                                    "text": "Mobile-only price",
                                    "identifier": "Mobile Rate",
                                    "explanation": "Mobile-only price"
                                }
                            ],
                            "grossPrice": {
                                "currency": "USD",
                                "value": 769.036679022612
                            },
                            "strikethroughPrice": {
                                "currency": "USD",
                                "value": 854.485198914013
                            }
                        },
                        "mainPhotoId": 497234227,
                        "name": "Signature London, The J Marylebone",
                        "currency": "GBP",
                        "reviewScoreWord": "Good"
                    }
                },
                {
                    "hotel_id": 36845,
                    "accessibilityLabel": "The Dilly.\n5 out of 5 stars.\n8.2 Very good 8390 reviews.\n‎450 m from centre‬.\n 2 hotel rooms : 3 beds.\nOriginal price 1219 USD. Current price 1156 USD..\nIncludes taxes and charges.\nFree cancellation.\nNo prepayment needed.",
                    "property": {
                        "name": "The Dilly",
                        "mainPhotoId": 286431489,
                        "priceBreakdown": {
                            "benefitBadges": [
                                {
                                    "identifier": "Mobile Rate",
                                    "text": "Mobile-only price",
                                    "variant": "constructive",
                                    "explanation": "Mobile-only price"
                                }
                            ],
                            "strikethroughPrice": {
                                "currency": "USD",
                                "value": 1219.48751845012
                            },
                            "grossPrice": {
                                "currency": "USD",
                                "value": 1155.9285885309
                            }
                        },
                        "currency": "GBP",
                        "reviewScoreWord": "Very good",
                        "isPreferredPlus": true,
                        "latitude": 51.509310883934,
                        "accuratePropertyClass": 5,
                        "rankingPosition": 3,
                        "longitude": -0.136169046163559,
                        "position": 3,
                        "isPreferred": true,
                        "checkoutDate": "2024-10-06",
                        "wishlistName": "London",
                        "ufi": -2601889,
                        "reviewScore": 8.2,
                        "reviewCount": 8390,
                        "countryCode": "gb",
                        "id": 36845,
                        "isFirstPage": true,
                        "propertyClass": 5,
                        "blockIds": [
                            "3684522_398991231_0_2_0",
                            "3684533_398991231_0_2_0"
                        ],
                        "checkin": {
                            "fromTime": "15:00",
                            "untilTime": "00:00"
                        },
                        "checkinDate": "2024-10-05",
                        "qualityClass": 0,
                        "optOutFromGalleryChanges": 0,
                        "checkout": {
                            "fromTime": "00:00",
                            "untilTime": "12:00"
                        }
                    }
                },
                {
                    "hotel_id": 7640682,
                    "accessibilityLabel": "The Lincoln Suites.\n4 out of 5 for property rating.\n8.9 Fabulous 2829 reviews.\n‎1.8 km from centre‬.\n Entire apartment – 40 m² : 2 beds • 1 bedroom • 1 living room • 1 bathroom.\nOriginal price 526 USD. Current price 479 USD..\nIncludes taxes and charges.\nFree cancellation.",
                    "property": {
                        "rankingPosition": 4,
                        "accuratePropertyClass": 0,
                        "latitude": 51.514421,
                        "currency": "GBP",
                        "priceBreakdown": {
                            "strikethroughPrice": {
                                "value": 526.101789831364,
                                "currency": "USD"
                            },
                            "grossPrice": {
                                "value": 478.749068391546,
                                "currency": "USD"
                            }
                        },
                        "name": "The Lincoln Suites",
                        "mainPhotoId": 314856509,
                        "reviewScoreWord": "Fabulous",
                        "blockIds": [
                            "764068208_343506157_4_0_0"
                        ],
                        "propertyClass": 0,
                        "isFirstPage": true,
                        "optOutFromGalleryChanges": 0,
                        "checkout": {
                            "untilTime": "11:00",
                            "fromTime": "08:00"
                        },
                        "checkinDate": "2024-10-05",
                        "checkin": {
                            "fromTime": "16:00",
                            "untilTime": "23:30"
                        },
                        "qualityClass": 4,
                        "position": 4,
                        "checkoutDate": "2024-10-06",
                        "isPreferred": true,
                        "longitude": -0.1187522,
                        "countryCode": "gb",
                        "id": 7640682,
                        "reviewCount": 2829,
                        "reviewScore": 8.9,
                        "wishlistName": "London",
                        "ufi": -2601889
                    }
                }
            ],
            "meta": [
                {
                    "title": "835 properties"
                }
            ],
            "appear": [
                {
                    "id": "cma",
                    "component": {
                        "props": {
                            "content": {
                                "props": {
                                    "items": [
                                        {
                                            "props": {
                                                "component": {
                                                    "props": {
                                                        "items": [
                                                            {
                                                                "props": {
                                                                    "text": [
                                                                        {
                                                                            "font": "body_2",
                                                                            "text": "Commission paid and other benefits may affect an accommodation's ranking."
                                                                        },
                                                                        {
                                                                            "font": "strong_2",
                                                                            "text": "  ",
                                                                            "color": "foreground"
                                                                        },
                                                                        {
                                                                            "text": "Find out more",
                                                                            "linkActions": [
                                                                                {}
                                                                            ],
                                                                            "font": "body_2",
                                                                            "color": "action_foreground"
                                                                        }
                                                                    ]
                                                                }
                                                            }
                                                        ],
                                                        "spacing": "spacing_half"
                                                    }
                                                }
                                            }
                                        },
                                        {},
                                        {
                                            "props": {
                                                "component": {
                                                    "props": {
                                                        "icon": "close",
                                                        "variant": "tertiary_tinted",
                                                        "tertiaryTintedColor": "foreground",
                                                        "accessibilityLabel": "Close"
                                                    }
                                                }
                                            }
                                        }
                                    ],
                                    "fitContentWidth": true
                                }
                            },
                            "fill": true
                        }
                    }
                },
                {},
                {
                    "component": {
                        "props": {
                            "text": "Properties with these icons have been awarded Booking.com's quality rating for homes"
                        }
                    },
                    "id": "banner_qualityrating"
                },
                {
                    "id": "signin_now",
                    "component": {
                        "props": {
                            "title": "Sign in and save money",
                            "text": "Get instant access to our Genius loyalty programme and enjoy discounts at properties worldwide."
                        }
                    }
                }
            ]
        }
    },
    {
        "status": true,
        "message": "Success",
        "data": {
            "meta": {
                "response_code": 200
            },
            "search_key": "eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMC0wNlQxNzowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6IjUxLjUwNzI4MiwtMC4xMzQ5MzU1OSIsImRyb3BPZmZMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicGlja1VwRGF0ZVRpbWUiOiIyMDI0LTEwLTA1VDA4OjAwOjAwIiwicGlja1VwTG9jYXRpb24iOiI1MS41MDcyODIsLTAuMTM0OTM1NTkiLCJwaWNrVXBMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicmVudGFsRHVyYXRpb25JbkRheXMiOjIsInNlcnZpY2VGZWF0dXJlcyI6WyJOT19PUEFRVUVTIiwiU1VQUkVTU19GSVhFRF9QUklDRV9WRUhJQ0xFUyIsIklOQ0xVREVfUFJPRFVDVF9SRUxBVElPTlNISVBTIiwiSU5DTFVERV9FWFRSQVNfQ09OVEFJTklOR19GRUVTIl19",
            "content": {
                "filters": {
                    "countLabel": "470 results"
                },
                "items": [
                    {
                        "positionInList": 3,
                        "content": {
                            "contentType": "carsSearchResultsSecondaryPromotional"
                        },
                        "type": "SHELL_REGION_VIEW"
                    }
                ]
            },
            "is_genius_location": true,
            "search_context": {
                "searchKey": "eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMC0wNlQxNzowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6IjUxLjUwNzI4MiwtMC4xMzQ5MzU1OSIsImRyb3BPZmZMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicGlja1VwRGF0ZVRpbWUiOiIyMDI0LTEwLTA1VDA4OjAwOjAwIiwicGlja1VwTG9jYXRpb24iOiI1MS41MDcyODIsLTAuMTM0OTM1NTkiLCJwaWNrVXBMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicmVudGFsRHVyYXRpb25JbkRheXMiOjIsInNlcnZpY2VGZWF0dXJlcyI6WyJOT19PUEFRVUVTIiwiU1VQUkVTU19GSVhFRF9QUklDRV9WRUhJQ0xFUyIsIklOQ0xVREVfUFJPRFVDVF9SRUxBVElPTlNISVBTIiwiSU5DTFVERV9FWFRSQVNfQ09OVEFJTklOR19GRUVTIl19",
                "searchId": "c8e1439f-feb0-4537-ae72-1b917a9e639f"
            },
            "search_results": [
                {
                    "vehicle_id": "711633466",
                    "fee_info": {
                        "tax": 0,
                        "fee": 0
                    },
                    "accessibility": {
                        "transmission": "Manual gearbox",
                        "fuel_policy": "Fuel policy is: Like for like",
                        "pick_up_location": "Pick-up information: Shuttle Bus",
                        "supplier_rating": "At this location, our customers have rated Budget as 7.5 out of 10, Good."
                    },
                    "supplier_info": {
                        "address": "London Heathrow Airport - T5 Bus Stop 25, Holiday Inn Heathrow, 276 Bath Road, London, UK, UB7 0DQ",
                        "latitude": "51.48155092",
                        "may_require_credit_card_guarantee": false,
                        "dropoff_instructions": "Please wait at bus stop 25 on the Arrivals level. A shuttle with 'Avis/Budget' on it will take you to the rental counter.",
                        "pickup_instructions": "Please wait at bus stop 25 on the Arrivals level. A shuttle with 'Avis/Budget' on it will take you to the rental counter.",
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/62_logo_200.png",
                        "longitude": "-0.46140678",
                        "name": "Budget",
                        "location_type": "Shuttle Bus"
                    },
                    "content": {
                        "supplier": {
                            "name": "Budget",
                            "rating": {
                                "average": "7.5",
                                "localisedRating": {
                                    "rawValue": 7.5,
                                    "displayValue": "7.5"
                                },
                                "subtitle": "64 reviews",
                                "title": "Good"
                            }
                        },
                        "badges": [
                            {
                                "variation": "DEFAULT",
                                "text": "Free cancellation",
                                "type": "CONSTRUCTIVE"
                            }
                        ]
                    },
                    "vehicle_info": {
                        "doors": "2",
                        "fuel_policy": "Like for like",
                        "free_cancellation": 1,
                        "mileage": "Unlimited mileage",
                        "seats": "4",
                        "unlimited_mileage": 1,
                        "label": "Mini car with:",
                        "fuel_type": "N/A",
                        "v_id": "711633466",
                        "v_name": "Fiat 500",
                        "suitcases": {
                            "small": "0",
                            "big": "0"
                        },
                        "airbags": 1,
                        "transmission": "Manual",
                        "aircon": 0,
                        "cma_compliant": -1,
                        "group": "Mini"
                    },
                    "rating_info": {
                        "dropoff_time": 9,
                        "condition": 8,
                        "pickup_time": 7.2,
                        "efficiency": 7.5,
                        "average_text": "Very good",
                        "cleanliness": 8.7,
                        "location": 6.7,
                        "average": 7.5,
                        "no_of_ratings": 64,
                        "value_for_money": 7
                    },
                    "freebies": [
                        "Amendments"
                    ],
                    "pricing_info": {
                        "base_currency": "INR",
                        "deposit": 107.39,
                        "base_price": 8994.31,
                        "base_deposit": 8994.31,
                        "price": 1.28,
                        "discount": 0,
                        "drive_away_price_is_approx": true,
                        "pay_when": "PAY_NOW",
                        "quote_allowed": 1,
                        "drive_away_price": 1.28,
                        "fee_breakdown": {
                            "known_fees": [
                                {
                                    "is_always_payable": 0,
                                    "is_tax_included": 1,
                                    "type": "ADMINISTRATION_FEE",
                                    "max_amount": 66,
                                    "min_amount": 66,
                                    "amount": 66,
                                    "currency": "GBP"
                                },
                                {
                                    "max_amount": 1500,
                                    "amount": 1500,
                                    "min_amount": 1500,
                                    "currency": "GBP",
                                    "is_always_payable": 0,
                                    "is_tax_included": 1,
                                    "type": "THEFT_EXCESS"
                                },
                                {
                                    "is_always_payable": 0,
                                    "is_tax_included": 1,
                                    "type": "DEPOSIT",
                                    "max_amount": 300,
                                    "amount": 300,
                                    "min_amount": 300,
                                    "currency": "GBP"
                                },
                                {
                                    "max_amount": 1500,
                                    "amount": 1500,
                                    "min_amount": 1500,
                                    "currency": "GBP",
                                    "is_always_payable": 0,
                                    "is_tax_included": 1,
                                    "type": "DAMAGE_EXCESS"
                                },
                                {
                                    "distance_allowed": {
                                        "is_unlimited": 1,
                                        "is_km": 0
                                    },
                                    "is_always_payable": 0,
                                    "type": "MILEAGE"
                                }
                            ],
                            "fuel_policy": {
                                "type": "RETURN_SAME",
                                "amount": 0
                            }
                        },
                        "currency": "USD"
                    },
                    "route_info": {
                        "pickup": {
                            "latitude": "51.48155092",
                            "address": "London Heathrow Airport - T5 Bus Stop 25, Holiday Inn Heathrow, 276 Bath Road, London, UK, UB7 0DQ",
                            "country_code": "GB",
                            "location_id": "4062673",
                            "longitude": "-0.46140678",
                            "name": "Heathrow Airport - Terminal 5",
                            "location_type": "SHUTTLE_BUS"
                        },
                        "dropoff": {
                            "location_type": "SHUTTLE_BUS",
                            "longitude": "-0.46140678",
                            "name": "Heathrow Airport - Terminal 5",
                            "location_id": "4062673",
                            "country_code": "GB",
                            "address": "London Heathrow Airport - T5 Bus Stop 25, Holiday Inn Heathrow, 276 Bath Road, London, UK, UB7 0DQ",
                            "latitude": "51.48155092"
                        }
                    }
                },
                {
                    "vehicle_id": "729653806",
                    "freebies": [
                        "Amendments"
                    ],
                    "pricing_info": {
                        "discount": 0,
                        "price": 1.28,
                        "base_price": 8994.31,
                        "base_deposit": 8994.31,
                        "deposit": 107.39,
                        "base_currency": "INR",
                        "quote_allowed": 1,
                        "drive_away_price_is_approx": true,
                        "pay_when": "PAY_NOW",
                        "drive_away_price": 1.28,
                        "currency": "USD",
                        "fee_breakdown": {
                            "fuel_policy": {
                                "amount": 0,
                                "type": "RETURN_SAME"
                            },
                            "known_fees": [
                                {
                                    "is_always_payable": 0,
                                    "is_tax_included": 1,
                                    "type": "ADMINISTRATION_FEE",
                                    "max_amount": 66,
                                    "amount": 66,
                                    "min_amount": 66,
                                    "currency": "GBP"
                                },
                                {
                                    "is_tax_included": 1,
                                    "type": "THEFT_EXCESS",
                                    "is_always_payable": 0,
                                    "currency": "GBP",
                                    "max_amount": 1500,
                                    "amount": 1500,
                                    "min_amount": 1500
                                },
                                {
                                    "is_always_payable": 0,
                                    "type": "DEPOSIT",
                                    "is_tax_included": 1,
                                    "min_amount": 300,
                                    "amount": 300,
                                    "max_amount": 300,
                                    "currency": "GBP"
                                },
                                {
                                    "min_amount": 1500,
                                    "amount": 1500,
                                    "max_amount": 1500,
                                    "currency": "GBP",
                                    "is_always_payable": 0,
                                    "type": "DAMAGE_EXCESS",
                                    "is_tax_included": 1
                                },
                                {
                                    "type": "MILEAGE",
                                    "is_always_payable": 0,
                                    "distance_allowed": {
                                        "is_km": 0,
                                        "is_unlimited": 1
                                    }
                                }
                            ]
                        }
                    },
                    "route_info": {
                        "pickup": {
                            "location_id": "4620072",
                            "country_code": "GB",
                            "location_type": "SHUTTLE_BUS",
                            "longitude": "-0.46140678",
                            "name": "Heathrow Airport - Terminal 5",
                            "address": "London Heathrow Airport - T5 Bus Stop 25, Holiday Inn Heathrow, 276 Bath Road, London Heathrow Airport, UK, UB7 0DQ",
                            "latitude": "51.48155092"
                        },
                        "dropoff": {
                            "latitude": "51.48155092",
                            "address": "London Heathrow Airport - T5 Bus Stop 25, Holiday Inn Heathrow, 276 Bath Road, London, UK, UB7 0DQ",
                            "longitude": "-0.46140678",
                            "name": "Heathrow Airport - Terminal 5",
                            "location_type": "SHUTTLE_BUS",
                            "country_code": "GB",
                            "location_id": "4062673"
                        }
                    },
                    "vehicle_info": {
                        "v_name": "Fiat 500",
                        "suitcases": {
                            "big": "0",
                            "small": "0"
                        },
                        "airbags": 1,
                        "fuel_type": "N/A",
                        "v_id": "729653806",
                        "cma_compliant": -1,
                        "group": "Mini",
                        "transmission": "Manual",
                        "aircon": 0,
                        "free_cancellation": 1,
                        "mileage": "Unlimited mileage",
                        "doors": "2",
                        "fuel_policy": "Like for like",
                        "unlimited_mileage": 1,
                        "label": "Mini car with:",
                        "seats": "4"
                    },
                    "rating_info": {
                        "dropoff_time": 9,
                        "condition": 8,
                        "pickup_time": 7.2,
                        "efficiency": 7.5,
                        "average_text": "Very good",
                        "cleanliness": 8.7,
                        "location": 6.7,
                        "no_of_ratings": 64,
                        "average": 7.5,
                        "value_for_money": 7
                    },
                    "content": {
                        "badges": [
                            {
                                "variation": "DEFAULT",
                                "text": "Free cancellation",
                                "type": "CONSTRUCTIVE"
                            }
                        ],
                        "supplier": {
                            "name": "Budget",
                            "rating": {
                                "average": "7.5",
                                "localisedRating": {
                                    "rawValue": 7.5,
                                    "displayValue": "7.5"
                                },
                                "subtitle": "64 reviews",
                                "title": "Good"
                            }
                        }
                    },
                    "supplier_info": {
                        "address": "London Heathrow Airport - T5 Bus Stop 25, Holiday Inn Heathrow, 276 Bath Road, London Heathrow Airport, UK, UB7 0DQ",
                        "latitude": "51.48155092",
                        "may_require_credit_card_guarantee": false,
                        "pickup_instructions": "Please wait at bus stop 25 on the Arrivals level. A shuttle with 'Avis/Budget' on it will take you to the rental counter.",
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/62_logo_200.png",
                        "longitude": "-0.46140678",
                        "name": "Budget",
                        "location_type": "Shuttle Bus"
                    },
                    "accessibility": {
                        "supplier_rating": "At this location, our customers have rated Budget as 7.5 out of 10, Good.",
                        "fuel_policy": "Fuel policy is: Like for like",
                        "pick_up_location": "Pick-up information: Shuttle Bus",
                        "transmission": "Manual gearbox"
                    },
                    "fee_info": {
                        "tax": 0,
                        "fee": 0
                    }
                },
                {
                    "vehicle_id": "729653171",
                    "fee_info": {
                        "fee": 0,
                        "tax": 0
                    },
                    "supplier_info": {
                        "pickup_instructions": "Please wait at bus stop 25 on the Arrivals level. A shuttle with 'Avis/Budget' on it will take you to the rental counter.",
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/47_logo_200.png",
                        "name": "Avis",
                        "longitude": "-0.46140678",
                        "location_type": "Shuttle Bus",
                        "address": "London Heathrow Airport - T5, Holiday Inn Heathrow, 276 Bath Road, London Heathrow Airport, UK, UB7 0DQ",
                        "latitude": "51.48155092",
                        "may_require_credit_card_guarantee": false
                    },
                    "accessibility": {
                        "transmission": "Manual gearbox",
                        "supplier_rating": "At this location, our customers have rated Avis as 8.3 out of 10, Very good.",
                        "pick_up_location": "Pick-up information: Shuttle Bus",
                        "fuel_policy": "Fuel policy is: Like for like"
                    },
                    "rating_info": {
                        "pickup_time": 7,
                        "efficiency": 8.4,
                        "dropoff_time": 9.4,
                        "condition": 8.3,
                        "average_text": "Excellent",
                        "location": 8.5,
                        "cleanliness": 9.1,
                        "value_for_money": 7.6,
                        "no_of_ratings": 101,
                        "average": 8.3
                    },
                    "vehicle_info": {
                        "doors": "2",
                        "fuel_policy": "Like for like",
                        "free_cancellation": 1,
                        "mileage": "Unlimited mileage",
                        "seats": "4",
                        "unlimited_mileage": 1,
                        "label": "Mini car with:",
                        "v_id": "729653171",
                        "fuel_type": "N/A",
                        "suitcases": {
                            "big": "0",
                            "small": "0"
                        },
                        "airbags": 1,
                        "v_name": "Fiat 500",
                        "aircon": 1,
                        "transmission": "Manual",
                        "group": "Mini",
                        "cma_compliant": -1
                    },
                    "content": {
                        "badges": [
                            {
                                "text": "Free cancellation",
                                "type": "CONSTRUCTIVE",
                                "variation": "DEFAULT"
                            }
                        ],
                        "supplier": {
                            "rating": {
                                "average": "8.3",
                                "localisedRating": {
                                    "displayValue": "8.3",
                                    "rawValue": 8.3
                                },
                                "subtitle": "101 reviews",
                                "title": "Very good"
                            },
                            "name": "Avis"
                        }
                    },
                    "pricing_info": {
                        "quote_allowed": 1,
                        "pay_when": "PAY_NOW",
                        "drive_away_price_is_approx": true,
                        "discount": 0,
                        "price": 1.42,
                        "base_deposit": 9932.88,
                        "base_price": 9932.88,
                        "deposit": 118.6,
                        "base_currency": "INR",
                        "currency": "USD",
                        "fee_breakdown": {
                            "fuel_policy": {
                                "type": "RETURN_SAME",
                                "amount": 0
                            },
                            "known_fees": [
                                {
                                    "type": "ADMINISTRATION_FEE",
                                    "is_tax_included": 1,
                                    "is_always_payable": 0,
                                    "currency": "GBP",
                                    "min_amount": 66,
                                    "amount": 66,
                                    "max_amount": 66
                                },
                                {
                                    "max_amount": 1500,
                                    "amount": 1500,
                                    "min_amount": 1500,
                                    "currency": "GBP",
                                    "is_always_payable": 0,
                                    "is_tax_included": 1,
                                    "type": "THEFT_EXCESS"
                                },
                                {
                                    "is_tax_included": 1,
                                    "type": "DEPOSIT",
                                    "is_always_payable": 0,
                                    "currency": "GBP",
                                    "max_amount": 300,
                                    "min_amount": 300,
                                    "amount": 300
                                },
                                {
                                    "is_always_payable": 0,
                                    "is_tax_included": 1,
                                    "type": "DAMAGE_EXCESS",
                                    "max_amount": 1500,
                                    "amount": 1500,
                                    "min_amount": 1500,
                                    "currency": "GBP"
                                },
                                {
                                    "distance_allowed": {
                                        "is_unlimited": 1,
                                        "is_km": 0
                                    },
                                    "is_always_payable": 0,
                                    "type": "MILEAGE"
                                }
                            ]
                        },
                        "drive_away_price": 1.42
                    },
                    "route_info": {
                        "dropoff": {
                            "longitude": "-0.46140678",
                            "name": "Heathrow Airport - Terminal 5",
                            "location_type": "SHUTTLE_BUS",
                            "location_id": "4062666",
                            "country_code": "GB",
                            "address": "London Heathrow Airport - T5, Holiday Inn Heathrow, 276 Bath Road, London, UK, UB7 0DQ",
                            "latitude": "51.48155092"
                        },
                        "pickup": {
                            "latitude": "51.48155092",
                            "address": "London Heathrow Airport - T5, Holiday Inn Heathrow, 276 Bath Road, London Heathrow Airport, UK, UB7 0DQ",
                            "country_code": "GB",
                            "location_id": "4620060",
                            "longitude": "-0.46140678",
                            "name": "Heathrow Airport - Terminal 5",
                            "location_type": "SHUTTLE_BUS"
                        }
                    },
                    "freebies": [
                        "Amendments"
                    ]
                },
                {
                    "vehicle_id": "668700781",
                    "pricing_info": {
                        "currency": "USD",
                        "fee_breakdown": {
                            "fuel_policy": {
                                "type": "RETURN_SAME",
                                "amount": 0
                            },
                            "known_fees": [
                                {
                                    "is_always_payable": 0,
                                    "is_tax_included": 1,
                                    "type": "ADMINISTRATION_FEE",
                                    "max_amount": 66,
                                    "amount": 66,
                                    "min_amount": 66,
                                    "currency": "GBP"
                                },
                                {
                                    "is_always_payable": 0,
                                    "type": "THEFT_EXCESS",
                                    "is_tax_included": 1,
                                    "amount": 1500,
                                    "min_amount": 1500,
                                    "max_amount": 1500,
                                    "currency": "GBP"
                                },
                                {
                                    "is_tax_included": 1,
                                    "type": "DEPOSIT",
                                    "is_always_payable": 0,
                                    "currency": "GBP",
                                    "max_amount": 300,
                                    "amount": 300,
                                    "min_amount": 300
                                },
                                {
                                    "is_always_payable": 0,
                                    "type": "DAMAGE_EXCESS",
                                    "is_tax_included": 1,
                                    "min_amount": 1500,
                                    "amount": 1500,
                                    "max_amount": 1500,
                                    "currency": "GBP"
                                },
                                {
                                    "type": "MILEAGE",
                                    "is_always_payable": 0,
                                    "distance_allowed": {
                                        "is_unlimited": 1,
                                        "is_km": 0
                                    }
                                }
                            ]
                        },
                        "drive_away_price": 1.42,
                        "pay_when": "PAY_NOW",
                        "drive_away_price_is_approx": true,
                        "quote_allowed": 1,
                        "base_price": 9932.88,
                        "base_deposit": 9932.88,
                        "price": 1.42,
                        "discount": 0,
                        "base_currency": "INR",
                        "deposit": 118.6
                    },
                    "route_info": {
                        "dropoff": {
                            "country_code": "GB",
                            "location_id": "4062666",
                            "longitude": "-0.46140678",
                            "name": "Heathrow Airport - Terminal 5",
                            "location_type": "SHUTTLE_BUS",
                            "latitude": "51.48155092",
                            "address": "London Heathrow Airport - T5, Holiday Inn Heathrow, 276 Bath Road, London, UK, UB7 0DQ"
                        },
                        "pickup": {
                            "address": "London Heathrow Airport - T5, Holiday Inn Heathrow, 276 Bath Road, London, UK, UB7 0DQ",
                            "latitude": "51.48155092",
                            "name": "Heathrow Airport - Terminal 5",
                            "longitude": "-0.46140678",
                            "location_type": "SHUTTLE_BUS",
                            "location_id": "4062666",
                            "country_code": "GB"
                        }
                    },
                    "freebies": [
                        "Amendments"
                    ],
                    "content": {
                        "badges": [
                            {
                                "text": "Free cancellation",
                                "type": "CONSTRUCTIVE",
                                "variation": "DEFAULT"
                            }
                        ],
                        "supplier": {
                            "name": "Avis",
                            "rating": {
                                "average": "8.3",
                                "localisedRating": {
                                    "rawValue": 8.3,
                                    "displayValue": "8.3"
                                },
                                "subtitle": "101 reviews",
                                "title": "Very good"
                            }
                        }
                    },
                    "rating_info": {
                        "average_text": "Excellent",
                        "pickup_time": 7,
                        "efficiency": 8.4,
                        "dropoff_time": 9.4,
                        "condition": 8.3,
                        "value_for_money": 7.6,
                        "no_of_ratings": 101,
                        "average": 8.3,
                        "location": 8.5,
                        "cleanliness": 9.1
                    },
                    "vehicle_info": {
                        "free_cancellation": 1,
                        "mileage": "Unlimited mileage",
                        "doors": "2",
                        "fuel_policy": "Like for like",
                        "unlimited_mileage": 1,
                        "label": "Mini car with:",
                        "seats": "4",
                        "v_name": "Fiat 500",
                        "suitcases": {
                            "small": "0",
                            "big": "0"
                        },
                        "airbags": 1,
                        "fuel_type": "N/A",
                        "v_id": "668700781",
                        "cma_compliant": -1,
                        "group": "Mini",
                        "transmission": "Manual",
                        "aircon": 1
                    },
                    "accessibility": {
                        "supplier_rating": "At this location, our customers have rated Avis as 8.3 out of 10, Very good.",
                        "fuel_policy": "Fuel policy is: Like for like",
                        "pick_up_location": "Pick-up information: Shuttle Bus",
                        "transmission": "Manual gearbox"
                    },
                    "supplier_info": {
                        "longitude": "-0.46140678",
                        "name": "Avis",
                        "location_type": "Shuttle Bus",
                        "dropoff_instructions": "Please wait at bus stop 25 on the Arrivals level. A shuttle with 'Avis/Budget' on it will take you to the rental counter.",
                        "pickup_instructions": "Please wait at bus stop 25 on the Arrivals level. A shuttle with 'Avis/Budget' on it will take you to the rental counter.",
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/47_logo_200.png",
                        "may_require_credit_card_guarantee": false,
                        "address": "London Heathrow Airport - T5, Holiday Inn Heathrow, 276 Bath Road, London, UK, UB7 0DQ",
                        "latitude": "51.48155092"
                    },
                    "fee_info": {
                        "tax": 0,
                        "fee": 0
                    }
                },
                {
                    "vehicle_id": "729653746",
                    "freebies": [
                        "Amendments"
                    ],
                    "route_info": {
                        "dropoff": {
                            "country_code": "GB",
                            "location_id": "4062673",
                            "location_type": "SHUTTLE_BUS",
                            "longitude": "-0.46140678",
                            "name": "Heathrow Airport - Terminal 5",
                            "latitude": "51.48155092",
                            "address": "London Heathrow Airport - T5 Bus Stop 25, Holiday Inn Heathrow, 276 Bath Road, London, UK, UB7 0DQ"
                        },
                        "pickup": {
                            "country_code": "GB",
                            "location_id": "4620072",
                            "longitude": "-0.46140678",
                            "name": "Heathrow Airport - Terminal 5",
                            "location_type": "SHUTTLE_BUS",
                            "latitude": "51.48155092",
                            "address": "London Heathrow Airport - T5 Bus Stop 25, Holiday Inn Heathrow, 276 Bath Road, London Heathrow Airport, UK, UB7 0DQ"
                        }
                    },
                    "pricing_info": {
                        "fee_breakdown": {
                            "fuel_policy": {
                                "type": "RETURN_SAME",
                                "amount": 0
                            },
                            "known_fees": [
                                {
                                    "max_amount": 66,
                                    "amount": 66,
                                    "min_amount": 66,
                                    "currency": "GBP",
                                    "is_always_payable": 0,
                                    "is_tax_included": 1,
                                    "type": "ADMINISTRATION_FEE"
                                },
                                {
                                    "is_always_payable": 0,
                                    "is_tax_included": 1,
                                    "type": "THEFT_EXCESS",
                                    "max_amount": 1500,
                                    "amount": 1500,
                                    "min_amount": 1500,
                                    "currency": "GBP"
                                },
                                {
                                    "is_always_payable": 0,
                                    "type": "DEPOSIT",
                                    "is_tax_included": 1,
                                    "min_amount": 300,
                                    "amount": 300,
                                    "max_amount": 300,
                                    "currency": "GBP"
                                },
                                {
                                    "type": "DAMAGE_EXCESS",
                                    "is_tax_included": 1,
                                    "is_always_payable": 0,
                                    "currency": "GBP",
                                    "amount": 1500,
                                    "min_amount": 1500,
                                    "max_amount": 1500
                                },
                                {
                                    "distance_allowed": {
                                        "is_unlimited": 1,
                                        "is_km": 0
                                    },
                                    "type": "MILEAGE",
                                    "is_always_payable": 0
                                }
                            ]
                        },
                        "currency": "USD",
                        "drive_away_price": 1.43,
                        "pay_when": "PAY_NOW",
                        "drive_away_price_is_approx": true,
                        "quote_allowed": 1,
                        "base_deposit": 10003.41,
                        "base_price": 10003.41,
                        "discount": 0,
                        "price": 1.43,
                        "base_currency": "INR",
                        "deposit": 119.44
                    },
                    "vehicle_info": {
                        "aircon": 1,
                        "transmission": "Manual",
                        "group": "Economy",
                        "cma_compliant": -1,
                        "v_id": "729653746",
                        "fuel_type": "N/A",
                        "suitcases": {
                            "big": "0",
                            "small": "0"
                        },
                        "airbags": 1,
                        "v_name": "Peugeot 208",
                        "seats": "5",
                        "unlimited_mileage": 1,
                        "label": "Economy car with:",
                        "doors": "4",
                        "fuel_policy": "Like for like",
                        "free_cancellation": 1,
                        "mileage": "Unlimited mileage"
                    },
                    "rating_info": {
                        "average_text": "Very good",
                        "condition": 8,
                        "dropoff_time": 9,
                        "pickup_time": 7.2,
                        "efficiency": 7.5,
                        "no_of_ratings": 64,
                        "average": 7.5,
                        "value_for_money": 7,
                        "cleanliness": 8.7,
                        "location": 6.7
                    },
                    "content": {
                        "supplier": {
                            "name": "Budget",
                            "rating": {
                                "localisedRating": {
                                    "rawValue": 7.5,
                                    "displayValue": "7.5"
                                },
                                "average": "7.5",
                                "title": "Good",
                                "subtitle": "64 reviews"
                            }
                        },
                        "badges": [
                            {
                                "variation": "DEFAULT",
                                "type": "CONSTRUCTIVE",
                                "text": "Free cancellation"
                            }
                        ]
                    },
                    "supplier_info": {
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/62_logo_200.png",
                        "pickup_instructions": "Please wait at bus stop 25 on the Arrivals level. A shuttle with 'Avis/Budget' on it will take you to the rental counter.",
                        "name": "Budget",
                        "longitude": "-0.46140678",
                        "location_type": "Shuttle Bus",
                        "latitude": "51.48155092",
                        "address": "London Heathrow Airport - T5 Bus Stop 25, Holiday Inn Heathrow, 276 Bath Road, London Heathrow Airport, UK, UB7 0DQ",
                        "may_require_credit_card_guarantee": false
                    },
                    "accessibility": {
                        "transmission": "Manual gearbox",
                        "pick_up_location": "Pick-up information: Shuttle Bus",
                        "fuel_policy": "Fuel policy is: Like for like",
                        "supplier_rating": "At this location, our customers have rated Budget as 7.5 out of 10, Good."
                    },
                    "fee_info": {
                        "tax": 0,
                        "fee": 0
                    }
                }
            ],
            "filter": [
                {
                    "title": "Location",
                    "layout": {
                        "is_collapsable": "false",
                        "is_collapsed": "false",
                        "collapsed_count": 6,
                        "layout_type": "list"
                    },
                    "categories": [
                        {
                            "nameWithCount": "All other locations (113)",
                            "count": 113,
                            "id": "depotLocationType::DOWNTOWN",
                            "name": "All other locations"
                        },
                        {
                            "id": "depotLocationType::MEET_GREET",
                            "name": "Airport (meet & greet)",
                            "count": 10,
                            "nameWithCount": "Airport (meet & greet) (10)"
                        },
                        {
                            "nameWithCount": "Train station (34)",
                            "count": 34,
                            "id": "depotLocationType::TRAINSTATION",
                            "name": "Train station"
                        },
                        {
                            "nameWithCount": "Airport (shuttle) (234)",
                            "count": 234,
                            "name": "Airport (shuttle)",
                            "id": "depotLocationType::SHUTTLE_BUS"
                        },
                        {
                            "count": 56,
                            "id": "depotLocationType::IN_TERMINAL",
                            "name": "Airport (in terminal)",
                            "nameWithCount": "Airport (in terminal) (56)"
                        }
                    ],
                    "id": "depotLocationType",
                    "type": "multiple_union"
                },
                {
                    "type": "multiple_union",
                    "id": "carCategory",
                    "categories": [
                        {
                            "name": "Small",
                            "id": "carCategory::small",
                            "count": 85,
                            "nameWithCount": "Small (85)"
                        },
                        {
                            "count": 212,
                            "name": "Medium",
                            "id": "carCategory::medium",
                            "nameWithCount": "Medium (212)"
                        },
                        {
                            "id": "carCategory::large",
                            "name": "Large",
                            "count": 193,
                            "nameWithCount": "Large (193)"
                        },
                        {
                            "nameWithCount": "Estate (23)",
                            "name": "Estate",
                            "id": "carCategory::estate",
                            "count": 23
                        },
                        {
                            "nameWithCount": "Premium (62)",
                            "count": 62,
                            "id": "carCategory::premium",
                            "name": "Premium"
                        }
                    ],
                    "layout": {
                        "is_collapsable": "true",
                        "is_collapsed": "true",
                        "layout_type": "list",
                        "collapsed_count": 5
                    },
                    "title": "Car Type"
                },
                {
                    "title": "Price per day",
                    "layout": {
                        "is_collapsed": "false",
                        "collapsed_count": 5,
                        "layout_type": "list",
                        "is_collapsable": "false"
                    },
                    "categories": [
                        {
                            "nameWithCount": "US$0 - US$50 (69)",
                            "id": "pricePerDayBuckets::BUCKET_1",
                            "name": "US$0 - US$50",
                            "count": 69
                        },
                        {
                            "nameWithCount": "US$50 - US$100 (155)",
                            "id": "pricePerDayBuckets::BUCKET_2",
                            "name": "US$50 - US$100",
                            "count": 155
                        },
                        {
                            "nameWithCount": "US$100 - US$150 (85)",
                            "count": 85,
                            "name": "US$100 - US$150",
                            "id": "pricePerDayBuckets::BUCKET_3"
                        },
                        {
                            "nameWithCount": "US$150 - US$200 (66)",
                            "name": "US$150 - US$200",
                            "id": "pricePerDayBuckets::BUCKET_4",
                            "count": 66
                        },
                        {
                            "count": 95,
                            "id": "pricePerDayBuckets::BUCKET_5",
                            "name": "US$200+",
                            "nameWithCount": "US$200+ (95)"
                        }
                    ],
                    "type": "multiple_union",
                    "id": "pricePerDayBuckets"
                },
                {
                    "title": "Supplier",
                    "categories": [
                        {
                            "count": 34,
                            "name": "Alamo",
                            "id": "supplier::Alamo",
                            "nameWithCount": "Alamo (34)"
                        },
                        {
                            "nameWithCount": "Arnold Clark (9)",
                            "count": 9,
                            "name": "Arnold Clark",
                            "id": "supplier::Arnold Clark"
                        },
                        {
                            "count": 82,
                            "id": "supplier::Avis",
                            "name": "Avis",
                            "nameWithCount": "Avis (82)"
                        },
                        {
                            "nameWithCount": "Budget (74)",
                            "name": "Budget",
                            "id": "supplier::Budget",
                            "count": 74
                        },
                        {
                            "id": "supplier::Drivalia",
                            "name": "Drivalia",
                            "count": 24,
                            "nameWithCount": "Drivalia (24)"
                        }
                    ],
                    "layout": {
                        "layout_type": "list",
                        "collapsed_count": 5,
                        "is_collapsed": "true",
                        "is_collapsable": "true"
                    },
                    "type": "multiple_union",
                    "id": "supplier"
                },
                {
                    "title": "Transmission",
                    "layout": {
                        "is_collapsed": "true",
                        "collapsed_count": 5,
                        "layout_type": "list",
                        "is_collapsable": "true"
                    },
                    "categories": [
                        {
                            "nameWithCount": "Automatic (294)",
                            "id": "transmission::AUTOMATIC",
                            "name": "Automatic",
                            "count": 294
                        },
                        {
                            "count": 176,
                            "id": "transmission::MANUAL",
                            "name": "Manual",
                            "nameWithCount": "Manual (176)"
                        }
                    ],
                    "type": "multiple_union",
                    "id": "transmission"
                }
            ],
            "type": "cars",
            "sort": [
                {
                    "title_tag": "tr.searchresults.sortBy.recommended",
                    "name": "Recommended – best first",
                    "identifier": "recommended"
                },
                {
                    "title_tag": "tr.searchresults.sortBy.price.lowHigh",
                    "name": "Price - lowest first",
                    "identifier": "price_low_to_high"
                },
                {
                    "identifier": "review_score",
                    "name": "Review score - highest first",
                    "title_tag": "tr.searchresults.sortBy.reviews.highLow"
                }
            ],
            "count": 470,
            "title": "Car rentals",
            "provider": "rentalcars"
        }
    }
]

2025-08-25 11:40:40,846 - evaluation_logger_Cross-19 - INFO - Final Response: <｜begin▁of▁sentence｜># 1. 前言

在上一篇文章中，我们实现了`axios`的基础功能，但到目前为止，我们都只是实现了一个很简单的`axios`，一个最最基础的`axios`，而`axios`官方提供的功能要远比我们目前实现的功能强大的多。那么，从本篇文章开始，我们就来一点点的为我们的`axios`添加新功能。

首先，我们为`axios`添加参数处理功能。我们知道，当我们请求的时候可以给`axios`传递一个配置对象，如：

```javascript
axios({
  method: "post",
  url: "/api/handleRequest",
  data: {
    a: 1,
    b: 2,
  },
});
```

在这个配置对象中，包含了请求方法`method`、请求`url`、请求`data`等等，而在我们之前的代码实现中，我们只处理了`method`、`url`和`data`，而其他的参数我们都没有处理。那么，接下来，我们就来处理配置对象中的其他参数。

# 2. 需求分析

官方`axios`请求配置对象中，除了`method`、`url`和`data`之外，还有很多其他参数，如：`params`、`headers`、`timeout`等等，我们不可能在这一篇文章中把所有的参数都处理完，我们先把一些常用的参数处理了，其他的参数我们会在后续的文章中陆续处理。

我们先来看一下官方`axios`请求配置对象中都有哪些参数，以及这些参数的作用：

- `url`：请求的服务器 URL，必填
- `method`：请求方法，默认是 `get`
- `baseURL`：将自动加在 `url` 前面，除非 `url` 是一个绝对 URL
- `transformRequest`：允许在向服务器发送前，修改请求数据，只能用在 'PUT', 'POST' 和 'PATCH' 这几个请求方法
- `transformResponse`：在传递给 then/catch 前，允许修改响应数据
- `headers`：自定义请求头
- `params`：URL 参数，必须是一个无格式对象(plain object)或 URLSearchParams 对象
- `paramsSerializer`：负责 `params` 序列化的函数
- `data`：作为请求主体被发送的数据，只适用于这些请求方法 'PUT', 'POST', 和 'PATCH'
- `timeout`：指定请求超时的毫秒数(0 表示无超时时间)
- `withCredentials`：表示跨域请求时是否需要使用凭证
- `adapter`：允许自定义处理请求，以使测试更轻松
- `auth`：表示应该使用 HTTP 基础验证，并提供凭据
- `responseType`：表示服务器响应的数据类型，可以是 'arraybuffer', 'blob', 'document', 'json', 'text', 'stream'
- `xsrfCookieName`：用作 xsrf token 的值的cookie的名称
- `xsrfHeaderName`：承载 xsrf token 的值的 HTTP 头的名称
- `onUploadProgress`：允许为上传处理进度事件
- `onDownloadProgress`：允许为下载处理进度事件
- `maxContentLength`：定义允许的响应内容的最大尺寸
- `validateStatus`：定义对于给定的HTTP 响应状态码是 resolve 或 reject
- `maxRedirects`：定义在 node.js 中 follow 的最大重定向数目
- `httpAgent` 和 `httpsAgent`：分别在 node.js 中用于定义在执行 http 和 https 时使用的自定义代理
- `proxy`：定义代理服务器的主机名称和端口
- `cancelToken`：指定用于取消请求的 cancel token

从上面可以看出，配置对象中的参数非常多，我们不可能在这一篇文章中全部处理，我们只处理一些常用的参数，如：`params`、`headers`、`timeout`、`withCredentials`、`responseType`等，其他的参数我们会在后续的文章中陆续处理。

# 3. 修改类型定义

由于我们要为`axios`添加参数处理功能，所以我们需要先修改一下类型定义，在类型定义中添加我们即将要处理的参数。

## 3.1 修改 `AxiosRequestConfig` 类型

我们在`src/types/index.ts`文件中，修改`AxiosRequestConfig`类型定义，添加`params`、`headers`、`timeout`、`withCredentials`、`responseType`等参数。

```typescript
export interface AxiosRequestConfig {
  url: string;
  method?: Method;
  data?: any;
  params?: any;
  headers?: any;
  timeout?: number;
  withCredentials?: boolean;
  responseType?: XMLHttpRequestResponseType;
}
```

这里要注意：`responseType` 的类型是 `XMLHttpRequestResponseType`，这个类型是 `XMLHttpRequest` 对象中 `responseType` 属性的类型，它的取值是 `"" | "arraybuffer" | "blob" | "document" | "json" | "text"`。

## 3.2 修改 `AxiosResponse` 类型

由于我们添加了`responseType`参数，所以我们需要修改`AxiosResponse`类型，因为`responseType`会影响响应数据的类型。

```typescript
export interface AxiosResponse {
  data: any;
  status: number;
  statusText: string;
  headers: any;
  config: AxiosRequestConfig;
  request: any;
}
```

## 3.3 修改 `AxiosPromise` 类型

由于`AxiosResponse`类型改变了，所以`AxiosPromise`类型也要跟着改变。

```typescript
export type AxiosPromise = Promise<AxiosResponse>;
```

# 4. 处理请求 `url` 参数

## 4.1 需求分析

我们给`axios`传递的配置对象中，有一个`params`参数，它是一个普通对象，如：

```javascript
axios({
  method: "get",
  url: "/api/handleRequest",
  params: {
    a: 1,
    b: 2,
  },
});
```

我们希望最终请求的 `url` 是 `/api/handleRequest?a=1&b=2`。这样，我们就需要把 `params` 对象转换成 `key1=val1&key2=val2` 的格式，然后拼接到 `url` 后面。

另外，我们还要处理一些特殊字符，如：`@`、`:`、`$`、`,`、` `、`[`、`]`等，这些特殊字符需要被转义。

## 4.2 实现 `buildURL` 函数

我们创建一个`src/helpers/url.ts`文件，用来处理`url`相关的辅助函数。

我们在`src/helpers/url.ts`文件中实现`buildURL`函数，用来构建`url`。

```typescript
import { isDate, isPlainObject } from "./util";

function encode(val: string): string {
  return encodeURIComponent(val)
    .replace(/%40/g, "@")
    .replace(/%3A/gi, ":")
    .replace(/%24/g, "$")
    .replace(/%2C/gi, ",")
    .replace(/%20/g, "+")
    .replace(/%5B/gi, "[")
    .replace(/%5D/gi, "]");
}

export function buildURL(url: string, params?: any): string {
  if (!params) {
    return url;
  }

  const parts: string[] = [];

  Object.keys(params).forEach((key) => {
    const val = params[key];
    if (val === null || typeof val === "undefined") {
      return;
    }
    let values = [];
    if (Array.isArray(val)) {
      values = val;
      key += "[]";
    } else {
      values = [val];
    }
    values.forEach((val) => {
      if (isDate(val)) {
        val = val.toISOString();
      } else if (isPlainObject(val)) {
        val = JSON.stringify(val);
      }
      parts.push(`${encode(key)}=${encode(val)}`);
    });
  });

  let serializedParams = parts.join("&");

  if (serializedParams) {
    const markIndex = url.indexOf("#");
    if (markIndex !== -1) {
      url = url.slice(0, markIndex);
    }

    url += (url.indexOf("?") === -1 ? "?" : "&") + serializedParams;
  }

  return url;
}
```

代码说明：

- 首先，我们定义了一个`encode`函数，用来对`val`进行编码，并且把一些特殊字符进行替换。
- 然后，我们定义了一个`buildURL`函数，它接收两个参数：`url`和`params`。
- 如果`params`为空，直接返回`url`。
- 定义一个数组`parts`，用来保存拼接的键值对。
- 遍历`params`的每一个`key`，拿到对应的`val`。
- 如果`val`是`null`或者`undefined`，则忽略。
- 如果`val`是数组，则给`key`添加`[]`后缀，并且把`val`赋值给`values`。
- 如果`val`不是数组，则把`val`包装成数组，赋值给`values`。
- 遍历`values`数组，如果`val`是`Date`类型，则调用`toISOString`方法转换成字符串。
- 如果`val`是普通对象，则调用`JSON.stringify`方法转换成字符串。
- 然后把`key`和`val`都进行编码，然后拼接到`parts`数组中。
- 最后，把`parts`数组用`&`连接起来，得到`serializedParams`。
- 如果`serializedParams`不为空，则判断`url`中是否有`#`，如果有，则去掉`#`及其后面的部分。
- 然后判断`url`中是否有`?`，如果有，则用`&`连接`serializedParams`，否则用`?`连接`serializedParams`。
- 最后返回拼接后的`url`。

## 4.3 在 `src/helpers/util.ts` 中添加工具函数

我们在`src/helpers/util.ts`文件中添加两个工具函数：`isDate`和`isPlainObject`。

```typescript
export function isDate(val: any): val is Date {
  return Object.prototype.toString.call(val) === "[object Date]";
}

export function isPlainObject(val: any): val is Object {
  return Object.prototype.toString.call(val) === "[object Object]";
}
```

## 4.4 在 `src/index.ts` 中使用 `buildURL` 函数

我们在`src/index.ts`文件中，在发送请求之前，先调用`buildURL`函数，构建`url`。

```typescript
import { buildURL } from "./helpers/url";

// 先删除之前对url的处理代码，然后添加以下代码
const { url: baseURL, params } = config;
const requestURL = buildURL(baseURL, params);
request.open(method.toUpperCase(), requestURL, true);
```

OK，这样我们就实现了对`params`参数的处理。

# 5. 处理请求 `body` 数据

## 5.1 需求分析

我们给`axios`传递的配置对象中，有一个`data`参数，它是一个普通对象，如：

```javascript
axios({
  method: "post",
  url: "/api/handleRequest",
  data: {
    a: 1,
    b: 2,
  },
});
```

我们希望最终发送的请求体是 `{"a":1,"b":2}`。这样，我们就需要把 `data` 对象转换成 JSON 字符串。

## 5.2 实现 `transformRequest` 函数

我们创建一个`src/helpers/data.ts`文件，用来处理`data`相关的辅助函数。

我们在`src/helpers/data.ts`文件中实现`transformRequest`函数，用来转换请求体数据。

```typescript
import { isPlainObject } from "./util";

export function transformRequest(data: any): any {
  if (isPlainObject(data)) {
    return JSON.stringify(data);
  }
  return data;
}
```

代码说明：

- 首先，我们判断`data`是否是普通对象，如果是，则调用`JSON.stringify`方法转换成字符串。
- 如果不是普通对象，则直接返回`data`。

## 5.3 在 `src/index.ts` 中使用 `transformRequest` 函数

我们在`src/index.ts`文件中，在发送请求之前，先调用`transformRequest`函数，转换请求体数据。

```typescript
import { transformRequest } from "./helpers/data";

// 先删除之前对data的处理代码，然后添加以下代码
const { data: requestData } = config;
const requestBody = transformRequest(requestData);
if (requestBody) {
  request.send(requestBody);
} else {
  request.send();
}
```

OK，这样我们就实现了对`data`参数的处理。

# 6. 处理请求 `headers`

## 6.1 需求分析

我们给`axios`传递的配置对象中，有一个`headers`参数，它是一个普通对象，如：

```javascript
axios({
  method: "post",
  url: "/api/handleRequest",
  headers: {
    "Content-Type": "application/json;charset=utf-8",
  },
  data: {
    a: 1,
    b: 2,
  },
});
```

我们希望最终发送的请求头中包含`Content-Type: application/json;charset=utf-8`。

另外，我们还要注意，当我们发送的是普通对象数据的时候，我们应该自动设置`Content-Type`为`application/json;charset=utf-8`，而当我们发送的是`FormData`、`ArrayBuffer`等类型的数据的时候，我们不应该设置`Content-Type`，因为浏览器会自动设置。

## 6.2 实现 `processHeaders` 函数

我们创建一个`src/helpers/headers.ts`文件，用来处理`headers`相关的辅助函数。

我们在`src/helpers/headers.ts`文件中实现`processHeaders`函数，用来处理请求头。

```typescript
import { isPlainObject } from "./util";

export function processHeaders(headers: any, data: any): any {
  if (isPlainObject(data)) {
    if (headers && !headers["Content-Type"]) {
      headers["Content-Type"] = "application/json;charset=utf-8";
    }
  }
  return headers;
}
```

代码说明：

- 首先，我们判断`data`是否是普通对象，如果是，则判断`headers`中是否已经设置了`Content-Type`，如果没有，则设置`Content-Type`为`application/json;charset=utf-8`。
- 最后返回`headers`。

## 6.3 在 `src/index.ts` 中使用 `processHeaders` 函数

我们在`src/index.ts`文件中，在发送请求之前，先调用`processHeaders`函数，处理请求头。

```typescript
import { processHeaders } from "./helpers/headers";

// 先删除之前对headers的处理代码，然后添加以下代码
const { headers: customHeaders, data: requestData } = config;
const headers = processHeaders(customHeaders, requestData);

if (headers) {
  Object.keys(headers).forEach((key) => {
    if (requestData && key.toLowerCase() === "content-type") {
      request.setRequestHeader(key, headers[key]);
    } else {
      request.setRequestHeader(key, headers[key]);
    }
  });
}
```

OK，这样我们就实现了对`headers`参数的处理。

# 7. 处理响应 `data`

## 7.1 需求分析

我们希望，当我们请求成功之后，我们能够拿到响应数据，并且如果响应数据是 JSON 字符串，我们希望自动转换成 JavaScript 对象。

## 7.2 实现 `transformResponse` 函数

我们在`src/helpers/data.ts`文件中实现`transformResponse`函数，用来转换响应数据。

```typescript
export function transformResponse(data: any): any {
  if (typeof data === "string") {
    try {
      data = JSON.parse(data);
    } catch (e) {
      // do nothing
    }
  }
  return data;
}
```

代码说明：

- 首先，我们判断`data`是否是字符串，如果是，则尝试调用`JSON.parse`方法转换成对象。
- 如果转换失败，则不做任何处理，直接返回`data`。
- 如果`data`不是字符串，则直接返回`data`。

## 7.3 在 `src/index.ts` 中使用 `transformResponse` 函数

我们在`src/index.ts`文件中，在请求成功之后，调用`transformResponse`函数，转换响应数据。

```typescript
import { transformResponse } from "./helpers/data";

// 先删除之前对responseData的处理代码，然后添加以下代码
const responseData = transformResponse(request.responseText);
```

OK，这样我们就实现了对响应`data`的处理。

# 8. 处理其他参数

## 8.1 处理 `timeout` 参数

`timeout`参数用来指定请求超时的毫秒数，我们可以在`src/index.ts`文件中，在发送请求之前，设置`timeout`。

```typescript
const { timeout } = config;

if (timeout) {
  request.timeout = timeout;
}
```

## 8.2 处理 `withCredentials` 参数

`withCredentials`参数用来表示跨域请求时是否需要使用凭证，我们可以在`src/index.ts`文件中，在发送请求之前，设置`withCredentials`。

```typescript
const { withCredentials } = config;

if (withCredentials) {
  request.withCredentials = withCredentials;
}
```

## 8.3 处理 `responseType` 参数

`responseType`参数用来表示服务器响应的数据类型，我们可以在`src/index.ts`文件中，在发送请求之前，设置`responseType`。

```typescript
const { responseType } = config;

if (responseType) {
  request.responseType = responseType;
}
```

# 9. 编写 demo

最后，我们编写一个`demo`来测试一下我们的代码。

我们在`examples/handleRequest`目录下创建`index.html`和`app.ts`文件。

`index.html`文件内容如下：

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>handleRequest demo</title>
  </head>
  <body>
    <script src="/__build__/handleRequest.js"></script>
  </body>
</html>
```

`app.ts`文件内容如下：

```typescript
import axios from "../../src/index";

// 处理get请求参数
axios({
  method: "get",
  url: "/api/handleRequest",
  params: {
    a: 1,
    b: 2,
  },
});

// 处理post请求参数
axios({
  method: "post",
  url: "/api/handleRequest",
  data: {
    a: 1

2025-08-25 11:40:48,429 - evaluation_logger_Cross-19 - INFO - Complete Result: {'score': 0, 'reason': "The response does not address any of the requested information in the user's query."}
2025-08-25 11:40:54,229 - evaluation_logger_Cross-19 - INFO - Correct Result: {'score': 0, 'reason': 'All information in the response is incorrect.'}
2025-08-25 11:40:54,229 - evaluation_logger_Cross-19 - INFO - Message: Success.
2025-08-25 11:40:54,229 - evaluation_logger_Cross-19 - INFO - Success turn num = 2
2025-08-25 11:40:54,229 - evaluation_logger_Cross-19 - INFO - ----------------------------------------------------------------------------------------------------
