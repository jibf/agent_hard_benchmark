2025-08-25 11:43:21,296 - evaluation_logger_Cross-91 - INFO - Test Example Cross-91
2025-08-25 11:43:21,296 - evaluation_logger_Cross-91 - INFO - Query: I want to leave San Francisco for Sydney to visit my friends on November 25, 2024. Help me look up the best air tickets. Also, arrange a taxi for me to get to and from the airport. I'm planning to leave Four Seasons Hotel San Francisco for the airport at 9 AM. The taxi should wait at the Sydney airport when the plane lands and take me to Shangri-La Hotel Sydney.
2025-08-25 11:43:32,869 - evaluation_logger_Cross-91 - INFO - Function Calls: 
[
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "San Francisco"
        }
    },
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "Sydney"
        }
    },
    {
        "name": "Taxi_Search_Location",
        "arguments": {
            "query": "Four Seasons Hotel San Francisco"
        }
    },
    {
        "name": "Taxi_Search_Location",
        "arguments": {
            "query": "Shangri-La Hotel Sydney"
        }
    }
]

2025-08-25 11:43:32,869 - evaluation_logger_Cross-91 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "San Francisco"
        }
    },
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "Sydney"
        }
    },
    {
        "name": "Taxi_Search_Location",
        "arguments": {
            "query": "Four Seasons Hotel San Francisco"
        }
    },
    {
        "name": "Taxi_Search_Location",
        "arguments": {
            "query": "Shangri-La Hotel Sydney"
        }
    },
    {
        "name": "Taxi_Search_Location",
        "arguments": {
            "query": "San Francisco International Airport"
        }
    },
    {
        "name": "Taxi_Search_Location",
        "arguments": {
            "query": "Sydney Kingsford Smith Airport"
        }
    },
    {
        "name": "Search_Flights",
        "arguments": {
            "fromId": "SFO.AIRPORT",
            "toId": "SYD.AIRPORT",
            "departDate": "2024-11-25",
            "sort": "BEST"
        }
    }
]

2025-08-25 11:43:32,869 - evaluation_logger_Cross-91 - INFO - Start compare_single_call: 
{'name': 'Search_Flight_Location', 'arguments': {'query': 'San Francisco'}}
{'name': 'Search_Flight_Location', 'arguments': {'query': 'San Francisco'}}
2025-08-25 11:43:32,869 - evaluation_logger_Cross-91 - INFO - Rule-based compare success.
2025-08-25 11:43:32,869 - evaluation_logger_Cross-91 - INFO - Start compare_single_call: 
{'name': 'Search_Flight_Location', 'arguments': {'query': 'Sydney'}}
{'name': 'Search_Flight_Location', 'arguments': {'query': 'Sydney'}}
2025-08-25 11:43:32,869 - evaluation_logger_Cross-91 - INFO - Rule-based compare success.
2025-08-25 11:43:32,869 - evaluation_logger_Cross-91 - INFO - Start compare_single_call: 
{'name': 'Taxi_Search_Location', 'arguments': {'query': 'Four Seasons Hotel San Francisco'}}
{'name': 'Taxi_Search_Location', 'arguments': {'query': 'Four Seasons Hotel San Francisco'}}
2025-08-25 11:43:32,869 - evaluation_logger_Cross-91 - INFO - Rule-based compare success.
2025-08-25 11:43:32,869 - evaluation_logger_Cross-91 - INFO - Start compare_single_call: 
{'name': 'Taxi_Search_Location', 'arguments': {'query': 'Shangri-La Hotel Sydney'}}
{'name': 'Taxi_Search_Location', 'arguments': {'query': 'Shangri-La Hotel Sydney'}}
2025-08-25 11:43:32,869 - evaluation_logger_Cross-91 - INFO - Rule-based compare success.
2025-08-25 11:43:32,869 - evaluation_logger_Cross-91 - INFO - Success matched: [{'name': 'Search_Flight_Location', 'arguments': {'query': 'San Francisco'}}, {'name': 'Search_Flight_Location', 'arguments': {'query': 'Sydney'}}, {'name': 'Taxi_Search_Location', 'arguments': {'query': 'Four Seasons Hotel San Francisco'}}, {'name': 'Taxi_Search_Location', 'arguments': {'query': 'Shangri-La Hotel Sydney'}}]
2025-08-25 11:43:32,870 - evaluation_logger_Cross-91 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "id": "SFO.AIRPORT",
                "type": "AIRPORT",
                "name": "San Francisco International Airport",
                "code": "SFO",
                "city": "SFO",
                "cityName": "San Francisco",
                "regionName": "California",
                "country": "US",
                "countryName": "United States",
                "countryNameShort": "US",
                "distanceToCity": {
                    "value": 19.16395121441966,
                    "unit": "km"
                },
                "parent": "SFO"
            }
        ]
    },
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "id": "SYD.AIRPORT",
                "type": "AIRPORT",
                "name": "Sydney Kingsford Smith Airport",
                "code": "SYD",
                "city": "SYD",
                "cityName": "Sydney",
                "regionName": "New South Wales",
                "country": "AU",
                "countryName": "Australia",
                "countryNameShort": "Australia",
                "distanceToCity": {
                    "value": 7.8384264645051225,
                    "unit": "km"
                },
                "parent": "SYD"
            }
        ]
    },
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "city": "San Francisco",
                "name": "Four Seasons Hotel San Francisco",
                "latitude": 37.786636,
                "longitude": -122.40457,
                "countryCode": "us",
                "country": "United States",
                "types": "hotel",
                "googlePlaceId": "ChIJaZ6Hg4iAhYARxTsHnDFJ9zE"
            }
        ]
    },
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "name": "Shangri-La Sydney",
                "countryCode": "au",
                "city": "The Rocks",
                "types": "establishment",
                "country": "Australia",
                "latitude": -33.8612507,
                "longitude": 151.2064256,
                "googlePlaceId": "ChIJsyWauUOuEmsRlyQeoNBkOXA",
                "description": "176 Cumberland St, The Rocks NSW 2000, Australia"
            }
        ]
    }
]

2025-08-25 11:43:46,152 - evaluation_logger_Cross-91 - INFO - Function Calls: 
[
    {
        "name": "Search_Flights",
        "arguments": {
            "fromId": "SFO.AIRPORT",
            "toId": "SYD.AIRPORT",
            "departDate": "2024-11-25",
            "sort": "BEST"
        }
    },
    {
        "name": "Taxi_Search_Location",
        "arguments": {
            "query": "San Francisco International Airport"
        }
    },
    {
        "name": "Taxi_Search_Location",
        "arguments": {
            "query": "Sydney Kingsford Smith Airport"
        }
    }
]

2025-08-25 11:43:46,152 - evaluation_logger_Cross-91 - INFO - Golden Function Call: 
[
    {
        "name": "Taxi_Search_Location",
        "arguments": {
            "query": "San Francisco International Airport"
        }
    },
    {
        "name": "Taxi_Search_Location",
        "arguments": {
            "query": "Sydney Kingsford Smith Airport"
        }
    },
    {
        "name": "Search_Flights",
        "arguments": {
            "departDate": "2024-11-25",
            "fromId": "SFO.AIRPORT",
            "sort": "BEST",
            "toId": "SYD.AIRPORT"
        }
    },
    {
        "name": "Search_Taxi",
        "arguments": {
            "pick_up_place_id": "ChIJaZ6Hg4iAhYARxTsHnDFJ9zE",
            "drop_off_place_id": "ChIJVVVVVYx3j4ARP-3NGldc8qQ",
            "pick_up_date": "2024-11-25",
            "pick_up_time": "09:00"
        }
    },
    {
        "name": "Search_Taxi",
        "arguments": {
            "pick_up_place_id": "ChIJ24MzG_GwEmsRd2VLWl01368",
            "drop_off_place_id": "ChIJsyWauUOuEmsRlyQeoNBkOXA",
            "pick_up_date": "2024-11-27",
            "pick_up_time": "09:15"
        }
    }
]

2025-08-25 11:43:46,152 - evaluation_logger_Cross-91 - INFO - Start compare_single_call: 
{'name': 'Search_Flights', 'arguments': {'departDate': '2024-11-25', 'fromId': 'SFO.AIRPORT', 'sort': 'BEST', 'toId': 'SYD.AIRPORT'}}
{'name': 'Search_Flights', 'arguments': {'departDate': '2024-11-25', 'fromId': 'SFO.AIRPORT', 'sort': 'BEST', 'toId': 'SYD.AIRPORT'}}
2025-08-25 11:43:46,152 - evaluation_logger_Cross-91 - INFO - Rule-based compare success.
2025-08-25 11:43:46,152 - evaluation_logger_Cross-91 - INFO - Start compare_single_call: 
{'name': 'Taxi_Search_Location', 'arguments': {'query': 'San Francisco International Airport'}}
{'name': 'Taxi_Search_Location', 'arguments': {'query': 'San Francisco International Airport'}}
2025-08-25 11:43:46,152 - evaluation_logger_Cross-91 - INFO - Rule-based compare success.
2025-08-25 11:43:46,153 - evaluation_logger_Cross-91 - INFO - Start compare_single_call: 
{'name': 'Taxi_Search_Location', 'arguments': {'query': 'Sydney Kingsford Smith Airport'}}
{'name': 'Taxi_Search_Location', 'arguments': {'query': 'Sydney Kingsford Smith Airport'}}
2025-08-25 11:43:46,153 - evaluation_logger_Cross-91 - INFO - Rule-based compare success.
2025-08-25 11:43:46,153 - evaluation_logger_Cross-91 - INFO - Success matched: [{'name': 'Search_Flights', 'arguments': {'departDate': '2024-11-25', 'fromId': 'SFO.AIRPORT', 'sort': 'BEST', 'toId': 'SYD.AIRPORT'}}, {'name': 'Taxi_Search_Location', 'arguments': {'query': 'San Francisco International Airport'}}, {'name': 'Taxi_Search_Location', 'arguments': {'query': 'Sydney Kingsford Smith Airport'}}]
2025-08-25 11:43:46,154 - evaluation_logger_Cross-91 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "flightOffers": [
                {
                    "token": "d7699_H4sIAAAAAAAA_y2PbW-CMBDHP42-o1AeREyaBYc4M5E4EB_eNKVWwCHdaLc5Pv06MNf8_v-73OV6pZQfYqbrl7oqSim0LwEKLnlBJAOU3_RLq5Bz_l41hU6qVk_CODkGprOJMx3qmgo6Oz6xu9RES9G4yhkgSPM8b7CCIvhwLZoAO7TDt2y770uUS2QDBx5e_CSeh-5QbNFynaXGoc_OKArET9z57iYV5iYQMMrK1TbbxLv6NI-7hRntDBGlx3uq-tbBYmQF_SCjajEAtusN6zkRj49wKhE0BnuWKFmnXnwaUolc6DhD2x1By5o6Y8FqRmXFm1f2i3b-dGJp6nj-bdracmQ-k8-8vjXKjCxfvQIbimVPgqHpKs2xN1FCBzljwgijyjFMFC_YVqwwBAb4n7ri1V5Jhy1pNtfuD2Qo7F-gAQAA",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "SFO",
                                "name": "San Francisco International Airport",
                                "city": "SFO",
                                "cityName": "San Francisco",
                                "country": "US",
                                "countryName": "United States",
                                "province": "California",
                                "provinceCode": "CA"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "SYD",
                                "name": "Sydney Kingsford Smith Airport",
                                "city": "SYD",
                                "cityName": "Sydney",
                                "country": "AU",
                                "countryName": "Australia",
                                "province": "New South Wales",
                                "provinceCode": "NSW"
                            },
                            "departureTime": "2024-11-25T22:55:00",
                            "arrivalTime": "2024-11-27T09:15:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-25T22:55:00",
                                    "arrivalTime": "2024-11-27T09:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "SFO",
                                        "name": "San Francisco International Airport",
                                        "city": "SFO",
                                        "cityName": "San Francisco",
                                        "country": "US",
                                        "countryName": "United States",
                                        "province": "California",
                                        "provinceCode": "CA"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "SYD",
                                        "name": "Sydney Kingsford Smith Airport",
                                        "city": "SYD",
                                        "cityName": "Sydney",
                                        "country": "AU",
                                        "countryName": "Australia",
                                        "province": "New South Wales",
                                        "provinceCode": "NSW"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 863,
                                        "planeType": "77W",
                                        "carrierInfo": {
                                            "operatingCarrier": "UA",
                                            "marketingCarrier": "UA"
                                        }
                                    },
                                    "carriers": [
                                        "UA",
                                        "UA"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "United Airlines",
                                            "code": "UA"
                                        },
                                        {
                                            "name": "United Airlines",
                                            "code": "UA"
                                        }
                                    ],
                                    "totalTime": 55200,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "777"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "I",
                                    "arrivalTerminal": "1"
                                }
                            ],
                            "totalTime": 55200,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                },
                {
                    "token": "d7699_H4sIAAAAAAAA_02PX2-CMBTFP42-USggiEmz4B_c5oS4gsy9NFgLwtQa2inz06-zPixt7u_cm3PS272UZzEyzfJQV3spjG8BKi55VUgGKD-aZavKlvOv-lSZRd2aOErwZmoP4mRtQtNQh442T6yThmgp6tdbBgpkBEGgpaAIPlSLPOBGbvS-XuX3EeUSuWAAP55DnIyjuR62aL4Y44nO79Bycr0mt1Asp0Ix8-Nm5cdptMGzKE0Pr_kqFV3cRPHbdGYvs6uv_N09yqh6GgDXD_QCvBCPVTiVCFpa7iTCb2mQfOpWIt-2LG3rEHSc4aAv2IFRWfPTgv2gLLRdKzDU__nFdo05ycKh86_v2RPoWeXxbCvVc0J1K2IBS3H_YEFyDCDESm5J4ClQjR0pSjr8szBSqFoSV9WaQKCDDXnJFW4EDi9l4_0CQrlGcbsBAAA.",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "SFO",
                                "name": "San Francisco International Airport",
                                "city": "SFO",
                                "cityName": "San Francisco",
                                "country": "US",
                                "countryName": "United States",
                                "province": "California",
                                "provinceCode": "CA"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "SYD",
                                "name": "Sydney Kingsford Smith Airport",
                                "city": "SYD",
                                "cityName": "Sydney",
                                "country": "AU",
                                "countryName": "Australia",
                                "province": "New South Wales",
                                "provinceCode": "NSW"
                            },
                            "departureTime": "2024-11-25T19:40:00",
                            "arrivalTime": "2024-11-27T09:05:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-25T19:40:00",
                                    "arrivalTime": "2024-11-25T21:11:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "SFO",
                                        "name": "San Francisco International Airport",
                                        "city": "SFO",
                                        "cityName": "San Francisco",
                                        "country": "US",
                                        "countryName": "United States",
                                        "province": "California",
                                        "provinceCode": "CA"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "LAX",
                                        "name": "Los Angeles International Airport",
                                        "city": "LAX",
                                        "cityName": "Los Angeles",
                                        "country": "US",
                                        "countryName": "United States",
                                        "province": "California",
                                        "provinceCode": "CA"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 2409,
                                        "planeType": "739",
                                        "carrierInfo": {
                                            "operatingCarrier": "UA",
                                            "marketingCarrier": "UA"
                                        }
                                    },
                                    "carriers": [
                                        "UA",
                                        "UA"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "United Airlines",
                                            "code": "UA"
                                        },
                                        {
                                            "name": "United Airlines",
                                            "code": "UA"
                                        }
                                    ],
                                    "totalTime": 5460,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "3",
                                    "arrivalTerminal": "7"
                                },
                                {
                                    "departureTime": "2024-11-25T22:40:00",
                                    "arrivalTime": "2024-11-27T09:05:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "LAX",
                                        "name": "Los Angeles International Airport",
                                        "city": "LAX",
                                        "cityName": "Los Angeles",
                                        "country": "US",
                                        "countryName": "United States",
                                        "province": "California",
                                        "provinceCode": "CA"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "SYD",
                                        "name": "Sydney Kingsford Smith Airport",
                                        "city": "SYD",
                                        "cityName": "Sydney",
                                        "country": "AU",
                                        "countryName": "Australia",
                                        "province": "New South Wales",
                                        "provinceCode": "NSW"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 839,
                                        "planeType": "789",
                                        "carrierInfo": {
                                            "operatingCarrier": "UA",
                                            "marketingCarrier": "UA"
                                        }
                                    },
                                    "carriers": [
                                        "UA",
                                        "UA"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "United Airlines",
                                            "code": "UA"
                                        },
                                        {
                                            "name": "United Airlines",
                                            "code": "UA"
                                        }
                                    ],
                                    "totalTime": 55500,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "787"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "7",
                                    "arrivalTerminal": "1"
                                }
                            ],
                            "totalTime": 66300,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                },
                {
                    "token": "d7699_H4sIAAAAAAAA_0WQXZOaMBRAf437RjAkitmZTCer0moFSkNx8SWDARHXmpZkC-XXN8rOdHLnnnNvviY5G_NLP7vu6drUZ6Oddw1qZVRdmApI9dM9tTYdlXprbrVbNK3Lg5jnK28WxZkLXccO-Zx_qnrj6FbSp-ZYgYI6hJBRtaSLD2vpHOAAB9-zZP9oSWUoBjP4-oXx-GWbj82Wft68vDL_UZU0XHZdPDAdrrTl2o8uiR-lQc7XQZpet_vkYg4_7Pw-C7vdag3TIddhmn2Lmj6PMnX3JGq6PsqYFw_bdLeONrvltOe8M-H93KUl75Okm6CVjce1lZQUAoB9Ah-1KjRFo0lD4XTU0lC-S0l8GEtDfQ-T8bU9hQgtZk-6ulbSNOr2tfpLGcNkThz7d-qPh51YMOaj_-XEW0K0kLcBW5sgZqMWUzC1PH-wENkBQMitHgWZW8gRpSjKEt-XVAJ5R2zlJO65ERCMey9is7cYRIHefpPLPxkCE3T5AQAA",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "SFO",
                                "name": "San Francisco International Airport",
                                "city": "SFO",
                                "cityName": "San Francisco",
                                "country": "US",
                                "countryName": "United States",
                                "province": "California",
                                "provinceCode": "CA"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "SYD",
                                "name": "Sydney Kingsford Smith Airport",
                                "city": "SYD",
                                "cityName": "Sydney",
                                "country": "AU",
                                "countryName": "Australia",
                                "province": "New South Wales",
                                "provinceCode": "NSW"
                            },
                            "departureTime": "2024-11-25T19:11:00",
                            "arrivalTime": "2024-11-27T09:00:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-25T19:11:00",
                                    "arrivalTime": "2024-11-25T20:42:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "SFO",
                                        "name": "San Francisco International Airport",
                                        "city": "SFO",
                                        "cityName": "San Francisco",
                                        "country": "US",
                                        "countryName": "United States",
                                        "province": "California",
                                        "provinceCode": "CA"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "LAX",
                                        "name": "Los Angeles International Airport",
                                        "city": "LAX",
                                        "cityName": "Los Angeles",
                                        "country": "US",
                                        "countryName": "United States",
                                        "province": "California",
                                        "provinceCode": "CA"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 4969,
                                        "planeType": "E75",
                                        "carrierInfo": {
                                            "operatingCarrier": "AA",
                                            "marketingCarrier": "AA",
                                            "operatingCarrierDisclosureText": "Skywest Airlines As American Eagle"
                                        }
                                    },
                                    "carriers": [
                                        "AA",
                                        "AA"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        },
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        }
                                    ],
                                    "totalTime": 5460,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "E175"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "1",
                                    "arrivalTerminal": "0"
                                },
                                {
                                    "departureTime": "2024-11-25T22:40:00",
                                    "arrivalTime": "2024-11-27T09:00:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "LAX",
                                        "name": "Los Angeles International Airport",
                                        "city": "LAX",
                                        "cityName": "Los Angeles",
                                        "country": "US",
                                        "countryName": "United States",
                                        "province": "California",
                                        "provinceCode": "CA"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "SYD",
                                        "name": "Sydney Kingsford Smith Airport",
                                        "city": "SYD",
                                        "cityName": "Sydney",
                                        "country": "AU",
                                        "countryName": "Australia",
                                        "province": "New South Wales",
                                        "provinceCode": "NSW"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 73,
                                        "planeType": "77W",
                                        "carrierInfo": {
                                            "operatingCarrier": "AA",
                                            "marketingCarrier": "AA"
                                        }
                                    },
                                    "carriers": [
                                        "AA",
                                        "AA"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        },
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        }
                                    ],
                                    "totalTime": 55200,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "777"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "0",
                                    "arrivalTerminal": "1"
                                }
                            ],
                            "totalTime": 67740,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                },
                {
                    "token": "d7699_H4sIAAAAAAAA_0WPbW-CMBSFf41-o1BAsCbNgi_o5oQ4QOe-NFALwpzdaKfMX7_Omixt7nPuzTnp7UHKTzEyzfJYVwcpjG8BKi55lUsGKP8wy1aVgvP3-lSZed2aSRgnu6k9iOKNCU1DHTraPbBOGqKluF8XDOTYQAhpKSiGd9ViD7ihG75s1tvbiHKJXTCAr4sgicfhQg9bPF-Ok4nO7_FqcrnE10CspkIx86Nm7UdpuEtmYZoen7brVHRRE0bP05m9yi6-8ne3KKPqaQBcH-kFeC7uq3AqMbS03EucPKcoftOtxL5tWdrWYeg4w0FfsCOjsuanJfvBWQBd5Bnq__xsu8acZMHQQf99z55Azyu-qkKpnhOoWxELWIqHO3OSpQDCRMmCIE-BauxJXtLhn4WRXNWSuKrWBAIdbMjjVuFK4PBcNt4vc3Lap7sBAAA.",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "SFO",
                                "name": "San Francisco International Airport",
                                "city": "SFO",
                                "cityName": "San Francisco",
                                "country": "US",
                                "countryName": "United States",
                                "province": "California",
                                "provinceCode": "CA"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "SYD",
                                "name": "Sydney Kingsford Smith Airport",
                                "city": "SYD",
                                "cityName": "Sydney",
                                "country": "AU",
                                "countryName": "Australia",
                                "province": "New South Wales",
                                "provinceCode": "NSW"
                            },
                            "departureTime": "2024-11-25T18:29:00",
                            "arrivalTime": "2024-11-27T09:05:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-25T18:29:00",
                                    "arrivalTime": "2024-11-25T20:00:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "SFO",
                                        "name": "San Francisco International Airport",
                                        "city": "SFO",
                                        "cityName": "San Francisco",
                                        "country": "US",
                                        "countryName": "United States",
                                        "province": "California",
                                        "provinceCode": "CA"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "LAX",
                                        "name": "Los Angeles International Airport",
                                        "city": "LAX",
                                        "cityName": "Los Angeles",
                                        "country": "US",
                                        "countryName": "United States",
                                        "province": "California",
                                        "provinceCode": "CA"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 1496,
                                        "planeType": "738",
                                        "carrierInfo": {
                                            "operatingCarrier": "UA",
                                            "marketingCarrier": "UA"
                                        }
                                    },
                                    "carriers": [
                                        "UA",
                                        "UA"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "United Airlines",
                                            "code": "UA"
                                        },
                                        {
                                            "name": "United Airlines",
                                            "code": "UA"
                                        }
                                    ],
                                    "totalTime": 5460,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "3",
                                    "arrivalTerminal": "7"
                                },
                                {
                                    "departureTime": "2024-11-25T22:40:00",
                                    "arrivalTime": "2024-11-27T09:05:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "LAX",
                                        "name": "Los Angeles International Airport",
                                        "city": "LAX",
                                        "cityName": "Los Angeles",
                                        "country": "US",
                                        "countryName": "United States",
                                        "province": "California",
                                        "provinceCode": "CA"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "SYD",
                                        "name": "Sydney Kingsford Smith Airport",
                                        "city": "SYD",
                                        "cityName": "Sydney",
                                        "country": "AU",
                                        "countryName": "Australia",
                                        "province": "New South Wales",
                                        "provinceCode": "NSW"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 839,
                                        "planeType": "789",
                                        "carrierInfo": {
                                            "operatingCarrier": "UA",
                                            "marketingCarrier": "UA"
                                        }
                                    },
                                    "carriers": [
                                        "UA",
                                        "UA"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "United Airlines",
                                            "code": "UA"
                                        },
                                        {
                                            "name": "United Airlines",
                                            "code": "UA"
                                        }
                                    ],
                                    "totalTime": 55500,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "787"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "7",
                                    "arrivalTerminal": "1"
                                }
                            ],
                            "totalTime": 70560,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                },
                {
                    "token": "d7699_H4sIAAAAAAAA_0WQ0U6DMBSGn2beUVZgFpY0BjfQzQEiyGQ3TSmMsU1raBXc09uBielJv-8_J22THqT8FHNd35-b-iCF9iVAzSWvqawA4-_6vlVbwfmp-ah12rR64kdJvjRmYZTpUNfUYvP8ruqlJlqGb5qiAhRrjuOMKhi2_6zFt8DyLf8li7dDi3GJLTCDb49uEt2vX8Zmix9W3kPgD6nEwaLroosrgqVQ9FB4jFGY-nni-Wl6Xm_jo9y9qvk2C7rN0oPpJRdBmj2HTZ-HGb96HDZdH2auEV3W6cYLV5vFtE-STgbXexeKSZ-9xhNzqWp4tmIMQwAs5MAhcyqwORqTGE5HLSVONqkT7cYoMYLINobQY2ia9uxGVOeKyYZ_PFU_2HVNwzY09Xf827C0iLguMm3035gYC4jKAz2dlE1MV1VNpmCqePgjJXEKdk_KCuLcKrARJaGFU1jKKmJSy1ayJ9fYEAjGo0ey2ipcCC0RP55_Acp2L8L6AQAA",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "SFO",
                                "name": "San Francisco International Airport",
                                "city": "SFO",
                                "cityName": "San Francisco",
                                "country": "US",
                                "countryName": "United States",
                                "province": "California",
                                "provinceCode": "CA"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "SYD",
                                "name": "Sydney Kingsford Smith Airport",
                                "city": "SYD",
                                "cityName": "Sydney",
                                "country": "AU",
                                "countryName": "Australia",
                                "province": "New South Wales",
                                "provinceCode": "NSW"
                            },
                            "departureTime": "2024-11-25T16:05:00",
                            "arrivalTime": "2024-11-27T07:25:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-25T16:05:00",
                                    "arrivalTime": "2024-11-25T17:32:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "SFO",
                                        "name": "San Francisco International Airport",
                                        "city": "SFO",
                                        "cityName": "San Francisco",
                                        "country": "US",
                                        "countryName": "United States",
                                        "province": "California",
                                        "provinceCode": "CA"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "LAX",
                                        "name": "Los Angeles International Airport",
                                        "city": "LAX",
                                        "cityName": "Los Angeles",
                                        "country": "US",
                                        "countryName": "United States",
                                        "province": "California",
                                        "provinceCode": "CA"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 3282,
                                        "planeType": "319",
                                        "carrierInfo": {
                                            "operatingCarrier": "AA",
                                            "marketingCarrier": "AA"
                                        }
                                    },
                                    "carriers": [
                                        "AA",
                                        "AA"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        },
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        }
                                    ],
                                    "totalTime": 5220,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A319"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "1",
                                    "arrivalTerminal": "0"
                                },
                                {
                                    "departureTime": "2024-11-25T21:20:00",
                                    "arrivalTime": "2024-11-27T07:25:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "LAX",
                                        "name": "Los Angeles International Airport",
                                        "city": "LAX",
                                        "cityName": "Los Angeles",
                                        "country": "US",
                                        "countryName": "United States",
                                        "province": "California",
                                        "provinceCode": "CA"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "SYD",
                                        "name": "Sydney Kingsford Smith Airport",
                                        "city": "SYD",
                                        "cityName": "Sydney",
                                        "country": "AU",
                                        "countryName": "Australia",
                                        "province": "New South Wales",
                                        "provinceCode": "NSW"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 7387,
                                        "planeType": "388",
                                        "carrierInfo": {
                                            "operatingCarrier": "QF",
                                            "marketingCarrier": "AA",
                                            "operatingCarrierDisclosureText": "Qantas Airways"
                                        }
                                    },
                                    "carriers": [
                                        "AA",
                                        "QF"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        },
                                        {
                                            "name": "Qantas Airways",
                                            "code": "QF"
                                        }
                                    ],
                                    "totalTime": 54300,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A380"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        }
                                    ],
                                    "departureTerminal": "B",
                                    "arrivalTerminal": "1"
                                }
                            ],
                            "totalTime": 73200,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                }
            ],
            "flightDeals": [
                {
                    "key": "CHEAPEST",
                    "offerToken": "d6a1f_H4sIAAAAAAAA_0WQa2-CMBSGf41-o1AuIibNwkA2bxAt4tiXptaKOLcutJvor18Vk6Un53neXpMelPqWI9Pcn-rqoKTxI0EllKio4oCJT3Pf6LYV4qP-qkxaNyZOMlzGtpdmhQlNQw82Kp94qwzZMNSvtxxQZARB0KlkaPiwBg2Am7jJqlhu7lNMKOQCD769hjh7ng26yQa9TAocTu5phxbR-ZxdQ7mIpebYT49LP82TEo-TPD9NN8ujbNP10J7HY5hfS7mJC3rzdVzKeTHF2cVqMT6rxe2OSBOfLVz1nFjX_QnOGIIAuH4A71lQiZzOmELQ6nSnEJ7nQfbeRYV86HndWoug4wy9vuQnzlQtvmb8gsLI86Ghv0n82q4xI2HkOP-xZ0fQuniQCW09J9RVEQtYmocHKVmlAEKsdUuCgQbrsCOUU860cXLbuCeu7jWBoDt4JJONxpXYog08-gcTXsTL4QEAAA..",
                    "price": {
                        "currencyCode": "USD",
                        "units": 715,
                        "nanos": 500000000
                    },
                    "travellerPrices": [
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 715,
                                    "nanos": 500000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 520,
                                    "nanos": 0
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 195,
                                    "nanos": 500000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 716
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 715,
                                    "nanos": 500000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 716
                                }
                            },
                            "travellerReference": "1",
                            "travellerType": "ADULT"
                        }
                    ]
                },
                {
                    "key": "FASTEST",
                    "offerToken": "d7699_H4sIAAAAAAAA_y2PbW-CMBDHP42-o1AeREyaBYc4M5E4EB_eNKVWwCHdaLc5Pv06MNf8_v-73OV6pZQfYqbrl7oqSim0LwEKLnlBJAOU3_RLq5Bz_l41hU6qVk_CODkGprOJMx3qmgo6Oz6xu9RES9G4yhkgSPM8b7CCIvhwLZoAO7TDt2y770uUS2QDBx5e_CSeh-5QbNFynaXGoc_OKArET9z57iYV5iYQMMrK1TbbxLv6NI-7hRntDBGlx3uq-tbBYmQF_SCjajEAtusN6zkRj49wKhE0BnuWKFmnXnwaUolc6DhD2x1By5o6Y8FqRmXFm1f2i3b-dGJp6nj-bdracmQ-k8-8vjXKjCxfvQIbimVPgqHpKs2xN1FCBzljwgijyjFMFC_YVqwwBAb4n7ri1V5Jhy1pNtfuD2Qo7F-gAQAA",
                    "price": {
                        "currencyCode": "USD",
                        "units": 715,
                        "nanos": 510000000
                    },
                    "travellerPrices": [
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 715,
                                    "nanos": 510000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 520,
                                    "nanos": 0
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 10000000
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 195,
                                    "nanos": 500000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 716
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 715,
                                    "nanos": 510000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 716
                                }
                            },
                            "travellerReference": "1",
                            "travellerType": "ADULT"
                        }
                    ]
                },
                {
                    "key": "BEST",
                    "offerToken": "d7699_H4sIAAAAAAAA_y2PbW-CMBDHP42-o1AeREyaBYc4M5E4EB_eNKVWwCHdaLc5Pv06MNf8_v-73OV6pZQfYqbrl7oqSim0LwEKLnlBJAOU3_RLq5Bz_l41hU6qVk_CODkGprOJMx3qmgo6Oz6xu9RES9G4yhkgSPM8b7CCIvhwLZoAO7TDt2y770uUS2QDBx5e_CSeh-5QbNFynaXGoc_OKArET9z57iYV5iYQMMrK1TbbxLv6NI-7hRntDBGlx3uq-tbBYmQF_SCjajEAtusN6zkRj49wKhE0BnuWKFmnXnwaUolc6DhD2x1By5o6Y8FqRmXFm1f2i3b-dGJp6nj-bdracmQ-k8-8vjXKjCxfvQIbimVPgqHpKs2xN1FCBzljwgijyjFMFC_YVqwwBAb4n7ri1V5Jhy1pNtfuD2Qo7F-gAQAA",
                    "price": {
                        "currencyCode": "USD",
                        "units": 715,
                        "nanos": 510000000
                    },
                    "travellerPrices": [
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 715,
                                    "nanos": 510000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 520,
                                    "nanos": 0
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 10000000
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 195,
                                    "nanos": 500000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 716
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 715,
                                    "nanos": 510000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 716
                                }
                            },
                            "travellerReference": "1",
                            "travellerType": "ADULT"
                        }
                    ]
                }
            ],
            "atolProtectedStatus": "NONE",
            "searchId": "C9554512FE70797A347AB0004A425A02",
            "displayOptions": {
                "brandedFaresShownByDefault": false,
                "directFlightsOnlyFilterIgnored": false,
                "hideFlexiblePricesBanner": false
            },
            "isOffersCabinClassExtended": false,
            "searchCriteria": {
                "cabinClass": "ECONOMY"
            }
        }
    },
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "country": "United States",
                "countryCode": "us",
                "longitude": -122.386,
                "latitude": 37.6163,
                "types": "airport",
                "name": "San Francisco International Airport",
                "iata": "SFO",
                "googlePlaceId": "ChIJVVVVVYx3j4ARP-3NGldc8qQ",
                "city": "San Francisco"
            }
        ]
    },
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "country": "Australia",
                "city": "Sydney",
                "iata": "SYD",
                "longitude": 151.173,
                "googlePlaceId": "ChIJ24MzG_GwEmsRd2VLWl01368",
                "name": "Sydney Kingsford Smith Airport",
                "latitude": -33.9343,
                "countryCode": "au",
                "types": "airport"
            }
        ]
    }
]

2025-08-25 11:44:04,063 - evaluation_logger_Cross-91 - INFO - Function Calls: 
[
    {
        "name": "Search_Taxi",
        "arguments": {
            "pick_up_place_id": "ChIJaZ6Hg4iAhYARxTsHnDFJ9zE",
            "drop_off_place_id": "ChIJVVVVVYx3j4ARP-3NGldc8qQ",
            "pick_up_date": "2024-11-25",
            "pick_up_time": "09:00"
        }
    },
    {
        "name": "Search_Taxi",
        "arguments": {
            "pick_up_place_id": "ChIJ24MzG_GwEmsRd2VLWl01368",
            "drop_off_place_id": "ChIJsyWauUOuEmsRlyQeoNBkOXA",
            "pick_up_date": "2024-11-27",
            "pick_up_time": "09:15"
        }
    }
]

2025-08-25 11:44:04,063 - evaluation_logger_Cross-91 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Taxi",
        "arguments": {
            "drop_off_place_id": "ChIJVVVVVYx3j4ARP-3NGldc8qQ",
            "pick_up_date": "2024-11-25",
            "pick_up_place_id": "ChIJaZ6Hg4iAhYARxTsHnDFJ9zE",
            "pick_up_time": "09:00"
        }
    },
    {
        "name": "Search_Taxi",
        "arguments": {
            "drop_off_place_id": "ChIJsyWauUOuEmsRlyQeoNBkOXA",
            "pick_up_date": "2024-11-27",
            "pick_up_place_id": "ChIJ24MzG_GwEmsRd2VLWl01368",
            "pick_up_time": "09:15"
        }
    }
]

2025-08-25 11:44:04,063 - evaluation_logger_Cross-91 - INFO - Start compare_single_call: 
{'name': 'Search_Taxi', 'arguments': {'drop_off_place_id': 'ChIJVVVVVYx3j4ARP-3NGldc8qQ', 'pick_up_date': '2024-11-25', 'pick_up_place_id': 'ChIJaZ6Hg4iAhYARxTsHnDFJ9zE', 'pick_up_time': '09:00'}}
{'name': 'Search_Taxi', 'arguments': {'drop_off_place_id': 'ChIJVVVVVYx3j4ARP-3NGldc8qQ', 'pick_up_date': '2024-11-25', 'pick_up_place_id': 'ChIJaZ6Hg4iAhYARxTsHnDFJ9zE', 'pick_up_time': '09:00'}}
2025-08-25 11:44:04,063 - evaluation_logger_Cross-91 - INFO - Rule-based compare success.
2025-08-25 11:44:04,063 - evaluation_logger_Cross-91 - INFO - Start compare_single_call: 
{'name': 'Search_Taxi', 'arguments': {'drop_off_place_id': 'ChIJsyWauUOuEmsRlyQeoNBkOXA', 'pick_up_date': '2024-11-27', 'pick_up_place_id': 'ChIJ24MzG_GwEmsRd2VLWl01368', 'pick_up_time': '09:15'}}
{'name': 'Search_Taxi', 'arguments': {'drop_off_place_id': 'ChIJsyWauUOuEmsRlyQeoNBkOXA', 'pick_up_date': '2024-11-27', 'pick_up_place_id': 'ChIJ24MzG_GwEmsRd2VLWl01368', 'pick_up_time': '09:15'}}
2025-08-25 11:44:04,063 - evaluation_logger_Cross-91 - INFO - Rule-based compare success.
2025-08-25 11:44:04,063 - evaluation_logger_Cross-91 - INFO - Success matched: [{'name': 'Search_Taxi', 'arguments': {'drop_off_place_id': 'ChIJVVVVVYx3j4ARP-3NGldc8qQ', 'pick_up_date': '2024-11-25', 'pick_up_place_id': 'ChIJaZ6Hg4iAhYARxTsHnDFJ9zE', 'pick_up_time': '09:00'}}, {'name': 'Search_Taxi', 'arguments': {'drop_off_place_id': 'ChIJsyWauUOuEmsRlyQeoNBkOXA', 'pick_up_date': '2024-11-27', 'pick_up_place_id': 'ChIJ24MzG_GwEmsRd2VLWl01368', 'pick_up_time': '09:15'}}]
2025-08-25 11:44:04,063 - evaluation_logger_Cross-91 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "journeys": [
                {
                    "pickupLocation": {
                        "city": "SF",
                        "description": "757 Market St, San Francisco, CA 94103, USA",
                        "name": "Four Seasons Hotel San Francisco, 757 Market St, San Francisco, CA 94103, USA",
                        "establishment": "Four Seasons Hotel San Francisco",
                        "locationId": "ChIJaZ6Hg4iAhYARxTsHnDFJ9zE",
                        "postcode": "94103",
                        "country": "US",
                        "locationType": "GEO",
                        "timezone": "America/Los_Angeles"
                    },
                    "requestedPickupDateTime": "2024-11-25T09:00:00",
                    "journeyDirection": "OUTBOUND",
                    "dropOffLocation": {
                        "establishment": "San Francisco International Airport (SFO)",
                        "name": "San Francisco International Airport (SFO), San Francisco, CA 94128, USA",
                        "description": "San Francisco, CA 94128, USA",
                        "airportCode": "SFO",
                        "city": "SF",
                        "locationType": "AIRPORT",
                        "country": "US",
                        "postcode": "94128",
                        "locationId": "ChIJVVVVVYx3j4ARP-3NGldc8qQ"
                    },
                    "janusSearchReference": "0086b2a4-81d9-4e5b-8592-204a204a88c3"
                }
            ],
            "results": [
                {
                    "cancellationLeadTimeMinutes": 1440,
                    "descriptionLocalised": "Perfect for solo travellers, couples and small families.",
                    "legPriceBreakdown": [
                        {
                            "supplierLocationId": 4929,
                            "price": {
                                "currencyCode": "USD",
                                "amount": "47.54"
                            },
                            "supplierId": 668,
                            "supplierName": "E-Life Limo",
                            "journeyDirection": "OUTBOUND"
                        }
                    ],
                    "price": {
                        "currencyCode": "USD",
                        "amount": "47.54"
                    },
                    "description": "Standard",
                    "janusResultReference": "1",
                    "vehicleType": "STANDARD",
                    "priceRuleId": 19305,
                    "bags": 3,
                    "passengerCapacity": 3,
                    "category": "Standard",
                    "discountType": "NONE",
                    "drivingDistance": 22.61,
                    "categoryLocalised": "Standard",
                    "supplierId": 668,
                    "duration": 23,
                    "nonRefundable": false,
                    "meetGreet": false,
                    "geniusDiscount": false,
                    "supplierName": "E-Life Limo",
                    "resultId": "c168eba7-be16-4e7c-8b54-511485e5f081"
                },
                {
                    "resultId": "ad5574c0-2230-4929-9847-2579bf23d12b",
                    "duration": 23,
                    "nonRefundable": false,
                    "supplierName": "E-Life Limo",
                    "geniusDiscount": false,
                    "meetGreet": false,
                    "category": "People Carrier",
                    "discountType": "NONE",
                    "supplierId": 668,
                    "drivingDistance": 22.61,
                    "categoryLocalised": "People carrier",
                    "passengerCapacity": 4,
                    "priceRuleId": 19309,
                    "bags": 4,
                    "description": "People Carrier",
                    "vehicleType": "LARGE",
                    "janusResultReference": "5",
                    "price": {
                        "amount": "55.82",
                        "currencyCode": "USD"
                    },
                    "legPriceBreakdown": [
                        {
                            "supplierLocationId": 4929,
                            "price": {
                                "amount": "55.82",
                                "currencyCode": "USD"
                            },
                            "supplierId": 668,
                            "supplierName": "E-Life Limo",
                            "journeyDirection": "OUTBOUND"
                        }
                    ],
                    "descriptionLocalised": "Great choice for families.",
                    "cancellationLeadTimeMinutes": 1440
                },
                {
                    "supplierName": "PT Tour",
                    "geniusDiscount": false,
                    "meetGreet": false,
                    "duration": 23,
                    "nonRefundable": false,
                    "supplierId": 2529,
                    "drivingDistance": 22.61,
                    "categoryLocalised": "Executive",
                    "category": "Executive",
                    "discountType": "NONE",
                    "resultId": "af854d58-a8aa-4120-a47c-c6c0426a8343",
                    "legPriceBreakdown": [
                        {
                            "supplierId": 2529,
                            "supplierName": "PT Tour",
                            "journeyDirection": "OUTBOUND",
                            "supplierLocationId": 6483,
                            "price": {
                                "amount": "67.16",
                                "currencyCode": "USD"
                            }
                        }
                    ],
                    "price": {
                        "currencyCode": "USD",
                        "amount": "67.16"
                    },
                    "descriptionLocalised": "Plenty of space to travel in comfort.",
                    "cancellationLeadTimeMinutes": 1440,
                    "passengerCapacity": 4,
                    "priceRuleId": 19306,
                    "bags": 2,
                    "vehicleType": "EXECUTIVE",
                    "janusResultReference": "2",
                    "description": "Executive"
                },
                {
                    "janusResultReference": "6",
                    "vehicleType": "LARGE",
                    "description": "Large People Carrier",
                    "priceRuleId": 19310,
                    "bags": 5,
                    "passengerCapacity": 5,
                    "cancellationLeadTimeMinutes": 1440,
                    "descriptionLocalised": "Ideal for small groups.",
                    "price": {
                        "amount": "70.07",
                        "currencyCode": "USD"
                    },
                    "legPriceBreakdown": [
                        {
                            "supplierLocationId": 4929,
                            "price": {
                                "currencyCode": "USD",
                                "amount": "70.07"
                            },
                            "supplierId": 668,
                            "supplierName": "E-Life Limo",
                            "journeyDirection": "OUTBOUND"
                        }
                    ],
                    "resultId": "bd05aa78-36ab-470e-be2f-e87250105122",
                    "drivingDistance": 22.61,
                    "categoryLocalised": "Large people carrier",
                    "supplierId": 668,
                    "category": "Large People Carrier",
                    "discountType": "NONE",
                    "meetGreet": false,
                    "supplierName": "E-Life Limo",
                    "geniusDiscount": false,
                    "nonRefundable": false,
                    "duration": 23
                },
                {
                    "resultId": "d5b3f706-89a6-4b87-8122-03fe96214054",
                    "supplierId": 668,
                    "categoryLocalised": "Electric Standard",
                    "drivingDistance": 22.61,
                    "discountType": "NONE",
                    "category": "Electric Standard",
                    "supplierName": "E-Life Limo",
                    "geniusDiscount": false,
                    "meetGreet": false,
                    "duration": 23,
                    "nonRefundable": false,
                    "vehicleType": "STANDARD",
                    "janusResultReference": "14",
                    "description": "Electric Standard",
                    "passengerCapacity": 3,
                    "bags": 3,
                    "priceRuleId": 119908,
                    "descriptionLocalised": "100% Electric",
                    "cancellationLeadTimeMinutes": 1440,
                    "legPriceBreakdown": [
                        {
                            "price": {
                                "currencyCode": "USD",
                                "amount": "80.22"
                            },
                            "supplierLocationId": 4929,
                            "journeyDirection": "OUTBOUND",
                            "supplierName": "E-Life Limo",
                            "supplierId": 668
                        }
                    ],
                    "price": {
                        "currencyCode": "USD",
                        "amount": "80.22"
                    }
                }
            ]
        }
    },
    {
        "status": true,
        "message": "Success",
        "data": {
            "journeys": [
                {
                    "janusSearchReference": "91b80fcd-916a-4338-8bf6-0086b814642a",
                    "journeyDirection": "OUTBOUND",
                    "requestedPickupDateTime": "2024-11-27T09:15:00",
                    "pickupLocation": {
                        "establishment": "Sydney Kingsford Smith International Airport (SYD)",
                        "airportCode": "SYD",
                        "country": "AU",
                        "postcode": "2020",
                        "name": "Sydney Kingsford Smith International Airport (SYD), Mascot NSW 2020, Australia",
                        "description": "Mascot NSW 2020, Australia",
                        "locationId": "ChIJ24MzG_GwEmsRd2VLWl01368",
                        "locationType": "AIRPORT",
                        "city": "Mascot",
                        "timezone": "Australia/Sydney"
                    },
                    "dropOffLocation": {
                        "city": "The Rocks",
                        "locationType": "GEO",
                        "locationId": "ChIJsyWauUOuEmsRlyQeoNBkOXA",
                        "description": "176 Cumberland St, The Rocks NSW 2000, Australia",
                        "postcode": "2000",
                        "name": "Shangri-La Sydney, 176 Cumberland St, The Rocks NSW 2000, Australia",
                        "country": "AU",
                        "establishment": "Shangri-La Sydney"
                    }
                }
            ],
            "results": [
                {
                    "passengerCapacity": 3,
                    "drivingDistance": 15.26,
                    "category": "Standard",
                    "duration": 17,
                    "price": {
                        "currencyCode": "USD",
                        "amount": "48.32"
                    },
                    "categoryLocalised": "Standard",
                    "supplierName": "Go Sydney Shuttles",
                    "supplierId": 494,
                    "meetGreet": true,
                    "geniusDiscount": false,
                    "janusResultReference": "1",
                    "description": "Standard",
                    "nonRefundable": false,
                    "resultId": "82fad5e3-4bdf-4450-9ce2-85fd3a10d8f7",
                    "vehicleType": "STANDARD",
                    "priceRuleId": 18816,
                    "descriptionLocalised": "Perfect for solo travellers, couples and small families.",
                    "legPriceBreakdown": [
                        {
                            "supplierName": "Go Sydney Shuttles",
                            "journeyDirection": "OUTBOUND",
                            "supplierId": 494,
                            "price": {
                                "currencyCode": "USD",
                                "amount": "48.32"
                            },
                            "supplierLocationId": 1829
                        }
                    ],
                    "cancellationLeadTimeMinutes": 1440,
                    "discountType": "NONE",
                    "bags": 3
                },
                {
                    "drivingDistance": 15.26,
                    "category": "People Carrier",
                    "duration": 17,
                    "price": {
                        "currencyCode": "USD",
                        "amount": "52.60"
                    },
                    "passengerCapacity": 4,
                    "geniusDiscount": false,
                    "meetGreet": true,
                    "description": "People Carrier",
                    "nonRefundable": false,
                    "janusResultReference": "5",
                    "supplierName": "Go Sydney Shuttles",
                    "categoryLocalised": "People carrier",
                    "supplierId": 494,
                    "priceRuleId": 18820,
                    "resultId": "375981ff-c524-4769-b0b0-30d24bdbde0e",
                    "vehicleType": "LARGE",
                    "discountType": "NONE",
                    "bags": 5,
                    "legPriceBreakdown": [
                        {
                            "supplierName": "Go Sydney Shuttles",
                            "journeyDirection": "OUTBOUND",
                            "supplierLocationId": 1829,
                            "supplierId": 494,
                            "price": {
                                "currencyCode": "USD",
                                "amount": "52.60"
                            }
                        }
                    ],
                    "cancellationLeadTimeMinutes": 1440,
                    "descriptionLocalised": "Great choice for families."
                },
                {
                    "geniusDiscount": false,
                    "meetGreet": true,
                    "janusResultReference": "6",
                    "description": "Large People Carrier",
                    "nonRefundable": false,
                    "supplierName": "Go Sydney Shuttles",
                    "categoryLocalised": "Large people carrier",
                    "supplierId": 494,
                    "duration": 17,
                    "category": "Large People Carrier",
                    "drivingDistance": 15.26,
                    "price": {
                        "amount": "68.22",
                        "currencyCode": "USD"
                    },
                    "passengerCapacity": 6,
                    "discountType": "NONE",
                    "bags": 6,
                    "descriptionLocalised": "Ideal for small groups.",
                    "legPriceBreakdown": [
                        {
                            "supplierLocationId": 1829,
                            "supplierId": 494,
                            "price": {
                                "amount": "68.22",
                                "currencyCode": "USD"
                            },
                            "supplierName": "Go Sydney Shuttles",
                            "journeyDirection": "OUTBOUND"
                        }
                    ],
                    "cancellationLeadTimeMinutes": 1440,
                    "priceRuleId": 18821,
                    "resultId": "abf18f60-cf3c-4abe-82a1-b4d2d3ff6116",
                    "vehicleType": "LARGE"
                },
                {
                    "discountType": "NONE",
                    "bags": 3,
                    "descriptionLocalised": "Plenty of space to travel in comfort.",
                    "legPriceBreakdown": [
                        {
                            "supplierId": 668,
                            "price": {
                                "amount": "69.74",
                                "currencyCode": "USD"
                            },
                            "supplierLocationId": 6087,
                            "supplierName": "E-Life Limo",
                            "journeyDirection": "OUTBOUND"
                        }
                    ],
                    "cancellationLeadTimeMinutes": 1440,
                    "priceRuleId": 18817,
                    "resultId": "70f359c0-3f4a-4832-a0b6-4325e0e338cf",
                    "vehicleType": "EXECUTIVE",
                    "geniusDiscount": false,
                    "meetGreet": true,
                    "janusResultReference": "2",
                    "nonRefundable": false,
                    "description": "Executive",
                    "supplierName": "E-Life Limo",
                    "categoryLocalised": "Executive",
                    "supplierId": 668,
                    "drivingDistance": 15.26,
                    "category": "Executive",
                    "duration": 17,
                    "price": {
                        "currencyCode": "USD",
                        "amount": "69.74"
                    },
                    "passengerCapacity": 3
                },
                {
                    "passengerCapacity": 3,
                    "price": {
                        "currencyCode": "USD",
                        "amount": "75.68"
                    },
                    "category": "Luxury",
                    "duration": 17,
                    "drivingDistance": 15.26,
                    "supplierId": 256,
                    "categoryLocalised": "Luxury",
                    "supplierName": "Car Australia",
                    "description": "Luxury",
                    "nonRefundable": false,
                    "janusResultReference": "4",
                    "geniusDiscount": false,
                    "meetGreet": true,
                    "vehicleType": "EXECUTIVE",
                    "resultId": "a1573082-c91e-4419-a1b6-4c4468fb35d5",
                    "priceRuleId": 18819,
                    "cancellationLeadTimeMinutes": 1440,
                    "legPriceBreakdown": [
                        {
                            "supplierId": 256,
                            "price": {
                                "amount": "75.68",
                                "currencyCode": "USD"
                            },
                            "supplierLocationId": 948,
                            "supplierName": "Car Australia",
                            "journeyDirection": "OUTBOUND"
                        }
                    ],
                    "descriptionLocalised": "Offers more room to arrive in style.",
                    "bags": 3,
                    "discountType": "NONE"
                }
            ]
        }
    }
]

2025-08-25 11:46:28,818 - evaluation_logger_Cross-91 - INFO - Final Response: <｜begin▁of▁sentence｜># 1. 概述

本文，我们来分享 [《精尽 Spring Boot 源码分析 —— SpringApplication》](http://svip.iocoder.cn/Spring-Boot/SpringApplication/) 的**初始化**的源码解析。

在 SpringApplication 实例对象创建时，会进行一些初始化的工作。虽然说，它还不是 Spring 容器的初始化，但是又是必要的步骤。例如说，配置 `primarySources` 属性、应用类型、ApplicationContextInitializer 等等。

# 2. 构造方法

`org.springframework.boot.SpringApplication` ，Spring 应用启动器。它的构造方法的代码如下：

```java
// SpringApplication.java

/**
 * 源（类）的集合
 */
private Set<Class<?>> primarySources;

/**
 * 应用上下文
 */
private ConfigurableApplicationContext applicationContext;

/**
 * 是否自定义环境
 */
private boolean customEnvironment = false;

/**
 * 是否打印 Banner
 */
private boolean bannerMode = Banner.Mode.CONSOLE;

/**
 * 是否打印启动信息
 */
private boolean logStartupInfo = true;

/**
 * 是否添加命令行属性
 */
private boolean addCommandLineProperties = true;

/**
 * 是否将 ConversionService 作为 Bean
 */
private boolean addConversionService = true;

/**
 * ApplicationContextInitializer 数组
 */
private List<ApplicationContextInitializer<?>> initializers;

/**
 * ApplicationListener 数组
 */
private List<ApplicationListener<?>> listeners;

/**
 * 应用类型
 */
private WebApplicationType webApplicationType;

/**
 * 启动类
 */
private Class<?> mainApplicationClass;

/**
 * 环境变量
 */
private ConfigurableEnvironment environment;

/**
 * Spring 应用启动器
 */
public SpringApplication(Class<?>... primarySources) {
    this(null, primarySources);
}

public SpringApplication(ResourceLoader resourceLoader, Class<?>... primarySources) {
    // <1> 设置 resourceLoader 属性
    this.resourceLoader = resourceLoader;
    // <2> 断言 primarySources 非空
    Assert.notNull(primarySources, "PrimarySources must not be null");
    // <3> 初始化 primarySources 属性
    this.primarySources = new LinkedHashSet<>(Arrays.asList(primarySources));
    // <4> 判断 Web 应用类型
    this.webApplicationType = WebApplicationType.deduceFromClasspath();
    // <5> 设置 ApplicationContextInitializer
    setInitializers((Collection) getSpringFactoriesInstances(ApplicationContextInitializer.class));
    // <6> 设置 ApplicationListener
    setListeners((Collection) getSpringFactoriesInstances(ApplicationListener.class));
    // <7> 推断启动类
    this.mainApplicationClass = deduceMainApplicationClass();
}
```

- 虽然代码有 7 个步骤，但是整体逻辑还是比较清晰的。我们逐个小步骤来看看。

## 2.1 resourceLoader

`resourceLoader` 属性，定义如下：

```java
// SpringApplication.java

/**
 * 资源加载器
 */
private ResourceLoader resourceLoader;
```

- 用于加载 Spring 配置资源的 ResourceLoader 对象。

- `<1>` 处，设置 `resourceLoader` 属性。一般情况下，传递的 `resourceLoader` 参数为 null ，所以此处的 `resourceLoader` 也会是 null 。不过不要慌，在 `#createApplicationContext()` 方法中，会进行设置。详细解析，见 [《精尽 Spring Boot 源码分析 —— SpringApplication》](http://svip.iocoder.cn/Spring-Boot/SpringApplication/) 的 [「3. createApplicationContext」](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) 中。

## 2.2 primarySources

`primarySources` 属性，定义如下：

```java
// SpringApplication.java

/**
 * 源（类）的集合
 */
private Set<Class<?>> primarySources;
```

- 源（类）的集合。在文初的示例中，就是 DemoApplication 类。

- `<2>` 处，断言 `primarySources` 非空。

- `<3>` 处，初始化 `primarySources` 属性。

## 2.3 webApplicationType

`webApplicationType` 属性，定义如下：

```java
// SpringApplication.java

/**
 * 应用类型
 */
private WebApplicationType webApplicationType;
```

- 应用类型，通过 `org.springframework.boot.WebApplicationType` 枚举类来定义。代码如下：

  ```java
  // WebApplicationType.java
  
  public enum WebApplicationType {
  
  	/**
  	 * 非 Web 项目
  	 */
  	NONE,
  
  	/**
  	 * 基于 Servlet 的 Web 项目
  	 */
  	SERVLET,
  
  	/**
  	 * 基于 Reactive 的 Web 项目
  	 */
  	REACTIVE;
  
  }
  ```

- `<4>` 处，调用 `WebApplicationType#deduceFromClasspath()` 方法，通过 classpath ，判断 Web 应用类型。详细解析，见 [「2.3.1 deduceFromClasspath」](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) 。

### 2.3.1 deduceFromClasspath

`#deduceFromClasspath()` 方法，通过 classpath 中，判断是否存在指定的类，从而判断 Web 应用类型。代码如下：

```java
// WebApplicationType.java

private static final String[] SERVLET_INDICATOR_CLASSES = { "javax.servlet.Servlet",
		"org.springframework.web.context.ConfigurableWebApplicationContext" };

private static final String WEBMVC_INDICATOR_CLASS = "org.springframework.web.servlet.DispatcherServlet";

private static final String WEBFLUX_INDICATOR_CLASS = "org.springframework.web.reactive.DispatcherHandler";

private static final String JERSEY_INDICATOR_CLASS = "org.glassfish.jersey.servlet.ServletContainer";

private static final String SERVLET_APPLICATION_CONTEXT_CLASS = "org.springframework.web.context.WebApplicationContext";

private static final String REACTIVE_APPLICATION_CONTEXT_CLASS = "org.springframework.boot.web.reactive.context.ReactiveWebApplicationContext";

static WebApplicationType deduceFromClasspath() {
    // 如果存在 REACTIVE 相关的类，则返回 REACTIVE 类型
	if (ClassUtils.isPresent(WEBFLUX_INDICATOR_CLASS, null) && !ClassUtils.isPresent(WEBMVC_INDICATOR_CLASS, null)
			&& !ClassUtils.isPresent(JERSEY_INDICATOR_CLASS, null)) {
		return WebApplicationType.REACTIVE;
	}
    // 如果不存在 SERVLET 相关的类，则返回 NONE 类型
	for (String className : SERVLET_INDICATOR_CLASSES) {
		if (!ClassUtils.isPresent(className, null)) {
			return WebApplicationType.NONE;
		}
	}
    // 如果存在 SERVLET 相关的类，则返回 SERVLET 类型
	return WebApplicationType.SERVLET;
}
```

- 逻辑比较简单，胖友自己瞅瞅。

## 2.4 initializers

`initializers` 属性，定义如下：

```java
// SpringApplication.java

/**
 * ApplicationContextInitializer 数组
 */
private List<ApplicationContextInitializer<?>> initializers;
```

- ApplicationContextInitializer 数组。ApplicationContextInitializer 是 Spring 框架的接口，主要目的是允许用户在 Spring 容器刷新之前初始化 Spring ConfigurableApplicationContext 的回调接口。

- `<5>` 处，设置 `initializers` 属性。详细解析，见 [「2.4.1 getSpringFactoriesInstances」](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) 中。

## 2.5 listeners

`listeners` 属性，定义如下：

```java
// SpringApplication.java

/**
 * ApplicationListener 数组
 */
private List<ApplicationListener<?>> listeners;
```

- ApplicationListener 数组。ApplicationListener 是 Spring 框架的事件监听器接口。

- `<6>` 处，设置 `listeners` 属性。详细解析，见 [「2.4.1 getSpringFactoriesInstances」](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) 中。

### 2.5.1 getSpringFactoriesInstances

`#getSpringFactoriesInstances(Class<T> type)` 方法，获得指定类对应的对象们。代码如下：

```java
// SpringApplication.java

private <T> Collection<T> getSpringFactoriesInstances(Class<T> type) {
	return getSpringFactoriesInstances(type, new Class<?>[] {});
}

private <T> Collection<T> getSpringFactoriesInstances(Class<T> type, Class<?>[] parameterTypes, Object... args) {
	ClassLoader classLoader = getClassLoader();
	// Use names and ensure unique to protect against duplicates
    // <1> 加载指定类型对应的，在 `META-INF/spring.factories` 里的类名的数组
	Set<String> names = new LinkedHashSet<>(SpringFactoriesLoader.loadFactoryNames(type, classLoader));
    // <2> 创建对象们
	List<T> instances = createSpringFactoriesInstances(type, parameterTypes, classLoader, args, names);
    // <3> 排序对象们
	AnnotationAwareOrderComparator.sort(instances);
	return instances;
}
```

- `<1>` 处，调用 `SpringFactoriesLoader#loadFactoryNames(Class<?> factoryClass, ClassLoader classLoader)` 方法，加载指定类型对应的，在 `META-INF/spring.factories` 里的类名的数组。

  - 在 Spring Boot 项目中，`META-INF/spring.factories` 文件位于 `spring-boot-autoconfigure` 项目资源目录下。例如：

    ![spring.factories](第二章-SpringApplication 初始化.assets/01.jpg)

  - 以 ApplicationContextInitializer 为例，对应的配置如下：

    ```properties
    # Application Context Initializers
    org.springframework.context.ApplicationContextInitializer=\
    org.springframework.boot.context.ConfigurationWarningsApplicationContextInitializer,\
    org.springframework.boot.context.ContextIdApplicationContextInitializer,\
    org.springframework.boot.context.config.DelegatingApplicationContextInitializer,\
    org.springframework.boot.web.context.ServerPortInfoApplicationContextInitializer
    ```

  - 关于 SpringFactoriesLoader 的源码解析，可见 [《【死磕 Spring】—— IoC 之加载 BeanDefinition》](http://svip.iocoder.cn/Spring/IoC-load-BeanDefinitions/?vip) 的 [「3. loadFactoryNames」](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) 小节。

- `<2>` 处，调用 `#createSpringFactoriesInstances(Class<T> type, Class<?>[] parameterTypes, ClassLoader classLoader, Object[] args, Set<String> names)` 方法，创建对象们。代码如下：

  ```java
  // SpringApplication.java
  
  private <T> List<T> createSpringFactoriesInstances(Class<T> type, Class<?>[] parameterTypes,
  		ClassLoader classLoader, Object[] args, Set<String> names) {
  	List<T> instances = new ArrayList<>(names.size());
  	for (String name : names) {
  		try {
  			Class<?> instanceClass = ClassUtils.forName(name, classLoader);
  			Assert.isAssignable(type, instanceClass);
  			Constructor<?> constructor = instanceClass.getDeclaredConstructor(parameterTypes);
  			T instance = (T) BeanUtils.instantiateClass(constructor, args);
  			instances.add(instance);
  		} catch (Throwable ex) {
  			throw new IllegalArgumentException("Cannot instantiate " + type + " : " + name, ex);
  		}
  	}
  	return instances;
  }
  ```

  - 通过反射，创建对象。

- `<3>` 处，调用 `AnnotationAwareOrderComparator#sort(List<?> list)` 方法，排序对象们。因为 ApplicationContextInitializer 是排序的，通过 `@Order` 注解。

## 2.6 mainApplicationClass

`mainApplicationClass` 属性，定义如下：

```java
// SpringApplication.java

/**
 * 启动类
 */
private Class<?> mainApplicationClass;
```

- 启动类。

- `<7>` 处，调用 `#deduceMainApplicationClass()` 方法，推断启动类。代码如下：

  ```java
  // SpringApplication.java
  
  private Class<?> deduceMainApplicationClass() {
  	try {
  		// 获得当前 Stack 中，有 main 方法的类
  		StackTraceElement[] stackTrace = new RuntimeException().getStackTrace();
  		for (StackTraceElement stackTraceElement : stackTrace) {
  			if ("main".equals(stackTraceElement.getMethodName())) {
  				return Class.forName(stackTraceElement.getClassName());
  			}
  		}
  	} catch (ClassNotFoundException ex) {
  		// Swallow and continue
  	}
  	return null;
  }
  ```

  - 通过构造一个 RuntimeException 异常，然后遍历异常栈，判断哪个类有 `#main(String[] args)` 方法，从而推断出启动类。

# 3. 小结

至此，SpringApplication 对象的初始化，就已经完成。让我们再来回顾下，SpringApplication 的**构造方法**，都做了哪些事情：

- 1. 设置 `resourceLoader` 属性。
- 2. 断言 `primarySources` 非空，并设置到 `primarySources` 属性。
- 3. 判断 Web 应用类型，并设置到 `webApplicationType` 属性。
- 4. 加载 `META-INF/spring.factories` 的 ApplicationContextInitializer 的实现类，并设置到 `initializers` 属性。
- 5. 加载 `META-INF/spring.factories` 的 ApplicationListener 的实现类，并设置到 `listeners` 属性。
- 6. 推断启动类，并设置到 `mainApplicationClass` 属性。

整体逻辑，还是相对简单的。不过此时，Spring 容器还未初始化。

2025-08-25 11:46:35,261 - evaluation_logger_Cross-91 - INFO - Complete Result: {'score': 0, 'reason': "The response does not address any of the requested information in the user's query."}
2025-08-25 11:46:42,941 - evaluation_logger_Cross-91 - INFO - Correct Result: {'score': 0, 'reason': 'All information in the response is incorrect.'}
2025-08-25 11:46:42,941 - evaluation_logger_Cross-91 - INFO - Message: Success.
2025-08-25 11:46:42,941 - evaluation_logger_Cross-91 - INFO - Success turn num = 3
2025-08-25 11:46:42,941 - evaluation_logger_Cross-91 - INFO - ----------------------------------------------------------------------------------------------------
