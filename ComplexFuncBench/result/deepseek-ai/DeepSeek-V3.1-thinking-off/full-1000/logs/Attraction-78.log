2025-08-25 13:04:14,735 - evaluation_logger_Attraction-78 - INFO - Test Example Attraction-78
2025-08-25 13:04:14,735 - evaluation_logger_Attraction-78 - INFO - Query: Check if tickets are available for the two most trending attractions in Poznan on any Tuesday in November 2024.
2025-08-25 13:04:22,728 - evaluation_logger_Attraction-78 - INFO - Function Calls: 
[
    {
        "name": "Search_Attraction_Location",
        "arguments": {
            "query": "Poznan"
        }
    }
]

2025-08-25 13:04:22,729 - evaluation_logger_Attraction-78 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Attraction_Location",
        "arguments": {
            "query": "Poznan"
        }
    },
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOi01MjM2NDJ9",
            "sortBy": "trending"
        }
    }
]

2025-08-25 13:04:22,729 - evaluation_logger_Attraction-78 - INFO - Start compare_single_call: 
{'name': 'Search_Attraction_Location', 'arguments': {'query': 'Poznan'}}
{'name': 'Search_Attraction_Location', 'arguments': {'query': 'Poznan'}}
2025-08-25 13:04:22,729 - evaluation_logger_Attraction-78 - INFO - Rule-based compare success.
2025-08-25 13:04:22,729 - evaluation_logger_Attraction-78 - INFO - Success matched: [{'name': 'Search_Attraction_Location', 'arguments': {'query': 'Poznan'}}]
2025-08-25 13:04:22,729 - evaluation_logger_Attraction-78 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "products": [
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFIzVlBWOXk5d2FNIiwidWZpIjotNTIzNjQyfQ==",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "Poznan Private Transfer from Poznan city centre to Poznan Airport",
                    "productId": "PR3VPV9y9waM",
                    "productSlug": "pr3vpv9y9wam-poznan-private-transfer-from-poznan-city-centre-to-poznan-airport",
                    "taxonomySlug": "transfers-services",
                    "cityUfi": -523642,
                    "cityName": "Poznan",
                    "countryCode": "pl"
                },
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFIzVGRuWUQweXNnIiwidWZpIjotNTIzNjQyfQ==",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "Poznan Highlights",
                    "productId": "PR3TdnYD0ysg",
                    "productSlug": "pr3tdnyd0ysg-poznan-highlights",
                    "taxonomySlug": "tours",
                    "cityUfi": -523642,
                    "cityName": "Poznan",
                    "countryCode": "pl"
                },
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFJPMUhsRUpRQlBHIiwidWZpIjotNTIzNjQyfQ==",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "Poznan Private Transfer from Poznan Airport to City centre",
                    "productId": "PRO1HlEJQBPG",
                    "productSlug": "pro1hlejqbpg-poznan-private-transfer-from-poznan-airport-to-city-centre",
                    "taxonomySlug": "transfers-services",
                    "cityUfi": -523642,
                    "cityName": "Poznan",
                    "countryCode": "pl"
                },
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFJ0UDVnYnlFWTdHIiwidWZpIjotNTIzNjQyfQ==",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "Poznan airport - Poznan City Private transfer",
                    "productId": "PRtP5gbyEY7G",
                    "productSlug": "prtp5gbyey7g-poznan-airport-poznan-city-private-transfer",
                    "taxonomySlug": "transfers-services",
                    "cityUfi": -523642,
                    "cityName": "Poznan",
                    "countryCode": "pl"
                },
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFJCckFGM2FzbGV0IiwidWZpIjotNTM3MDgwfQ==",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "Wroclaw - Poznan Round Trip",
                    "productId": "PRBrAF3aslet",
                    "productSlug": "prbraf3aslet-wroclaw-poznan-round-trip",
                    "taxonomySlug": "tours",
                    "cityUfi": -537080,
                    "cityName": "Wroclaw",
                    "countryCode": "pl"
                }
            ],
            "destinations": [
                {
                    "id": "eyJ1ZmkiOi01MjM2NDJ9",
                    "__typename": "AttractionsSearchDestinationSuggestion",
                    "ufi": -523642,
                    "country": "Poland",
                    "cityName": "Poznań",
                    "productCount": 31,
                    "cc1": "pl"
                }
            ]
        }
    }
]

2025-08-25 13:04:32,699 - evaluation_logger_Attraction-78 - INFO - Function Calls: 
[
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOi01MjM2NDJ9",
            "sortBy": "trending"
        }
    }
]

2025-08-25 13:04:32,700 - evaluation_logger_Attraction-78 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOi01MjM2NDJ9",
            "sortBy": "trending"
        }
    },
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRJnLT0DFDM9"
        }
    },
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRPtcBSozRB7"
        }
    }
]

2025-08-25 13:04:32,700 - evaluation_logger_Attraction-78 - INFO - Start compare_single_call: 
{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOi01MjM2NDJ9', 'sortBy': 'trending'}}
{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOi01MjM2NDJ9', 'sortBy': 'trending'}}
2025-08-25 13:04:32,700 - evaluation_logger_Attraction-78 - INFO - Rule-based compare success.
2025-08-25 13:04:32,700 - evaluation_logger_Attraction-78 - INFO - Success matched: [{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOi01MjM2NDJ9', 'sortBy': 'trending'}}]
2025-08-25 13:04:32,700 - evaluation_logger_Attraction-78 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "__typename": "AttractionsProductSearchResponse",
            "products": [
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": false
                    },
                    "id": "PRJnLT0DFDM9",
                    "name": "Poznan Data eSIM 0.5GB daily to 50GB 30 Days",
                    "slug": "prjnlt0dfdm9-poznan-data-esim-05gb-daily-to-50gb-30-days",
                    "shortDescription": "• Receive eSIM QR Code within minutes.\n• Simply scan the designated QR Code to set up the eSIM.\n•...",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 3.09,
                        "currency": "USD",
                        "publicAmount": 3.09
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 0,
                        "percentage": "0",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 3,
                            "total": 1
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Poznan",
                        "ufi": -523642
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIWTLozIr9jl"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIR8yTzFjkgH"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIPVA2jou0Y0"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIn9BBE5wJO8"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIbEDB2Cuc9E"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    }
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRPtcBSozRB7",
                    "name": "A Secret Diary Poznan Old Town City Exploration Game",
                    "slug": "prptcbsozrb7-a-secret-diary-poznan-old-town-city-exploration-game",
                    "shortDescription": "An city exploration game that takes players on a captivating journey through the historic streets...",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 8.61,
                        "currency": "USD",
                        "publicAmount": 10.76
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Poznan",
                        "ufi": -523642
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIyvPgMvk2Dd"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    }
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PReSqcjCipWd",
                    "name": "Old Town Poznan Walking Tour",
                    "slug": "presqcjcipwd-old-town-poznan-walking-tour",
                    "shortDescription": "A tour of the Old Town. Introduction to the History of Poznan - from the founding of the city to ...",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 17.23,
                        "currency": "USD",
                        "publicAmount": 17.23
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 0,
                        "percentage": "0",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4,
                            "total": 3
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Poznan",
                        "ufi": -523642
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIvUtpx3elX4"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIMhA3IgxPyp"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestseller",
                            "value": true,
                            "rank": 1
                        }
                    ]
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRtAWNfntr9a",
                    "name": "Poznań Experience 2-Hours Guided Walking Tour",
                    "slug": "prtawnfntr9a-poznan-experience-2-hours-guided-walking-tour",
                    "shortDescription": "Poznań Experience 2-Hours Guided Walking Tour is a fun walking tour that is perfect to discover t...",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 25.47,
                        "currency": "USD",
                        "publicAmount": 25.47
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 0,
                        "percentage": "0",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 5,
                            "total": 1
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Poznan",
                        "ufi": -523642
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIDy8FsVx7jy"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIzTOxXtGRXf"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIJzDGcVJTsI"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIFTzT2x1vi5"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIckOLggWPse"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    }
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRfKSX6rc6H1",
                    "name": "Highlights of Poznań Private 2 Hour Tour with a local Guide",
                    "slug": "prfksx6rc6h1-highlights-of-poznan-private-2-hour-tour-with-a-local-guide",
                    "shortDescription": "Discover Poznań's history and culture on a private walking tour. Your guide will make the experie...",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 99.32,
                        "currency": "USD",
                        "publicAmount": 99.32
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 0,
                        "percentage": "0",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 5,
                            "total": 1
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Poznan",
                        "ufi": -523642
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIYtuS0RSDvU"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIAJpsNxjSoS"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIbVitZgX7Dj"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIJoNqEh4UZ4"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OISNwFHOxNff"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIPHoS0hXt4F"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI4g6dOt6HzY"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIqncwiNqzR3"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OImcqfi8Ds2x"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIt75bW6eezb"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIxE6ylHDGOD"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI7nq99WnxfS"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    }
                }
            ],
            "filterStats": {
                "__typename": "FilterStats",
                "unfilteredProductCount": 31,
                "filteredProductCount": 31
            },
            "sorters": [
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Our top picks",
                    "value": "trending"
                },
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Most popular",
                    "value": "attr_book_score"
                },
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Lowest price",
                    "value": "lowest_price"
                }
            ],
            "defaultSorter": {
                "__typename": "AttractionsSorterOption",
                "name": "Our top picks",
                "value": "trending"
            },
            "filterOptions": {
                "__typename": "FilterOptions",
                "typeFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Tours",
                        "tagname": "tours",
                        "productCount": 12
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Museums, arts & culture",
                        "tagname": "museums-arts-culture",
                        "productCount": 10
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Nature & outdoor",
                        "tagname": "nature-outdoor",
                        "productCount": 9
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Entertainment & tickets",
                        "tagname": "entertainment-tickets",
                        "productCount": 2
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Food & drinks",
                        "tagname": "food-drinks",
                        "productCount": 2
                    }
                ],
                "labelFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Free cancellation",
                        "tagname": "free_cancellation",
                        "productCount": 30
                    }
                ],
                "ufiFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Poznan",
                        "tagname": "-523642",
                        "productCount": 31
                    }
                ],
                "priceFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "US$0 - US$22",
                        "tagname": "b0",
                        "productCount": 3
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$22 - US$44",
                        "tagname": "b1",
                        "productCount": 4
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$44 - US$83",
                        "tagname": "b2",
                        "productCount": 2
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$83 - US$138",
                        "tagname": "b3",
                        "productCount": 1
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$138+",
                        "tagname": "b4",
                        "productCount": 21
                    }
                ]
            }
        }
    }
]

2025-08-25 13:04:42,494 - evaluation_logger_Attraction-78 - INFO - Function Calls: 
[
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRJnLT0DFDM9"
        }
    },
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRPtcBSozRB7"
        }
    }
]

2025-08-25 13:04:42,494 - evaluation_logger_Attraction-78 - INFO - Golden Function Call: 
[
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRJnLT0DFDM9"
        }
    },
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRPtcBSozRB7"
        }
    }
]

2025-08-25 13:04:42,494 - evaluation_logger_Attraction-78 - INFO - Start compare_single_call: 
{'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRJnLT0DFDM9'}}
{'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRJnLT0DFDM9'}}
2025-08-25 13:04:42,494 - evaluation_logger_Attraction-78 - INFO - Rule-based compare success.
2025-08-25 13:04:42,494 - evaluation_logger_Attraction-78 - INFO - Start compare_single_call: 
{'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRPtcBSozRB7'}}
{'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRPtcBSozRB7'}}
2025-08-25 13:04:42,494 - evaluation_logger_Attraction-78 - INFO - Rule-based compare success.
2025-08-25 13:04:42,494 - evaluation_logger_Attraction-78 - INFO - Success matched: [{'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRJnLT0DFDM9'}}, {'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRPtcBSozRB7'}}]
2025-08-25 13:04:42,494 - evaluation_logger_Attraction-78 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "timestamp": 1729839340233,
        "data": [
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-27"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-28"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-31"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-19"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-20"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-23"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-24"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-27"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-28"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-19"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-20"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-23"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-24"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-27"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-28"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-31"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-19"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-20"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-23"
            }
        ]
    },
    {
        "status": true,
        "message": "Success",
        "timestamp": 1729839366134,
        "data": [
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-27"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-28"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-31"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-19"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-20"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-23"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-24"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-27"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-28"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-19"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-20"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-23"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-24"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-27"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-28"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-31"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-19"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-20"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-23"
            }
        ]
    }
]

2025-08-25 13:07:57,281 - evaluation_logger_Attraction-78 - INFO - Final Response: <｜begin▁of▁sentence｜># 1. 概述

本文，我们来分享 [《精尽 Spring Boot 源码分析 —— 自动配置》](http://svip.iocoder.cn/Spring-Boot/AutoConfiguration/) 的**源码解析**。

在 Spring Boot 中，提供了 `@EnableAutoConfiguration` 注解，用于开启自动配置功能。而该注解，是通过 `@Import` 注解，导入了一个 `AutoConfigurationImportSelector` 类，通过该类的 `#selectImports(AnnotationMetadata annotationMetadata)` 方法，扫描具有 `META-INF/spring.factories` 文件的 jar 包，进行自动配置。

下面，我们开始进入正文。

# 2. @EnableAutoConfiguration

`org.springframework.boot.autoconfigure.EnableAutoConfiguration` ，注解在类上，用于开启自动配置功能。代码如下：

```java
// EnableAutoConfiguration.java

@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Inherited
@AutoConfigurationPackage
@Import(AutoConfigurationImportSelector.class)
public @interface EnableAutoConfiguration {

	String ENABLED_OVERRIDE_PROPERTY = "spring.boot.enableautoconfiguration";

	/**
	 * Exclude specific auto-configuration classes such that they will never be applied.
	 * @return the classes to exclude
	 */
	Class<?>[] exclude() default {};

	/**
	 * Exclude specific auto-configuration class names such that they will never be
	 * applied.
	 * @return the class names to exclude
	 */
	String[] excludeName() default {};

}
```

- 核心是 `@Import(AutoConfigurationImportSelector.class)` 部分，借助 `AutoConfigurationImportSelector`，`@EnableAutoConfiguration` 可以帮助 SpringBoot 应用将所有符合条件的 `@Configuration` 配置都加载到当前 Spring Boot 创建并使用的 IoC 容器中。
- 可以通过 `@EnableAutoConfiguration` 的 `exclude` 或 `excludeName` 属性，指定需要排除的自动配置类。

# 3. AutoConfigurationImportSelector

`org.springframework.boot.autoconfigure.AutoConfigurationImportSelector` ，实现 DeferredImportSelector、BeanClassLoaderAware、ResourceLoaderAware、BeanFactoryAware、Ordered、Aware 接口，处理自动配置的 ImportSelector 实现类。

## 3.1 构造方法

```java
// AutoConfigurationImportSelector.java

private static final String[] NO_IMPORTS = {};

private static final Log logger = LogFactory.getLog(AutoConfigurationImportSelector.class);

private static final String PROPERTY_NAME_AUTOCONFIGURE_EXCLUDE = "spring.autoconfigure.exclude";

private ConfigurableListableBeanFactory beanFactory;

private Environment environment;

private ClassLoader beanClassLoader;

private ResourceLoader resourceLoader;

/**
 * 自动配置的缓存
 */
private ConfigurationClassFilter configurationClassFilter;
```

- `configurationClassFilter` 属性，自动配置的缓存。详细解析，见 [「3.4 ConfigurationClassFilter」](http://svip.iocoder.cn/Spring-Boot/AutoConfiguration/#) 。

## 3.2 selectImports

实现 `#selectImports(AnnotationMetadata annotationMetadata)` 方法，获得需要自动配置的配置类。代码如下：

```java
// AutoConfigurationImportSelector.java

@Override
public String[] selectImports(AnnotationMetadata annotationMetadata) {
    // <1> 判断自动配置开关是否打开
    if (!isEnabled(annotationMetadata)) {
        return NO_IMPORTS;
    }
    // <2> 获得所有需要自动配置的配置类
    AutoConfigurationEntry autoConfigurationEntry = getAutoConfigurationEntry(annotationMetadata);
    return StringUtils.toStringArray(autoConfigurationEntry.getConfigurations());
}
```

- `<1>` 处，调用 `#isEnabled(AnnotationMetadata metadata)` 方法，判断自动配置开关是否打开。默认情况下，是开启的。详细解析，见 [「3.2.1 isEnabled」](http://svip.iocoder.cn/Spring-Boot/AutoConfiguration/#) 。
- `<2>` 处，调用 `#getAutoConfigurationEntry(AnnotationMetadata annotationMetadata)` 方法，获得所有需要自动配置的配置类。详细解析，见 [「3.2.2 getAutoConfigurationEntry」](http://svip.iocoder.cn/Spring-Boot/AutoConfiguration/#) 。

### 3.2.1 isEnabled

`#isEnabled(AnnotationMetadata metadata)` 方法，判断自动配置开关是否打开。代码如下：

```java
// AutoConfigurationImportSelector.java

protected boolean isEnabled(AnnotationMetadata metadata) {
    // 当设置的是默认的容器时，返回 true，否则返回 false
    if (getClass() == AutoConfigurationImportSelector.class) {
        return getEnvironment().getProperty(EnableAutoConfiguration.ENABLED_OVERRIDE_PROPERTY, Boolean.class, true);
    }
    return true;
}
```

- 默认情况下，返回 `true`，即开启自动配置。

### 3.2.2 getAutoConfigurationEntry

`#getAutoConfigurationEntry(AnnotationMetadata annotationMetadata)` 方法，获得自动配置的配置类们。代码如下：

```java
// AutoConfigurationImportSelector.java

protected AutoConfigurationEntry getAutoConfigurationEntry(AnnotationMetadata annotationMetadata) {
    // <1> 判断自动配置开关是否打开
    if (!isEnabled(annotationMetadata)) {
        return EMPTY_ENTRY;
    }
    // <2> 获得 @EnableAutoConfiguration 注解的属性
    AnnotationAttributes attributes = getAttributes(annotationMetadata);
    // <3> 获得所有需要自动配置的配置类
    List<String> configurations = getCandidateConfigurations(annotationMetadata, attributes);
    // <4> 移除重复的配置类
    configurations = removeDuplicates(configurations);
    // <5> 获得需要排除的配置类
    Set<String> exclusions = getExclusions(annotationMetadata, attributes);
    // 校验需要排除的配置类是否合法
    checkExcludedClasses(configurations, exclusions);
    // <6> 从 configurations 中，移除需要排除的配置类
    configurations.removeAll(exclusions);
    // <7> 对 configurations 进行过滤
    configurations = getConfigurationClassFilter().filter(configurations);
    // <8> 触发自动配置导入事件
    fireAutoConfigurationImportEvents(configurations, exclusions);
    // <9> 创建 AutoConfigurationEntry 对象
    return new AutoConfigurationEntry(configurations, exclusions);
}
```

- `<1>` 处，判断自动配置开关是否打开。如果关闭，则返回空的 AutoConfigurationEntry 对象。
- `<2>` 处，调用 `#getAttributes(AnnotationMetadata metadata)` 方法，获得 `@EnableAutoConfiguration` 注解的属性。代码如下：

  ```java
  // AutoConfigurationImportSelector.java
  
  protected AnnotationAttributes getAttributes(AnnotationMetadata metadata) {
      String name = getAnnotationClass().getName();
      AnnotationAttributes attributes = AnnotationAttributes.fromMap(metadata.getAnnotationAttributes(name, true));
      Assert.notNull(attributes, () -> "No auto-configuration attributes found. Is " + metadata.getClassName()
              + " annotated with " + ClassUtils.getShortName(name) + "?");
      return attributes;
  }
  
  protected Class<?> getAnnotationClass() {
      return EnableAutoConfiguration.class;
  }
  ```

- `<3>` 处，调用 `#getCandidateConfigurations(AnnotationMetadata metadata, AnnotationAttributes attributes)` 方法，获得所有需要自动配置的配置类。详细解析，见 [「3.3 getCandidateConfigurations」](http://svip.iocoder.cn/Spring-Boot/AutoConfiguration/#) 。
- `<4>` 处，调用 `#removeDuplicates(List<?> list)` 方法，移除重复的配置类。代码如下：

  ```java
  // AutoConfigurationImportSelector.java
  
  protected final <T> List<T> removeDuplicates(List<T> list) {
  	return new ArrayList<>(new LinkedHashSet<>(list));
  }
  ```

- `<5>` 处，调用 `#getExclusions(AnnotationMetadata metadata, AnnotationAttributes attributes)` 方法，获得需要排除的配置类。代码如下：

  ```java
  // AutoConfigurationImportSelector.java
  
  protected Set<String> getExclusions(AnnotationMetadata metadata, AnnotationAttributes attributes) {
      Set<String> excluded = new LinkedHashSet<>();
      // 从注解属性中获得
      excluded.addAll(asList(attributes, "exclude"));
      // 从注解属性中获得
      excluded.addAll(asList(attributes, "excludeName"));
      // 从配置文件中获得
      excluded.addAll(getExcludeAutoConfigurationsProperty());
      return excluded;
  }
  ```

  - 有三种方式，可以配置需要排除的配置类。

- `<6>` 处，从 `configurations` 中，移除需要排除的配置类。
- `<7>` 处，调用 `#getConfigurationClassFilter()` 方法，获得 ConfigurationClassFilter 对象，并对 `configurations` 进行过滤。详细解析，见 [「3.4 ConfigurationClassFilter」](http://svip.iocoder.cn/Spring-Boot/AutoConfiguration/#) 。
- `<8>` 处，调用 `#fireAutoConfigurationImportEvents(List<String> configurations, Set<String> exclusions)` 方法，触发自动配置导入事件。详细解析，见 [「3.5 fireAutoConfigurationImportEvents」](http://svip.iocoder.cn/Spring-Boot/AutoConfiguration/#) 。
- `<9>` 处，创建 AutoConfigurationEntry 对象。AutoConfigurationEntry 是 AutoConfigurationImportSelector 的内部静态类，代码如下：

  ```java
  // AutoConfigurationImportSelector.java
  
  protected static class AutoConfigurationEntry {
  
      private final List<String> configurations;
  
      private final Set<String> exclusions;
  
      private AutoConfigurationEntry() {
          this.configurations = Collections.emptyList();
          this.exclusions = Collections.emptySet();
      }
  
      AutoConfigurationEntry(Collection<String> configurations, Collection<String> exclusions) {
          this.configurations = new ArrayList<>(configurations);
          this.exclusions = new HashSet<>(exclusions);
      }
  
      public List<String> getConfigurations() {
          return this.configurations;
      }
  
      public Set<String> getExclusions() {
          return this.exclusions;
      }
  
  }
  ```

## 3.3 getCandidateConfigurations

`#getCandidateConfigurations(AnnotationMetadata metadata, AnnotationAttributes attributes)` 方法，获得所有需要自动配置的配置类。代码如下：

```java
// AutoConfigurationImportSelector.java

protected List<String> getCandidateConfigurations(AnnotationMetadata metadata, AnnotationAttributes attributes) {
    // 加载指定类型 EnableAutoConfiguration 对应的，在 `META-INF/spring.factories` 里的类名的数组
    List<String> configurations = SpringFactoriesLoader.loadFactoryNames(getSpringFactoriesLoaderFactoryClass(),
            getBeanClassLoader());
    // 断言，确保 configurations 非空
    Assert.notEmpty(configurations, "No auto configuration classes found in META-INF/spring.factories. If you "
            + "are using a custom packaging, make sure that file is correct.");
    return configurations;
}

protected Class<?> getSpringFactoriesLoaderFactoryClass() {
    return EnableAutoConfiguration.class;
}
```

- 通过调用 `SpringFactoriesLoader#loadFactoryNames(Class<?> factoryClass, ClassLoader classLoader)` 方法，加载指定类型 `EnableAutoConfiguration` 对应的，在 `META-INF/spring.factories` 里的类名的数组。

在 `spring-boot-autoconfigure` 项目资源中的 `META-INF/spring.factories` 文件里，可以看到有如下配置：

```properties
# Auto Configure
org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\
org.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\
org.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration,\
org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration,\
org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration,\
org.springframework.boot.autoconfigure.cassandra.CassandraAutoConfiguration,\
org.springframework.boot.autoconfigure.cloud.CloudServiceConnectorsAutoConfiguration,\
org.springframework.boot.autoconfigure.context.ConfigurationPropertiesAutoConfiguration,\
org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration,\
org.springframework.boot.autoconfigure.context.PropertyPlaceholderAutoConfiguration,\
org.springframework.boot.autoconfigure.couchbase.CouchbaseAutoConfiguration,\
org.springframework.boot.autoconfigure.dao.PersistenceExceptionTranslationAutoConfiguration,\
org.springframework.boot.autoconfigure.data.cassandra.CassandraDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.cassandra.CassandraReactiveDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.cassandra.CassandraReactiveRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.cassandra.CassandraRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.couchbase.CouchbaseDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.couchbase.CouchbaseReactiveDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.couchbase.CouchbaseReactiveRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.couchbase.CouchbaseRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.elasticsearch.ReactiveElasticsearchRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.elasticsearch.ReactiveElasticsearchDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.jdbc.JdbcDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.ldap.LdapDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.ldap.LdapRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.mongo.MongoDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.mongo.MongoReactiveDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.mongo.MongoReactiveRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.mongo.MongoRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.neo4j.Neo4jDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.neo4j.Neo4jReactiveDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.neo4j.Neo4jReactiveRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.neo4j.Neo4jRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.r2dbc.R2dbcDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.r2dbc.R2dbcRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration,\
org.springframework.boot.autoconfigure.data.redis.RedisReactiveAutoConfiguration,\
org.springframework.boot.autoconfigure.data.redis.RedisRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.rest.RepositoryRestMappingsAutoConfiguration,\
org.springframework.boot.autoconfigure.data.rest.RepositoryRestMappingsAutoConfiguration,\
org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration,\
org.springframework.boot.autoconfigure.elasticsearch.ElasticsearchRestClientAutoConfiguration,\
org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration,\
org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration,\
org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration,\
org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration,\
org.springframework.boot.autoconfigure.h2.H2AutoConfiguration,\
org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration,\
org.springframework.boot.autoconfigure.hazelcast.HazelcastAutoConfiguration,\
org.springframework.boot.autoconfigure.hazelcast.HazelcastJpaDependencyAutoConfiguration,\
org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration,\
org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration,\
org.springframework.boot.autoconfigure.influx.InfluxDbAutoConfiguration,\
org.springframework.boot.autoconfigure.info.ProjectInfoAutoConfiguration,\
org.springframework.boot.autoconfigure.integration.IntegrationAutoConfiguration,\
org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration,\
org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\
org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration,\
org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration,\
org.springframework.boot.autoconfigure.jdbc.JndiDataSourceAutoConfiguration,\
org.springframework.boot.autoconfigure.jdbc.XADataSourceAutoConfiguration,\
org.springframework.boot.autoconfigure.jdbc.DataSourceInitializerAutoConfiguration,\
org.springframework.boot.autoconfigure.jms.JmsAutoConfiguration,\
org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration,\
org.springframework.boot.autoconfigure.jpa.JpaAutoConfiguration,\
org.springframework.boot.autoconfigure.jooq.JooqAutoConfiguration,\
org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration,\
org.springframework.boot.autoconfigure.kafka.KafkaAutoConfiguration,\
org.springframework.boot.autoconfigure.availability.ApplicationAvailabilityAutoConfiguration,\
org.springframework.boot.autoconfigure.ldap.LdapAutoConfiguration,\
org.springframework.boot.autoconfigure.ldap.embedded.EmbeddedLdapAutoConfiguration,\
org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration,\
org.springframework.boot.autoconfigure.mail.MailSenderAutoConfiguration,\
org.springframework.boot.autoconfigure.mail.MailSenderValidatorAutoConfiguration,\
org.springframework.boot.autoconfigure.mongo.MongoAutoConfiguration,\
org.springframework.boot.autoconfigure.mongo.MongoReactiveAutoConfiguration,\
org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration,\
org.springframework.boot.autoconfigure.quartz.QuartzAutoConfiguration,\
org.springframework.boot.autoconfigure.r2dbc.R2dbcAutoConfiguration,\
org.springframework.boot.autoconfigure.rsocket.RSocketMessagingAutoConfiguration,\
org.springframework.boot.autoconfigure.rsocket.RSocketRequesterAutoConfiguration,\
org.springframework.boot.autoconfigure.rsocket.RSocketServerAutoConfiguration,\
org.springframework.boot.autoconfigure.rsocket.RSocketStrategiesAutoConfiguration,\
org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration,\
org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration,\
org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration,\
org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration,\
org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration,\
org.springframework.boot.autoconfigure.security.rsocket.RSocketSecurityAutoConfiguration,\
org.springframework.boot.autoconfigure.security.saml2.SAML2LoginAutoConfiguration,\
org.springframework.boot.autoconfigure.sendgrid.SendGridAutoConfiguration,\
org.springframework.boot.autoconfigure.session.SessionAutoConfiguration

2025-08-25 13:08:02,857 - evaluation_logger_Attraction-78 - INFO - Complete Result: {'score': 0, 'reason': 'The response does not address any of the requested information about ticket availability for attractions in Poznan.'}
2025-08-25 13:08:09,397 - evaluation_logger_Attraction-78 - INFO - Correct Result: {'score': 0, 'reason': 'All information in the response is incorrect.'}
2025-08-25 13:08:09,397 - evaluation_logger_Attraction-78 - INFO - Message: Success.
2025-08-25 13:08:09,397 - evaluation_logger_Attraction-78 - INFO - Success turn num = 3
2025-08-25 13:08:09,397 - evaluation_logger_Attraction-78 - INFO - ----------------------------------------------------------------------------------------------------
