2025-08-25 11:35:17,723 - evaluation_logger_Cross-37 - INFO - Test Example Cross-37
2025-08-25 11:35:17,723 - evaluation_logger_Cross-37 - INFO - Query: I'm planning to rent a car at Hobart Airport at 10 AM on November 25, 2024, and return it at 4 PM on December 2 in Sandy Bay, Hobart. I need to rest for one night in a hotel near by after returning the car until December 3. Could you help me look up the related car rental info and all the available rooms in hotels within 50 kilometers of Sandy Bay, Hobart for the night of December 2?
2025-08-25 11:35:29,042 - evaluation_logger_Cross-37 - INFO - Function Calls: 
[
    {
        "name": "Search_Car_Location",
        "arguments": {
            "query": "Hobart Airport"
        }
    },
    {
        "name": "Search_Car_Location",
        "arguments": {
            "query": "Sandy Bay, Hobart"
        }
    }
]

2025-08-25 11:35:29,042 - evaluation_logger_Cross-37 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Car_Location",
        "arguments": {
            "query": "Hobart Airport"
        }
    },
    {
        "name": "Search_Car_Location",
        "arguments": {
            "query": "Sandy Bay, Hobart"
        }
    },
    {
        "name": "Search_Hotel_Destination",
        "arguments": {
            "query": "Sandy Bay, Hobart"
        }
    },
    {
        "name": "Search_Car_Rentals",
        "arguments": {
            "pick_up_latitude": -42.837100982666,
            "pick_up_longitude": 147.505004882812,
            "pick_up_date": "2024-11-25",
            "pick_up_time": "10:00",
            "drop_off_latitude": -42.9117,
            "drop_off_longitude": 147.339,
            "drop_off_date": "2024-12-02",
            "drop_off_time": "16:00"
        }
    },
    {
        "name": "Search_Hotels_By_Coordinates",
        "arguments": {
            "latitude": "-42.9117",
            "longitude": "147.339",
            "arrival_date": "2024-12-02",
            "departure_date": "2024-12-03",
            "radius": 50
        }
    }
]

2025-08-25 11:35:29,042 - evaluation_logger_Cross-37 - INFO - Start compare_single_call: 
{'name': 'Search_Car_Location', 'arguments': {'query': 'Hobart Airport'}}
{'name': 'Search_Car_Location', 'arguments': {'query': 'Hobart Airport'}}
2025-08-25 11:35:29,042 - evaluation_logger_Cross-37 - INFO - Rule-based compare success.
2025-08-25 11:35:29,042 - evaluation_logger_Cross-37 - INFO - Start compare_single_call: 
{'name': 'Search_Car_Location', 'arguments': {'query': 'Sandy Bay, Hobart'}}
{'name': 'Search_Car_Location', 'arguments': {'query': 'Sandy Bay, Hobart'}}
2025-08-25 11:35:29,042 - evaluation_logger_Cross-37 - INFO - Rule-based compare success.
2025-08-25 11:35:29,042 - evaluation_logger_Cross-37 - INFO - Success matched: [{'name': 'Search_Car_Location', 'arguments': {'query': 'Hobart Airport'}}, {'name': 'Search_Car_Location', 'arguments': {'query': 'Sandy Bay, Hobart'}}]
2025-08-25 11:35:29,044 - evaluation_logger_Cross-37 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "iata_code": "HBA",
                "name": "Hobart Airport",
                "country": "Australia",
                "type": "airport",
                "city": "Hobart",
                "coordinates": {
                    "longitude": 147.505004882812,
                    "latitude": -42.837100982666
                }
            }
        ]
    },
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "coordinates": {
                    "longitude": 147.339,
                    "latitude": -42.9117
                },
                "name": "Sandy Bay",
                "type": "city",
                "country": "Australia",
                "city": "Sandy Bay"
            }
        ]
    }
]

2025-08-25 11:35:44,119 - evaluation_logger_Cross-37 - INFO - Function Calls: 
[
    {
        "name": "Search_Car_Rentals",
        "arguments": {
            "pick_up_latitude": -42.837100982666,
            "pick_up_longitude": 147.505004882812,
            "pick_up_date": "2024-11-25",
            "pick_up_time": "10:00",
            "drop_off_latitude": -42.9117,
            "drop_off_longitude": 147.339,
            "drop_off_date": "2024-12-02",
            "drop_off_time": "16:00"
        }
    },
    {
        "name": "Search_Hotels_By_Coordinates",
        "arguments": {
            "latitude": "-42.9117",
            "longitude": "147.339",
            "arrival_date": "2024-12-02",
            "departure_date": "2024-12-03",
            "radius": 50
        }
    }
]

2025-08-25 11:35:44,119 - evaluation_logger_Cross-37 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Hotel_Destination",
        "arguments": {
            "query": "Sandy Bay, Hobart"
        }
    },
    {
        "name": "Search_Car_Rentals",
        "arguments": {
            "drop_off_date": "2024-12-02",
            "drop_off_latitude": -42.9117,
            "drop_off_longitude": 147.339,
            "drop_off_time": "16:00",
            "pick_up_date": "2024-11-25",
            "pick_up_latitude": -42.837100982666,
            "pick_up_longitude": 147.505004882812,
            "pick_up_time": "10:00"
        }
    },
    {
        "name": "Search_Hotels_By_Coordinates",
        "arguments": {
            "arrival_date": "2024-12-02",
            "departure_date": "2024-12-03",
            "latitude": "-42.9117",
            "longitude": "147.339",
            "radius": 50
        }
    },
    {
        "name": "Get_Room_List_With_Availability",
        "arguments": {
            "hotel_id": "1729438",
            "arrival_date": "2024-12-02",
            "departure_date": "2024-12-03"
        }
    },
    {
        "name": "Get_Room_List_With_Availability",
        "arguments": {
            "hotel_id": "1505199",
            "arrival_date": "2024-12-02",
            "departure_date": "2024-12-03"
        }
    }
]

2025-08-25 11:35:44,119 - evaluation_logger_Cross-37 - INFO - Start compare_single_call: 
{'name': 'Search_Car_Rentals', 'arguments': {'drop_off_date': '2024-12-02', 'drop_off_latitude': -42.9117, 'drop_off_longitude': 147.339, 'drop_off_time': '16:00', 'pick_up_date': '2024-11-25', 'pick_up_latitude': -42.837100982666, 'pick_up_longitude': 147.505004882812, 'pick_up_time': '10:00'}}
{'name': 'Search_Car_Rentals', 'arguments': {'drop_off_date': '2024-12-02', 'drop_off_latitude': -42.9117, 'drop_off_longitude': 147.339, 'drop_off_time': '16:00', 'pick_up_date': '2024-11-25', 'pick_up_latitude': -42.837100982666, 'pick_up_longitude': 147.505004882812, 'pick_up_time': '10:00'}}
2025-08-25 11:35:44,119 - evaluation_logger_Cross-37 - INFO - Rule-based compare success.
2025-08-25 11:35:44,119 - evaluation_logger_Cross-37 - INFO - Start compare_single_call: 
{'name': 'Search_Hotels_By_Coordinates', 'arguments': {'arrival_date': '2024-12-02', 'departure_date': '2024-12-03', 'latitude': '-42.9117', 'longitude': '147.339', 'radius': 50}}
{'name': 'Search_Hotels_By_Coordinates', 'arguments': {'arrival_date': '2024-12-02', 'departure_date': '2024-12-03', 'latitude': '-42.9117', 'longitude': '147.339', 'radius': 50}}
2025-08-25 11:35:44,119 - evaluation_logger_Cross-37 - INFO - Rule-based compare success.
2025-08-25 11:35:44,119 - evaluation_logger_Cross-37 - INFO - Success matched: [{'name': 'Search_Car_Rentals', 'arguments': {'drop_off_date': '2024-12-02', 'drop_off_latitude': -42.9117, 'drop_off_longitude': 147.339, 'drop_off_time': '16:00', 'pick_up_date': '2024-11-25', 'pick_up_latitude': -42.837100982666, 'pick_up_longitude': 147.505004882812, 'pick_up_time': '10:00'}}, {'name': 'Search_Hotels_By_Coordinates', 'arguments': {'arrival_date': '2024-12-02', 'departure_date': '2024-12-03', 'latitude': '-42.9117', 'longitude': '147.339', 'radius': 50}}]
2025-08-25 11:35:44,121 - evaluation_logger_Cross-37 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "search_context": {
                "searchKey": "eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMi0wMlQxNjowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6Ii00Mi45MTE3LDE0Ny4zMzkiLCJkcm9wT2ZmTG9jYXRpb25UeXBlIjoiTEFUTE9ORyIsInBpY2tVcERhdGVUaW1lIjoiMjAyNC0xMS0yNVQxMDowMDowMCIsInBpY2tVcExvY2F0aW9uIjoiLTQyLjgzNzEwMDk4MjY2NiwxNDcuNTA1MDA0ODgyODEyIiwicGlja1VwTG9jYXRpb25UeXBlIjoiTEFUTE9ORyIsInJlbnRhbER1cmF0aW9uSW5EYXlzIjo4LCJzZXJ2aWNlRmVhdHVyZXMiOlsiTk9fT1BBUVVFUyIsIlNVUFJFU1NfRklYRURfUFJJQ0VfVkVISUNMRVMiLCJJTkNMVURFX1BST0RVQ1RfUkVMQVRJT05TSElQUyIsIklOQ0xVREVfRVhUUkFTX0NPTlRBSU5JTkdfRkVFUyJdfQ==",
                "searchId": "d173ea77-7a63-4c36-8ece-3b2780cebd63",
                "recommendationsSearchUniqueId": "6242b633-8556-4e44-8aef-ed5c6b426ffe"
            },
            "search_key": "eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMi0wMlQxNjowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6Ii00Mi45MTE3LDE0Ny4zMzkiLCJkcm9wT2ZmTG9jYXRpb25UeXBlIjoiTEFUTE9ORyIsInBpY2tVcERhdGVUaW1lIjoiMjAyNC0xMS0yNVQxMDowMDowMCIsInBpY2tVcExvY2F0aW9uIjoiLTQyLjgzNzEwMDk4MjY2NiwxNDcuNTA1MDA0ODgyODEyIiwicGlja1VwTG9jYXRpb25UeXBlIjoiTEFUTE9ORyIsInJlbnRhbER1cmF0aW9uSW5EYXlzIjo4LCJzZXJ2aWNlRmVhdHVyZXMiOlsiTk9fT1BBUVVFUyIsIlNVUFJFU1NfRklYRURfUFJJQ0VfVkVISUNMRVMiLCJJTkNMVURFX1BST0RVQ1RfUkVMQVRJT05TSElQUyIsIklOQ0xVREVfRVhUUkFTX0NPTlRBSU5JTkdfRkVFUyJdfQ==",
            "provider": "rentalcars",
            "filter": [
                {
                    "id": "depotLocationType",
                    "categories": [
                        {
                            "count": 81,
                            "name": "All other locations",
                            "nameWithCount": "All other locations (81)",
                            "id": "depotLocationType::DOWNTOWN"
                        },
                        {
                            "name": "Airport (shuttle)",
                            "count": 4,
                            "nameWithCount": "Airport (shuttle) (4)",
                            "id": "depotLocationType::SHUTTLE_BUS"
                        },
                        {
                            "nameWithCount": "Airport (in terminal) (101)",
                            "id": "depotLocationType::IN_TERMINAL",
                            "name": "Airport (in terminal)",
                            "count": 101
                        }
                    ],
                    "layout": {
                        "layout_type": "list",
                        "collapsed_count": 3,
                        "is_collapsable": "false",
                        "is_collapsed": "false"
                    },
                    "title": "Location",
                    "type": "multiple_union"
                },
                {
                    "categories": [
                        {
                            "name": "Small",
                            "count": 7,
                            "nameWithCount": "Small (7)",
                            "id": "carCategory::small"
                        },
                        {
                            "count": 87,
                            "name": "Medium",
                            "id": "carCategory::medium",
                            "nameWithCount": "Medium (87)"
                        },
                        {
                            "nameWithCount": "Large (107)",
                            "id": "carCategory::large",
                            "count": 107,
                            "name": "Large"
                        },
                        {
                            "count": 9,
                            "name": "Premium",
                            "id": "carCategory::premium",
                            "nameWithCount": "Premium (9)"
                        },
                        {
                            "name": "People carriers",
                            "count": 15,
                            "id": "carCategory::carriers",
                            "nameWithCount": "People carriers (15)"
                        }
                    ],
                    "id": "carCategory",
                    "layout": {
                        "is_collapsed": "true",
                        "layout_type": "list",
                        "collapsed_count": 5,
                        "is_collapsable": "true"
                    },
                    "type": "multiple_union",
                    "title": "Car Type"
                },
                {
                    "id": "pricePerDayBuckets",
                    "categories": [
                        {
                            "id": "pricePerDayBuckets::BUCKET_1",
                            "nameWithCount": "US$0 - US$50 (37)",
                            "name": "US$0 - US$50",
                            "count": 37
                        },
                        {
                            "name": "US$50 - US$100",
                            "count": 110,
                            "id": "pricePerDayBuckets::BUCKET_2",
                            "nameWithCount": "US$50 - US$100 (110)"
                        },
                        {
                            "count": 13,
                            "name": "US$100 - US$150",
                            "id": "pricePerDayBuckets::BUCKET_3",
                            "nameWithCount": "US$100 - US$150 (13)"
                        },
                        {
                            "id": "pricePerDayBuckets::BUCKET_4",
                            "nameWithCount": "US$150 - US$200 (9)",
                            "name": "US$150 - US$200",
                            "count": 9
                        },
                        {
                            "name": "US$200+",
                            "count": 17,
                            "nameWithCount": "US$200+ (17)",
                            "id": "pricePerDayBuckets::BUCKET_5"
                        }
                    ],
                    "layout": {
                        "is_collapsed": "false",
                        "is_collapsable": "false",
                        "collapsed_count": 5,
                        "layout_type": "list"
                    },
                    "type": "multiple_union",
                    "title": "Price per day"
                },
                {
                    "layout": {
                        "is_collapsed": "true",
                        "layout_type": "list",
                        "collapsed_count": 5,
                        "is_collapsable": "true"
                    },
                    "title": "Supplier",
                    "type": "multiple_union",
                    "categories": [
                        {
                            "nameWithCount": "Ace Rental Cars (6)",
                            "id": "supplier::Ace Rental Cars",
                            "count": 6,
                            "name": "Ace Rental Cars"
                        },
                        {
                            "name": "Alamo",
                            "count": 8,
                            "id": "supplier::Alamo",
                            "nameWithCount": "Alamo (8)"
                        },
                        {
                            "name": "Avis",
                            "count": 16,
                            "nameWithCount": "Avis (16)",
                            "id": "supplier::Avis"
                        },
                        {
                            "name": "Bargain Car Rentals",
                            "count": 3,
                            "id": "supplier::Bargain Car Rentals",
                            "nameWithCount": "Bargain Car Rentals (3)"
                        },
                        {
                            "name": "Budget",
                            "count": 14,
                            "nameWithCount": "Budget (14)",
                            "id": "supplier::Budget"
                        }
                    ],
                    "id": "supplier"
                },
                {
                    "categories": [
                        {
                            "nameWithCount": "Automatic (186)",
                            "id": "transmission::AUTOMATIC",
                            "name": "Automatic",
                            "count": 186
                        }
                    ],
                    "id": "transmission",
                    "type": "multiple_union",
                    "title": "Transmission",
                    "layout": {
                        "is_collapsed": "true",
                        "layout_type": "list",
                        "collapsed_count": 5,
                        "is_collapsable": "true"
                    }
                }
            ],
            "meta": {
                "response_code": 200
            },
            "search_results": [
                {
                    "vehicle_id": "765090751",
                    "fee_info": {
                        "fee": 0,
                        "tax": 0
                    },
                    "route_info": {
                        "pickup": {
                            "location_type": "SHUTTLE_BUS",
                            "location_hash": "SG9iYXJ0IEFpcnBvcnQ=",
                            "country_code": "AU",
                            "location_id": "4734271",
                            "longitude": "147.505442",
                            "latitude": "-42.836868",
                            "address": "273 Kennedy Drive, Cambridge, Australia, TAS 7170",
                            "name": "Hobart Airport"
                        },
                        "dropoff": {
                            "location_hash": "SG9iYXJ0IEFpcnBvcnQ=",
                            "location_type": "SHUTTLE_BUS",
                            "country_code": "AU",
                            "location_id": "4734271",
                            "latitude": "-42.836868",
                            "longitude": "147.505442",
                            "address": "273 Kennedy Drive, Cambridge, Australia, TAS 7170",
                            "name": "Hobart Airport"
                        }
                    },
                    "supplier_info": {
                        "pickup_instructions": "If you didn't receive the SMS with a link to request the shuttle service, please call 1800 028 881 or +61755558900 to arrange the shuttle service.",
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/886_logo_200.png",
                        "location_type": "Shuttle Bus",
                        "dropoff_instructions": "If you didn't receive the SMS with a link to request the shuttle service, please call 1800 028 881 or +61755558900 to arrange the shuttle service.",
                        "may_require_credit_card_guarantee": false,
                        "latitude": "-42.836868",
                        "longitude": "147.505442",
                        "address": "273 Kennedy Drive, Cambridge, Australia, TAS 7170",
                        "name": "East Coast Rentals"
                    },
                    "vehicle_info": {
                        "seats": "5",
                        "label": "Compact car with:",
                        "v_name": "Hyundai i30",
                        "suitcases": {
                            "big": "0",
                            "small": "0"
                        },
                        "fuel_type": "N/A",
                        "v_id": "765090751",
                        "group": "Compact",
                        "airbags": 1,
                        "transmission": "Automatic",
                        "free_cancellation": 1,
                        "fuel_policy": "Like for like",
                        "aircon": 1,
                        "cma_compliant": -1,
                        "unlimited_mileage": 1,
                        "mileage": "Unlimited km",
                        "doors": "4"
                    },
                    "rating_info": {
                        "average": 9,
                        "dropoff_time": 9.5,
                        "location": 8.9,
                        "average_text": "Superb",
                        "no_of_ratings": 1247,
                        "pickup_time": 7.9,
                        "condition": 9.2,
                        "efficiency": 9.4,
                        "cleanliness": 9.3,
                        "value_for_money": 8.8
                    },
                    "freebies": [
                        "Amendments"
                    ],
                    "pricing_info": {
                        "base_price": 17130.62,
                        "fee_breakdown": {
                            "known_fees": [
                                {
                                    "currency": "AUD",
                                    "max_amount": 4400,
                                    "amount": 4400,
                                    "min_amount": 4400,
                                    "type": "THEFT_EXCESS",
                                    "is_always_payable": 0,
                                    "is_tax_included": 1
                                },
                                {
                                    "is_tax_included": 1,
                                    "max_amount": 1000,
                                    "currency": "AUD",
                                    "amount": 1000,
                                    "min_amount": 1000,
                                    "type": "DEPOSIT",
                                    "is_always_payable": 0
                                },
                                {
                                    "is_tax_included": 1,
                                    "type": "DAMAGE_EXCESS",
                                    "is_always_payable": 0,
                                    "max_amount": 4400,
                                    "currency": "AUD",
                                    "amount": 4400,
                                    "min_amount": 4400
                                },
                                {
                                    "type": "MILEAGE",
                                    "is_always_payable": 0,
                                    "distance_allowed": {
                                        "is_km": 1,
                                        "is_unlimited": 1
                                    }
                                }
                            ],
                            "fuel_policy": {
                                "type": "RETURN_SAME",
                                "amount": 0
                            }
                        },
                        "discount": 0,
                        "base_deposit": 17130.62,
                        "currency": "USD",
                        "deposit": 203.68,
                        "drive_away_price": 203.68,
                        "base_currency": "INR",
                        "pay_when": "PAY_NOW",
                        "drive_away_price_is_approx": true,
                        "price": 203.68,
                        "quote_allowed": 1
                    },
                    "accessibility": {
                        "fuel_policy": "Fuel policy is: Like for like",
                        "pick_up_location": "Pick-up information: Shuttle Bus",
                        "transmission": "Automatic gearbox",
                        "supplier_rating": "At this location, our customers have rated East Coast Rentals as 9.0 out of 10, Superb."
                    },
                    "content": {
                        "supplier": {
                            "rating": {
                                "subtitle": "1,247 reviews",
                                "average": "9.0",
                                "localisedRating": {
                                    "displayValue": "9",
                                    "rawValue": 9
                                },
                                "title": "Superb"
                            },
                            "name": "East Coast Rentals"
                        },
                        "badges": [
                            {
                                "variation": "DEFAULT",
                                "text": "Free cancellation",
                                "type": "CONSTRUCTIVE"
                            }
                        ]
                    }
                },
                {
                    "vehicle_id": "765090451",
                    "freebies": [
                        "Amendments"
                    ],
                    "rating_info": {
                        "average": 9,
                        "dropoff_time": 9.5,
                        "location": 8.9,
                        "no_of_ratings": 1247,
                        "condition": 9.2,
                        "pickup_time": 7.9,
                        "efficiency": 9.4,
                        "cleanliness": 9.3,
                        "value_for_money": 8.8,
                        "average_text": "Superb"
                    },
                    "pricing_info": {
                        "quote_allowed": 1,
                        "drive_away_price_is_approx": true,
                        "price": 273.44,
                        "pay_when": "PAY_NOW",
                        "base_currency": "INR",
                        "drive_away_price": 273.44,
                        "currency": "USD",
                        "deposit": 273.44,
                        "discount": 0,
                        "base_deposit": 22997.28,
                        "fee_breakdown": {
                            "known_fees": [
                                {
                                    "is_tax_included": 1,
                                    "currency": "AUD",
                                    "max_amount": 5500,
                                    "amount": 5500,
                                    "min_amount": 5500,
                                    "type": "THEFT_EXCESS",
                                    "is_always_payable": 0
                                },
                                {
                                    "is_tax_included": 1,
                                    "min_amount": 1000,
                                    "amount": 1000,
                                    "currency": "AUD",
                                    "max_amount": 1000,
                                    "is_always_payable": 0,
                                    "type": "DEPOSIT"
                                },
                                {
                                    "is_tax_included": 1,
                                    "type": "DAMAGE_EXCESS",
                                    "is_always_payable": 0,
                                    "max_amount": 5500,
                                    "currency": "AUD",
                                    "amount": 5500,
                                    "min_amount": 5500
                                },
                                {
                                    "is_always_payable": 0,
                                    "type": "MILEAGE",
                                    "distance_allowed": {
                                        "is_unlimited": 1,
                                        "is_km": 1
                                    }
                                }
                            ],
                            "fuel_policy": {
                                "amount": 0,
                                "type": "RETURN_SAME"
                            }
                        },
                        "base_price": 22997.28
                    },
                    "accessibility": {
                        "fuel_policy": "Fuel policy is: Like for like",
                        "pick_up_location": "Pick-up information: Shuttle Bus",
                        "transmission": "Automatic gearbox",
                        "supplier_rating": "At this location, our customers have rated East Coast Rentals as 9.0 out of 10, Superb."
                    },
                    "content": {
                        "supplier": {
                            "rating": {
                                "title": "Superb",
                                "localisedRating": {
                                    "displayValue": "9",
                                    "rawValue": 9
                                },
                                "subtitle": "1,247 reviews",
                                "average": "9.0"
                            },
                            "name": "East Coast Rentals"
                        },
                        "badges": [
                            {
                                "variation": "DEFAULT",
                                "text": "Free cancellation",
                                "type": "CONSTRUCTIVE"
                            }
                        ]
                    },
                    "supplier_info": {
                        "pickup_instructions": "If you didn't receive the SMS with a link to request the shuttle service, please call 1800 028 881 or +61755558900 to arrange the shuttle service.",
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/886_logo_200.png",
                        "location_type": "Shuttle Bus",
                        "dropoff_instructions": "If you didn't receive the SMS with a link to request the shuttle service, please call 1800 028 881 or +61755558900 to arrange the shuttle service.",
                        "may_require_credit_card_guarantee": false,
                        "latitude": "-42.836868",
                        "longitude": "147.505442",
                        "address": "273 Kennedy Drive, Cambridge, Australia, TAS 7170",
                        "name": "East Coast Rentals"
                    },
                    "fee_info": {
                        "fee": 0,
                        "tax": 0
                    },
                    "route_info": {
                        "pickup": {
                            "address": "273 Kennedy Drive, Cambridge, Australia, TAS 7170",
                            "name": "Hobart Airport",
                            "longitude": "147.505442",
                            "latitude": "-42.836868",
                            "country_code": "AU",
                            "location_id": "4734271",
                            "location_type": "SHUTTLE_BUS",
                            "location_hash": "SG9iYXJ0IEFpcnBvcnQ="
                        },
                        "dropoff": {
                            "longitude": "147.505442",
                            "latitude": "-42.836868",
                            "location_id": "4734271",
                            "country_code": "AU",
                            "address": "273 Kennedy Drive, Cambridge, Australia, TAS 7170",
                            "name": "Hobart Airport",
                            "location_type": "SHUTTLE_BUS",
                            "location_hash": "SG9iYXJ0IEFpcnBvcnQ="
                        }
                    },
                    "vehicle_info": {
                        "v_name": "MG ZS",
                        "suitcases": {
                            "big": "0",
                            "small": "0"
                        },
                        "fuel_type": "N/A",
                        "seats": "5",
                        "label": "Intermediate car with:",
                        "group": "Intermediate",
                        "v_id": "765090451",
                        "free_cancellation": 1,
                        "fuel_policy": "Like for like",
                        "aircon": 1,
                        "airbags": 1,
                        "transmission": "Automatic",
                        "mileage": "Unlimited km",
                        "doors": "4",
                        "cma_compliant": -1,
                        "unlimited_mileage": 1
                    }
                },
                {
                    "vehicle_id": "657356243",
                    "content": {
                        "supplier": {
                            "name": "Bargain Car Rentals",
                            "rating": {
                                "average": "9.1",
                                "subtitle": "4,746 reviews",
                                "title": "Superb",
                                "localisedRating": {
                                    "displayValue": "9.1",
                                    "rawValue": 9.1
                                }
                            }
                        },
                        "badges": [
                            {
                                "type": "CONSTRUCTIVE",
                                "variation": "DEFAULT",
                                "text": "Free cancellation"
                            }
                        ]
                    },
                    "accessibility": {
                        "pick_up_location": "Pick-up information: In Terminal",
                        "fuel_policy": "Fuel policy is: Like for like",
                        "supplier_rating": "At this location, our customers have rated Bargain Car Rentals as 9.1 out of 10, Superb.",
                        "transmission": "Automatic gearbox"
                    },
                    "freebies": [
                        "Amendments"
                    ],
                    "rating_info": {
                        "location": 9.7,
                        "dropoff_time": 9.7,
                        "average": 9.1,
                        "cleanliness": 9.7,
                        "value_for_money": 8.7,
                        "no_of_ratings": 4746,
                        "efficiency": 9.1,
                        "pickup_time": 7.7,
                        "condition": 9.1,
                        "average_text": "Superb"
                    },
                    "pricing_info": {
                        "pay_when": "PAY_NOW",
                        "base_currency": "INR",
                        "drive_away_price": 205.29,
                        "quote_allowed": 1,
                        "drive_away_price_is_approx": true,
                        "price": 205.29,
                        "discount": 0,
                        "base_deposit": 17265.9,
                        "fee_breakdown": {
                            "fuel_policy": {
                                "type": "RETURN_SAME",
                                "amount": 0
                            },
                            "known_fees": [
                                {
                                    "is_tax_included": 1,
                                    "currency": "AUD",
                                    "max_amount": 5500,
                                    "min_amount": 5500,
                                    "amount": 5500,
                                    "type": "THEFT_EXCESS",
                                    "is_always_payable": 0
                                },
                                {
                                    "is_always_payable": 0,
                                    "type": "DEPOSIT",
                                    "min_amount": 500,
                                    "amount": 500,
                                    "max_amount": 500,
                                    "currency": "AUD",
                                    "is_tax_included": 1
                                },
                                {
                                    "type": "DAMAGE_EXCESS",
                                    "is_always_payable": 0,
                                    "max_amount": 5500,
                                    "currency": "AUD",
                                    "min_amount": 5500,
                                    "amount": 5500,
                                    "is_tax_included": 1
                                },
                                {
                                    "distance_allowed": {
                                        "is_unlimited": 1,
                                        "is_km": 1
                                    },
                                    "type": "MILEAGE",
                                    "is_always_payable": 0
                                }
                            ]
                        },
                        "base_price": 17265.9,
                        "deposit": 205.29,
                        "currency": "USD"
                    },
                    "supplier_info": {
                        "pickup_instructions": "The desk is located in the Arrivals Hall.",
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/1733_logo_200.png",
                        "location_type": "In Terminal",
                        "dropoff_instructions": "The desk is located in the Arrivals Hall.",
                        "may_require_credit_card_guarantee": false,
                        "longitude": "147.505442",
                        "latitude": "-42.836868",
                        "address": "Addison Drive, Cambridge, Australia, TAS 7170",
                        "name": "Bargain Car Rentals"
                    },
                    "fee_info": {
                        "fee": 0,
                        "tax": 0
                    },
                    "route_info": {
                        "pickup": {
                            "address": "Addison Drive, Cambridge, Australia, TAS 7170",
                            "name": "Hobart Airport",
                            "location_id": "1858438",
                            "country_code": "AU",
                            "longitude": "147.505442",
                            "latitude": "-42.836868",
                            "location_type": "IN_TERMINAL",
                            "location_hash": "SG9iYXJ0IEFpcnBvcnQ="
                        },
                        "dropoff": {
                            "country_code": "AU",
                            "location_id": "1858438",
                            "longitude": "147.505442",
                            "latitude": "-42.836868",
                            "address": "Addison Drive, Cambridge, Australia, TAS 7170",
                            "name": "Hobart Airport",
                            "location_type": "IN_TERMINAL",
                            "location_hash": "SG9iYXJ0IEFpcnBvcnQ="
                        }
                    },
                    "vehicle_info": {
                        "suitcases": {
                            "big": "0",
                            "small": "0"
                        },
                        "v_name": "MG 3",
                        "special_offer_text": "1 free additional driver",
                        "fuel_type": "N/A",
                        "seats": "5",
                        "label": "Compact car with:",
                        "group": "Compact",
                        "v_id": "657356243",
                        "free_cancellation": 1,
                        "fuel_policy": "Like for like",
                        "aircon": 1,
                        "airbags": 1,
                        "transmission": "Automatic",
                        "mileage": "Unlimited km",
                        "doors": "5",
                        "cma_compliant": -1,
                        "unlimited_mileage": 1
                    }
                },
                {
                    "vehicle_id": "765090601",
                    "accessibility": {
                        "pick_up_location": "Pick-up information: Shuttle Bus",
                        "fuel_policy": "Fuel policy is: Like for like",
                        "supplier_rating": "At this location, our customers have rated East Coast Rentals as 9.0 out of 10, Superb.",
                        "transmission": "Automatic gearbox"
                    },
                    "content": {
                        "badges": [
                            {
                                "type": "CONSTRUCTIVE",
                                "text": "Free cancellation",
                                "variation": "DEFAULT"
                            },
                            {
                                "variation": "DEFAULT",
                                "text": "Hybrid",
                                "type": "ACCENT"
                            }
                        ],
                        "supplier": {
                            "rating": {
                                "title": "Superb",
                                "localisedRating": {
                                    "displayValue": "9",
                                    "rawValue": 9
                                },
                                "subtitle": "1,247 reviews",
                                "average": "9.0"
                            },
                            "name": "East Coast Rentals"
                        }
                    },
                    "pricing_info": {
                        "deposit": 320.87,
                        "currency": "USD",
                        "fee_breakdown": {
                            "known_fees": [
                                {
                                    "currency": "AUD",
                                    "max_amount": 5500,
                                    "amount": 5500,
                                    "min_amount": 5500,
                                    "type": "THEFT_EXCESS",
                                    "is_always_payable": 0,
                                    "is_tax_included": 1
                                },
                                {
                                    "is_tax_included": 1,
                                    "min_amount": 1000,
                                    "amount": 1000,
                                    "max_amount": 1000,
                                    "currency": "AUD",
                                    "is_always_payable": 0,
                                    "type": "DEPOSIT"
                                },
                                {
                                    "is_tax_included": 1,
                                    "currency": "AUD",
                                    "max_amount": 5500,
                                    "amount": 5500,
                                    "min_amount": 5500,
                                    "type": "DAMAGE_EXCESS",
                                    "is_always_payable": 0
                                },
                                {
                                    "type": "MILEAGE",
                                    "is_always_payable": 0,
                                    "distance_allowed": {
                                        "is_km": 1,
                                        "is_unlimited": 1
                                    }
                                }
                            ],
                            "fuel_policy": {
                                "amount": 0,
                                "type": "RETURN_SAME"
                            }
                        },
                        "base_price": 26986.6,
                        "discount": 0,
                        "base_deposit": 26986.6,
                        "price": 320.87,
                        "drive_away_price_is_approx": true,
                        "quote_allowed": 1,
                        "drive_away_price": 320.87,
                        "base_currency": "INR",
                        "pay_when": "PAY_NOW"
                    },
                    "freebies": [
                        "Amendments"
                    ],
                    "rating_info": {
                        "average_text": "Superb",
                        "no_of_ratings": 1247,
                        "pickup_time": 7.9,
                        "condition": 9.2,
                        "efficiency": 9.4,
                        "value_for_money": 8.8,
                        "cleanliness": 9.3,
                        "average": 9,
                        "dropoff_time": 9.5,
                        "location": 8.9
                    },
                    "vehicle_info": {
                        "transmission": "Automatic",
                        "airbags": 1,
                        "fuel_policy": "Like for like",
                        "free_cancellation": 1,
                        "aircon": 1,
                        "cma_compliant": -1,
                        "unlimited_mileage": 1,
                        "mileage": "Unlimited km",
                        "doors": "4",
                        "badges": {
                            "greenVehicle": "Hybrid"
                        },
                        "seats": "5",
                        "label": "Intermediate car with:",
                        "suitcases": {
                            "big": "0",
                            "small": "0"
                        },
                        "v_name": "Toyota Yaris",
                        "fuel_type": "N/A",
                        "v_id": "765090601",
                        "group": "Intermediate"
                    },
                    "route_info": {
                        "dropoff": {
                            "longitude": "147.505442",
                            "latitude": "-42.836868",
                            "country_code": "AU",
                            "location_id": "4734271",
                            "name": "Hobart Airport",
                            "address": "273 Kennedy Drive, Cambridge, Australia, TAS 7170",
                            "location_hash": "SG9iYXJ0IEFpcnBvcnQ=",
                            "location_type": "SHUTTLE_BUS"
                        },
                        "pickup": {
                            "name": "Hobart Airport",
                            "address": "273 Kennedy Drive, Cambridge, Australia, TAS 7170",
                            "latitude": "-42.836868",
                            "longitude": "147.505442",
                            "country_code": "AU",
                            "location_id": "4734271",
                            "location_hash": "SG9iYXJ0IEFpcnBvcnQ=",
                            "location_type": "SHUTTLE_BUS"
                        }
                    },
                    "fee_info": {
                        "tax": 0,
                        "fee": 0
                    },
                    "supplier_info": {
                        "latitude": "-42.836868",
                        "longitude": "147.505442",
                        "name": "East Coast Rentals",
                        "address": "273 Kennedy Drive, Cambridge, Australia, TAS 7170",
                        "location_type": "Shuttle Bus",
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/886_logo_200.png",
                        "pickup_instructions": "If you didn't receive the SMS with a link to request the shuttle service, please call 1800 028 881 or +61755558900 to arrange the shuttle service.",
                        "may_require_credit_card_guarantee": false,
                        "dropoff_instructions": "If you didn't receive the SMS with a link to request the shuttle service, please call 1800 028 881 or +61755558900 to arrange the shuttle service."
                    }
                }
            ],
            "is_genius_location": true,
            "sort": [
                {
                    "identifier": "recommended",
                    "title_tag": "tr.searchresults.sortBy.recommended",
                    "name": "Recommended â€“ best first"
                },
                {
                    "identifier": "price_low_to_high",
                    "title_tag": "tr.searchresults.sortBy.price.lowHigh",
                    "name": "Price - lowest first"
                },
                {
                    "name": "Review score - highest first",
                    "title_tag": "tr.searchresults.sortBy.reviews.highLow",
                    "identifier": "review_score"
                }
            ],
            "type": "cars",
            "content": {
                "items": [
                    {
                        "content": {
                            "contentType": "carsSearchResultsSecondaryPromotional"
                        },
                        "type": "SHELL_REGION_VIEW",
                        "positionInList": 3
                    }
                ],
                "filters": {
                    "countLabel": "186 results"
                }
            },
            "title": "Car rentals",
            "count": 5
        }
    },
    {
        "status": true,
        "message": "Success",
        "data": {
            "unfiltered_primary_count": 1031,
            "count": 2,
            "result": [
                {
                    "hotel_id": 1729438,
                    "has_free_parking": 1,
                    "bwallet": {
                        "hotel_eligibility": 0
                    },
                    "extended": 0,
                    "composite_price_breakdown": {
                        "has_long_stays_weekly_rate_price": 0,
                        "all_inclusive_amount": {
                            "currency": "USD",
                            "amount_rounded": "US$85",
                            "value": 84.591750751527,
                            "amount_unrounded": "US$84.59"
                        },
                        "gross_amount": {
                            "amount_unrounded": "US$84.59",
                            "value": 84.591750751527,
                            "currency": "USD",
                            "amount_rounded": "US$85"
                        },
                        "all_inclusive_amount_hotel_currency": {
                            "value": 129,
                            "currency": "AUD",
                            "amount_rounded": "AUDÂ 129",
                            "amount_unrounded": "AUDÂ 129"
                        },
                        "gross_amount_hotel_currency": {
                            "amount_unrounded": "AUDÂ 129",
                            "value": 129,
                            "currency": "AUD",
                            "amount_rounded": "AUDÂ 129"
                        },
                        "client_translations": {
                            "tooltip_total_text": "Total"
                        },
                        "excluded_amount": {
                            "value": 0,
                            "amount_rounded": "US$0",
                            "currency": "USD",
                            "amount_unrounded": "US$0"
                        },
                        "included_taxes_and_charges_amount": {
                            "amount_unrounded": "US$7.69",
                            "value": 7.69015915922973,
                            "currency": "USD",
                            "amount_rounded": "US$8"
                        },
                        "charges_details": {
                            "amount": {
                                "currency": "USD",
                                "value": 0
                            },
                            "mode": "all_included"
                        },
                        "price_display_config": [
                            {
                                "value": 0,
                                "key": "use_nightly_prices"
                            }
                        ],
                        "items": [
                            {
                                "name": "VAT",
                                "details": "10 % VAT",
                                "item_amount": {
                                    "amount_unrounded": "US$7.69",
                                    "value": 7.69015915922973,
                                    "currency": "USD",
                                    "amount_rounded": "US$8"
                                },
                                "base": {
                                    "percentage": 10,
                                    "kind": "percentage"
                                },
                                "kind": "charge",
                                "inclusion_type": "included"
                            }
                        ],
                        "gross_amount_per_night": {
                            "amount_unrounded": "US$84.59",
                            "amount_rounded": "US$85",
                            "currency": "USD",
                            "value": 84.591750751527
                        },
                        "has_long_stays_monthly_rate_price": 0,
                        "net_amount": {
                            "amount_unrounded": "US$76.90",
                            "currency": "USD",
                            "amount_rounded": "US$77",
                            "value": 76.9015915922973
                        }
                    },
                    "accommodation_type": 204,
                    "is_smart_deal": 0,
                    "soldout": 0,
                    "hotel_has_vb_boost": 0,
                    "genius_discount_percentage": 0,
                    "last_reservation_data": {
                        "last_reservation_ellapsed_months": 1
                    },
                    "preferred_plus": 1,
                    "is_genius_deal": 0,
                    "unit_configuration_label": "<b>Hotel room</b>: 1Â bed",
                    "class": 0,
                    "countrycode": "au",
                    "type": "property_card",
                    "default_wishlist_name": "Sorell",
                    "preferred": 1,
                    "review_score_word": "Fabulous",
                    "checkin": {
                        "until": "20:00",
                        "from": "14:00"
                    },
                    "hotel_name": "Sorell Barracks",
                    "latitude": -42.7846826762654,
                    "main_photo_id": 463785064,
                    "ufi": -1601159,
                    "review_score": 8.9,
                    "checkout": {
                        "from": "07:00",
                        "until": "10:00"
                    },
                    "city_in_trans": "in Sorell",
                    "id": "property_card_1729438",
                    "is_free_cancellable": 1,
                    "urgency_message": "Only 1 left at this price on Booking.com",
                    "default_language": "en",
                    "timezone": "Australia/Hobart",
                    "hotel_name_trans": "Sorell Barracks",
                    "longitude": 147.559936223674,
                    "class_is_estimated": 0,
                    "currencycode": "AUD",
                    "city": "Hobart",
                    "review_nr": 471,
                    "is_no_prepayment_block": 0,
                    "hotel_include_breakfast": 0,
                    "min_total_price": 129,
                    "block_ids": [
                        "172943801_376042529_2_0_0"
                    ],
                    "is_tpi_exclusive_property": 0
                },
                {
                    "hotel_id": 1505199,
                    "unit_configuration_label": "<b>Hotel room</b>: 2Â beds",
                    "class": 3,
                    "countrycode": "au",
                    "is_genius_deal": 0,
                    "preferred_plus": 0,
                    "last_reservation_data": {
                        "last_reservation_ellapsed_months": 1
                    },
                    "composite_price_breakdown": {
                        "has_long_stays_monthly_rate_price": 0,
                        "net_amount": {
                            "amount_unrounded": "US$83.46",
                            "currency": "USD",
                            "amount_rounded": "US$83",
                            "value": 83.4590916505552
                        },
                        "items": [
                            {
                                "inclusion_type": "included",
                                "item_amount": {
                                    "value": 8.34590916505552,
                                    "currency": "USD",
                                    "amount_rounded": "US$8",
                                    "amount_unrounded": "US$8.35"
                                },
                                "base": {
                                    "kind": "percentage",
                                    "percentage": 10
                                },
                                "kind": "charge",
                                "name": "VAT",
                                "details": "10 % VAT"
                            }
                        ],
                        "gross_amount_per_night": {
                            "amount_unrounded": "US$91.81",
                            "value": 91.8050008156107,
                            "currency": "USD",
                            "amount_rounded": "US$92"
                        },
                        "price_display_config": [
                            {
                                "key": "use_nightly_prices",
                                "value": 0
                            }
                        ],
                        "included_taxes_and_charges_amount": {
                            "amount_unrounded": "US$8.35",
                            "currency": "USD",
                            "amount_rounded": "US$8",
                            "value": 8.34590916505552
                        },
                        "charges_details": {
                            "mode": "all_included",
                            "amount": {
                                "currency": "USD",
                                "value": 0
                            }
                        },
                        "all_inclusive_amount_hotel_currency": {
                            "amount_rounded": "AUDÂ 140",
                            "currency": "AUD",
                            "value": 140,
                            "amount_unrounded": "AUDÂ 140"
                        },
                        "client_translations": {
                            "tooltip_total_text": "Total"
                        },
                        "gross_amount_hotel_currency": {
                            "amount_unrounded": "AUDÂ 140",
                            "amount_rounded": "AUDÂ 140",
                            "currency": "AUD",
                            "value": 140
                        },
                        "excluded_amount": {
                            "amount_unrounded": "US$0",
                            "value": 0,
                            "amount_rounded": "US$0",
                            "currency": "USD"
                        },
                        "gross_amount": {
                            "amount_unrounded": "US$91.81",
                            "value": 91.8050008156107,
                            "amount_rounded": "US$92",
                            "currency": "USD"
                        },
                        "has_long_stays_weekly_rate_price": 0,
                        "all_inclusive_amount": {
                            "amount_unrounded": "US$91.81",
                            "value": 91.8050008156107,
                            "currency": "USD",
                            "amount_rounded": "US$92"
                        }
                    },
                    "accommodation_type": 205,
                    "soldout": 0,
                    "is_smart_deal": 0,
                    "hotel_has_vb_boost": 0,
                    "genius_discount_percentage": 0,
                    "extended": 0,
                    "has_free_parking": 1,
                    "bwallet": {
                        "hotel_eligibility": 0
                    },
                    "main_photo_id": 62753493,
                    "ufi": -1595849,
                    "latitude": -43.146289,
                    "hotel_name": "Port Arthur Motor Inn",
                    "checkin": {
                        "until": "20:00",
                        "from": "14:00"
                    },
                    "default_wishlist_name": "Port Arthur",
                    "preferred": 1,
                    "review_score_word": "Good",
                    "type": "property_card",
                    "class_is_estimated": 0,
                    "longitude": 147.84483,
                    "timezone": "Australia/Hobart",
                    "hotel_name_trans": "Port Arthur Motor Inn",
                    "is_free_cancellable": 1,
                    "default_language": "en",
                    "city_in_trans": "in Port Arthur",
                    "id": "property_card_1505199",
                    "review_score": 7.9,
                    "checkout": {
                        "until": "10:00"
                    },
                    "block_ids": [
                        "150519902_357052863_2_0_0"
                    ],
                    "is_tpi_exclusive_property": 0,
                    "min_total_price": 140,
                    "hotel_include_breakfast": 0,
                    "is_no_prepayment_block": 0,
                    "currencycode": "AUD",
                    "review_nr": 1355,
                    "city": "Port Arthur"
                }
            ],
            "extended_count": 0,
            "b_max_los_data": {
                "default_los": 45,
                "has_extended_los": 1,
                "max_allowed_los": 90,
                "extended_los": 90,
                "experiment": "long_stays_ios_extend_los_2",
                "is_fullon": 0
            },
            "filters": [
                {
                    "title": "Your previous filters",
                    "field": "previous"
                },
                {
                    "field": "price",
                    "title": "Your budget (for 1 night)"
                },
                {
                    "field": "tdb",
                    "title": "Bed preference"
                },
                {
                    "field": "roomfacility",
                    "title": "Room facilities"
                },
                {
                    "field": "fc",
                    "title": "Free cancellation "
                }
            ],
            "page_loading_threshold": 10,
            "primary_count": 2,
            "room_distribution": [
                {
                    "adults": "1"
                }
            ],
            "unfiltered_count": 1031
        }
    }
]

2025-08-25 11:37:23,550 - evaluation_logger_Cross-37 - INFO - Final Response: <ï½œbeginâ–ofâ–sentenceï½œ># 1. æ¦‚è¿°

æœ¬æ–‡ï¼Œæˆ‘ä»¬æ¥åˆ†äº« [ã€Šç²¾å°½ Spring Boot æºç åˆ†æž â€”â€” SpringApplicationã€‹](http://svip.iocoder.cn/Spring-Boot/SpringApplication/) çš„**åˆå§‹åŒ–**çš„æºç è§£æžã€‚

åœ¨ SpringApplication å®žä¾‹å¯¹è±¡åˆ›å»ºæ—¶ï¼Œä¼šè¿›è¡Œä¸€äº›åˆå§‹åŒ–çš„å·¥ä½œã€‚è™½ç„¶è¯´ï¼Œå®ƒæ²¡æœ‰å¯åŠ¨ Spring å®¹å™¨ï¼Œä½†æ˜¯ä¼šè¿›è¡Œä¸€äº›**çŽ¯å¢ƒå˜é‡**ã€**èµ„æº**ã€**Spring å®¹å™¨**ã€**ç›‘å¬å™¨**ç­‰ç­‰çš„åˆå§‹åŒ–ã€‚è€Œè¿™äº›åˆå§‹åŒ–ï¼Œåˆæ˜¯ SpringApplication å¯åŠ¨çš„å‰æã€‚

# 2. æž„é€ æ–¹æ³•

SpringApplication çš„æž„é€ æ–¹æ³•ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š

```java
// SpringApplication.java

/**
 * èµ„æºåŠ è½½å™¨
 */
private ResourceLoader resourceLoader;
/**
 * ä¸»è¦çš„ Java Config ç±»çš„æ•°ç»„
 */
private Set<Class<?>> primarySources;
/**
 * åº”ç”¨ä¸Šä¸‹æ–‡ç±»åž‹
 */
private WebApplicationType webApplicationType;
/**
 * åº”ç”¨ä¸Šä¸‹æ–‡åˆå§‹åŒ–å™¨æ•°ç»„
 */
private List<ApplicationContextInitializer<?>> initializers;
/**
 * åº”ç”¨äº‹ä»¶ç›‘å¬å™¨æ•°ç»„
 */
private List<ApplicationListener<?>> listeners;

public SpringApplication(ResourceLoader resourceLoader, Class<?>... primarySources) {
	this.resourceLoader = resourceLoader;
	Assert.notNull(primarySources, "PrimarySources must not be null");
	this.primarySources = new LinkedHashSet<>(Arrays.asList(primarySources));
	// <1> æŽ¨æ–­ Web åº”ç”¨ç±»åž‹
	this.webApplicationType = WebApplicationType.deduceFromClasspath();
	// <2> åŠ è½½åº”ç”¨ä¸Šä¸‹æ–‡åˆå§‹åŒ–å™¨
	setInitializers((Collection) getSpringFactoriesInstances(ApplicationContextInitializer.class));
	// <3> åŠ è½½åº”ç”¨äº‹ä»¶ç›‘å¬å™¨
	setListeners((Collection) getSpringFactoriesInstances(ApplicationListener.class));
	// <4> æŽ¨æ–­åº”ç”¨æ–¹æ³•
	this.mainApplicationClass = deduceMainApplicationClass();
}
```

`resourceLoader` å±žæ€§ï¼Œèµ„æºåŠ è½½å™¨ã€‚å¯ä»¥æš‚æ—¶ä¸ç†è§£ï¼ŒåŽç»­æ–‡ç« ä¼šè¯¦ç»†è§£æžã€‚

`primarySources` å±žæ€§ï¼Œä¸»è¦çš„ Java Config ç±»çš„æ•°ç»„ã€‚åœ¨æ–‡åˆæä¾›çš„ç¤ºä¾‹ï¼Œå°±æ˜¯ `Application.class` ã€‚

`webApplicationType` å±žæ€§ï¼Œåº”ç”¨ä¸Šä¸‹æ–‡ç±»åž‹ã€‚æžšä¸¾å€¼æœ‰ THREEï¼š

- `NONE`ï¼šéž Web ç±»åž‹
- `SERVLET`ï¼šåŸºäºŽ Servlet çš„ Web ç±»åž‹
- `REACTIVE`ï¼šåŸºäºŽ Reactive çš„ Web ç±»åž‹

`initializers` å±žæ€§ï¼Œåº”ç”¨ä¸Šä¸‹æ–‡åˆå§‹åŒ–å™¨ ApplicationContextInitializer æ•°ç»„ã€‚

`listeners` å±žæ€§ï¼Œåº”ç”¨äº‹ä»¶ç›‘å¬å™¨ ApplicationListener æ•°ç»„ã€‚

`mainApplicationClass` å±žæ€§ï¼Œåº”ç”¨æ–¹æ³•ã€‚åœ¨æ–‡åˆæä¾›çš„ç¤ºä¾‹ï¼Œå°±æ˜¯ `Application.class` çš„ `#main(String[] args)` æ–¹æ³•ã€‚

`<1>` å¤„ï¼Œè°ƒç”¨ `WebApplicationType#deduceFromClasspath()` æ–¹æ³•ï¼ŒæŽ¨æ–­ Web åº”ç”¨ç±»åž‹ã€‚è¯¦ç»†è§£æžï¼Œè§ [ã€Œ2.1 deduceFromClasspathã€](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) ã€‚

`<2>` å¤„ï¼Œè°ƒç”¨ `#getSpringFactoriesInstances(Class<T> type)` æ–¹æ³•ï¼ŒèŽ·å¾— ApplicationContextInitializer ç±»åž‹çš„åˆå§‹åŒ–å™¨æ•°ç»„ï¼Œå¹¶è®¾ç½®åˆ° `initializers` ä¸­ã€‚è¯¦ç»†è§£æžï¼Œè§ [ã€Œ2.2 getSpringFactoriesInstancesã€](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) ã€‚

`<3>` å¤„ï¼Œè°ƒç”¨ `#getSpringFactoriesInstances(Class<T> type)` æ–¹æ³•ï¼ŒèŽ·å¾— ApplicationListener ç±»åž‹çš„ç›‘å¬å™¨æ•°ç»„ï¼Œå¹¶è®¾ç½®åˆ° `listeners` ä¸­ã€‚

`<4>` å¤„ï¼Œè°ƒç”¨ `#deduceMainApplicationClass()` æ–¹æ³•ï¼ŒæŽ¨æ–­åº”ç”¨æ–¹æ³•ã€‚è¯¦ç»†è§£æžï¼Œè§ [ã€Œ2.3 deduceMainApplicationClassã€](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) ã€‚

## 2.1 deduceFromClasspath

`WebApplicationType#deduceFromClasspath()` æ–¹æ³•ï¼ŒæŽ¨æ–­ Web åº”ç”¨ç±»åž‹ã€‚ä»£ç å¦‚ä¸‹ï¼š

```java
// WebApplicationType.java

private static final String[] SERVLET_INDICATOR_CLASSES = { "javax.servlet.Servlet",
		"org.springframework.web.context.ConfigurableWebApplicationContext" };

private static final String WEBMVC_INDICATOR_CLASS = "org.springframework.web.servlet.DispatcherServlet";

private static final String WEBFLUX_INDICATOR_CLASS = "org.springframework.web.reactive.DispatcherHandler";

private static final String JERSEY_INDICATOR_CLASS = "org.glassfish.jersey.servlet.ServletContainer";

private static final String SERVLET_APPLICATION_CONTEXT_CLASS = "org.springframework.web.context.WebApplicationContext";

private static final String REACTIVE_APPLICATION_CONTEXT_CLASS = "org.springframework.boot.web.reactive.context.ReactiveWebApplicationContext";

static WebApplicationType deduceFromClasspath() {
	// å¦‚æžœå­˜åœ¨ REACTIVE ç›¸å…³çš„ç±»ï¼Œä¸å­˜åœ¨ SERVLET ç›¸å…³çš„ç±»ï¼Œåˆ™åˆ›å»º REACTIVE ç±»åž‹
	if (ClassUtils.isPresent(WEBFLUX_INDICATOR_CLASS, null) && !ClassUtils.isPresent(WEBMVC_INDICATOR_CLASS, null)
			&& !ClassUtils.isPresent(JERSEY_INDICATOR_CLASS, null)) {
		return WebApplicationType.REACTIVE;
	}
	// å¦‚æžœä¸å­˜åœ¨ SERVLET ç›¸å…³çš„ç±»ï¼Œåˆ™åˆ›å»º NONE ç±»åž‹
	for (String className : SERVLET_INDICATOR_CLASSES) {
		if (!ClassUtils.isPresent(className, null)) {
			return WebApplicationType.NONE;
		}
	}
	// å¦åˆ™ï¼Œåˆ›å»º SERVLET ç±»åž‹
	return WebApplicationType.SERVLET;
}
```

é€»è¾‘æ¯”è¾ƒç®€å•ï¼Œæ ¹æ®ç±»è·¯å¾„æ˜¯å¦å­˜åœ¨ç›¸åº”çš„ç±»ï¼Œè¿›è¡Œåˆ¤æ–­ã€‚

## 2.2 getSpringFactoriesInstances

`#getSpringFactoriesInstances(Class<T> type)` æ–¹æ³•ï¼ŒèŽ·å¾—æŒ‡å®šç±»åž‹çš„å¯¹è±¡æ•°ç»„ã€‚ä»£ç å¦‚ä¸‹ï¼š

```java
// SpringApplication.java

private <T> Collection<T> getSpringFactoriesInstances(Class<T> type) {
	return getSpringFactoriesInstances(type, new Class<?>[] {});
}

private <T> Collection<T> getSpringFactoriesInstances(Class<T> type, Class<?>[] parameterTypes, Object... args) {
	ClassLoader classLoader = getClassLoader();
	// Use names and ensure unique to protect against duplicates
	// <1> åŠ è½½æŒ‡å®šç±»åž‹å¯¹åº”çš„ï¼Œåœ¨ `META-INF/spring.factories` é‡Œçš„ç±»åçš„æ•°ç»„
	Set<String> names = new LinkedHashSet<>(SpringFactoriesLoader.loadFactoryNames(type, classLoader));
	// <2> åˆ›å»ºå¯¹è±¡ä»¬
	List<T> instances = createSpringFactoriesInstances(type, parameterTypes, classLoader, args, names);
	// <3> æŽ’åºå¯¹è±¡ä»¬
	AnnotationAwareOrderComparator.sort(instances);
	return instances;
}
```

`<1>` å¤„ï¼Œè°ƒç”¨ `SpringFactoriesLoader#loadFactoryNames(Class<?> factoryClass, ClassLoader classLoader)` æ–¹æ³•ï¼ŒåŠ è½½æŒ‡å®šç±»åž‹å¯¹åº”çš„ï¼Œåœ¨ `META-INF/spring.factories` é‡Œçš„ç±»åçš„æ•°ç»„ã€‚

å…³äºŽ SpringFactoriesLoader çš„è¯¦ç»†è§£æžï¼Œè§ [ã€Šã€æ­»ç£• Springã€‘â€”â€” IoC ä¹‹åŠ è½½ BeanDefinitionã€‹](http://svip.iocoder.cn/Spring/IoC-load-BeanDefinitions/?vip) çš„ [ã€Œ3. loadFactoryNamesã€](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) å°èŠ‚ã€‚

`<2>` å¤„ï¼Œè°ƒç”¨ `#createSpringFactoriesInstances(Class<T> type, Class<?>[] parameterTypes, ClassLoader classLoader, Object[] args, Set<String> names)` æ–¹æ³•ï¼Œåˆ›å»ºå¯¹è±¡ä»¬ã€‚ä»£ç å¦‚ä¸‹ï¼š

```java
// SpringApplication.java

@SuppressWarnings("unchecked")
private <T> List<T> createSpringFactoriesInstances(Class<T> type, Class<?>[] parameterTypes,
		ClassLoader classLoader, Object[] args, Set<String> names) {
	List<T> instances = new ArrayList<>(names.size());
	for (String name : names) {
		try {
			Class<?> instanceClass = ClassUtils.forName(name, classLoader);
			Assert.isAssignable(type, instanceClass);
			Constructor<?> constructor = instanceClass.getDeclaredConstructor(parameterTypes);
			T instance = (T) BeanUtils.instantiateClass(constructor, args);
			instances.add(instance);
		} catch (Throwable ex) {
			throw new IllegalArgumentException("Cannot instantiate " + type + " : " + name, ex);
		}
	}
	return instances;
}
```

- é€šè¿‡**åå°„**ï¼Œåˆ›å»ºå¯¹è±¡ã€‚

`<3>` å¤„ï¼Œè°ƒç”¨ `AnnotationAwareOrderComparator#sort(List<?> list)` æ–¹æ³•ï¼ŒæŽ’åºå¯¹è±¡ä»¬ã€‚å› ä¸º `@Order` æ³¨è§£ï¼Œæˆ–è€…å®žçŽ° Order æŽ¥å£ï¼Œå¯ä»¥è‡ªå®šä¹‰æŽ’åºã€‚

## 2.3 deduceMainApplicationClass

`#deduceMainApplicationClass()` æ–¹æ³•ï¼ŒæŽ¨æ–­åº”ç”¨æ–¹æ³•ã€‚ä»£ç å¦‚ä¸‹ï¼š

```java
// SpringApplication.java

private Class<?> deduceMainApplicationClass() {
	try {
		// èŽ·å¾—å½“å‰æ ˆçš„æ–¹æ³•æ•°ç»„
		StackTraceElement[] stackTrace = new RuntimeException().getStackTrace();
		// éåŽ†æ–¹æ³•æ•°ç»„ï¼ŒæŸ¥æ‰¾ main æ–¹æ³•
		for (StackTraceElement stackTraceElement : stackTrace) {
			if ("main".equals(stackTraceElement.getMethodName())) {
				return Class.forName(stackTraceElement.getClassName());
			}
		}
	} catch (ClassNotFoundException ex) {
		// Swallow and continue
	}
	return null;
}
```

é€šè¿‡å¼‚å¸¸çš„æ–¹å¼ï¼ŒèŽ·å–å½“å‰æ ˆçš„æ–¹æ³•æ•°ç»„ï¼Œç„¶åŽéåŽ†æŸ¥æ‰¾ `main` æ–¹æ³•ï¼Œä»Žè€ŒèŽ·å¾—å¯¹åº”çš„ç±»ã€‚

# 3. å°ç»“

è‡³æ­¤ï¼ŒSpringApplication çš„åˆå§‹åŒ–å·²ç»å®Œæˆã€‚åŽç»­ï¼Œæˆ‘ä»¬å°†å¼€å§‹ SpringApplication çš„å¯åŠ¨æµç¨‹ã€‚

ðŸ˜ˆ ä¸è¿‡ï¼Œåœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹ SpringApplication æä¾›çš„**è¿è¡Œå‰**çš„è‡ªå®šä¹‰æ‹“å±•ç‚¹ã€‚

2025-08-25 11:37:23,550 - evaluation_logger_Cross-37 - INFO - turn id  = 3; len(golden_answer) = 3
2025-08-25 11:37:23,550 - evaluation_logger_Cross-37 - INFO - golden_function_calls = [{'name': 'Get_Room_List_With_Availability', 'arguments': {'arrival_date': '2024-12-02', 'departure_date': '2024-12-03', 'hotel_id': '1729438'}}, {'name': 'Get_Room_List_With_Availability', 'arguments': {'arrival_date': '2024-12-02', 'departure_date': '2024-12-03', 'hotel_id': '1505199'}}]
2025-08-25 11:37:28,206 - evaluation_logger_Cross-37 - INFO - Complete Result: {'score': 0, 'reason': "The response does not address any of the requested information in the user's query."}
2025-08-25 11:37:37,042 - evaluation_logger_Cross-37 - INFO - Correct Result: {'score': 0, 'reason': 'All information in the response is incorrect.'}
2025-08-25 11:37:37,042 - evaluation_logger_Cross-37 - INFO - Message: {'error_type': 'stop_early', 'content': 'Stop early.'}
2025-08-25 11:37:37,042 - evaluation_logger_Cross-37 - INFO - Success turn num = 2
2025-08-25 11:37:37,042 - evaluation_logger_Cross-37 - INFO - ----------------------------------------------------------------------------------------------------
