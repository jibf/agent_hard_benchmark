2025-08-25 13:10:31,385 - evaluation_logger_Attraction-118 - INFO - Test Example Attraction-118
2025-08-25 13:10:31,385 - evaluation_logger_Attraction-118 - INFO - Query: Can you find the two most trending attractions in Osaka and provide a detailed comparison of them? Also, check if there are any tickets available for both attractions in October.
2025-08-25 13:10:40,681 - evaluation_logger_Attraction-118 - INFO - Function Calls: 
[
    {
        "name": "Search_Attraction_Location",
        "arguments": {
            "query": "Osaka"
        }
    }
]

2025-08-25 13:10:40,682 - evaluation_logger_Attraction-118 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Attraction_Location",
        "arguments": {
            "query": "Osaka, Japan"
        }
    },
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOi0yNDA5MDV9",
            "sortBy": "trending"
        }
    }
]

2025-08-25 13:10:41,320 - evaluation_logger_Attraction-118 - INFO - Start compare_single_call: 
{'name': 'Search_Attraction_Location', 'arguments': {'query': 'Osaka'}}
{'name': 'Search_Attraction_Location', 'arguments': {'query': 'Osaka, Japan'}}
2025-08-25 13:10:50,223 - evaluation_logger_Attraction-118 - DEBUG - LLM-based comparison output: {'is_equal': True, 'reason': "The parameter 'query' in both function calls refers to the same location, 'Osaka'. Adding the country suffix 'Japan' does not change the meaning of the location, as a location with or without a country suffix is considered equivalent."}
2025-08-25 13:10:50,223 - evaluation_logger_Attraction-118 - INFO - LLM-based compare success.
2025-08-25 13:10:50,223 - evaluation_logger_Attraction-118 - INFO - Success matched: [{'name': 'Search_Attraction_Location', 'arguments': {'query': 'Osaka, Japan'}}]
2025-08-25 13:10:50,224 - evaluation_logger_Attraction-118 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "products": [
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFJaQ1BFYlFaM3BwIiwidWZpIjotMjQwOTA1fQ==",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "OSAKA Japanese Entertainment Show UTAGE",
                    "productId": "PRZCPEbQZ3pp",
                    "productSlug": "przcpebqz3pp-osaka-japanese-entertainment-show-utage",
                    "taxonomySlug": "attractions",
                    "cityUfi": -240905,
                    "cityName": "Osaka",
                    "countryCode": "jp"
                },
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFIzeUltNUlmSkxlIiwidWZpIjotMjQwOTA1fQ==",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "Osaka Japanese Cooking And Matcha Class near Osaka Castle",
                    "productId": "PR3yIm5IfJLe",
                    "productSlug": "pr3yim5ifjle-osaka-japanese-cooking-and-matcha-class-near-osaka-castle",
                    "taxonomySlug": "transfers-services",
                    "cityUfi": -240905,
                    "cityName": "Osaka",
                    "countryCode": "jp"
                },
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFJvNktsVTVYSnFSIiwidWZpIjotMjQwOTA1fQ==",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "Japan Railway Station Shared Arrival Transfer : Shin Osaka Station to Osaka City",
                    "productId": "PRo6KlU5XJqR",
                    "productSlug": "pro6klu5xjqr-japan-railway-station-shared-arrival-transfer-shin-osaka-station-to",
                    "taxonomySlug": "attractions",
                    "cityUfi": -240905,
                    "cityName": "Osaka",
                    "countryCode": "jp"
                },
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFJZVzlkNTIycVdmIiwidWZpIjotMjQwOTA1fQ==",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "Osaka Gourmet Adventure: Savor 13 Must-Try Dishes in Japan",
                    "productId": "PRYW9d522qWf",
                    "productSlug": "pryw9d522qwf-osaka-gourmet-adventure-savor-13-must-try-dishes-in-japan",
                    "taxonomySlug": "tours",
                    "cityUfi": -240905,
                    "cityName": "Osaka",
                    "countryCode": "jp"
                },
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFJocGpMbERIZWk2IiwidWZpIjotMjQwOTA1fQ==",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "Osaka Castle Ticket",
                    "productId": "PRhpjLlDHei6",
                    "productSlug": "prhpjlldhei6-osaka-castle-ticket",
                    "taxonomySlug": "landmarks",
                    "cityUfi": -240905,
                    "cityName": "Osaka",
                    "countryCode": "jp"
                }
            ],
            "destinations": [
                {
                    "id": "eyJ1ZmkiOi0yNDA5MDV9",
                    "__typename": "AttractionsSearchDestinationSuggestion",
                    "ufi": -240905,
                    "country": "Japan",
                    "cityName": "Osaka",
                    "productCount": 464,
                    "cc1": "jp"
                }
            ]
        }
    }
]

2025-08-25 13:11:00,790 - evaluation_logger_Attraction-118 - INFO - Function Calls: 
[
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOi0yNDA5MDV9",
            "sortBy": "trending"
        }
    }
]

2025-08-25 13:11:00,790 - evaluation_logger_Attraction-118 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOi0yNDA5MDV9",
            "sortBy": "trending"
        }
    },
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRhpjLlDHei6"
        }
    },
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRYUZzY35vgp"
        }
    },
    {
        "name": "Get_Attraction_Details",
        "arguments": {
            "slug": "prhpjlldhei6-osaka-castle-ticket"
        }
    },
    {
        "name": "Get_Attraction_Details",
        "arguments": {
            "slug": "pryuzzy35vgp-teamlab-botanical-garden-osaka-ticket"
        }
    }
]

2025-08-25 13:11:00,790 - evaluation_logger_Attraction-118 - INFO - Start compare_single_call: 
{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOi0yNDA5MDV9', 'sortBy': 'trending'}}
{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOi0yNDA5MDV9', 'sortBy': 'trending'}}
2025-08-25 13:11:00,790 - evaluation_logger_Attraction-118 - INFO - Rule-based compare success.
2025-08-25 13:11:00,790 - evaluation_logger_Attraction-118 - INFO - Success matched: [{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOi0yNDA5MDV9', 'sortBy': 'trending'}}]
2025-08-25 13:11:00,790 - evaluation_logger_Attraction-118 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "__typename": "AttractionsProductSearchResponse",
            "products": [
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": false
                    },
                    "id": "PRhpjLlDHei6",
                    "name": "Osaka Castle Ticket",
                    "slug": "prhpjlldhei6-osaka-castle-ticket",
                    "shortDescription": "A ticket providing admission to Japan's historic site of Osaka Castle",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 4,
                        "currency": "USD",
                        "publicAmount": 4
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 0,
                        "percentage": "0",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.6,
                            "total": 1748
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Osaka",
                        "ufi": -240905
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIl6n461zlsn"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestseller",
                            "value": true,
                            "rank": 1
                        }
                    ]
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": false
                    },
                    "id": "PRYUZzY35vgp",
                    "name": "teamLab Botanical Garden Osaka Ticket",
                    "slug": "pryuzzy35vgp-teamlab-botanical-garden-osaka-ticket",
                    "shortDescription": "Admission to an experiential art space that explores how nature can become art",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 3.33,
                        "currency": "USD",
                        "publicAmount": 3.33
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 120,
                        "percentage": "93%",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.4,
                            "total": 2163
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Osaka",
                        "ufi": -240905
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIY4hZOF2Upu"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIdaBCMYsMVg"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIbuQe6ySKtc"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIxVK4QWMTu0"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestseller",
                            "value": true,
                            "rank": 3
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerInMonth",
                            "value": true,
                            "rank": 1
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerInWeek",
                            "value": true,
                            "rank": 1
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerOnWeekends",
                            "value": true,
                            "rank": 1
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerForLandmarks",
                            "value": true,
                            "rank": 1
                        }
                    ]
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PREl34B8Ki8V",
                    "name": "Umeda Sky Building and Kuchu Teien Observatory Admission",
                    "slug": "prel34b8ki8v-umeda-sky-building-and-kuchu-teien-observatory-admission",
                    "shortDescription": "A ticket providing admission to an observation deck in Japan",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 13.33,
                        "currency": "USD",
                        "publicAmount": 13.33
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 0,
                        "percentage": "0",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.7,
                            "total": 987
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Osaka",
                        "ufi": -240905
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIvpICgj0mmi"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIfa6f6WJJb4"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestseller",
                            "value": true,
                            "rank": 2
                        }
                    ]
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRWp2LFoZY5t",
                    "name": "Osaka Castle Admission Ticket",
                    "slug": "prwp2lfozy5t-osaka-castle-admission-ticket",
                    "shortDescription": "Book your visit to Osaka Castle and experience the perfect blend of historical grandeur and natur...",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 9.91,
                        "currency": "USD",
                        "publicAmount": 9.91
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 0,
                        "percentage": "0",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 2.8,
                            "total": 4
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Osaka",
                        "ufi": -240905
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIiMK4wNHnvY"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    }
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": false
                    },
                    "id": "PRM9jNFXxPbc",
                    "name": "Osaka Amazing Pass",
                    "slug": "prm9jnfxxpbc-city-transportation-pass",
                    "shortDescription": "An access ticket to attractions and the public transportation system in Osaka",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 22,
                        "currency": "USD",
                        "publicAmount": 22
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 0,
                        "percentage": "0",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.8,
                            "total": 4571
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Osaka",
                        "ufi": -240905
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIpzMC1Dezjt"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIX7vbZO3B5X"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestseller",
                            "value": true,
                            "rank": 5
                        }
                    ]
                }
            ],
            "filterStats": {
                "__typename": "FilterStats",
                "unfilteredProductCount": 455,
                "filteredProductCount": 455
            },
            "sorters": [
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Our top picks",
                    "value": "trending"
                },
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Most popular",
                    "value": "attr_book_score"
                },
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Lowest price",
                    "value": "lowest_price"
                }
            ],
            "defaultSorter": {
                "__typename": "AttractionsSorterOption",
                "name": "Our top picks",
                "value": "trending"
            },
            "filterOptions": {
                "__typename": "FilterOptions",
                "typeFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Tours",
                        "tagname": "tours",
                        "productCount": 36
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Entertainment & tickets",
                        "tagname": "entertainment-tickets",
                        "productCount": 24
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Museums, arts & culture",
                        "tagname": "museums-arts-culture",
                        "productCount": 22
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Nature & outdoor",
                        "tagname": "nature-outdoor",
                        "productCount": 22
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Food & drinks",
                        "tagname": "food-drinks",
                        "productCount": 12
                    }
                ],
                "labelFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Free cancellation",
                        "tagname": "free_cancellation",
                        "productCount": 419
                    }
                ],
                "ufiFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Osaka",
                        "tagname": "-240905",
                        "productCount": 263
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Nara",
                        "tagname": "-238469",
                        "productCount": 83
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Kobe",
                        "tagname": "-233817",
                        "productCount": 46
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Izumi",
                        "tagname": "-231169",
                        "productCount": 24
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Nishinomiya",
                        "tagname": "-239026",
                        "productCount": 24
                    }
                ],
                "priceFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "US$0 - US$22",
                        "tagname": "b0",
                        "productCount": 33
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$22 - US$44",
                        "tagname": "b1",
                        "productCount": 25
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$44 - US$83",
                        "tagname": "b2",
                        "productCount": 84
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$83 - US$138",
                        "tagname": "b3",
                        "productCount": 83
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$138+",
                        "tagname": "b4",
                        "productCount": 238
                    }
                ]
            }
        }
    }
]

2025-08-25 13:11:12,621 - evaluation_logger_Attraction-118 - INFO - Function Calls: 
[
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRhpjLlDHei6"
        }
    },
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRYUZzY35vgp"
        }
    },
    {
        "name": "Get_Attraction_Details",
        "arguments": {
            "slug": "prhpjlldhei6-osaka-castle-ticket"
        }
    },
    {
        "name": "Get_Attraction_Details",
        "arguments": {
            "slug": "pryuzzy35vgp-teamlab-botanical-garden-osaka-ticket"
        }
    }
]

2025-08-25 13:11:12,621 - evaluation_logger_Attraction-118 - INFO - Golden Function Call: 
[
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRhpjLlDHei6"
        }
    },
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRYUZzY35vgp"
        }
    },
    {
        "name": "Get_Attraction_Details",
        "arguments": {
            "slug": "prhpjlldhei6-osaka-castle-ticket"
        }
    },
    {
        "name": "Get_Attraction_Details",
        "arguments": {
            "slug": "pryuzzy35vgp-teamlab-botanical-garden-osaka-ticket"
        }
    }
]

2025-08-25 13:11:12,621 - evaluation_logger_Attraction-118 - INFO - Start compare_single_call: 
{'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRhpjLlDHei6'}}
{'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRhpjLlDHei6'}}
2025-08-25 13:11:12,621 - evaluation_logger_Attraction-118 - INFO - Rule-based compare success.
2025-08-25 13:11:12,621 - evaluation_logger_Attraction-118 - INFO - Start compare_single_call: 
{'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRYUZzY35vgp'}}
{'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRYUZzY35vgp'}}
2025-08-25 13:11:12,621 - evaluation_logger_Attraction-118 - INFO - Rule-based compare success.
2025-08-25 13:11:12,621 - evaluation_logger_Attraction-118 - INFO - Start compare_single_call: 
{'name': 'Get_Attraction_Details', 'arguments': {'slug': 'prhpjlldhei6-osaka-castle-ticket'}}
{'name': 'Get_Attraction_Details', 'arguments': {'slug': 'prhpjlldhei6-osaka-castle-ticket'}}
2025-08-25 13:11:12,621 - evaluation_logger_Attraction-118 - INFO - Rule-based compare success.
2025-08-25 13:11:12,621 - evaluation_logger_Attraction-118 - INFO - Start compare_single_call: 
{'name': 'Get_Attraction_Details', 'arguments': {'slug': 'pryuzzy35vgp-teamlab-botanical-garden-osaka-ticket'}}
{'name': 'Get_Attraction_Details', 'arguments': {'slug': 'pryuzzy35vgp-teamlab-botanical-garden-osaka-ticket'}}
2025-08-25 13:11:12,621 - evaluation_logger_Attraction-118 - INFO - Rule-based compare success.
2025-08-25 13:11:12,621 - evaluation_logger_Attraction-118 - INFO - Success matched: [{'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRhpjLlDHei6'}}, {'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRYUZzY35vgp'}}, {'name': 'Get_Attraction_Details', 'arguments': {'slug': 'prhpjlldhei6-osaka-castle-ticket'}}, {'name': 'Get_Attraction_Details', 'arguments': {'slug': 'pryuzzy35vgp-teamlab-botanical-garden-osaka-ticket'}}]
2025-08-25 13:11:12,622 - evaluation_logger_Attraction-118 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "timestamp": 1729531705472,
        "data": [
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-10-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-10-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-10-23"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-10-24"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-10-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-10-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-10-27"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-10-28"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-10-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-10-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-10-31"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-19"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-20"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-23"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-24"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-27"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-28"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-19"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-20"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-23"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-24"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-27"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-28"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-31"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-19"
            }
        ]
    },
    {
        "status": true,
        "message": "Success",
        "timestamp": 1729531737703,
        "data": [
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-10-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-23"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-24"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-10-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-10-27"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-10-28"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-31"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-19"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-20"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-23"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-24"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-27"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-28"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-19"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-20"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-23"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-24"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-27"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-28"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-31"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-19"
            }
        ]
    },
    {
        "status": true,
        "message": "Success",
        "data": {
            "__typename": "AttractionsProduct",
            "additionalBookingInfo": {
                "__typename": "AttractionsAdditionalBookingInfo",
                "freeForChildren": {
                    "__typename": "AttractionsFreeForChildren",
                    "age": {
                        "__typename": "MinMax",
                        "label": "Children aged 0 to 16 years can participate for free. "
                    }
                }
            },
            "additionalInfo": "Please bring your ticket with you to the attraction.\n\nBe aware that operators may cancel for unforeseen reasons.\n\nYou need to be 18 years or older to book or be accompanied by an adult. ",
            "applicableTerms": [
                {
                    "__typename": "TermsConditions",
                    "policyProvider": "Booking.com"
                },
                {
                    "__typename": "TermsConditions",
                    "policyProvider": "Klook"
                }
            ],
            "cancellationPolicy": {
                "__typename": "AttractionsCancellationPolicy",
                "hasFreeCancellation": false
            },
            "description": "On this visit to Osaka Castle, you'll get to discover the site's 100-plus years of history across eight floors. Inside, you'll be able to observe ancient Japanese relics and take in far-reaching views over Osaka from an observation point. There's also a chance to enjoy a show focused on the Taishō era, which ran from 1912 to 1926.",
            "flags": [
                {
                    "__typename": "AttractionsProductFlags",
                    "flag": "bestseller",
                    "value": true,
                    "rank": 1
                }
            ],
            "id": "PRhpjLlDHei6",
            "isBookable": true,
            "name": "Osaka Castle Ticket",
            "offers": [
                {
                    "__typename": "Offer",
                    "availabilityType": "date_time",
                    "id": "OFdQ0HNEHJNc"
                }
            ],
            "onSiteRequirements": {
                "__typename": "OnSiteRequirements"
            },
            "operatedBy": "Klook",
            "representativePrice": {
                "__typename": "AttractionsPrice",
                "chargeAmount": 4,
                "currency": "USD",
                "publicAmount": 4
            },
            "reviews": {
                "__typename": "AttractionsGetReviewsResponse",
                "total": 413,
                "reviews": [
                    {
                        "__typename": "AttractionsReview",
                        "id": "RS35nSpSJMuy",
                        "epochMs": 1729330621000,
                        "language": "en-gb",
                        "numericRating": 4,
                        "user": {
                            "__typename": "AttractionsReviewUser",
                            "name": "Carly",
                            "cc1": "gb"
                        }
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RSlbgjDrTGhd",
                        "epochMs": 1728969368000,
                        "numericRating": 4,
                        "user": {
                            "__typename": "AttractionsReviewUser",
                            "name": "Lisa",
                            "cc1": "ie"
                        }
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RSd1UpLOe16Q",
                        "epochMs": 1728958644000,
                        "numericRating": 5,
                        "user": {
                            "__typename": "AttractionsReviewUser",
                            "name": "Matthieu"
                        }
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RSl5PX17rLpO",
                        "epochMs": 1728685249000,
                        "numericRating": 5
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RS2reC0xQyOL",
                        "epochMs": 1728561662000,
                        "language": "ja",
                        "numericRating": 4
                    }
                ]
            },
            "reviewsStats": {
                "__typename": "AttractionsProductReviewStats",
                "allReviewsCount": 0,
                "percentage": "0",
                "combinedNumericStats": {
                    "__typename": "AttractionsProductCombinedReviewStats",
                    "average": 4.6,
                    "total": 1748
                }
            },
            "shortDescription": "A ticket providing admission to Japan's historic site of Osaka Castle",
            "slug": "prhpjlldhei6-osaka-castle-ticket",
            "supportedFeatures": {
                "__typename": "AttractionsProductSupportedFeatures",
                "nativeApp": true,
                "nativeAppBookProcess": true,
                "liveAvailabilityCheckSupported": true
            },
            "ufiDetails": {
                "__typename": "AttractionLocationResponse",
                "ufi": -240905,
                "bCityName": "Osaka"
            }
        }
    },
    {
        "status": true,
        "message": "Success",
        "data": {
            "__typename": "AttractionsProduct",
            "additionalInfo": "Please bring your ticket with you to the attraction.\n\nBe aware that operators may cancel for unforeseen reasons.\n\nYou need to be 18 years or older to book.",
            "applicableTerms": [
                {
                    "__typename": "TermsConditions",
                    "policyProvider": "Booking.com"
                },
                {
                    "__typename": "TermsConditions",
                    "policyProvider": "Klook"
                }
            ],
            "cancellationPolicy": {
                "__typename": "AttractionsCancellationPolicy",
                "hasFreeCancellation": false
            },
            "description": "This ticket will give you admission to teamLab Botanical Garden Osaka. You'll get to explore this permanent nighttime exhibition that transforms the 240 000 square metres of Nagai Botanical Garden into an experiential art space. You'll see how the space is transformed and influenced by the wind, rain and behaviour of people and birds. During your visit, you'll learn that non-material digital technology can turn nature into art without harming it.",
            "flags": [
                {
                    "__typename": "AttractionsProductFlags",
                    "flag": "bestseller",
                    "value": true,
                    "rank": 3
                },
                {
                    "__typename": "AttractionsProductFlags",
                    "flag": "bestsellerInMonth",
                    "value": true,
                    "rank": 1
                },
                {
                    "__typename": "AttractionsProductFlags",
                    "flag": "bestsellerInWeek",
                    "value": true,
                    "rank": 1
                },
                {
                    "__typename": "AttractionsProductFlags",
                    "flag": "bestsellerOnWeekends",
                    "value": true,
                    "rank": 1
                },
                {
                    "__typename": "AttractionsProductFlags",
                    "flag": "bestsellerForLandmarks",
                    "value": true,
                    "rank": 1
                }
            ],
            "id": "PRYUZzY35vgp",
            "isBookable": true,
            "name": "teamLab Botanical Garden Osaka Ticket",
            "offers": [
                {
                    "__typename": "Offer",
                    "availabilityType": "date_time",
                    "id": "OFOchcc26h13"
                },
                {
                    "__typename": "Offer",
                    "availabilityType": "date_time",
                    "id": "OFgq2JWW83Fs"
                }
            ],
            "onSiteRequirements": {
                "__typename": "OnSiteRequirements"
            },
            "operatedBy": "Klook",
            "representativePrice": {
                "__typename": "AttractionsPrice",
                "chargeAmount": 3.33,
                "currency": "USD",
                "publicAmount": 3.33
            },
            "restrictions": [
                "Comfortable footwear is recommended.",
                "Operates in all weather conditions, please dress appropriately."
            ],
            "reviews": {
                "__typename": "AttractionsGetReviewsResponse",
                "total": 444,
                "reviews": [
                    {
                        "__typename": "AttractionsReview",
                        "id": "RSqn0iyMnNTX",
                        "epochMs": 1729471907000,
                        "numericRating": 5,
                        "user": {
                            "__typename": "AttractionsReviewUser",
                            "name": "Moli",
                            "cc1": "gb"
                        }
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RSkxpZmZPAIK",
                        "epochMs": 1729422275000,
                        "numericRating": 5
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RSzY51eMPxOa",
                        "epochMs": 1729331263000,
                        "language": "fr",
                        "numericRating": 5,
                        "user": {
                            "__typename": "AttractionsReviewUser",
                            "name": "Patry"
                        }
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RSVWfI7LGQlc",
                        "epochMs": 1729293436000,
                        "numericRating": 5
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RSLxqCLrDoiu",
                        "content": "Not worth it. The experience is very very small you can complete in less than 15 mins. This is nothing like TeamLab experiences in Tokyo, save your money and visit the botanical gardens during the day instead.",
                        "epochMs": 1729156437000,
                        "language": "en-gb",
                        "numericRating": 1,
                        "user": {
                            "__typename": "AttractionsReviewUser",
                            "name": "Stacey",
                            "cc1": "au"
                        }
                    }
                ]
            },
            "reviewsStats": {
                "__typename": "AttractionsProductReviewStats",
                "allReviewsCount": 120,
                "percentage": "93%",
                "combinedNumericStats": {
                    "__typename": "AttractionsProductCombinedReviewStats",
                    "average": 4.4,
                    "total": 2163
                }
            },
            "shortDescription": "Admission to an experiential art space that explores how nature can become art",
            "slug": "pryuzzy35vgp-teamlab-botanical-garden-osaka-ticket",
            "supportedFeatures": {
                "__typename": "AttractionsProductSupportedFeatures",
                "nativeApp": true,
                "nativeAppBookProcess": true,
                "liveAvailabilityCheckSupported": true
            },
            "ufiDetails": {
                "__typename": "AttractionLocationResponse",
                "ufi": -240905,
                "bCityName": "Osaka"
            }
        }
    }
]

2025-08-25 13:14:12,525 - evaluation_logger_Attraction-118 - INFO - Final Response: <｜begin▁of▁sentence｜># 1. 概述

本文，我们来分享 [《精尽 Spring Boot 源码分析 —— 自动配置》](http://svip.iocoder.cn/Spring-Boot/AutoConfiguration/) 的**源码解析**。

在 Spring Boot 中，提供了 `@EnableAutoConfiguration` 注解，用于开启自动配置功能。而该注解，是通过 `@Import` 注解，注入了一个 `ImportSelector` 接口的实现类 [AutoConfigurationImportSelector](https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/AutoConfigurationImportSelector.java) 。在该实现类中，实现了 `#selectImports(AnnotationMetadata annotationMetadata)` 方法，该方法可能会返回大量的自动配置类，从而达到自动配置的效果。

当然，实际上，并不是所有的自动配置类都会被激活。通过 `@ConditionalOnClass` 等条件注解，来判断是否激活当前自动配置类。

# 2. AutoConfigurationImportSelector

`org.springframework.boot.autoconfigure.AutoConfigurationImportSelector` ，实现 DeferredImportSelector、BeanClassLoaderAware、ResourceLoaderAware、BeanFactoryAware、Ordered 接口，处理 `@EnableAutoConfiguration` 注解的 `@Import` 的 ImportSelector 实现类。

## 2.1 构造方法

```java
// AutoConfigurationImportSelector.java

private static final String[] NO_IMPORTS = {};

private static final Log logger = LogFactory.getLog(AutoConfigurationImportSelector.class);

private static final String PROPERTY_NAME_AUTOCONFIGURE_EXCLUDE = "spring.autoconfigure.exclude";

private ConfigurableListableBeanFactory beanFactory;

private Environment environment;

private ClassLoader beanClassLoader;

private ResourceLoader resourceLoader;

/**
 * 配置类（启动类）的 Bean 名称
 */
private ConfigurationClassFilter configurationClassFilter;
```

## 2.2 selectImports

实现 `#selectImports(AnnotationMetadata annotationMetadata)` 方法，自动配置的功能的主要入口。代码如下：

```java
// AutoConfigurationImportSelector.java

@Override
public String[] selectImports(AnnotationMetadata annotationMetadata) {
    // <1> 判断自动配置开关是否打开
    if (!isEnabled(annotationMetadata)) {
        return NO_IMPORTS;
    }
    // <2> 获得所有配置类
    AutoConfigurationEntry autoConfigurationEntry = getAutoConfigurationEntry(annotationMetadata);
    // <3> 返回符合条件的配置类
    return StringUtils.toStringArray(autoConfigurationEntry.getConfigurations());
}
```

`<1>` 处，调用 `#isEnabled(AnnotationMetadata metadata)` 方法，判断自动配置开关是否打开。默认情况下，是开启的。代码如下：

```java
// AutoConfigurationImportSelector.java

protected boolean isEnabled(AnnotationMetadata metadata) {
    // 当设置的是否：默认返回 true
    if (getClass() == AutoConfigurationImportSelector.class) {
        return getEnvironment().getProperty(EnableAutoConfiguration.ENABLED_OVERRIDE_PROPERTY, Boolean.class, true);
    }
    return true;
}
```

其中，`EnableAutoConfiguration.ENABLED_OVERRIDE_PROPERTY` 为 `"spring.boot.enableautoconfiguration"` 。

`<2>` 处，调用 `#getAutoConfigurationEntry(AnnotationMetadata annotationMetadata)` 方法，获得所有配置类。详细解析，见 [「2.3 getAutoConfigurationEntry」](http://svip.iocoder.cn/Spring-Boot/AutoConfiguration/#) 。

`<3>` 处，返回符合条件的配置类。

## 2.3 getAutoConfigurationEntry

`#getAutoConfigurationEntry(AnnotationMetadata annotationMetadata)` 方法，获得所有配置类。代码如下：

```java
// AutoConfigurationImportSelector.java

protected AutoConfigurationEntry getAutoConfigurationEntry(AnnotationMetadata annotationMetadata) {
    // <1> 获得 @EnableAutoConfiguration 注解中的属性，exclude、excludeName 等等。
    if (!isEnabled(annotationMetadata)) {
        return EMPTY_ENTRY;
    }
    // <2> 获得注解的属性
    AnnotationAttributes attributes = getAttributes(annotationMetadata);
    // <3> 获得所有自动配置的类名字。注意，这里还没有进行过滤。
    List<String> configurations = getCandidateConfigurations(annotationMetadata, attributes);
    // <4> 移除重复的配置类
    configurations = removeDuplicates(configurations);
    // <5> 获得需要排除的配置类。例如说，注解上 exclude 属性配置的类。
    Set<String> exclusions = getExclusions(annotationMetadata, attributes);
    // <6> 校验需要排除的配置类是否合法
    checkExcludedClasses(configurations, exclusions);
    // <7> 从 configurations 中，移除需要排除的配置类
    configurations.removeAll(exclusions);
    // <8> 对 configurations 进行过滤。根据项目具体的依赖情况，判断是否满足条件。
    configurations = getConfigurationClassFilter().filter(configurations);
    // <9> 触发自动配置类引入完成的事件
    fireAutoConfigurationImportEvents(configurations, exclusions);
    // <10> 创建 AutoConfigurationEntry 对象，并返回
    return new AutoConfigurationEntry(configurations, exclusions);
}
```

`<1>` 处，和 `#selectImports(AnnotationMetadata annotationMetadata)` 方法一样，判断自动配置开关是否打开。

`<2>` 处，调用 `#getAttributes(AnnotationMetadata metadata)` 方法，获得 `@EnableAutoConfiguration` 注解中的属性，exclude、excludeName 等等。代码如下：

```java
// AutoConfigurationImportSelector.java

protected AnnotationAttributes getAttributes(AnnotationMetadata metadata) {
    String name = getAnnotationClass().getName();
    AnnotationAttributes attributes = AnnotationAttributes.fromMap(metadata.getAnnotationAttributes(name, true));
    Assert.notNull(attributes, () -> "No auto-configuration attributes found. Is " + metadata.getClassName()
            + " annotated with " + ClassUtils.getShortName(name) + "?");
    return attributes;
}
```

`<3>` 处，调用 `#getCandidateConfigurations(AnnotationMetadata metadata, AnnotationAttributes attributes)` 方法，获得所有自动配置的类名字。注意，这里还没有进行过滤。详细解析，见 [「2.4 getCandidateConfigurations」](http://svip.iocoder.cn/Spring-Boot/AutoConfiguration/#) 。

`<4>` 处，调用 `#removeDuplicates(List<?> list)` 方法，移除重复的配置类。代码如下：

```java
// AutoConfigurationImportSelector.java

protected final <T> List<T> removeDuplicates(List<T> list) {
	return new ArrayList<>(new LinkedHashSet<>(list));
}
```

`<5>` 处，调用 `#getExclusions(AnnotationMetadata metadata, AnnotationAttributes attributes)` 方法，获得需要排除的配置类。例如说，注解上 exclude 属性配置的类。代码如下：

```java
// AutoConfigurationImportSelector.java

protected Set<String> getExclusions(AnnotationMetadata metadata, AnnotationAttributes attributes) {
    Set<String> excluded = new LinkedHashSet<>();
    // 从注解的 exclude 属性
    excluded.addAll(asList(attributes, "exclude"));
    // 从注解的 excludeName 属性
    excluded.addAll(Arrays.asList(attributes.getStringArray("excludeName")));
    // 从 `spring.autoconfigure.exclude` 配置项
    excluded.addAll(getExcludeAutoConfigurationsProperty());
    return excluded;
}
```

`<6>` 处，调用 `#checkExcludedClasses(List<String> configurations, Set<String> exclusions)` 方法，校验需要排除的配置类是否合法。代码如下：

```java
// AutoConfigurationImportSelector.java

private void checkExcludedClasses(List<String> configurations, Set<String> exclusions) {
    List<String> invalidExcludes = new ArrayList<>(exclusions.size());
    for (String exclusion : exclusions) {
        // 判断是否存在，若不存在，则添加到 invalidExcludes 中。
        if (ClassUtils.isPresent(exclusion, getClass().getClassLoader()) && !configurations.contains(exclusion)) {
            invalidExcludes.add(exclusion);
        }
    }
    // 如果有不存在的，抛出 IllegalStateException 异常
    if (!invalidExcludes.isEmpty()) {
        handleInvalidExcludes(invalidExcludes);
    }
}

protected void handleInvalidExcludes(List<String> invalidExcludes) {
    StringBuilder message = new StringBuilder();
    for (String exclude : invalidExcludes) {
        message.append("\t- ").append(exclude).append("\n");
    }
    throw new IllegalStateException("The following classes could not be excluded because they are"
            + " not auto-configuration classes:\n" + message);
}
```

`<7>` 处，从 `configurations` 中，移除需要排除的配置类。

`<8>` 处，调用 `#getConfigurationClassFilter()` 方法，获得配置类的过滤器，然后调用其 `ConfigurationClassFilter#filter(List<String> configurations)` 方法，对 `configurations` 进行过滤。根据项目具体的依赖情况，判断是否满足条件。详细解析，见 [「2.5 ConfigurationClassFilter」](http://svip.iocoder.cn/Spring-Boot/AutoConfiguration/#) 。

`<9>` 处，调用 `#fireAutoConfigurationImportEvents(List<String> configurations, Set<String> exclusions)` 方法，触发自动配置类引入完成的事件。详细解析，见 [「2.6 fireAutoConfigurationImportEvents」](http://svip.iocoder.cn/Spring-Boot/AutoConfiguration/#) 。

`<10>` 处，创建 AutoConfigurationEntry 对象，并返回。

## 2.4 getCandidateConfigurations

`#getCandidateConfigurations(AnnotationMetadata metadata, AnnotationAttributes attributes)` 方法，获得所有自动配置的类名字。代码如下：

```java
// AutoConfigurationImportSelector.java

protected List<String> getCandidateConfigurations(AnnotationMetadata metadata, AnnotationAttributes attributes) {
    // <1> 通过 SpringFactoriesLoader 加载器，从 META-INF/spring.factories 文件中，获得key为 EnableAutoConfiguration 的自动配置类
    List<String> configurations = SpringFactoriesLoader.loadFactoryNames(getSpringFactoriesLoaderFactoryClass(),
            getBeanClassLoader());
    // <2> 断言，判断 configurations 是否非空
    Assert.notEmpty(configurations, "No auto configuration classes found in META-INF/spring.factories. If you "
            + "are using a custom packaging, make sure that file is correct.");
    return configurations;
}
```

`<1>` 处，通过 SpringFactoriesLoader 加载器，从 `META-INF/spring.factories` 文件中，获得key为 `EnableAutoConfiguration` 的自动配置类。代码如下：

```java
// AutoConfigurationImportSelector.java

protected Class<?> getSpringFactoriesLoaderFactoryClass() {
	return EnableAutoConfiguration.class;
}
```

`<2>` 处，断言，判断 `configurations` 是否非空。

## 2.5 ConfigurationClassFilter

`org.springframework.boot.autoconfigure.AutoConfigurationImportSelector.ConfigurationClassFilter` ，是 AutoConfigurationImportSelector 的内部类，负责过滤不符合条件的配置类。

### 2.5.1 构造方法

```java
// AutoConfigurationImportSelector.java

private ConfigurationClassFilter configurationClassFilter;

private ConfigurationClassFilter getConfigurationClassFilter() {
    if (this.configurationClassFilter == null) {
        // 获得所有 AutoConfigurationImportFilter 的实现类
        List<AutoConfigurationImportFilter> filters = getAutoConfigurationImportFilters();
        for (AutoConfigurationImportFilter filter : filters) {
            // 初始化
            invokeAwareMethods(filter);
        }
        // 创建 ConfigurationClassFilter 对象
        this.configurationClassFilter = new ConfigurationClassFilter(this.beanClassLoader, filters);
    }
    return this.configurationClassFilter;
}

/**
 * 获得所有 AutoConfigurationImportFilter 的实现类
 *
 * @return
 */
protected List<AutoConfigurationImportFilter> getAutoConfigurationImportFilters() {
    return SpringFactoriesLoader.loadFactories(AutoConfigurationImportFilter.class, this.beanClassLoader);
}
```

其中，`AutoConfigurationImportFilter` 接口，代码如下：

```java
// AutoConfigurationImportFilter.java

@FunctionalInterface
public interface AutoConfigurationImportFilter {

	/**
	 * 判断是否匹配
	 *
	 * @param autoConfigurationClass 自动配置类
	 * @param autoConfigurationMetadata 自动配置类的元数据
	 * @return 是否匹配。如果返回 true，表示匹配；如果返回 false，表示不匹配，进行过滤
	 */
	boolean[] match(String[] autoConfigurationClass, AutoConfigurationMetadata autoConfigurationMetadata);

}
```

通过 `SpringFactoriesLoader#loadFactories(Class<T> factoryClass, ClassLoader classLoader)` 方法，加载所有 AutoConfigurationImportFilter 接口的实现类。在 `spring-boot-autoconfigure` 项目的 `META-INF/spring.factories` 文件中，定义如下：

```properties
# Auto Configuration Import Filters
org.springframework.boot.autoconfigure.AutoConfigurationImportFilter=\
org.springframework.boot.autoconfigure.condition.OnBeanCondition,\
org.springframework.boot.autoconfigure.condition.OnClassCondition,\
org.springframework.boot.autoconfigure.condition.OnWebApplicationCondition
```

- 即有三个实现类，分别是：
  - OnBeanCondition
  - OnClassCondition
  - OnWebApplicationCondition

这三个类，就是我们在 [《精尽 Spring Boot 源码分析 —— 条件注解》](http://svip.iocoder.cn/Spring-Boot/Conditional/) 中，看到的三个条件注解的实现类。

### 2.5.2 filter

`#filter(List<String> configurations)` 方法，过滤不符合条件的配置类。代码如下：

```java
// AutoConfigurationImportSelector.java#ConfigurationClassFilter

List<String> filter(List<String> configurations) {
    long startTime = System.nanoTime();
    // 获得已经初始化的自动配置类的数组
    String[] candidates = StringUtils.toStringArray(configurations);
    // 是否有需要跳过的
    boolean skipped = false;
    // 遍历 AutoConfigurationImportFilter 数组，逐个进行匹配
    for (AutoConfigurationImportFilter filter : this.filters) {
        // 判断是否匹配
        boolean[] match = filter.match(candidates, getAutoConfigurationMetadata());
        // 如果有不匹配的
        for (int i = 0; i < match.length; i++) {
            // 不匹配
            if (!match[i]) {
                // 设置为空，标记为跳过
                candidates[i] = null;
                // 标记 skipped 为 true ，表示有跳过
                skipped = true;
            }
        }
    }
    // 如果没有跳过，则直接返回 configurations
    if (!skipped) {
        return configurations;
    }
    // 创建 result 数组，保留匹配的
    List<String> result = new ArrayList<>(candidates.length);
    for (String candidate : candidates) {
        if (candidate != null) {
            result.add(candidate);
        }
    }
    // 打印日志
    if (logger.isTraceEnabled()) {
        int numberFiltered = configurations.size() - result.size();
        logger.trace("Filtered " + numberFiltered + " auto configuration class in "
                + TimeUnit.NANOSECONDS.toMillis(System.nanoTime() - startTime) + " ms");
    }
    // 返回
    return result;
}
```

## 2.6 fireAutoConfigurationImportEvents

`#fireAutoConfigurationImportEvents(List<String> configurations, Set<String> exclusions)` 方法，触发自动配置类引入完成的事件。代码如下：

```java
// AutoConfigurationImportSelector.java

private void fireAutoConfigurationImportEvents(List<String> configurations, Set<String> exclusions) {
    // 获得 AutoConfigurationImportListener 的数组
    List<AutoConfigurationImportListener> listeners = getAutoConfigurationImportListeners();
    // 如果非空，则触发事件
    if (!listeners.isEmpty()) {
        // 创建 AutoConfigurationImportEvent 事件
        AutoConfigurationImportEvent event = new AutoConfigurationImportEvent(this, configurations, exclusions);
        // 遍历 listeners 数组，逐个触发
        for (AutoConfigurationImportListener listener : listeners) {
            // 设置属性
            invokeAwareMethods(listener);
            // 触发事件
            listener.onAutoConfigurationImportEvent(event);
        }
    }
}
```

其中，`AutoConfigurationImportListener` 接口，代码如下：

```java
// AutoConfigurationImportListener.java

@FunctionalInterface
public interface AutoConfigurationImportListener {

	void onAutoConfigurationImportEvent(AutoConfigurationImportEvent event);

}
```

通过 `#getAutoConfigurationImportListeners()` 方法，获得所有 AutoConfigurationImportListener 的实现类。代码如下：

```java
// AutoConfigurationImportSelector.java

protected List<AutoConfigurationImportListener> getAutoConfigurationImportListeners() {
	return SpringFactoriesLoader.loadFactories(AutoConfigurationImportListener.class, this.beanClassLoader);
}
```

在 `spring-boot-autoconfigure` 项目的 `META-INF/spring.factories` 文件中，定义如下：

```properties
# Auto Configuration Import Listeners
org.springframework.boot.autoconfigure.AutoConfigurationImportListener=\
org.springframework.boot.autoconfigure.condition.ConditionEvaluationReportAutoConfigurationImportListener
```

- 即只有一个实现类 ConditionEvaluationReportAutoConfigurationImportListener 。关于这个类，我们在下一篇文章，详细解析。

# 3. 小结

😈 一不小心，又撸了这么长。不过 Spring Boot 的自动配置，基本已经解析完成。当然，具体的自动配置类，就需要胖友自己去探索了。

另外，推荐阅读下 [《Spring Boot 自动配置》](https://www.jianshu.com/p/7f54da937cb5) 文章，可以对自动配置，有更直观的理解。

2025-08-25 13:14:20,551 - evaluation_logger_Attraction-118 - INFO - Complete Result: {'score': 0, 'reason': "The response does not address any part of the user's query about trending attractions in Osaka or ticket availability."}
2025-08-25 13:14:26,528 - evaluation_logger_Attraction-118 - INFO - Correct Result: {'score': 0, 'reason': 'All information in the response is incorrect.'}
2025-08-25 13:14:26,528 - evaluation_logger_Attraction-118 - INFO - Message: Success.
2025-08-25 13:14:26,528 - evaluation_logger_Attraction-118 - INFO - Success turn num = 3
2025-08-25 13:14:26,528 - evaluation_logger_Attraction-118 - INFO - ----------------------------------------------------------------------------------------------------
