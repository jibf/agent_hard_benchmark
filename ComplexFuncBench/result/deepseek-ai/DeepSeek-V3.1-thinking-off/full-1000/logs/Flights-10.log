2025-08-25 13:15:53,187 - evaluation_logger_Flights-10 - INFO - Test Example Flights-10
2025-08-25 13:15:53,187 - evaluation_logger_Flights-10 - INFO - Query: Arrange the best first class flight for four members of our team from Berlin to Vancouver on December 10, 2024. The other team will meet us at Vancouver International Airport.
2025-08-25 13:16:02,255 - evaluation_logger_Flights-10 - INFO - Function Calls: 
[
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "Berlin"
        }
    },
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "Vancouver International Airport"
        }
    }
]

2025-08-25 13:16:02,255 - evaluation_logger_Flights-10 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "Vancouver International Airport"
        }
    },
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "Berlin"
        }
    },
    {
        "name": "Search_Flights",
        "arguments": {
            "fromId": "BER.AIRPORT",
            "toId": "YVR.AIRPORT",
            "departDate": "2024-12-10",
            "cabinClass": "FIRST",
            "sort": "BEST",
            "adults": 4
        }
    }
]

2025-08-25 13:16:02,255 - evaluation_logger_Flights-10 - INFO - Start compare_single_call: 
{'name': 'Search_Flight_Location', 'arguments': {'query': 'Berlin'}}
{'name': 'Search_Flight_Location', 'arguments': {'query': 'Berlin'}}
2025-08-25 13:16:02,255 - evaluation_logger_Flights-10 - INFO - Rule-based compare success.
2025-08-25 13:16:02,255 - evaluation_logger_Flights-10 - INFO - Start compare_single_call: 
{'name': 'Search_Flight_Location', 'arguments': {'query': 'Vancouver International Airport'}}
{'name': 'Search_Flight_Location', 'arguments': {'query': 'Vancouver International Airport'}}
2025-08-25 13:16:02,255 - evaluation_logger_Flights-10 - INFO - Rule-based compare success.
2025-08-25 13:16:02,255 - evaluation_logger_Flights-10 - INFO - Success matched: [{'name': 'Search_Flight_Location', 'arguments': {'query': 'Berlin'}}, {'name': 'Search_Flight_Location', 'arguments': {'query': 'Vancouver International Airport'}}]
2025-08-25 13:16:02,255 - evaluation_logger_Flights-10 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "id": "BER.AIRPORT",
                "type": "AIRPORT",
                "name": "Berlin Brandenburg Airport Willy Brandt",
                "code": "BER",
                "city": "BER",
                "cityName": "Berlin",
                "regionName": "Berlin Federal State",
                "country": "DE",
                "countryName": "Germany",
                "countryNameShort": "Germany",
                "distanceToCity": {
                    "value": 19.28047053602839,
                    "unit": "km"
                },
                "parent": "BER"
            }
        ]
    },
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "id": "YVR.AIRPORT",
                "type": "AIRPORT",
                "name": "Vancouver International Airport",
                "code": "YVR",
                "city": "YVR",
                "cityName": "Vancouver",
                "regionName": "British Columbia",
                "country": "CA",
                "countryName": "Canada",
                "countryNameShort": "Canada",
                "distanceToCity": {
                    "value": 10.476891402469255,
                    "unit": "km"
                },
                "parent": "YVR"
            }
        ]
    }
]

2025-08-25 13:16:15,108 - evaluation_logger_Flights-10 - INFO - Function Calls: 
[
    {
        "name": "Search_Flights",
        "arguments": {
            "fromId": "BER.AIRPORT",
            "toId": "YVR.AIRPORT",
            "departDate": "2024-12-10",
            "cabinClass": "FIRST",
            "sort": "BEST",
            "adults": 4
        }
    }
]

2025-08-25 13:16:15,108 - evaluation_logger_Flights-10 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Flights",
        "arguments": {
            "adults": 4,
            "cabinClass": "FIRST",
            "departDate": "2024-12-10",
            "fromId": "BER.AIRPORT",
            "sort": "BEST",
            "toId": "YVR.AIRPORT"
        }
    }
]

2025-08-25 13:16:15,108 - evaluation_logger_Flights-10 - INFO - Start compare_single_call: 
{'name': 'Search_Flights', 'arguments': {'adults': 4, 'cabinClass': 'FIRST', 'departDate': '2024-12-10', 'fromId': 'BER.AIRPORT', 'sort': 'BEST', 'toId': 'YVR.AIRPORT'}}
{'name': 'Search_Flights', 'arguments': {'adults': 4, 'cabinClass': 'FIRST', 'departDate': '2024-12-10', 'fromId': 'BER.AIRPORT', 'sort': 'BEST', 'toId': 'YVR.AIRPORT'}}
2025-08-25 13:16:15,108 - evaluation_logger_Flights-10 - INFO - Rule-based compare success.
2025-08-25 13:16:15,108 - evaluation_logger_Flights-10 - INFO - Success matched: [{'name': 'Search_Flights', 'arguments': {'adults': 4, 'cabinClass': 'FIRST', 'departDate': '2024-12-10', 'fromId': 'BER.AIRPORT', 'sort': 'BEST', 'toId': 'YVR.AIRPORT'}}]
2025-08-25 13:16:15,110 - evaluation_logger_Flights-10 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "flightOffers": [
                {
                    "token": "d7699_H4sIAAAAAAAA_1WQUW-CMBSFf818o1BalS5pFhR0KrBlA9S9NFgrom5daBeYv35VzJblNvd85ybnNu1e6091b9u7U1XutbK-FCillmWhBeDy3d7Vpm2kPFYfpV1UtT0KX9b5C3SCcGxj2zLF7ycPotWWqjntVRsBCmoRQjpUnHo3qukA4BBHs3QVXUdcaopBHzqD0WIWuKgb1nQ6x8-z_Oq2NB43TRT4w18NVPt0XjtP56yNg7fxq3NsspwP4zTJ4--mTQ6TJApCN84aFafrNg30PKku2VDFx-x8XSs4pxAAPCTw6mWhaHe95JpCp8Otpq_RY7ZKO6upO_AQRt17WgoR8vo9JU6C60p-LMQ3zXwyQJb5HMFdbM1Z5iME_3lIoPM3uHPHZav6p8rAHfLNKZkLMMCG9swBpgwVbDoHzxlYLozZMBIZ4Z1sGSSeQK5nWDDiFpfkjl16xfAtf2CzpZEz23lK9sUPLow2IfMBAAA.",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "BER",
                                "name": "Berlin Brandenburg Airport Willy Brandt",
                                "city": "BER",
                                "cityName": "Berlin",
                                "country": "DE",
                                "countryName": "Germany"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "YVR",
                                "name": "Vancouver International Airport",
                                "city": "YVR",
                                "cityName": "Vancouver",
                                "country": "CA",
                                "countryName": "Canada"
                            },
                            "departureTime": "2024-12-10T09:55:00",
                            "arrivalTime": "2024-12-10T21:43:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-10T09:55:00",
                                    "arrivalTime": "2024-12-10T13:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "BER",
                                        "name": "Berlin Brandenburg Airport Willy Brandt",
                                        "city": "BER",
                                        "cityName": "Berlin",
                                        "country": "DE",
                                        "countryName": "Germany"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "EWR",
                                        "name": "Newark Liberty International Airport",
                                        "city": "NYC",
                                        "cityName": "New York",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "BUSINESS",
                                    "flightInfo": {
                                        "flightNumber": 963,
                                        "planeType": "764",
                                        "carrierInfo": {
                                            "operatingCarrier": "UA",
                                            "marketingCarrier": "UA"
                                        }
                                    },
                                    "carriers": [
                                        "UA",
                                        "UA"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "United Airlines",
                                            "code": "UA"
                                        },
                                        {
                                            "name": "United Airlines",
                                            "code": "UA"
                                        }
                                    ],
                                    "totalTime": 33600,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "767"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "1",
                                    "arrivalTerminal": "C"
                                },
                                {
                                    "departureTime": "2024-12-10T15:30:00",
                                    "arrivalTime": "2024-12-10T18:00:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "EWR",
                                        "name": "Newark Liberty International Airport",
                                        "city": "NYC",
                                        "cityName": "New York",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "DEN",
                                        "name": "Denver International Airport",
                                        "city": "DEN",
                                        "cityName": "Denver",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "FIRST",
                                    "flightInfo": {
                                        "flightNumber": 331,
                                        "planeType": "752",
                                        "carrierInfo": {
                                            "operatingCarrier": "UA",
                                            "marketingCarrier": "UA"
                                        }
                                    },
                                    "carriers": [
                                        "UA",
                                        "UA"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "United Airlines",
                                            "code": "UA"
                                        },
                                        {
                                            "name": "United Airlines",
                                            "code": "UA"
                                        }
                                    ],
                                    "totalTime": 16200,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "757"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "C"
                                },
                                {
                                    "departureTime": "2024-12-10T19:32:00",
                                    "arrivalTime": "2024-12-10T21:43:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "DEN",
                                        "name": "Denver International Airport",
                                        "city": "DEN",
                                        "cityName": "Denver",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "YVR",
                                        "name": "Vancouver International Airport",
                                        "city": "YVR",
                                        "cityName": "Vancouver",
                                        "country": "CA",
                                        "countryName": "Canada"
                                    },
                                    "cabinClass": "FIRST",
                                    "flightInfo": {
                                        "flightNumber": 1910,
                                        "planeType": "319",
                                        "carrierInfo": {
                                            "operatingCarrier": "UA",
                                            "marketingCarrier": "UA"
                                        }
                                    },
                                    "carriers": [
                                        "UA",
                                        "UA"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "United Airlines",
                                            "code": "UA"
                                        },
                                        {
                                            "name": "United Airlines",
                                            "code": "UA"
                                        }
                                    ],
                                    "totalTime": 11460,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A319"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "arrivalTerminal": "M"
                                }
                            ],
                            "totalTime": 74880,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                },
                {
                    "token": "d6a1f_H4sIAAAAAAAA_1WQb2-rIBTGP033ThRBrUvITeef23a43kzt2r0hFql13caNsKvrp7-0NluWQ57n95wDgXDQ-q-6te39a9sctLI-FGiklk2lBeDyzd53RnZSHtv3xq7azr5LHrfrR-jESWRj2zLFb9NfYtCW6ji5aXcCVMQKw3BExcn0Sh3xAU4wXRQbemlxqQkGHnT8u_tF7M7HZkd-0zncppdUkyzqexrPgi-P1bA6pcvVqRyy-DnKnWNfro9BVqz_PLT98FBOXRonsDht1Y9e2sCnM69nLo1gXr4onZVHRYt0SSNnyPP-mrPB3GM8UatiMUHx5SGCcwIBwEEIL1lWiqCRuCbQGbHWJKfzclOMURMUBg7yx-lAIEJT70aJV8F1K9_vxSehmzDwLPOdgrvYWjK6mfpfMWWzCEH4PZ640U77UgkDEzQzq2EuwMA1dGAOMGWoYukzoCEoUxN2LKTG-Gg1c726xui8TbCz7hk22jJ8PfzCFk_GTsz79_ap8H_v1xu_IAIAAA..",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "BER",
                                "name": "Berlin Brandenburg Airport Willy Brandt",
                                "city": "BER",
                                "cityName": "Berlin",
                                "country": "DE",
                                "countryName": "Germany"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "YVR",
                                "name": "Vancouver International Airport",
                                "city": "YVR",
                                "cityName": "Vancouver",
                                "country": "CA",
                                "countryName": "Canada"
                            },
                            "departureTime": "2024-12-10T09:35:00",
                            "arrivalTime": "2024-12-10T20:47:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-10T09:35:00",
                                    "arrivalTime": "2024-12-10T11:05:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "BER",
                                        "name": "Berlin Brandenburg Airport Willy Brandt",
                                        "city": "BER",
                                        "cityName": "Berlin",
                                        "country": "DE",
                                        "countryName": "Germany"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "ZRH",
                                        "name": "Zurich Airport",
                                        "city": "ZRH",
                                        "cityName": "Zürich",
                                        "country": "CH",
                                        "countryName": "Switzerland"
                                    },
                                    "cabinClass": "BUSINESS",
                                    "flightInfo": {
                                        "flightNumber": 975,
                                        "planeType": "223",
                                        "carrierInfo": {
                                            "operatingCarrier": "BT",
                                            "marketingCarrier": "LX",
                                            "operatingCarrierDisclosureText": "Air Baltic"
                                        }
                                    },
                                    "carriers": [
                                        "LX",
                                        "BT"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Swiss",
                                            "code": "LX"
                                        },
                                        {
                                            "name": "Air Baltic",
                                            "code": "BT"
                                        }
                                    ],
                                    "totalTime": 5400,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "223"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        }
                                    ],
                                    "departureTerminal": "1"
                                },
                                {
                                    "departureTime": "2024-12-10T12:45:00",
                                    "arrivalTime": "2024-12-10T15:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "ZRH",
                                        "name": "Zurich Airport",
                                        "city": "ZRH",
                                        "cityName": "Zürich",
                                        "country": "CH",
                                        "countryName": "Switzerland"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "YUL",
                                        "name": "Montreal-Trudeau International Airport",
                                        "city": "YMQ",
                                        "cityName": "Montréal",
                                        "country": "CA",
                                        "countryName": "Canada"
                                    },
                                    "cabinClass": "FIRST",
                                    "flightInfo": {
                                        "flightNumber": 86,
                                        "planeType": "333",
                                        "carrierInfo": {
                                            "operatingCarrier": "LX",
                                            "marketingCarrier": "LX"
                                        }
                                    },
                                    "carriers": [
                                        "LX",
                                        "LX"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Swiss",
                                            "code": "LX"
                                        },
                                        {
                                            "name": "Swiss",
                                            "code": "LX"
                                        }
                                    ],
                                    "totalTime": 30600,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A330"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "free"
                                        }
                                    ]
                                },
                                {
                                    "departureTime": "2024-12-10T18:15:00",
                                    "arrivalTime": "2024-12-10T20:47:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "YUL",
                                        "name": "Montreal-Trudeau International Airport",
                                        "city": "YMQ",
                                        "cityName": "Montréal",
                                        "country": "CA",
                                        "countryName": "Canada"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "YVR",
                                        "name": "Vancouver International Airport",
                                        "city": "YVR",
                                        "cityName": "Vancouver",
                                        "country": "CA",
                                        "countryName": "Canada"
                                    },
                                    "cabinClass": "BUSINESS",
                                    "flightInfo": {
                                        "flightNumber": 311,
                                        "planeType": "77W",
                                        "carrierInfo": {
                                            "operatingCarrier": "AC",
                                            "marketingCarrier": "AC"
                                        }
                                    },
                                    "carriers": [
                                        "AC",
                                        "AC"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Air Canada",
                                            "code": "AC"
                                        },
                                        {
                                            "name": "Air Canada",
                                            "code": "AC"
                                        }
                                    ],
                                    "totalTime": 19920,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "777"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "arrivalTerminal": "M"
                                }
                            ],
                            "totalTime": 72720,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                },
                {
                    "token": "d6a1f_H4sIAAAAAAAA_1WQbU-DMBSFf838RqFQ3kwaM3nRaXFGYG5-aVhXGE6toZ3gfr3dWDTmNuc85942bbpV6lNemmb91jZbJY29BI1QoqkUB0y8m3WnZS3Erv1ozKrtzOvkabV4glacRCYyDV3sMr3igzJkx_BFu-agwkYYhiNKhoMzddgDKEFkVizJqcWEwgi40PKu72exfTM2O3xDbuEqPaUNzqK-J_HU__VYDvPDypofyiGLX6Lc2vXlgvlZsXh8aPvhoQxsEiewOKzkv17awOcjL6Y2iWBevkqVlTtJivSORNaQ5_05Z4O-R3si58Vs4sSnh3DGMAQA-SE8ZVFJ7IzEFIbWiBuFc3JbLosxKuyEAbTQOB0wdJzAvZD8jTPVio97_o3JMvRdQ38nZzYy7ihZBt5vTHVEno_-5hM7qr8QUmsNE2eqV0NtgICtaUstoEtTRdMXQEJQpjqsaUi0sdE21HZr3_WO2zg9ak2R1pai8-FXOnvWdqBI7GG3_QFPSIu2IQIAAA..",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "BER",
                                "name": "Berlin Brandenburg Airport Willy Brandt",
                                "city": "BER",
                                "cityName": "Berlin",
                                "country": "DE",
                                "countryName": "Germany"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "YVR",
                                "name": "Vancouver International Airport",
                                "city": "YVR",
                                "cityName": "Vancouver",
                                "country": "CA",
                                "countryName": "Canada"
                            },
                            "departureTime": "2024-12-10T09:35:00",
                            "arrivalTime": "2024-12-10T20:47:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-10T09:35:00",
                                    "arrivalTime": "2024-12-10T11:05:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "BER",
                                        "name": "Berlin Brandenburg Airport Willy Brandt",
                                        "city": "BER",
                                        "cityName": "Berlin",
                                        "country": "DE",
                                        "countryName": "Germany"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "ZRH",
                                        "name": "Zurich Airport",
                                        "city": "ZRH",
                                        "cityName": "Zürich",
                                        "country": "CH",
                                        "countryName": "Switzerland"
                                    },
                                    "cabinClass": "BUSINESS",
                                    "flightInfo": {
                                        "flightNumber": 975,
                                        "planeType": "223",
                                        "carrierInfo": {
                                            "operatingCarrier": "BT",
                                            "marketingCarrier": "LX",
                                            "operatingCarrierDisclosureText": "Air Baltic"
                                        }
                                    },
                                    "carriers": [
                                        "LX",
                                        "BT"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Swiss",
                                            "code": "LX"
                                        },
                                        {
                                            "name": "Air Baltic",
                                            "code": "BT"
                                        }
                                    ],
                                    "totalTime": 5400,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "223"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        }
                                    ],
                                    "departureTerminal": "1"
                                },
                                {
                                    "departureTime": "2024-12-10T12:45:00",
                                    "arrivalTime": "2024-12-10T15:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "ZRH",
                                        "name": "Zurich Airport",
                                        "city": "ZRH",
                                        "cityName": "Zürich",
                                        "country": "CH",
                                        "countryName": "Switzerland"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "YUL",
                                        "name": "Montreal-Trudeau International Airport",
                                        "city": "YMQ",
                                        "cityName": "Montréal",
                                        "country": "CA",
                                        "countryName": "Canada"
                                    },
                                    "cabinClass": "FIRST",
                                    "flightInfo": {
                                        "flightNumber": 86,
                                        "planeType": "333",
                                        "carrierInfo": {
                                            "operatingCarrier": "LX",
                                            "marketingCarrier": "LX"
                                        }
                                    },
                                    "carriers": [
                                        "LX",
                                        "LX"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Swiss",
                                            "code": "LX"
                                        },
                                        {
                                            "name": "Swiss",
                                            "code": "LX"
                                        }
                                    ],
                                    "totalTime": 30600,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A330"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "free"
                                        }
                                    ]
                                },
                                {
                                    "departureTime": "2024-12-10T18:15:00",
                                    "arrivalTime": "2024-12-10T20:47:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "YUL",
                                        "name": "Montreal-Trudeau International Airport",
                                        "city": "YMQ",
                                        "cityName": "Montréal",
                                        "country": "CA",
                                        "countryName": "Canada"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "YVR",
                                        "name": "Vancouver International Airport",
                                        "city": "YVR",
                                        "cityName": "Vancouver",
                                        "country": "CA",
                                        "countryName": "Canada"
                                    },
                                    "cabinClass": "BUSINESS",
                                    "flightInfo": {
                                        "flightNumber": 4674,
                                        "planeType": "77W",
                                        "carrierInfo": {
                                            "operatingCarrier": "AC",
                                            "marketingCarrier": "LX",
                                            "operatingCarrierDisclosureText": "Air Canada"
                                        }
                                    },
                                    "carriers": [
                                        "LX",
                                        "AC"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Swiss",
                                            "code": "LX"
                                        },
                                        {
                                            "name": "Air Canada",
                                            "code": "AC"
                                        }
                                    ],
                                    "totalTime": 19920,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "777"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "arrivalTerminal": "M"
                                }
                            ],
                            "totalTime": 72720,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                },
                {
                    "token": "d6a1f_H4sIAAAAAAAA_1WQbU_DIBSFf838VloK64sJMbMvOqXO2HZufiEdo12diimY1v162bpozCXnPOdeCISd1p_q0rbrt7bZaWV9KdBILZtKC8Dlu113RjZS7tuPxq7azr5OntbLJ-jESWRj2zLFL9MrMWhLdZxctBsBKmKFYTii4iQ4U0c8gBNM58WKnlpcaoLBFDre9f08dtOx2ZEbegvXY9qSLOp7Gs_8X4_VsDisncWhHLL4JcqdfV8uuZ8Vy8eHth8eysClcQKLw1r966UNfD7ycubSCOblq9JZuVe0SO9o5Ax53p9zNph7jCdqUcwnKD49RHBOIADYD-Epy0oRNBLXBDojbjXJ6W25KsaoCQoD6OBxOhCIUDC9UOJNcN3Kj3vxTegq9JBlvlNwF1t3jK4C7zemJmLPx3_ziRvVnxrtlYEJmpnVMBdg4BraMQeYMlSxCAEagjI1YcNCaoyPtmXutPan3nGbYEetGTbaMnw-_Mrmz8YODMsv2O1-ABfaWvohAgAA",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "BER",
                                "name": "Berlin Brandenburg Airport Willy Brandt",
                                "city": "BER",
                                "cityName": "Berlin",
                                "country": "DE",
                                "countryName": "Germany"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "YVR",
                                "name": "Vancouver International Airport",
                                "city": "YVR",
                                "cityName": "Vancouver",
                                "country": "CA",
                                "countryName": "Canada"
                            },
                            "departureTime": "2024-12-10T07:15:00",
                            "arrivalTime": "2024-12-10T20:47:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-10T07:15:00",
                                    "arrivalTime": "2024-12-10T08:45:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "BER",
                                        "name": "Berlin Brandenburg Airport Willy Brandt",
                                        "city": "BER",
                                        "cityName": "Berlin",
                                        "country": "DE",
                                        "countryName": "Germany"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "ZRH",
                                        "name": "Zurich Airport",
                                        "city": "ZRH",
                                        "cityName": "Zürich",
                                        "country": "CH",
                                        "countryName": "Switzerland"
                                    },
                                    "cabinClass": "BUSINESS",
                                    "flightInfo": {
                                        "flightNumber": 963,
                                        "planeType": "320",
                                        "carrierInfo": {
                                            "operatingCarrier": "LX",
                                            "marketingCarrier": "LX"
                                        }
                                    },
                                    "carriers": [
                                        "LX",
                                        "LX"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Swiss",
                                            "code": "LX"
                                        },
                                        {
                                            "name": "Swiss",
                                            "code": "LX"
                                        }
                                    ],
                                    "totalTime": 5400,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A320"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        }
                                    ],
                                    "departureTerminal": "1"
                                },
                                {
                                    "departureTime": "2024-12-10T12:45:00",
                                    "arrivalTime": "2024-12-10T15:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "ZRH",
                                        "name": "Zurich Airport",
                                        "city": "ZRH",
                                        "cityName": "Zürich",
                                        "country": "CH",
                                        "countryName": "Switzerland"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "YUL",
                                        "name": "Montreal-Trudeau International Airport",
                                        "city": "YMQ",
                                        "cityName": "Montréal",
                                        "country": "CA",
                                        "countryName": "Canada"
                                    },
                                    "cabinClass": "FIRST",
                                    "flightInfo": {
                                        "flightNumber": 86,
                                        "planeType": "333",
                                        "carrierInfo": {
                                            "operatingCarrier": "LX",
                                            "marketingCarrier": "LX"
                                        }
                                    },
                                    "carriers": [
                                        "LX",
                                        "LX"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Swiss",
                                            "code": "LX"
                                        },
                                        {
                                            "name": "Swiss",
                                            "code": "LX"
                                        }
                                    ],
                                    "totalTime": 30600,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A330"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "free"
                                        }
                                    ]
                                },
                                {
                                    "departureTime": "2024-12-10T18:15:00",
                                    "arrivalTime": "2024-12-10T20:47:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "YUL",
                                        "name": "Montreal-Trudeau International Airport",
                                        "city": "YMQ",
                                        "cityName": "Montréal",
                                        "country": "CA",
                                        "countryName": "Canada"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "YVR",
                                        "name": "Vancouver International Airport",
                                        "city": "YVR",
                                        "cityName": "Vancouver",
                                        "country": "CA",
                                        "countryName": "Canada"
                                    },
                                    "cabinClass": "BUSINESS",
                                    "flightInfo": {
                                        "flightNumber": 4674,
                                        "planeType": "77W",
                                        "carrierInfo": {
                                            "operatingCarrier": "AC",
                                            "marketingCarrier": "LX",
                                            "operatingCarrierDisclosureText": "Air Canada"
                                        }
                                    },
                                    "carriers": [
                                        "LX",
                                        "AC"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Swiss",
                                            "code": "LX"
                                        },
                                        {
                                            "name": "Air Canada",
                                            "code": "AC"
                                        }
                                    ],
                                    "totalTime": 19920,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "777"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "arrivalTerminal": "M"
                                }
                            ],
                            "totalTime": 81120,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                },
                {
                    "token": "d6a1f_H4sIAAAAAAAA_1WQ227jIBRFvyZ9MwZMfKmEqsSXaVrcVLWdJvOCHEIcN22pDJU9-fohcdTR6KC91z4HBOJgzJe-dd39e9scjHa-NWiUUU1tJBDqw913VrZKHdvPxq3bzp2nL5vVC4JJGrvEdWyJ2-xODsbRnaA37VaCmjpRFI2oBQ2v1FEfkJSwRblml5ZQhhIwRdCfPy4SnI7Njv5i92iTXdKO5nHfs2QW_Hiih-VpA5enasiT33EBj321EkFerp6f2n54qkLMkhSVp43-r5c16PXMqxlmMSqqN23y6qhZmT2wGA5F0V9zPth7rKd6WS4mXnJ5iBSCIgBIEKFLVrWm3kjCUARH3BlasPtqXY7RUC8KESTjdKDI88LpjZbvUphWfT7KP5StCYGBY_9TCkycB87Wof8TMxuJH5B_8wmO27DbSWxh4s3sajgGBGBLBw6BLUs1n0eARaDKbNjyiFkTo-04nu6DqX_eJvlZ95xYbTm5Hn7ji1drJ07UN-oOfwGgKVoDIgIAAA..",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "BER",
                                "name": "Berlin Brandenburg Airport Willy Brandt",
                                "city": "BER",
                                "cityName": "Berlin",
                                "country": "DE",
                                "countryName": "Germany"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "YVR",
                                "name": "Vancouver International Airport",
                                "city": "YVR",
                                "cityName": "Vancouver",
                                "country": "CA",
                                "countryName": "Canada"
                            },
                            "departureTime": "2024-12-10T06:45:00",
                            "arrivalTime": "2024-12-10T20:47:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-10T06:45:00",
                                    "arrivalTime": "2024-12-10T08:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "BER",
                                        "name": "Berlin Brandenburg Airport Willy Brandt",
                                        "city": "BER",
                                        "cityName": "Berlin",
                                        "country": "DE",
                                        "countryName": "Germany"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "ZRH",
                                        "name": "Zurich Airport",
                                        "city": "ZRH",
                                        "cityName": "Zürich",
                                        "country": "CH",
                                        "countryName": "Switzerland"
                                    },
                                    "cabinClass": "BUSINESS",
                                    "flightInfo": {
                                        "flightNumber": 4407,
                                        "planeType": "32A",
                                        "carrierInfo": {
                                            "operatingCarrier": "EW",
                                            "marketingCarrier": "LX",
                                            "operatingCarrierDisclosureText": "Eurowings"
                                        }
                                    },
                                    "carriers": [
                                        "LX",
                                        "EW"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Swiss",
                                            "code": "LX"
                                        },
                                        {
                                            "name": "Eurowings",
                                            "code": "EW"
                                        }
                                    ],
                                    "totalTime": 5400,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A320"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "paid"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "light_meal"
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "1"
                                },
                                {
                                    "departureTime": "2024-12-10T12:45:00",
                                    "arrivalTime": "2024-12-10T15:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "ZRH",
                                        "name": "Zurich Airport",
                                        "city": "ZRH",
                                        "cityName": "Zürich",
                                        "country": "CH",
                                        "countryName": "Switzerland"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "YUL",
                                        "name": "Montreal-Trudeau International Airport",
                                        "city": "YMQ",
                                        "cityName": "Montréal",
                                        "country": "CA",
                                        "countryName": "Canada"
                                    },
                                    "cabinClass": "FIRST",
                                    "flightInfo": {
                                        "flightNumber": 86,
                                        "planeType": "333",
                                        "carrierInfo": {
                                            "operatingCarrier": "LX",
                                            "marketingCarrier": "LX"
                                        }
                                    },
                                    "carriers": [
                                        "LX",
                                        "LX"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Swiss",
                                            "code": "LX"
                                        },
                                        {
                                            "name": "Swiss",
                                            "code": "LX"
                                        }
                                    ],
                                    "totalTime": 30600,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A330"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "free"
                                        }
                                    ]
                                },
                                {
                                    "departureTime": "2024-12-10T18:15:00",
                                    "arrivalTime": "2024-12-10T20:47:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "YUL",
                                        "name": "Montreal-Trudeau International Airport",
                                        "city": "YMQ",
                                        "cityName": "Montréal",
                                        "country": "CA",
                                        "countryName": "Canada"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "YVR",
                                        "name": "Vancouver International Airport",
                                        "city": "YVR",
                                        "cityName": "Vancouver",
                                        "country": "CA",
                                        "countryName": "Canada"
                                    },
                                    "cabinClass": "BUSINESS",
                                    "flightInfo": {
                                        "flightNumber": 4674,
                                        "planeType": "77W",
                                        "carrierInfo": {
                                            "operatingCarrier": "AC",
                                            "marketingCarrier": "LX",
                                            "operatingCarrierDisclosureText": "Air Canada"
                                        }
                                    },
                                    "carriers": [
                                        "LX",
                                        "AC"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Swiss",
                                            "code": "LX"
                                        },
                                        {
                                            "name": "Air Canada",
                                            "code": "AC"
                                        }
                                    ],
                                    "totalTime": 19920,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "777"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "arrivalTerminal": "M"
                                }
                            ],
                            "totalTime": 82920,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                }
            ],
            "flightDeals": [
                {
                    "key": "CHEAPEST",
                    "offerToken": "d7699_H4sIAAAAAAAA_1WQUW-CMBSFf818o1BalS5pFhR0KrBlA9S9NFgrom5daBeYv35VzJblNvd85ybnNu1e6091b9u7U1XutbK-FCillmWhBeDy3d7Vpm2kPFYfpV1UtT0KX9b5C3SCcGxj2zLF7ycPotWWqjntVRsBCmoRQjpUnHo3qukA4BBHs3QVXUdcaopBHzqD0WIWuKgb1nQ6x8-z_Oq2NB43TRT4w18NVPt0XjtP56yNg7fxq3NsspwP4zTJ4--mTQ6TJApCN84aFafrNg30PKku2VDFx-x8XSs4pxAAPCTw6mWhaHe95JpCp8Otpq_RY7ZKO6upO_AQRt17WgoR8vo9JU6C60p-LMQ3zXwyQJb5HMFdbM1Z5iME_3lIoPM3uHPHZav6p8rAHfLNKZkLMMCG9swBpgwVbDoHzxlYLozZMBIZ4Z1sGSSeQK5nWDDiFpfkjl16xfAtf2CzpZEz23lK9sUPLow2IfMBAAA.",
                    "price": {
                        "currencyCode": "USD",
                        "units": 26834,
                        "nanos": 380000000
                    },
                    "travellerPrices": [
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 6708,
                                    "nanos": 580000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 6132,
                                    "nanos": 0
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 9,
                                    "nanos": 370000000
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 567,
                                    "nanos": 210000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 6709
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 6708,
                                    "nanos": 580000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 6709
                                }
                            },
                            "travellerReference": "1",
                            "travellerType": "ADULT"
                        },
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 6708,
                                    "nanos": 580000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 6132,
                                    "nanos": 0
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 9,
                                    "nanos": 370000000
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 567,
                                    "nanos": 210000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 6709
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 6708,
                                    "nanos": 580000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 6709
                                }
                            },
                            "travellerReference": "2",
                            "travellerType": "ADULT"
                        },
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 6708,
                                    "nanos": 580000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 6132,
                                    "nanos": 0
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 9,
                                    "nanos": 370000000
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 567,
                                    "nanos": 210000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 6709
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 6708,
                                    "nanos": 580000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 6709
                                }
                            },
                            "travellerReference": "3",
                            "travellerType": "ADULT"
                        },
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 6708,
                                    "nanos": 640000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 6132,
                                    "nanos": 0
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 9,
                                    "nanos": 430000000
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 567,
                                    "nanos": 210000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 6709
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 6708,
                                    "nanos": 640000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 6709
                                }
                            },
                            "travellerReference": "4",
                            "travellerType": "ADULT"
                        }
                    ]
                },
                {
                    "key": "FASTEST",
                    "offerToken": "d6a1f_H4sIAAAAAAAA_1WQbW-bMBSFf036DYPBBKhkTSkvS1KTTOWlZF8s4gBx09YVdgXLr58LUafpWvc859iWrXtW6kPem2b7yruzksanBJ1QoqtVA5h4M9tet6MQF_7emTXvzYf46VA-QSuKQxOZhi52n_xoRmXInuE7fmxAjY0gCGaUDPs36vESoBiRTV6RKWJCYQRcaC0fHjeRvZ_DHv8ka3hIJnfCaTgMJFp53xrJcX9NtvtrMabR7zCzLkNRXrw0L3_t-DDuCt8mUQzz60H-lyUdfP7icmWTEGbFi1RpcZEkT7YktMYsG24-HfU7WmO5zzcLJ5o-0jCGIQDIC-DkRS2xMxNTGFoznhTOyLqo8tkq7Lqe5SzRZEcMHcd372Tz2jDFxftj8weTKvA8Q4-zYTYytpRUjv9tE7oK9XiCf_sLO2xdUfNOw8JZ6dVRGyBgazpTC-jSVNN1BVIHlIk2RxoQLWyWE3Vc2Pqur7mhX4dbinTnFN0uv9DNs5YrRf2JCf4X4RErgCECAAA.",
                    "price": {
                        "currencyCode": "USD",
                        "units": 55703,
                        "nanos": 640000000
                    },
                    "travellerPrices": [
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 13925,
                                    "nanos": 910000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 13346,
                                    "nanos": 0
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 579,
                                    "nanos": 910000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 13926
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 13925,
                                    "nanos": 910000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 13926
                                }
                            },
                            "travellerReference": "1",
                            "travellerType": "ADULT"
                        },
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 13925,
                                    "nanos": 910000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 13346,
                                    "nanos": 0
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 579,
                                    "nanos": 910000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 13926
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 13925,
                                    "nanos": 910000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 13926
                                }
                            },
                            "travellerReference": "2",
                            "travellerType": "ADULT"
                        },
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 13925,
                                    "nanos": 910000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 13346,
                                    "nanos": 0
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 579,
                                    "nanos": 910000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 13926
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 13925,
                                    "nanos": 910000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 13926
                                }
                            },
                            "travellerReference": "3",
                            "travellerType": "ADULT"
                        },
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 13925,
                                    "nanos": 910000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 13346,
                                    "nanos": 0
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 579,
                                    "nanos": 910000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 13926
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 13925,
                                    "nanos": 910000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 13926
                                }
                            },
                            "travellerReference": "4",
                            "travellerType": "ADULT"
                        }
                    ]
                },
                {
                    "key": "BEST",
                    "offerToken": "d7699_H4sIAAAAAAAA_1WQUW-CMBSFf818o1BalS5pFhR0KrBlA9S9NFgrom5daBeYv35VzJblNvd85ybnNu1e6091b9u7U1XutbK-FCillmWhBeDy3d7Vpm2kPFYfpV1UtT0KX9b5C3SCcGxj2zLF7ycPotWWqjntVRsBCmoRQjpUnHo3qukA4BBHs3QVXUdcaopBHzqD0WIWuKgb1nQ6x8-z_Oq2NB43TRT4w18NVPt0XjtP56yNg7fxq3NsspwP4zTJ4--mTQ6TJApCN84aFafrNg30PKku2VDFx-x8XSs4pxAAPCTw6mWhaHe95JpCp8Otpq_RY7ZKO6upO_AQRt17WgoR8vo9JU6C60p-LMQ3zXwyQJb5HMFdbM1Z5iME_3lIoPM3uHPHZav6p8rAHfLNKZkLMMCG9swBpgwVbDoHzxlYLozZMBIZ4Z1sGSSeQK5nWDDiFpfkjl16xfAtf2CzpZEz23lK9sUPLow2IfMBAAA.",
                    "price": {
                        "currencyCode": "USD",
                        "units": 26834,
                        "nanos": 380000000
                    },
                    "travellerPrices": [
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 6708,
                                    "nanos": 580000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 6132,
                                    "nanos": 0
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 9,
                                    "nanos": 370000000
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 567,
                                    "nanos": 210000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 6709
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 6708,
                                    "nanos": 580000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 6709
                                }
                            },
                            "travellerReference": "1",
                            "travellerType": "ADULT"
                        },
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 6708,
                                    "nanos": 580000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 6132,
                                    "nanos": 0
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 9,
                                    "nanos": 370000000
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 567,
                                    "nanos": 210000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 6709
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 6708,
                                    "nanos": 580000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 6709
                                }
                            },
                            "travellerReference": "2",
                            "travellerType": "ADULT"
                        },
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 6708,
                                    "nanos": 580000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 6132,
                                    "nanos": 0
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 9,
                                    "nanos": 370000000
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 567,
                                    "nanos": 210000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 6709
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 6708,
                                    "nanos": 580000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 6709
                                }
                            },
                            "travellerReference": "3",
                            "travellerType": "ADULT"
                        },
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 6708,
                                    "nanos": 640000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 6132,
                                    "nanos": 0
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 9,
                                    "nanos": 430000000
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 567,
                                    "nanos": 210000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 6709
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 6708,
                                    "nanos": 640000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 6709
                                }
                            },
                            "travellerReference": "4",
                            "travellerType": "ADULT"
                        }
                    ]
                }
            ],
            "atolProtectedStatus": "NONE",
            "searchId": "CAA9A0135E45349DD57E499A6FD48B60",
            "displayOptions": {
                "brandedFaresShownByDefault": false,
                "directFlightsOnlyFilterIgnored": false,
                "hideFlexiblePricesBanner": false
            },
            "isOffersCabinClassExtended": true,
            "cabinClassExtension": {
                "text": "Some results may combine First class with other options, as we couldn’t completely match your search."
            },
            "searchCriteria": {
                "cabinClass": "FIRST"
            }
        }
    }
]

2025-08-25 13:18:03,060 - evaluation_logger_Flights-10 - INFO - Final Response: <｜begin▁of▁sentence｜># 1. 概述

本文，我们来分享 [《精尽 Spring Boot 源码分析 —— SpringApplication》](http://svip.iocoder.cn/Spring-Boot/SpringApplication/) 的**初始化**的源码解析。

在 SpringApplication 实例对象创建时，会进行一些初始化的工作。虽然说，它并不难，但是还是需要稍微捋一捋。

# 2. 构造方法

创建 SpringApplication 对象时，调用其**构造方法**。而构造方法内部，会调用 `#initialize(Object[] sources)` 方法，进行初始化。代码如下：

```java
// SpringApplication.java

public SpringApplication(ResourceLoader resourceLoader, Class<?>... primarySources) {
	this.resourceLoader = resourceLoader;
	Assert.notNull(primarySources, "PrimarySources must not be null");
	this.primarySources = new LinkedHashSet<>(Arrays.asList(primarySources));
	// <1> 推断 Web 应用类型
	this.webApplicationType = WebApplicationType.deduceFromClasspath();
	// <2> 设置初始化器
	setInitializers((Collection) getSpringFactoriesInstances(ApplicationContextInitializer.class));
	// <3> 设置监听器
	setListeners((Collection) getSpringFactoriesInstances(ApplicationListener.class));
	// <4> 推断主类
	this.mainApplicationClass = deduceMainApplicationClass();
}
```

- `<1>` 处，调用 `WebApplicationType#deduceFromClasspath()` 方法，推断 Web 应用类型。详细解析，见 [「2.1 deduceFromClasspath」](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) 。
- `<2>` 处，设置初始化器（ApplicationContextInitializer）。详细解析，见 [「2.2 设置初始化器」](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) 。
- `<3>` 处，设置监听器（ApplicationListener）。详细解析，见 [「2.3 设置监听器」](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) 。
- `<4>` 处，调用 `#deduceMainApplicationClass()` 方法，推断主类。详细解析，见 [「2.4 deduceMainApplicationClass」](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) 。

## 2.1 deduceFromClasspath

`WebApplicationType#deduceFromClasspath()` 方法，推断 Web 应用类型。代码如下：

```java
// WebApplicationType.java

private static final String[] SERVLET_INDICATOR_CLASSES = { "javax.servlet.Servlet",
		"org.springframework.web.context.ConfigurableWebApplicationContext" };

private static final String WEBMVC_INDICATOR_CLASS = "org.springframework.web.servlet.DispatcherServlet";

private static final String WEBFLUX_INDICATOR_CLASS = "org.springframework.web.reactive.DispatcherHandler";

private static final String JERSEY_INDICATOR_CLASS = "org.glassfish.jersey.servlet.ServletContainer";

private static final String SERVLET_APPLICATION_CONTEXT_CLASS = "org.springframework.web.context.WebApplicationContext";

private static final String REACTIVE_APPLICATION_CONTEXT_CLASS = "org.springframework.boot.web.reactive.context.ReactiveWebApplicationContext";

static WebApplicationType deduceFromClasspath() {
	// 如果存在 org.springframework.web.reactive.DispatcherHandler ，并且不存在 org.springframework.web.servlet.DispatcherServlet 和 org.glassfish.jersey.servlet.ServletContainer ，则定义为 REACTIVE 类型
	if (ClassUtils.isPresent(WEBFLUX_INDICATOR_CLASS, null) && !ClassUtils.isPresent(WEBMVC_INDICATOR_CLASS, null)
			&& !ClassUtils.isPresent(JERSEY_INDICATOR_CLASS, null)) {
		return WebApplicationType.REACTIVE;
	}
	// 如果不存在 javax.servlet.Servlet 和 org.springframework.web.context.ConfigurableWebApplicationContext ，则定义为 NONE 类型
	for (String className : SERVLET_INDICATOR_CLASSES) {
		if (!ClassUtils.isPresent(className, null)) {
			return WebApplicationType.NONE;
		}
	}
	// 否则，定义为 SERVLET 类型
	return WebApplicationType.SERVLET;
}
```

- 根据 classpath 中，判断是否存在指定的类，从而推断 Web 应用的类型。
- 三种 Web 应用类型，在 [「WebApplicationType」](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) 有详细解析。

## 2.2 设置初始化器

`#getSpringFactoriesInstances(Class<T> type)` 方法，获得指定类型的类对应的对象数组。代码如下：

```java
// SpringApplication.java

private <T> Collection<T> getSpringFactoriesInstances(Class<T> type) {
	return getSpringFactoriesInstances(type, new Class<?>[] {});
}

private <T> Collection<T> getSpringFactoriesInstances(Class<T> type, Class<?>[] parameterTypes, Object... args) {
	ClassLoader classLoader = getClassLoader();
	// Use names and ensure unique to protect against duplicates
	// <1> 加载指定类型对应的，在 `META-INF/spring.factories` 里的类名的数组
	Set<String> names = new LinkedHashSet<>(SpringFactoriesLoader.loadFactoryNames(type, classLoader));
	// <2> 创建对象们
	List<T> instances = createSpringFactoriesInstances(type, parameterTypes, classLoader, args, names);
	// <3> 排序对象们
	AnnotationAwareOrderComparator.sort(instances);
	return instances;
}
```

- `<1>` 处，调用 `SpringFactoriesLoader#loadFactoryNames(Class<?> factoryClass, ClassLoader classLoader)` 方法，加载指定类型对应的，在 `META-INF/spring.factories` 里的类名的数组。

  > 关于 SpringFactoriesLoader 的源码解析，可见 [《【死磕 Spring】—— IoC 之加载 BeanDefinition》](http://svip.iocoder.cn/Spring/IoC-load-BeanDefinitions/?vip) 的 [「3. loadFactoryNames」](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) 小节。

- `<2>` 处，调用 `#createSpringFactoriesInstances(Class<T> type, Class<?>[] parameterTypes, ClassLoader classLoader, Object[] args, Set<String> names)` 方法，创建对象们。代码如下：

  ```java
  // SpringApplication.java
  
  private <T> List<T> createSpringFactoriesInstances(Class<T> type, Class<?>[] parameterTypes,
  		ClassLoader classLoader, Object[] args, Set<String> names) {
  	List<T> instances = new ArrayList<>(names.size());
  	for (String name : names) {
  		try {
  			Class<?> instanceClass = ClassUtils.forName(name, classLoader);
  			Assert.isAssignable(type, instanceClass);
  			Constructor<?> constructor = instanceClass.getDeclaredConstructor(parameterTypes);
  			T instance = (T) BeanUtils.instantiateClass(constructor, args);
  			instances.add(instance);
  		} catch (Throwable ex) {
  			throw new IllegalArgumentException("Cannot instantiate " + type + " : " + name, ex);
  		}
  	}
  	return instances;
  }
  ```

  - 通过反射，创建对象。

- `<3>` 处，调用 `AnnotationAwareOrderComparator#sort(List<?> list)` 方法，排序对象们。因为 Initializer 和 Listener 都可以通过 `@Order` 注解指定顺序。

- 这样，在 `<2>` 处，我们就获得了 ApplicationContextInitializer 类型的对象数组，然后调用 `#setInitializers(Collection<? extends ApplicationContextInitializer<?>> initializers)` 方法，进行设置。代码如下：

  ```java
  // SpringApplication.java
  
  public void setInitializers(Collection<? extends ApplicationContextInitializer<?>> initializers) {
  	this.initializers = new ArrayList<>();
  	this.initializers.addAll(initializers);
  }
  ```

  - 将 `initializers` 变量，赋值到 `SpringApplication.initializers` 中。

## 2.3 设置监听器

同 [「2.2 设置初始化器」](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) 一样，获得 ApplicationListener 类型的对象数组，然后调用 `#setListeners(Collection<? extends ApplicationListener<?>> listeners)` 方法，进行设置。代码如下：

```java
// SpringApplication.java

public void setListeners(Collection<? extends ApplicationListener<?>> listeners) {
	this.listeners = new ArrayList<>();
	this.listeners.addAll(listeners);
}
```

- 将 `listeners` 变量，赋值到 `SpringApplication.listeners` 中。

## 2.4 deduceMainApplicationClass

`#deduceMainApplicationClass()` 方法，推断主类。代码如下：

```java
// SpringApplication.java

private Class<?> deduceMainApplicationClass() {
	try {
		// 获得当前 StackTraceElement 数组
		StackTraceElement[] stackTrace = new RuntimeException().getStackTrace();
		// 判断哪个执行 main 方法
		for (StackTraceElement stackTraceElement : stackTrace) {
			if ("main".equals(stackTraceElement.getMethodName())) {
				return Class.forName(stackTraceElement.getClassName());
			}
		}
	} catch (ClassNotFoundException ex) {
		// Swallow and continue
	}
	return null;
}
```

- 通过构造一个 RuntimeException 异常，然后遍历其 StackTraceElement 数组，判断哪个执行了 `#main(String[] args)` 方法，从而推断主类。

# 3. WebApplicationType

`org.springframework.boot.WebApplicationType` ，Web 应用类型**枚举**。代码如下：

```java
// WebApplicationType.java

public enum WebApplicationType {

	/**
	 * 非 Web 项目
	 */
	NONE,

	/**
	 * Servlet Web 项目
	 */
	SERVLET,

	/**
	 * Reactive Web 项目
	 */
	REACTIVE;

}
```

# 4. 小结

😈 相对来说，SpringApplication 的初始化，还是比较简单的。重点是，从 `META-INF/spring.factories` 加载 ApplicationContextInitializer 和 ApplicationListener 的实现类。

2025-08-25 13:18:09,676 - evaluation_logger_Flights-10 - INFO - Complete Result: {'score': 0, 'reason': 'The response does not address any of the requested information about arranging a first class flight from Berlin to Vancouver.'}
2025-08-25 13:18:15,669 - evaluation_logger_Flights-10 - INFO - Correct Result: {'score': 0, 'reason': 'All information in the response is incorrect.'}
2025-08-25 13:18:15,669 - evaluation_logger_Flights-10 - INFO - Message: Success.
2025-08-25 13:18:15,669 - evaluation_logger_Flights-10 - INFO - Success turn num = 2
2025-08-25 13:18:15,670 - evaluation_logger_Flights-10 - INFO - ----------------------------------------------------------------------------------------------------
