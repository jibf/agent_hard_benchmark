2025-08-25 11:47:50,139 - evaluation_logger_Cross-115 - INFO - Test Example Cross-115
2025-08-25 11:47:50,139 - evaluation_logger_Cross-115 - INFO - Query: I'd like to book a hotel within 50 kilometers of the San Diego International Airport for one night on November 17, 2024. I also need to reserve a car to be picked up from the hotel at 10 AM the next day and returned at 2 PM on the third day at the airport.
2025-08-25 11:47:58,039 - evaluation_logger_Cross-115 - INFO - Function Calls: 
[
    {
        "name": "Location_to_Lat_Long",
        "arguments": {
            "query": "San Diego International Airport"
        }
    }
]

2025-08-25 11:47:58,039 - evaluation_logger_Cross-115 - INFO - Golden Function Call: 
[
    {
        "name": "Location_to_Lat_Long",
        "arguments": {
            "query": "San Diego International Airport"
        }
    },
    {
        "name": "Search_Hotels_By_Coordinates",
        "arguments": {
            "latitude": "32.7332017",
            "longitude": "-117.1896607",
            "arrival_date": "2024-11-17",
            "departure_date": "2024-11-18",
            "radius": 50
        }
    }
]

2025-08-25 11:47:58,039 - evaluation_logger_Cross-115 - INFO - Start compare_single_call: 
{'name': 'Location_to_Lat_Long', 'arguments': {'query': 'San Diego International Airport'}}
{'name': 'Location_to_Lat_Long', 'arguments': {'query': 'San Diego International Airport'}}
2025-08-25 11:47:58,039 - evaluation_logger_Cross-115 - INFO - Rule-based compare success.
2025-08-25 11:47:58,039 - evaluation_logger_Cross-115 - INFO - Success matched: [{'name': 'Location_to_Lat_Long', 'arguments': {'query': 'San Diego International Airport'}}]
2025-08-25 11:47:58,040 - evaluation_logger_Cross-115 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "business_status": "OPERATIONAL",
                "formatted_address": "N Harbor Dr, San Diego, CA 92101, United States",
                "geometry": {
                    "location": {
                        "lat": 32.7332017,
                        "lng": -117.1896607
                    },
                    "viewport": {
                        "northeast": {
                            "lat": 32.73522164999999,
                            "lng": -117.1807728
                        },
                        "southwest": {
                            "lat": 32.72714185000001,
                            "lng": -117.212336
                        }
                    }
                },
                "name": "San Diego International Airport",
                "place_id": "ChIJp-YhDEir3oARZql2z8vdzRI",
                "plus_code": {
                    "compound_code": "PRM6+74 San Diego, California",
                    "global_code": "8544PRM6+74"
                },
                "rating": 4.2,
                "reference": "ChIJp-YhDEir3oARZql2z8vdzRI",
                "types": [
                    "airport",
                    "point_of_interest",
                    "establishment"
                ],
                "user_ratings_total": 17021
            }
        ]
    }
]

2025-08-25 11:48:09,269 - evaluation_logger_Cross-115 - INFO - Function Calls: 
[
    {
        "name": "Search_Hotels_By_Coordinates",
        "arguments": {
            "latitude": "32.7332017",
            "longitude": "-117.1896607",
            "arrival_date": "2024-11-17",
            "departure_date": "2024-11-18",
            "radius": 50
        }
    }
]

2025-08-25 11:48:09,269 - evaluation_logger_Cross-115 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Hotels_By_Coordinates",
        "arguments": {
            "arrival_date": "2024-11-17",
            "departure_date": "2024-11-18",
            "latitude": "32.7332017",
            "longitude": "-117.1896607",
            "radius": 50
        }
    },
    {
        "name": "Search_Car_Rentals",
        "arguments": {
            "pick_up_latitude": 32.8730545232009,
            "pick_up_longitude": -117.215936332941,
            "drop_off_latitude": 32.7332017,
            "drop_off_longitude": -117.1896607,
            "pick_up_date": "2024-11-18",
            "drop_off_date": "2024-11-19",
            "pick_up_time": "10:00",
            "drop_off_time": "14:00"
        }
    }
]

2025-08-25 11:48:09,269 - evaluation_logger_Cross-115 - INFO - Start compare_single_call: 
{'name': 'Search_Hotels_By_Coordinates', 'arguments': {'arrival_date': '2024-11-17', 'departure_date': '2024-11-18', 'latitude': '32.7332017', 'longitude': '-117.1896607', 'radius': 50}}
{'name': 'Search_Hotels_By_Coordinates', 'arguments': {'arrival_date': '2024-11-17', 'departure_date': '2024-11-18', 'latitude': '32.7332017', 'longitude': '-117.1896607', 'radius': 50}}
2025-08-25 11:48:09,269 - evaluation_logger_Cross-115 - INFO - Rule-based compare success.
2025-08-25 11:48:09,269 - evaluation_logger_Cross-115 - INFO - Success matched: [{'name': 'Search_Hotels_By_Coordinates', 'arguments': {'arrival_date': '2024-11-17', 'departure_date': '2024-11-18', 'latitude': '32.7332017', 'longitude': '-117.1896607', 'radius': 50}}]
2025-08-25 11:48:09,270 - evaluation_logger_Cross-115 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "unfiltered_primary_count": 2588,
            "primary_count": 756,
            "page_loading_threshold": 10,
            "count": 756,
            "room_distribution": [
                {
                    "adults": "1"
                }
            ],
            "extended_count": 0,
            "filters": [
                {
                    "title": "Your previous filters",
                    "field": "previous"
                },
                {
                    "title": "Your budget (for 1 night)",
                    "field": "price"
                },
                {
                    "title": "Bed preference",
                    "field": "tdb"
                },
                {
                    "title": "Room facilities",
                    "field": "roomfacility"
                },
                {
                    "field": "fc",
                    "title": "Free cancellation "
                }
            ],
            "result": [
                {
                    "hotel_id": 429811,
                    "accommodation_type": 204,
                    "ufi": 20015725,
                    "unit_configuration_label": "<b>Hotel room</b>: 1Â bed",
                    "is_no_prepayment_block": 0,
                    "checkout": {
                        "until": "11:00"
                    },
                    "review_nr": 259,
                    "preferred": 1,
                    "bwallet": {
                        "hotel_eligibility": 0
                    },
                    "city": "La Jolla (California)",
                    "extended": 0,
                    "is_genius_deal": 0,
                    "hotel_name": "San Diego Marriott La Jolla",
                    "default_wishlist_name": "San Diego",
                    "is_tpi_exclusive_property": 0,
                    "default_language": "en",
                    "review_score": 7.7,
                    "longitude": -117.215936332941,
                    "hotel_has_vb_boost": 0,
                    "last_reservation_data": {
                        "last_reservation_ellapsed_months": 1
                    },
                    "genius_discount_percentage": 0,
                    "is_free_cancellable": 0,
                    "preferred_plus": 0,
                    "min_total_price": 170.1,
                    "class": 3,
                    "is_smart_deal": 0,
                    "countrycode": "us",
                    "hotel_include_breakfast": 0,
                    "block_ids": [
                        "42981101_94463966_0_0_0"
                    ],
                    "id": "property_card_429811",
                    "city_in_trans": "in San Diego",
                    "currencycode": "USD",
                    "latitude": 32.8730545232009,
                    "checkin": {
                        "from": "16:00"
                    },
                    "class_is_estimated": 0,
                    "timezone": "America/Los_Angeles",
                    "main_photo_id": 506768903,
                    "soldout": 0,
                    "composite_price_breakdown": {
                        "excluded_amount": {
                            "amount_unrounded": "US$21.76",
                            "value": 21.7625,
                            "amount_rounded": "US$22",
                            "currency": "USD"
                        },
                        "gross_amount_per_night": {
                            "amount_unrounded": "US$170.10",
                            "currency": "USD",
                            "amount_rounded": "US$170",
                            "value": 170.1
                        },
                        "price_display_config": [
                            {
                                "value": 0,
                                "key": "use_nightly_prices"
                            }
                        ],
                        "net_amount": {
                            "value": 170.1,
                            "amount_rounded": "US$170",
                            "currency": "USD",
                            "amount_unrounded": "US$170.10"
                        },
                        "has_long_stays_weekly_rate_price": 0,
                        "all_inclusive_amount_hotel_currency": {
                            "value": 191.8625,
                            "amount_rounded": "US$192",
                            "currency": "USD",
                            "amount_unrounded": "US$191.86"
                        },
                        "gross_amount_hotel_currency": {
                            "amount_unrounded": "US$170.10",
                            "amount_rounded": "US$170",
                            "currency": "USD",
                            "value": 170.1
                        },
                        "gross_amount": {
                            "value": 170.1,
                            "currency": "USD",
                            "amount_rounded": "US$170",
                            "amount_unrounded": "US$170.10"
                        },
                        "included_taxes_and_charges_amount": {
                            "value": 0,
                            "amount_rounded": "US$0",
                            "currency": "USD",
                            "amount_unrounded": "US$0"
                        },
                        "items": [
                            {
                                "inclusion_type": "excluded",
                                "item_amount": {
                                    "amount_unrounded": "US$21.26",
                                    "value": 21.2625,
                                    "amount_rounded": "US$21",
                                    "currency": "USD"
                                },
                                "details": "12.50 % Tax",
                                "base": {
                                    "percentage": 12.5,
                                    "kind": "percentage"
                                },
                                "name": "Tax",
                                "kind": "charge"
                            },
                            {
                                "kind": "charge",
                                "name": "City tax",
                                "base": {
                                    "kind": "per_night",
                                    "base_amount": 0.5
                                },
                                "item_amount": {
                                    "amount_rounded": "US$1",
                                    "currency": "USD",
                                    "value": 0.5,
                                    "amount_unrounded": "US$0.50"
                                },
                                "inclusion_type": "excluded"
                            }
                        ],
                        "client_translations": {
                            "tooltip_total_text": "Total"
                        },
                        "all_inclusive_amount": {
                            "amount_unrounded": "US$191.86",
                            "value": 191.8625,
                            "amount_rounded": "US$192",
                            "currency": "USD"
                        },
                        "has_long_stays_monthly_rate_price": 0,
                        "charges_details": {
                            "mode": "extra_charges",
                            "amount": {
                                "currency": "USD",
                                "value": 22
                            }
                        }
                    },
                    "hotel_name_trans": "San Diego Marriott La Jolla",
                    "review_score_word": "Good",
                    "type": "property_card"
                }
            ],
            "unfiltered_count": 2588,
            "b_max_los_data": {
                "default_los": 45,
                "experiment": "long_stays_ios_extend_los_2",
                "is_fullon": 0,
                "extended_los": 90,
                "has_extended_los": 1,
                "max_allowed_los": 90
            }
        }
    }
]

2025-08-25 11:48:23,905 - evaluation_logger_Cross-115 - INFO - Function Calls: 
[
    {
        "name": "Search_Car_Rentals",
        "arguments": {
            "pick_up_latitude": 32.8730545232009,
            "pick_up_longitude": -117.215936332941,
            "drop_off_latitude": 32.7332017,
            "drop_off_longitude": -117.1896607,
            "pick_up_date": "2024-11-18",
            "drop_off_date": "2024-11-19",
            "pick_up_time": "10:00",
            "drop_off_time": "14:00"
        }
    }
]

2025-08-25 11:48:23,907 - evaluation_logger_Cross-115 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Car_Rentals",
        "arguments": {
            "drop_off_date": "2024-11-19",
            "drop_off_latitude": 32.7332017,
            "drop_off_longitude": -117.1896607,
            "drop_off_time": "14:00",
            "pick_up_date": "2024-11-18",
            "pick_up_latitude": 32.8730545232009,
            "pick_up_longitude": -117.215936332941,
            "pick_up_time": "10:00"
        }
    }
]

2025-08-25 11:48:23,907 - evaluation_logger_Cross-115 - INFO - Start compare_single_call: 
{'name': 'Search_Car_Rentals', 'arguments': {'drop_off_date': '2024-11-19', 'drop_off_latitude': 32.7332017, 'drop_off_longitude': -117.1896607, 'drop_off_time': '14:00', 'pick_up_date': '2024-11-18', 'pick_up_latitude': 32.8730545232009, 'pick_up_longitude': -117.215936332941, 'pick_up_time': '10:00'}}
{'name': 'Search_Car_Rentals', 'arguments': {'drop_off_date': '2024-11-19', 'drop_off_latitude': 32.7332017, 'drop_off_longitude': -117.1896607, 'drop_off_time': '14:00', 'pick_up_date': '2024-11-18', 'pick_up_latitude': 32.8730545232009, 'pick_up_longitude': -117.215936332941, 'pick_up_time': '10:00'}}
2025-08-25 11:48:23,907 - evaluation_logger_Cross-115 - INFO - Rule-based compare success.
2025-08-25 11:48:23,907 - evaluation_logger_Cross-115 - INFO - Success matched: [{'name': 'Search_Car_Rentals', 'arguments': {'drop_off_date': '2024-11-19', 'drop_off_latitude': 32.7332017, 'drop_off_longitude': -117.1896607, 'drop_off_time': '14:00', 'pick_up_date': '2024-11-18', 'pick_up_latitude': 32.8730545232009, 'pick_up_longitude': -117.215936332941, 'pick_up_time': '10:00'}}]
2025-08-25 11:48:23,909 - evaluation_logger_Cross-115 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "type": "cars",
            "is_genius_location": false,
            "search_key": "eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMS0xOVQxNDowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6IjMyLjczMzIwMTcsLTExNy4xODk2NjA3IiwiZHJvcE9mZkxvY2F0aW9uVHlwZSI6IkxBVExPTkciLCJwaWNrVXBEYXRlVGltZSI6IjIwMjQtMTEtMThUMTA6MDA6MDAiLCJwaWNrVXBMb2NhdGlvbiI6IjMyLjg3MzA1NDUyMzIwMDksLTExNy4yMTU5MzYzMzI5NDEiLCJwaWNrVXBMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicmVudGFsRHVyYXRpb25JbkRheXMiOjIsInNlcnZpY2VGZWF0dXJlcyI6WyJOT19PUEFRVUVTIiwiU1VQUkVTU19GSVhFRF9QUklDRV9WRUhJQ0xFUyIsIklOQ0xVREVfUFJPRFVDVF9SRUxBVElPTlNISVBTIiwiSU5DTFVERV9FWFRSQVNfQ09OVEFJTklOR19GRUVTIl19",
            "meta": {
                "response_code": 200
            },
            "search_context": {
                "searchKey": "eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMS0xOVQxNDowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6IjMyLjczMzIwMTcsLTExNy4xODk2NjA3IiwiZHJvcE9mZkxvY2F0aW9uVHlwZSI6IkxBVExPTkciLCJwaWNrVXBEYXRlVGltZSI6IjIwMjQtMTEtMThUMTA6MDA6MDAiLCJwaWNrVXBMb2NhdGlvbiI6IjMyLjg3MzA1NDUyMzIwMDksLTExNy4yMTU5MzYzMzI5NDEiLCJwaWNrVXBMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicmVudGFsRHVyYXRpb25JbkRheXMiOjIsInNlcnZpY2VGZWF0dXJlcyI6WyJOT19PUEFRVUVTIiwiU1VQUkVTU19GSVhFRF9QUklDRV9WRUhJQ0xFUyIsIklOQ0xVREVfUFJPRFVDVF9SRUxBVElPTlNISVBTIiwiSU5DTFVERV9FWFRSQVNfQ09OVEFJTklOR19GRUVTIl19",
                "recommendationsSearchUniqueId": "8ffe8bea-0676-41bd-848a-e5cda579435f",
                "searchId": "1c11e355-04d2-49f6-a167-f844aae02338"
            },
            "search_results": [
                {
                    "vehicle_id": "637318066",
                    "accessibility": {
                        "transmission": "Automatic gearbox",
                        "pick_up_location": "Pick-up information: Downtown",
                        "fuel_policy": "Fuel policy is: Like for like",
                        "supplier_rating": "At this location, our customers have rated Hertz as 7.8 out of 10, Good."
                    },
                    "content": {
                        "supplier": {
                            "name": "Hertz",
                            "rating": {
                                "title": "Good",
                                "average": "7.8",
                                "localisedRating": {
                                    "rawValue": 7.8,
                                    "displayValue": "7.8"
                                },
                                "subtitle": "4 reviews"
                            }
                        },
                        "badges": [
                            {
                                "type": "CONSTRUCTIVE",
                                "variation": "DEFAULT",
                                "text": "Free cancellation"
                            }
                        ]
                    },
                    "pricing_info": {
                        "pay_when": "PAY_NOW",
                        "deposit": 90.83,
                        "drive_away_price_is_approx": true,
                        "drive_away_price": 117.77,
                        "base_deposit": 7639.51,
                        "price": 90.83,
                        "discount": 0,
                        "currency": "USD",
                        "base_currency": "INR",
                        "fee_breakdown": {
                            "fuel_policy": {
                                "type": "RETURN_SAME",
                                "amount": 0
                            },
                            "known_fees": [
                                {
                                    "is_always_payable": 0,
                                    "type": "THEFT_EXCESS",
                                    "is_tax_included": 1,
                                    "amount": 0,
                                    "currency": "USD",
                                    "min_amount": 0,
                                    "max_amount": 0
                                },
                                {
                                    "type": "DEPOSIT",
                                    "is_always_payable": 0,
                                    "is_tax_included": 1,
                                    "amount": 640.96,
                                    "currency": "USD",
                                    "min_amount": 256.38,
                                    "max_amount": 640.96
                                },
                                {
                                    "currency": "USD",
                                    "min_amount": 26.94,
                                    "max_amount": 26.94,
                                    "is_tax_included": 1,
                                    "amount": 26.94,
                                    "is_always_payable": 1,
                                    "type": "ONE_WAY_FEE"
                                },
                                {
                                    "type": "DAMAGE_EXCESS",
                                    "is_always_payable": 0,
                                    "amount": 0,
                                    "is_tax_included": 1,
                                    "max_amount": 0,
                                    "currency": "USD",
                                    "min_amount": 0
                                },
                                {
                                    "distance_allowed": {
                                        "is_unlimited": 1,
                                        "is_km": 0
                                    },
                                    "is_always_payable": 0,
                                    "type": "MILEAGE"
                                }
                            ]
                        },
                        "base_price": 7639.51,
                        "quote_allowed": 1
                    },
                    "supplier_info": {
                        "pickup_instructions": "-",
                        "latitude": "32.873046",
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/137_logo_200.png",
                        "name": "Hertz",
                        "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037",
                        "may_require_credit_card_guarantee": false,
                        "longitude": "-117.216334",
                        "location_type": "Downtown"
                    },
                    "fee_info": {
                        "tax": 0,
                        "fee": 0
                    },
                    "route_info": {
                        "pickup": {
                            "country_code": "US",
                            "latitude": "32.873046",
                            "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037",
                            "name": "San Diego - Marriott La Jolla",
                            "location_id": "3889719",
                            "location_hash": "U2FuIERpZWdvIC0gTWFycmlvdHQgTGEgSm9sbGE=",
                            "location_type": "DOWNTOWN",
                            "longitude": "-117.216334"
                        },
                        "dropoff": {
                            "location_id": "3889649",
                            "longitude": "-117.193288",
                            "location_type": "SHUTTLE_BUS",
                            "country_code": "US",
                            "latitude": "32.733964",
                            "name": "San Diego International Airport",
                            "address": "3355, Admiral Boland Way, San Diego, USA, 92101"
                        }
                    },
                    "freebies": [
                        "Amendments"
                    ],
                    "vehicle_info": {
                        "doors": "4",
                        "label": "Economy car with:",
                        "v_id": "637318066",
                        "suitcases": {
                            "small": "2",
                            "big": "0"
                        },
                        "fuel_type": "N/A",
                        "airbags": 1,
                        "free_cancellation": 1,
                        "cma_compliant": -1,
                        "aircon": 1,
                        "transmission": "Automatic",
                        "mileage": "Unlimited mileage",
                        "unlimited_mileage": 1,
                        "group": "Economy",
                        "seats": "4",
                        "v_name": "Hyundai Veloster",
                        "fuel_policy": "Like for like"
                    },
                    "rating_info": {
                        "dropoff_time": 9,
                        "location": 8.6,
                        "efficiency": 9.2,
                        "no_of_ratings": 4,
                        "condition": 7.5,
                        "average": 7.8,
                        "value_for_money": 7.2,
                        "cleanliness": 8.5,
                        "average_text": "Very good",
                        "pickup_time": 5.3
                    }
                },
                {
                    "vehicle_id": "637361566",
                    "route_info": {
                        "pickup": {
                            "location_type": "DOWNTOWN",
                            "longitude": "-117.216334",
                            "location_id": "3889719",
                            "location_hash": "U2FuIERpZWdvIC0gTWFycmlvdHQgTGEgSm9sbGE=",
                            "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037",
                            "name": "San Diego - Marriott La Jolla",
                            "latitude": "32.873046",
                            "country_code": "US"
                        },
                        "dropoff": {
                            "longitude": "-117.193288",
                            "location_type": "SHUTTLE_BUS",
                            "location_id": "3889649",
                            "name": "San Diego International Airport",
                            "address": "3355, Admiral Boland Way, San Diego, USA, 92101",
                            "latitude": "32.733964",
                            "country_code": "US"
                        }
                    },
                    "freebies": [
                        "Amendments"
                    ],
                    "vehicle_info": {
                        "airbags": 1,
                        "fuel_type": "N/A",
                        "v_id": "637361566",
                        "suitcases": {
                            "small": "3",
                            "big": "0"
                        },
                        "doors": "2/4",
                        "label": "Intermediate car with:",
                        "seats": "5",
                        "v_name": "Toyota Corolla",
                        "fuel_policy": "Like for like",
                        "aircon": 1,
                        "transmission": "Automatic",
                        "mileage": "Unlimited mileage",
                        "unlimited_mileage": 1,
                        "group": "Intermediate",
                        "cma_compliant": -1,
                        "free_cancellation": 1
                    },
                    "rating_info": {
                        "dropoff_time": 9,
                        "location": 8.6,
                        "efficiency": 9.2,
                        "no_of_ratings": 4,
                        "condition": 7.5,
                        "average": 7.8,
                        "value_for_money": 7.2,
                        "cleanliness": 8.5,
                        "average_text": "Very good",
                        "pickup_time": 5.3
                    },
                    "content": {
                        "badges": [
                            {
                                "text": "Free cancellation",
                                "variation": "DEFAULT",
                                "type": "CONSTRUCTIVE"
                            }
                        ],
                        "supplier": {
                            "name": "Hertz",
                            "rating": {
                                "average": "7.8",
                                "localisedRating": {
                                    "displayValue": "7.8",
                                    "rawValue": 7.8
                                },
                                "subtitle": "4 reviews",
                                "title": "Good"
                            }
                        }
                    },
                    "pricing_info": {
                        "pay_when": "PAY_NOW",
                        "deposit": 102.6,
                        "drive_away_price_is_approx": true,
                        "drive_away_price": 129.54,
                        "base_deposit": 8629.12,
                        "price": 102.6,
                        "currency": "USD",
                        "discount": 0,
                        "fee_breakdown": {
                            "known_fees": [
                                {
                                    "max_amount": 0,
                                    "min_amount": 0,
                                    "currency": "USD",
                                    "amount": 0,
                                    "is_tax_included": 1,
                                    "type": "THEFT_EXCESS",
                                    "is_always_payable": 0
                                },
                                {
                                    "is_tax_included": 1,
                                    "amount": 640.96,
                                    "currency": "USD",
                                    "min_amount": 256.38,
                                    "max_amount": 640.96,
                                    "type": "DEPOSIT",
                                    "is_always_payable": 0
                                },
                                {
                                    "currency": "USD",
                                    "min_amount": 26.94,
                                    "max_amount": 26.94,
                                    "is_tax_included": 1,
                                    "amount": 26.94,
                                    "is_always_payable": 1,
                                    "type": "ONE_WAY_FEE"
                                },
                                {
                                    "currency": "USD",
                                    "min_amount": 0,
                                    "max_amount": 0,
                                    "is_tax_included": 1,
                                    "amount": 0,
                                    "type": "DAMAGE_EXCESS",
                                    "is_always_payable": 0
                                },
                                {
                                    "is_always_payable": 0,
                                    "type": "MILEAGE",
                                    "distance_allowed": {
                                        "is_unlimited": 1,
                                        "is_km": 0
                                    }
                                }
                            ],
                            "fuel_policy": {
                                "amount": 0,
                                "type": "RETURN_SAME"
                            }
                        },
                        "base_price": 8629.12,
                        "quote_allowed": 1,
                        "base_currency": "INR"
                    },
                    "accessibility": {
                        "fuel_policy": "Fuel policy is: Like for like",
                        "supplier_rating": "At this location, our customers have rated Hertz as 7.8 out of 10, Good.",
                        "pick_up_location": "Pick-up information: Downtown",
                        "transmission": "Automatic gearbox"
                    },
                    "supplier_info": {
                        "may_require_credit_card_guarantee": false,
                        "location_type": "Downtown",
                        "longitude": "-117.216334",
                        "latitude": "32.873046",
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/137_logo_200.png",
                        "pickup_instructions": "-",
                        "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037",
                        "name": "Hertz"
                    },
                    "fee_info": {
                        "fee": 0,
                        "tax": 0
                    }
                },
                {
                    "vehicle_id": "637339816",
                    "vehicle_info": {
                        "mileage": "Unlimited mileage",
                        "unlimited_mileage": 1,
                        "group": "Compact",
                        "aircon": 1,
                        "transmission": "Automatic",
                        "v_name": "Nissan Versa  ",
                        "fuel_policy": "Like for like",
                        "seats": "5",
                        "free_cancellation": 1,
                        "cma_compliant": -1,
                        "fuel_type": "N/A",
                        "airbags": 1,
                        "label": "Compact car with:",
                        "doors": "2/4",
                        "v_id": "637339816",
                        "suitcases": {
                            "big": "0",
                            "small": "2"
                        }
                    },
                    "rating_info": {
                        "efficiency": 9.2,
                        "dropoff_time": 9,
                        "location": 8.6,
                        "no_of_ratings": 4,
                        "value_for_money": 7.2,
                        "average": 7.8,
                        "condition": 7.5,
                        "pickup_time": 5.3,
                        "average_text": "Very good",
                        "cleanliness": 8.5
                    },
                    "freebies": [
                        "Amendments"
                    ],
                    "route_info": {
                        "dropoff": {
                            "longitude": "-117.193288",
                            "location_type": "SHUTTLE_BUS",
                            "location_id": "3889649",
                            "name": "San Diego International Airport",
                            "address": "3355, Admiral Boland Way, San Diego, USA, 92101",
                            "latitude": "32.733964",
                            "country_code": "US"
                        },
                        "pickup": {
                            "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037",
                            "name": "San Diego - Marriott La Jolla",
                            "country_code": "US",
                            "latitude": "32.873046",
                            "location_type": "DOWNTOWN",
                            "longitude": "-117.216334",
                            "location_id": "3889719",
                            "location_hash": "U2FuIERpZWdvIC0gTWFycmlvdHQgTGEgSm9sbGE="
                        }
                    },
                    "fee_info": {
                        "fee": 0,
                        "tax": 0
                    },
                    "supplier_info": {
                        "location_type": "Downtown",
                        "longitude": "-117.216334",
                        "may_require_credit_card_guarantee": false,
                        "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037",
                        "name": "Hertz",
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/137_logo_200.png",
                        "latitude": "32.873046",
                        "pickup_instructions": "-"
                    },
                    "pricing_info": {
                        "base_deposit": 7963.6,
                        "price": 94.69,
                        "drive_away_price": 121.63,
                        "deposit": 94.69,
                        "drive_away_price_is_approx": true,
                        "pay_when": "PAY_NOW",
                        "base_currency": "INR",
                        "quote_allowed": 1,
                        "base_price": 7963.6,
                        "fee_breakdown": {
                            "fuel_policy": {
                                "type": "RETURN_SAME",
                                "amount": 0
                            },
                            "known_fees": [
                                {
                                    "is_always_payable": 0,
                                    "type": "THEFT_EXCESS",
                                    "is_tax_included": 1,
                                    "amount": 0,
                                    "currency": "USD",
                                    "min_amount": 0,
                                    "max_amount": 0
                                },
                                {
                                    "type": "DEPOSIT",
                                    "is_always_payable": 0,
                                    "amount": 640.96,
                                    "is_tax_included": 1,
                                    "max_amount": 640.96,
                                    "currency": "USD",
                                    "min_amount": 256.38
                                },
                                {
                                    "currency": "USD",
                                    "min_amount": 26.94,
                                    "max_amount": 26.94,
                                    "is_tax_included": 1,
                                    "amount": 26.94,
                                    "is_always_payable": 1,
                                    "type": "ONE_WAY_FEE"
                                },
                                {
                                    "amount": 0,
                                    "is_tax_included": 1,
                                    "max_amount": 0,
                                    "currency": "USD",
                                    "min_amount": 0,
                                    "type": "DAMAGE_EXCESS",
                                    "is_always_payable": 0
                                },
                                {
                                    "distance_allowed": {
                                        "is_unlimited": 1,
                                        "is_km": 0
                                    },
                                    "type": "MILEAGE",
                                    "is_always_payable": 0
                                }
                            ]
                        },
                        "discount": 0,
                        "currency": "USD"
                    },
                    "content": {
                        "badges": [
                            {
                                "type": "CONSTRUCTIVE",
                                "variation": "DEFAULT",
                                "text": "Free cancellation"
                            }
                        ],
                        "supplier": {
                            "rating": {
                                "title": "Good",
                                "average": "7.8",
                                "localisedRating": {
                                    "rawValue": 7.8,
                                    "displayValue": "7.8"
                                },
                                "subtitle": "4 reviews"
                            },
                            "name": "Hertz"
                        }
                    },
                    "accessibility": {
                        "transmission": "Automatic gearbox",
                        "pick_up_location": "Pick-up information: Downtown",
                        "supplier_rating": "At this location, our customers have rated Hertz as 7.8 out of 10, Good.",
                        "fuel_policy": "Fuel policy is: Like for like"
                    }
                },
                {
                    "vehicle_id": "637405506",
                    "route_info": {
                        "pickup": {
                            "location_hash": "U2FuIERpZWdvIC0gTWFycmlvdHQgTGEgSm9sbGE=",
                            "location_id": "3889719",
                            "longitude": "-117.216334",
                            "location_type": "DOWNTOWN",
                            "country_code": "US",
                            "latitude": "32.873046",
                            "name": "San Diego - Marriott La Jolla",
                            "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037"
                        },
                        "dropoff": {
                            "location_id": "3889649",
                            "location_type": "SHUTTLE_BUS",
                            "longitude": "-117.193288",
                            "country_code": "US",
                            "latitude": "32.733964",
                            "address": "3355, Admiral Boland Way, San Diego, USA, 92101",
                            "name": "San Diego International Airport"
                        }
                    },
                    "freebies": [
                        "Amendments"
                    ],
                    "vehicle_info": {
                        "suitcases": {
                            "big": "0",
                            "small": "4"
                        },
                        "v_id": "637405506",
                        "doors": "4",
                        "label": "Standard car with:",
                        "airbags": 1,
                        "fuel_type": "N/A",
                        "cma_compliant": -1,
                        "free_cancellation": 1,
                        "seats": "5",
                        "fuel_policy": "Like for like",
                        "v_name": "Buick Verano  ",
                        "transmission": "Automatic",
                        "aircon": 1,
                        "group": "Standard",
                        "mileage": "Unlimited mileage",
                        "unlimited_mileage": 1
                    },
                    "rating_info": {
                        "location": 8.6,
                        "dropoff_time": 9,
                        "efficiency": 9.2,
                        "no_of_ratings": 4,
                        "condition": 7.5,
                        "average": 7.8,
                        "value_for_money": 7.2,
                        "cleanliness": 8.5,
                        "average_text": "Very good",
                        "pickup_time": 5.3
                    },
                    "pricing_info": {
                        "pay_when": "PAY_NOW",
                        "deposit": 120.69,
                        "drive_away_price_is_approx": true,
                        "drive_away_price": 147.63,
                        "price": 120.69,
                        "base_deposit": 10150.78,
                        "discount": 0,
                        "currency": "USD",
                        "base_currency": "INR",
                        "fee_breakdown": {
                            "fuel_policy": {
                                "amount": 0,
                                "type": "RETURN_SAME"
                            },
                            "known_fees": [
                                {
                                    "is_always_payable": 0,
                                    "type": "THEFT_EXCESS",
                                    "is_tax_included": 1,
                                    "amount": 0,
                                    "min_amount": 0,
                                    "currency": "USD",
                                    "max_amount": 0
                                },
                                {
                                    "amount": 640.96,
                                    "is_tax_included": 1,
                                    "max_amount": 640.96,
                                    "currency": "USD",
                                    "min_amount": 256.38,
                                    "is_always_payable": 0,
                                    "type": "DEPOSIT"
                                },
                                {
                                    "is_always_payable": 1,
                                    "type": "ONE_WAY_FEE",
                                    "currency": "USD",
                                    "min_amount": 26.94,
                                    "max_amount": 26.94,
                                    "is_tax_included": 1,
                                    "amount": 26.94
                                },
                                {
                                    "max_amount": 0,
                                    "currency": "USD",
                                    "min_amount": 0,
                                    "amount": 0,
                                    "is_tax_included": 1,
                                    "type": "DAMAGE_EXCESS",
                                    "is_always_payable": 0
                                },
                                {
                                    "is_always_payable": 0,
                                    "type": "MILEAGE",
                                    "distance_allowed": {
                                        "is_km": 0,
                                        "is_unlimited": 1
                                    }
                                }
                            ]
                        },
                        "quote_allowed": 1,
                        "base_price": 10150.78
                    },
                    "content": {
                        "badges": [
                            {
                                "type": "CONSTRUCTIVE",
                                "variation": "DEFAULT",
                                "text": "Free cancellation"
                            }
                        ],
                        "supplier": {
                            "rating": {
                                "title": "Good",
                                "subtitle": "4 reviews",
                                "localisedRating": {
                                    "rawValue": 7.8,
                                    "displayValue": "7.8"
                                },
                                "average": "7.8"
                            },
                            "name": "Hertz"
                        }
                    },
                    "accessibility": {
                        "fuel_policy": "Fuel policy is: Like for like",
                        "supplier_rating": "At this location, our customers have rated Hertz as 7.8 out of 10, Good.",
                        "pick_up_location": "Pick-up information: Downtown",
                        "transmission": "Automatic gearbox"
                    },
                    "supplier_info": {
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/137_logo_200.png",
                        "latitude": "32.873046",
                        "pickup_instructions": "-",
                        "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037",
                        "name": "Hertz",
                        "may_require_credit_card_guarantee": false,
                        "location_type": "Downtown",
                        "longitude": "-117.216334"
                    },
                    "fee_info": {
                        "tax": 0,
                        "fee": 0
                    }
                },
                {
                    "vehicle_id": "613837726",
                    "vehicle_info": {
                        "free_cancellation": 1,
                        "cma_compliant": -1,
                        "group": "Full-size",
                        "unlimited_mileage": 1,
                        "mileage": "Unlimited mileage",
                        "transmission": "Automatic",
                        "aircon": 1,
                        "fuel_policy": "Like for like",
                        "v_name": "Nissan Quest  ",
                        "seats": "7",
                        "label": "Full-size car with:",
                        "doors": "4",
                        "suitcases": {
                            "big": "0",
                            "small": "5"
                        },
                        "v_id": "613837726",
                        "fuel_type": "N/A",
                        "airbags": 1
                    },
                    "rating_info": {
                        "average_text": "Very good",
                        "pickup_time": 5.3,
                        "cleanliness": 8.5,
                        "average": 7.8,
                        "value_for_money": 7.2,
                        "condition": 7.5,
                        "no_of_ratings": 4,
                        "dropoff_time": 9,
                        "location": 8.6,
                        "efficiency": 9.2
                    },
                    "freebies": [
                        "Amendments"
                    ],
                    "route_info": {
                        "pickup": {
                            "longitude": "-117.216334",
                            "location_type": "DOWNTOWN",
                            "location_hash": "U2FuIERpZWdvIC0gTWFycmlvdHQgTGEgSm9sbGE=",
                            "location_id": "3889719",
                            "name": "San Diego - Marriott La Jolla",
                            "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037",
                            "latitude": "32.873046",
                            "country_code": "US"
                        },
                        "dropoff": {
                            "location_id": "3889649",
                            "location_type": "SHUTTLE_BUS",
                            "longitude": "-117.193288",
                            "latitude": "32.733964",
                            "country_code": "US",
                            "address": "3355, Admiral Boland Way, San Diego, USA, 92101",
                            "name": "San Diego International Airport"
                        }
                    },
                    "fee_info": {
                        "fee": 0,
                        "tax": 0
                    },
                    "supplier_info": {
                        "pickup_instructions": "-",
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/137_logo_200.png",
                        "latitude": "32.873046",
                        "name": "Hertz",
                        "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037",
                        "may_require_credit_card_guarantee": false,
                        "longitude": "-117.216334",
                        "location_type": "Downtown"
                    },
                    "accessibility": {
                        "supplier_rating": "At this location, our customers have rated Hertz as 7.8 out of 10, Good.",
                        "fuel_policy": "Fuel policy is: Like for like",
                        "pick_up_location": "Pick-up information: Downtown",
                        "transmission": "Automatic gearbox"
                    },
                    "pricing_info": {
                        "price": 165.71,
                        "base_deposit": 13936.74,
                        "drive_away_price": 246.52,
                        "deposit": 165.71,
                        "drive_away_price_is_approx": true,
                        "pay_when": "PAY_NOW",
                        "base_currency": "INR",
                        "base_price": 13936.74,
                        "quote_allowed": 1,
                        "fee_breakdown": {
                            "known_fees": [
                                {
                                    "max_amount": 0,
                                    "min_amount": 0,
                                    "currency": "USD",
                                    "amount": 0,
                                    "is_tax_included": 1,
                                    "is_always_payable": 0,
                                    "type": "THEFT_EXCESS"
                                },
                                {
                                    "amount": 640.96,
                                    "is_tax_included": 1,
                                    "max_amount": 640.96,
                                    "currency": "USD",
                                    "min_amount": 256.38,
                                    "type": "DEPOSIT",
                                    "is_always_payable": 0
                                },
                                {
                                    "is_always_payable": 1,
                                    "type": "ONE_WAY_FEE",
                                    "is_tax_included": 1,
                                    "amount": 80.81,
                                    "currency": "USD",
                                    "min_amount": 80.81,
                                    "max_amount": 80.81
                                },
                                {
                                    "is_always_payable": 0,
                                    "type": "DAMAGE_EXCESS",
                                    "amount": 0,
                                    "is_tax_included": 1,
                                    "max_amount": 0,
                                    "currency": "USD",
                                    "min_amount": 0
                                },
                                {
                                    "distance_allowed": {
                                        "is_unlimited": 1,
                                        "is_km": 0
                                    },
                                    "type": "MILEAGE",
                                    "is_always_payable": 0
                                }
                            ],
                            "fuel_policy": {
                                "amount": 0,
                                "type": "RETURN_SAME"
                            }
                        },
                        "discount": 0,
                        "currency": "USD"
                    },
                    "content": {
                        "supplier": {
                            "name": "Hertz",
                            "rating": {
                                "subtitle": "4 reviews",
                                "average": "7.8",
                                "localisedRating": {
                                    "displayValue": "7.8",
                                    "rawValue": 7.8
                                },
                                "title": "Good"
                            }
                        },
                        "badges": [
                            {
                                "type": "CONSTRUCTIVE",
                                "text": "Free cancellation",
                                "variation": "DEFAULT"
                            }
                        ]
                    }
                }
            ],
            "provider": "rentalcars",
            "count": 35,
            "title": "Car rentals",
            "content": {
                "items": [
                    {
                        "positionInList": 3,
                        "type": "SHELL_REGION_VIEW",
                        "content": {
                            "contentType": "carsSearchResultsSecondaryPromotional"
                        }
                    }
                ],
                "filters": {
                    "countLabel": "35 results"
                }
            },
            "filter": [
                {
                    "id": "carCategory",
                    "categories": [
                        {
                            "id": "carCategory::small",
                            "name": "Small",
                            "nameWithCount": "Small (4)",
                            "count": 4
                        },
                        {
                            "count": 13,
                            "nameWithCount": "Medium (13)",
                            "name": "Medium",
                            "id": "carCategory::medium"
                        },
                        {
                            "name": "Large",
                            "id": "carCategory::large",
                            "count": 22,
                            "nameWithCount": "Large (22)"
                        },
                        {
                            "name": "Premium",
                            "id": "carCategory::premium",
                            "count": 3,
                            "nameWithCount": "Premium (3)"
                        },
                        {
                            "nameWithCount": "People carriers (4)",
                            "count": 4,
                            "id": "carCategory::carriers",
                            "name": "People carriers"
                        }
                    ],
                    "layout": {
                        "is_collapsable": "true",
                        "layout_type": "list",
                        "collapsed_count": 5,
                        "is_collapsed": "true"
                    },
                    "type": "multiple_union",
                    "title": "Car Type"
                },
                {
                    "categories": [
                        {
                            "nameWithCount": "Avis (24)",
                            "count": 24,
                            "name": "Avis",
                            "id": "supplier::Avis"
                        },
                        {
                            "name": "Hertz",
                            "id": "supplier::Hertz",
                            "nameWithCount": "Hertz (11)",
                            "count": 11
                        }
                    ],
                    "layout": {
                        "is_collapsed": "true",
                        "collapsed_count": 5,
                        "layout_type": "list",
                        "is_collapsable": "true"
                    },
                    "id": "supplier",
                    "title": "Supplier",
                    "type": "multiple_union"
                },
                {
                    "type": "multiple_union",
                    "title": "Price per day",
                    "id": "pricePerDayBuckets",
                    "categories": [
                        {
                            "count": 0,
                            "nameWithCount": "US$0 - US$50 (0)",
                            "name": "US$0 - US$50",
                            "id": "pricePerDayBuckets::BUCKET_1"
                        },
                        {
                            "nameWithCount": "US$50 - US$100 (19)",
                            "count": 19,
                            "id": "pricePerDayBuckets::BUCKET_2",
                            "name": "US$50 - US$100"
                        },
                        {
                            "count": 15,
                            "nameWithCount": "US$100 - US$150 (15)",
                            "name": "US$100 - US$150",
                            "id": "pricePerDayBuckets::BUCKET_3"
                        },
                        {
                            "nameWithCount": "US$150 - US$200 (1)",
                            "count": 1,
                            "name": "US$150 - US$200",
                            "id": "pricePerDayBuckets::BUCKET_4"
                        },
                        {
                            "id": "pricePerDayBuckets::BUCKET_5",
                            "name": "US$200+",
                            "nameWithCount": "US$200+ (0)",
                            "count": 0
                        }
                    ],
                    "layout": {
                        "is_collapsed": "false",
                        "layout_type": "list",
                        "collapsed_count": 5,
                        "is_collapsable": "false"
                    }
                },
                {
                    "id": "transmission",
                    "categories": [
                        {
                            "count": 35,
                            "nameWithCount": "Automatic (35)",
                            "name": "Automatic",
                            "id": "transmission::AUTOMATIC"
                        }
                    ],
                    "layout": {
                        "is_collapsable": "true",
                        "is_collapsed": "true",
                        "layout_type": "list",
                        "collapsed_count": 5
                    },
                    "title": "Transmission",
                    "type": "multiple_union"
                },
                {
                    "categories": [
                        {
                            "id": "hasAirConditioning::true",
                            "nameWithCount": "Air Conditioning (35)",
                            "count": 35
                        }
                    ],
                    "layout": {
                        "layout_type": "list"
                    },
                    "id": "hasAirConditioning",
                    "type": "single_option",
                    "title": "Air Conditioning"
                }
            ],
            "sort": [
                {
                    "title_tag": "tr.searchresults.sortBy.recommended",
                    "identifier": "recommended",
                    "name": "Recommended â best first"
                },
                {
                    "title_tag": "tr.searchresults.sortBy.price.lowHigh",
                    "identifier": "price_low_to_high",
                    "name": "Price - lowest first"
                },
                {
                    "identifier": "review_score",
                    "name": "Review score - highest first",
                    "title_tag": "tr.searchresults.sortBy.reviews.highLow"
                }
            ]
        }
    }
]

2025-08-25 11:51:44,358 - evaluation_logger_Cross-115 - INFO - Final Response: <ï½beginâofâsentenceï½># 1. æ¦è¿°

æ¬æï¼æä»¬æ¥åäº« [ãç²¾å°½ Spring MVC æºç åæ ââ å®¹å¨çåå§åï¼äºï¼ä¹ Servlet WebApplicationContext å®¹å¨ã](http://svip.iocoder.cn/Spring-MVC/context-init-Servlet-WebApplicationContext) ä¸æã

èèå°èåççµèå¯è½æ æ³å®å¨æ¾ç¤ºï¼æä»¥å°æç« åæä¸¤ç¯ï¼

* 1ã2ã3ã4ã5 è
* 6ã7ã8ã9ã10 è

# 2. ApplicationContext

å¨å¼å§çå·ä½ä»£ç ä¹åï¼æä»¬åæ¥å¯¹ Spring ç ApplicationContext çä½ç³»ç»æï¼æä¸ªæ´ä½çè®¤è¯ãå¦ä¸å¾æç¤ºï¼

> FROM [ãSpring æºç æ·±åº¦è§£æã](https://item.jd.com/11807450.html) ç [ã6.1.2 ApplicationContext ä½ç³»ç»æã](http://svip.iocoder.cn/Spring-MVC/context-init-Servlet-WebApplicationContext/#) å°è

![ApplicationContext ç¸å³ç±»å¾](13/1.png)

* é»è²å®çº¿ç®­å¤´ï¼ç»§æ¿
* ç»¿è²å®çº¿ç®­å¤´ï¼å®ç°æ¥å£
* ç»¿è²èçº¿ç®­å¤´ï¼è°ç¨

## 2.1 BeanFactory

`org.springframework.beans.factory.BeanFactory` ï¼Spring ç Bean å·¥åï¼æä¾å¯¹ Bean çè·åç­åè½ãä»£ç å¦ä¸ï¼

```java
// BeanFactory.java

public interface BeanFactory {

	/**
	 * ç¨æ¥å¼ç¨ä¸ä¸ªå®ä¾ï¼ææå®åå·¥åäº§çç Bean åºåå¼ï¼å°±æ¯è¯´ï¼å¦æä¸ä¸ª FactoryBean çåå­ä¸º aï¼é£ä¹ï¼&a ä¼å¾å°é£ä¸ª Factory
	 */
	String FACTORY_BEAN_PREFIX = "&";

	// éè¿ bean çåå­è·å Bean å®ä¾
	Object getBean(String name) throws BeansException;
	<T> T getBean(String name, Class<T> requiredType) throws BeansException;
	Object getBean(String name, Object... args) throws BeansException;
	<T> T getBean(Class<T> requiredType) throws BeansException;
	<T> T getBean(Class<T> requiredType, Object... args) throws BeansException;

	// è·å Bean çæä¾èï¼æä¾èå¯ä»¥ç¨æ¥å»¶è¿è·åå®ä¾ï¼
	<T> ObjectProvider<T> getBeanProvider(Class<T> requiredType);
	<T> ObjectProvider<T> getBeanProvider(ResolvableType requiredType);

	// å·¥åæ¯å¦åå«æå®åå­ç Bean
	boolean containsBean(String name);

	// Bean æ¯å¦ä¸ºåä¾
	boolean isSingleton(String name) throws NoSuchBeanDefinitionException;
	// Bean æ¯å¦ä¸ºååï¼å¤ä¾ï¼
	boolean isPrototype(String name) throws NoSuchBeanDefinitionException;
	// æå®åå­ç Bean ç Class ç±»å
	boolean isTypeMatch(String name, ResolvableType typeToMatch) throws NoSuchBeanDefinitionException;
	boolean isTypeMatch(String name, Class<?> typeToMatch) throws NoSuchBeanDefinitionException;

	// è·åæå®åå­ç Bean ç Class ç±»å
	@Nullable
	Class<?> getType(String name) throws NoSuchBeanDefinitionException;
	// è·åæå®åå­ç Bean çå«å
	String[] getAliases(String name);

}
```

* å·ä½çï¼èåå¯ä»¥çç [ããSpringãIOC ä¹ BeanFactory ç®ä»ã](https://www.cnblogs.com/liuning8023/p/4491776.html) æç« ã

## 2.2 ListableBeanFactory

`org.springframework.beans.factory.ListableBeanFactory` ï¼æä¾è·å Bean çåè¡¨çåè½ãä»£ç å¦ä¸ï¼

```java
// ListableBeanFactory.java

public interface ListableBeanFactory extends BeanFactory {

	// æ¯å¦åå«æå®åå­ç Bean å®ä¹
	boolean containsBeanDefinition(String beanName);

	// è¿åå·¥åä¸­ç Bean å®ä¹çæ°é
	int getBeanDefinitionCount();

	// è¿åå·¥åä¸­ææ Bean çåå­
	String[] getBeanDefinitionNames();

	// è¿åæå®ç±»åç Bean çåå­
	String[] getBeanNamesForType(ResolvableType type);
	String[] getBeanNamesForType(ResolvableType type, boolean includeNonSingletons, boolean allowEagerInit);
	String[] getBeanNamesForType(@Nullable Class<?> type);
	String[] getBeanNamesForType(@Nullable Class<?> type, boolean includeNonSingletons, boolean allowEagerInit);

	// è¿åæå®ç±»åç Bean ç Map
	<T> Map<String, T> getBeansOfType(@Nullable Class<T> type) throws BeansException;
	<T> Map<String, T> getBeansOfType(@Nullable Class<T> type, boolean includeNonSingletons, boolean allowEagerInit) throws BeansException;

	// è¿åæå®æ³¨è§£ç Bean çåå­
	String[] getBeanNamesForAnnotation(Class<? extends Annotation> annotationType);

	// è¿åæå®æ³¨è§£ç Bean ç Map
	Map<String, Object> getBeansWithAnnotation(Class<? extends Annotation> annotationType) throws BeansException;

	// æ¥æ¾æå® Bean ä¸çæå®æ³¨è§£
	@Nullable
	<A extends Annotation> A findAnnotationOnBean(String beanName, Class<A> annotationType) throws NoSuchBeanDefinitionException;

}
```

## 2.3 HierarchicalBeanFactory

`org.springframework.beans.factory.HierarchicalBeanFactory` ï¼æä¾ç¶å®¹å¨çè®¿é®åè½ãä»£ç å¦ä¸ï¼

```java
// HierarchicalBeanFactory.java

public interface HierarchicalBeanFactory extends BeanFactory {

	/**
	 * è¿åç¶ç Bean å·¥å
	 */
	@Nullable
	BeanFactory getParentBeanFactory();

	/**
	 * æ¬å°çå·¥åæ¯å¦åå«æå®åå­ç Bean
	 */
	boolean containsLocalBean(String name);

}
```

## 2.4 ApplicationContext

`org.springframework.context.ApplicationContext` ï¼ç»§æ¿ ListableBeanFactoryãHierarchicalBeanFactory ç­æ¥å£ï¼æä¾å¦ä¸åè½ï¼

* 1ãéæ MessageSource ï¼æä¾å½éåçåè½
* 2ãéæ ResourceLoader ï¼æä¾èµæºå è½½çåè½
* 3ãéæ ApplicationEventPublisher ï¼æä¾äºä»¶åå¸çåè½
* 4ãéæ EnvironmentCapable ï¼æä¾ç¯å¢åéçåè½

ä»£ç å¦ä¸ï¼

```java
// ApplicationContext.java

public interface ApplicationContext extends EnvironmentCapable, ListableBeanFactory, HierarchicalBeanFactory,
		MessageSource, ApplicationEventPublisher, ResourcePatternResolver {

	/**
	 * è¿å ApplicationContext ç id
	 */
	@Nullable
	String getId();

	/**
	 * è¿å ApplicationContext çåå­
	 */
	String getApplicationName();

	/**
	 * è¿å ApplicationContext çæ¾ç¤ºåå­
	 */
	String getDisplayName();

	/**
	 * è¿å ApplicationContext çå¯å¨æ¶é´
	 */
	long getStartupDate();

	/**
	 * è¿åç¶ç ApplicationContext
	 */
	@Nullable
	ApplicationContext getParent();

	/**
	 * æ´é² AutowireCapableBeanFactory çåè½
	 */
	AutowireCapableBeanFactory getAutowireCapableBeanFactory() throws IllegalStateException;

}
```

## 2.5 ConfigurableApplicationContext

`org.springframework.context.ConfigurableApplicationContext` ï¼ç»§æ¿ ApplicationContextãLifecycle æ¥å£ï¼æä¾éç½® ApplicationContext çåè½ãä»£ç å¦ä¸ï¼

```java
// ConfigurableApplicationContext.java

public interface ConfigurableApplicationContext extends ApplicationContext, Lifecycle {

	/**
	 * éç½®è·¯å¾çåéç¬¦
	 */
	String CONFIG_LOCATION_DELIMITERS = ",; \t\n";

	/**
	 * è½¬æ¢æå¡ Bean çåå­
	 */
	String CONVERSION_SERVICE_BEAN_NAME = "conversionService";

	/**
	 * å è½½å¨ Bean çåå­
	 */
	String LOAD_TIME_WEAVER_BEAN_NAME = "loadTimeWeaver";

	/**
	 * ç¯å¢åé Bean çåå­
	 */
	String ENVIRONMENT_BEAN_NAME = "environment";

	/**
	 * ç³»ç»éç½® Bean çåå­
	 */
	String SYSTEM_PROPERTIES_BEAN_NAME = "systemProperties";

	/**
	 * ç³»ç»ç¯å¢ Bean çåå­
	 */
	String SYSTEM_ENVIRONMENT_BEAN_NAME = "systemEnvironment";

	/**
	 * è®¾ç½® ApplicationContext ç id
	 */
	void setId(String id);

	/**
	 * è®¾ç½® ApplicationContext çç¶å®¹å¨
	 */
	void setParent(@Nullable ApplicationContext parent);

	/**
	 * è®¾ç½®ç¯å¢åé
	 */
	void setEnvironment(ConfigurableEnvironment environment);

	/**
	 * è·åç¯å¢åé
	 */
	@Override
	ConfigurableEnvironment getEnvironment();

	/**
	 * æ·»å  BeanFactoryPostProcessor
	 */
	void addBeanFactoryPostProcessor(BeanFactoryPostProcessor postProcessor);

	/**
	 * æ·»å  ApplicationListener
	 */
	void addApplicationListener(ApplicationListener<?> listener);

	/**
	 * æ·»å  ProtocolResolver
	 */
	void addProtocolResolver(ProtocolResolver resolver);

	/**
	 * å è½½èµæºéç½®
	 */
	void refresh() throws BeansException, IllegalStateException;

	/**
	 * æ³¨å shutdown hook
	 */
	void registerShutdownHook();

	/**
	 * å³é­ ApplicationContext
	 */
	@Override
	void close();

	/**
	 * ApplicationContext æ¯å¦æ¿æ´»
	 */
	boolean isActive();

	/**
	 * è·åå½åç BeanFactory
	 */
	ConfigurableListableBeanFactory getBeanFactory() throws IllegalStateException;

}
```

## 2.6 AbstractApplicationContext

`org.springframework.context.support.AbstractApplicationContext` ï¼å®ç° ConfigurableApplicationContext æ¥å£ï¼ApplicationContext çæ½è±¡å®ç°ç±»ãå®å®ç°äº ConfigurableApplicationContext å®ä¹ç**æ¨¡æ¿æ¹æ³**ï¼åæ¶å®ä¹äºæ½è±¡æ¹æ³ `#obtainFreshBeanFactory()` æ¹æ³ï¼äº¤ç±å­ç±»å®ç°ãä»èï¼å­ç±»åªéè¦å³æ³¨ `#obtainFreshBeanFactory()` æ¹æ³çå®ç°ï¼å³å¦ä½å·æ° BeanFactory ã

## 2.7 WebApplicationContext

`org.springframework.web.context.WebApplicationContext` ï¼ç»§æ¿ ApplicationContext æ¥å£ï¼æä¾ Web çç¯å¢çä¸ä¸æãä»£ç å¦ä¸ï¼

```java
// WebApplicationContext.java

public interface WebApplicationContext extends ApplicationContext {

	/**
	 * ä¸ä¸æå±æ§ï¼å¨å¯å¨æ¶æ ¹ä¸ä¸æå¿é¡»ç»å®å°è¯¥å±æ§ä¸
	 */
	String ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE = WebApplicationContext.class.getName() + ".ROOT";

	/**
	 * Scope å±æ§ï¼è¯·æ±
	 */
	String SCOPE_REQUEST = "request";

	/**
	 * Scope å±æ§ï¼ä¼è¯
	 */
	String SCOPE_SESSION = "session";

	/**
	 * Scope å±æ§ï¼å¨å±ä¼è¯
	 */
	String SCOPE_APPLICATION = "application";

	/**
	 * Servlet ä¸ä¸æçç¯å¢å±æ§
	 */
	String SERVLET_CONTEXT_BEAN_NAME = "servletContext";

	/**
	 * ServletContext åå§ååæ°çç¯å¢å±æ§
	 */
	String CONTEXT_PARAMETERS_BEAN_NAME = "contextParameters";

	/**
	 * ServletContext å±æ§ çç¯å¢å±æ§
	 */
	String CONTEXT_ATTRIBUTES_BEAN_NAME = "contextAttributes";

	/**
	 * è·å Servlet ä¸ä¸æ
	 */
	@Nullable
	ServletContext getServletContext();

}
```

## 2.8 ConfigurableWebApplicationContext

`org.springframework.web.context.ConfigurableWebApplicationContext` ï¼ç»§æ¿ WebApplicationContextãConfigurableApplicationContext æ¥å£ï¼æä¾éç½® WebApplicationContext çåè½ãä»£ç å¦ä¸ï¼

```java
// ConfigurableWebApplicationContext.java

public interface ConfigurableWebApplicationContext extends WebApplicationContext, ConfigurableApplicationContext {

	/**
	 * è®¾ç½® Servlet ä¸ä¸æ
	 */
	void setServletContext(@Nullable ServletContext servletContext);

	/**
	 * è®¾ç½® Servlet éç½®
	 */
	void setServletConfig(@Nullable ServletConfig servletConfig);

	/**
	 * è·å Servlet éç½®
	 */
	@Nullable
	ServletConfig getServletConfig();

	/**
	 * è®¾ç½®éç½®è·¯å¾
	 */
	void setConfigLocation(String configLocation);

	/**
	 * è®¾ç½®éç½®è·¯å¾ä»¬
	 */
	void setConfigLocations(String... configLocations);

	/**
	 * è·åéç½®è·¯å¾ä»¬
	 */
	@Nullable
	String[] getConfigLocations();

}
```

## 2.9 GenericWebApplicationContext

`org.springframework.web.context.support.GenericWebApplicationContext` ï¼ç»§æ¿ GenericApplicationContext ï¼å®ç° ConfigurableWebApplicationContext æ¥å£ãä»£ç å¦ä¸ï¼

```java
// GenericWebApplicationContext.java

public class GenericWebApplicationContext extends GenericApplicationContext implements ConfigurableWebApplicationContext, ThemeSource {

	@Nullable
	private ServletContext servletContext;

	@Nullable
	private ThemeSource themeSource;

	public GenericWebApplicationContext() {
		super();
	}

	public GenericWebApplicationContext(ServletContext servletContext) {
		this.servletContext = servletContext;
	}

	public GenericWebApplicationContext(ApplicationContext parent) {
		super(parent);
	}

	public GenericWebApplicationContext(ApplicationContext parent, ServletContext servletContext) {
		super(parent);
		this.servletContext = servletContext;
	}

	// å®ç° ConfigurableWebApplicationContext æ¥å£
	@Override
	public void setServletContext(@Nullable ServletContext servletContext) {
		this.servletContext = servletContext;
	}

	@Override
	@Nullable
	public ServletContext getServletContext() {
		return this.servletContext;
	}

	// ... çç¥å¶å®ä»£ç 

}
```

* æ¯è¾ç®åï¼èåèªå·±ççã

## 2.10 AnnotationConfigWebApplicationContext

`org.springframework.web.context.support.AnnotationConfigWebApplicationContext` ï¼ç»§æ¿ AbstractRefreshableWebApplicationContext ç±»ï¼å®ç° AnnotationConfigRegistry æ¥å£ï¼æ¯ææ³¨è§£éç½®ç WebApplicationContext å®ç°ç±»ãä»£ç å¦ä¸ï¼

```java
// AnnotationConfigWebApplicationContext.java

public class AnnotationConfigWebApplicationContext extends AbstractRefreshableWebApplicationContext implements AnnotationConfigRegistry {

	@Nullable
	private AnnotatedBeanDefinitionReader reader;

	@Nullable
	private ClassPathBeanDefinitionScanner scanner;

	/**
	 * æ³¨åæ³¨è§£éç½®çç±»
	 *
	 * @param annotatedClasses æ³¨è§£éç½®çç±»
	 */
	@Override
	public void register(Class<?>... annotatedClasses) {
		Assert.notEmpty(annotatedClasses, "At least one annotated class must be specified");
		// åå§å AnnotatedBeanDefinitionReader
		getReader().register(annotatedClasses);
	}

	/**
	 * æ«ææ³¨è§£éç½®çå
	 *
	 * @param basePackages å
	 */
	@Override
	public void scan(String... basePackages) {
		Assert.notEmpty(basePackages, "At least one base package must be specified");
		// åå§å ClassPathBeanDefinitionScanner
		getScanner().scan(basePackages);
	}

	/**
	 * å·æ° BeanFactory
	 */
	@Override
	protected void loadBeanDefinitions(DefaultListableBeanFactory beanFactory) {
		// åå»º AnnotatedBeanDefinitionReader
		AnnotatedBeanDefinitionReader reader = getReader();
		// æ³¨åå¤çæ³¨è§£ç Processor
		reader.register(AnnotationConfigUtils.processCommonDefinitionAnnotations(reader));
		// è®¾ç½®ç¯å¢åé
		reader.setEnvironment(getEnvironment());

		// åå»º ClassPathBeanDefinitionScanner
		ClassPathBeanDefinitionScanner scanner = getScanner();
		scanner.setEnvironment(getEnvironment());
		scanner.setResourceLoader(this);

		// æ«æå
		String[] configLocations = getConfigLocations();
		if (configLocations != null) {
			for (String configLocation : configLocations) {
				try {
					Class<?> clazz = getClassLoader().loadClass(configLocation);
					if (Logger.isDebugEnabled()) {
						logger.debug("Registering [" + configLocation + "]");
					}
					reader.register(clazz);
				} catch (ClassNotFoundException ex) {
					if (logger.isDebugEnabled()) {
						logger.debug("Could not load class for config location [" + configLocation + "] - trying package scan. " + ex);
					}
					int count = scanner.scan(configLocation);
					if (logger.isDebugEnabled()) {
						if (count == 0) {
							logger.debug("No annotated classes found for specified class/package [" + configLocation + "]");
						} else {
							logger.debug("Found " + count + " annotated classes in package [" + configLocation + "]");
						}
					}
				}
			}
		}
	}

	private AnnotatedBeanDefinitionReader getReader() {
		if (this.reader == null) {
			this.reader = new AnnotatedBeanDefinitionReader(getBeanFactory());
		}
		return this.reader;
	}

	private ClassPathBeanDefinitionScanner getScanner() {
		if (this.scanner == null) {
			this.scanner = new ClassPathBeanDefinitionScanner(getBeanFactory());
		}
		return this.scanner;
	}

}
```

* ä»£ç æ¯è¾ç®åï¼èåèªå·±ççã

## 2.11 XmlWebApplicationContext

`org.springframework.web.context.support.XmlWebApplicationContext` ï¼ç»§æ¿ AbstractRefreshableWebApplicationContext ç±»ï¼æ¯æ XML éç½®ç WebApplicationContext å®ç°ç±»ãä»£ç å¦ä¸ï¼

```java
// XmlWebApplicationContext.java

public class XmlWebApplicationContext extends AbstractRefreshableWebApplicationContext {

	/**
	 * é»è®¤çéç½®æä»¶è·¯å¾
	 */
	public static final String DEFAULT_CONFIG_LOCATION = "/WEB-INF/applicationContext.xml";

	/**
	 * é»è®¤çéç½®æä»¶è·¯å¾åç¼
	 */
	public static final String DEFAULT_CONFIG_LOCATION_PREFIX = "/WEB-INF/";

	/**
	 * é»è®¤çéç½®æä»¶è·¯å¾åç¼
	 */
	public static final String DEFAULT_CONFIG_LOCATION_SUFFIX = ".xml";

	/**
	 * å è½½ Bean å®ä¹
	 *
	 * @param beanFactory Bean å·¥å
	 */
	@Override
	protected void loadBeanDefinitions(DefaultListableBeanFactory beanFactory) throws BeansException, IOException {
		// åå»º XmlBeanDefinitionReader å¯¹è±¡
		XmlBeanDefinitionReader beanDefinitionReader = new XmlBeanDefinitionReader(beanFactory);

		// è®¾ç½®ç¯å¢åé
		beanDefinitionReader.setEnvironment(getEnvironment());
		// è®¾ç½® ResourceLoader ä¸ºå½åå¯¹è±¡
		beanDefinitionReader.setResourceLoader(this);
		// è®¾ç½® EntityResolver ä¸º ResourceEntityResolver å¯¹è±¡
		beanDefinitionReader.setEntityResolver(new ResourceEntityResolver(this));

		// åå§å BeanDefinitionReader
		initBeanDefinitionReader(beanDefinitionReader);
		// å è½½ BeanDefinition
		loadBeanDefinitions(beanDefinitionReader);
	}

	/**
	 * åå§å BeanDefinitionReader
	 *
	 * @param beanDefinitionReader BeanDefinitionReader
	 */
	protected void initBeanDefinitionReader(XmlBeanDefinitionReader beanDefinitionReader) {
	}

	/**
	 * å è½½ BeanDefinition
	 *
	 * @param reader XmlBeanDefinitionReader
	 */
	protected void loadBeanDefinitions(XmlBeanDefinitionReader reader) throws IOException {
		// è·å¾éç½®æä»¶è·¯å¾çæ°ç»
		String[] configLocations = getConfigLocations();
		if (configLocations != null) {
			// å è½½ BeanDefinition
			for (String configLocation : configLocations) {
				reader.loadBeanDefinitions(configLocation);
			}
		}
	}

	/**
	 * è·å¾é»è®¤çéç½®æä»¶è·¯å¾
	 *
	 * @return é»è®¤çéç½®æä»¶è·¯å¾
	 */
	@Override
	protected String[] getDefaultConfigLocations() {
		if (getNamespace() != null) {
			return new String[]

2025-08-25 11:51:51,690 - evaluation_logger_Cross-115 - INFO - Complete Result: {'score': 0, 'reason': "The response does not address any of the requested information in the user's query."}
2025-08-25 11:51:58,621 - evaluation_logger_Cross-115 - INFO - Correct Result: {'score': 0, 'reason': 'All information in the response is incorrect.'}
2025-08-25 11:51:58,621 - evaluation_logger_Cross-115 - INFO - Message: Success.
2025-08-25 11:51:58,621 - evaluation_logger_Cross-115 - INFO - Success turn num = 3
2025-08-25 11:51:58,621 - evaluation_logger_Cross-115 - INFO - ----------------------------------------------------------------------------------------------------
