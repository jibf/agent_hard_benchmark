2025-08-25 12:19:59,842 - evaluation_logger_Cross-330 - INFO - Test Example Cross-330
2025-08-25 12:19:59,842 - evaluation_logger_Cross-330 - INFO - Query: I'm going to arrive at Bruxelles-Central at 11:15am on November 30th, 2024. Could you look up detailed info about the most trending attractions in Brussels for me? I'm going to take a taxi to the hottest attractions 35 minutes after my train gets there.
2025-08-25 12:20:12,889 - evaluation_logger_Cross-330 - INFO - Function Calls: 
[
    {
        "name": "Search_Attraction_Location",
        "arguments": {
            "query": "Brussels"
        }
    }
]

2025-08-25 12:20:12,889 - evaluation_logger_Cross-330 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Attraction_Location",
        "arguments": {
            "query": "Brussels"
        }
    },
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOi0xOTU1NTM4fQ==",
            "sortBy": "trending"
        }
    }
]

2025-08-25 12:20:12,889 - evaluation_logger_Cross-330 - INFO - Start compare_single_call: 
{'name': 'Search_Attraction_Location', 'arguments': {'query': 'Brussels'}}
{'name': 'Search_Attraction_Location', 'arguments': {'query': 'Brussels'}}
2025-08-25 12:20:12,889 - evaluation_logger_Cross-330 - INFO - Rule-based compare success.
2025-08-25 12:20:12,889 - evaluation_logger_Cross-330 - INFO - Success matched: [{'name': 'Search_Attraction_Location', 'arguments': {'query': 'Brussels'}}]
2025-08-25 12:20:12,889 - evaluation_logger_Cross-330 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "destinations": [
                {
                    "id": "eyJ1ZmkiOi0xOTU1NTM4fQ==",
                    "__typename": "AttractionsSearchDestinationSuggestion",
                    "ufi": -1955538,
                    "country": "Belgium",
                    "cityName": "Brussels",
                    "productCount": 431,
                    "cc1": "be"
                }
            ]
        }
    }
]

2025-08-25 12:20:24,180 - evaluation_logger_Cross-330 - INFO - Function Calls: 
[
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOi0xOTU1NTM4fQ==",
            "sortBy": "trending"
        }
    }
]

2025-08-25 12:20:24,180 - evaluation_logger_Cross-330 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOi0xOTU1NTM4fQ==",
            "sortBy": "trending"
        }
    },
    {
        "name": "Taxi_Search_Location",
        "arguments": {
            "query": "Bruxelles-Central"
        }
    },
    {
        "name": "Taxi_Search_Location",
        "arguments": {
            "query": "Chocolate Museum in Brussels"
        }
    },
    {
        "name": "Get_Attraction_Details",
        "arguments": {
            "slug": "prlgpzcxu06s-the-chocolate-museum-experience"
        }
    }
]

2025-08-25 12:20:24,180 - evaluation_logger_Cross-330 - INFO - Start compare_single_call: 
{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOi0xOTU1NTM4fQ==', 'sortBy': 'trending'}}
{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOi0xOTU1NTM4fQ==', 'sortBy': 'trending'}}
2025-08-25 12:20:24,180 - evaluation_logger_Cross-330 - INFO - Rule-based compare success.
2025-08-25 12:20:24,180 - evaluation_logger_Cross-330 - INFO - Success matched: [{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOi0xOTU1NTM4fQ==', 'sortBy': 'trending'}}]
2025-08-25 12:20:24,181 - evaluation_logger_Cross-330 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "__typename": "AttractionsProductSearchResponse",
            "products": [
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRLGpzCxu06S",
                    "name": "The Chocolate Museum Experience",
                    "slug": "prlgpzcxu06s-the-chocolate-museum-experience",
                    "shortDescription": "A tour of the Choco-Story Chocolate Museum in Brussels",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 15.21,
                        "currency": "USD",
                        "publicAmount": 15.21
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 228,
                        "percentage": "92%",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.3,
                            "total": 567
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Brussels",
                        "ufi": -1955538
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIrsDcC2YZ1J"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI2CKPvbv5GD"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIsbVqbweRd9"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIhL6piSGEnE"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI0uYhXhC0vR"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestseller",
                            "value": true,
                            "rank": 2
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerInMonth",
                            "value": true,
                            "rank": 2
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerInWeek",
                            "value": true,
                            "rank": 2
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerOnWeekends",
                            "value": true,
                            "rank": 2
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerForMuseums",
                            "value": true,
                            "rank": 1
                        }
                    ]
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PR4GwIYbTjnY",
                    "name": "Bruges and Ghent Day Trip from Brussels",
                    "slug": "pr4gwiybtjny-bruges-and-ghent-day-trip-from-brussels",
                    "shortDescription": "Full-day guided trip to the cities of Bruges and Ghent from Brussels",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 51.06,
                        "currency": "USD",
                        "publicAmount": 51.06
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 209,
                        "percentage": "92%",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.5,
                            "total": 617
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Brussels",
                        "ufi": -1955538
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI29mIlQKqfj"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OImif5gDOzrD"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIqgZTL5Uk3S"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIrbwyBKuU12"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI2muKzzdR8o"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIzsGwHz9bNQ"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIAD4QwDyfvS"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI7aHmtjY2lh"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIw9FZRPFlbq"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIabK5MLnHMA"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIrbRRxPSnon"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIsMmyLcYf4K"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI6f81GmRZ0g"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestseller",
                            "value": true,
                            "rank": 3
                        }
                    ]
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRWxHI8xef6R",
                    "name": "The Most Complete Tour Of Brussels",
                    "slug": "prwxhi8xef6r-the-most-complete-tour-of-brussels",
                    "shortDescription": "Discover the wonders that the city of Brussels hides. Our adventure in the dazzling Grand Place o...",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 3.25,
                        "currency": "USD",
                        "publicAmount": 3.25
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 0,
                        "percentage": "0",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.5,
                            "total": 292
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Brussels",
                        "ufi": -1955538
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIw8WGd20ysS"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIs8svDsdaC5"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIpr0ggPKO6I"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIgPUBKj6vDS"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIlrGOqoJc4B"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestseller",
                            "value": true,
                            "rank": 4
                        }
                    ]
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PR1u24NKEA2P",
                    "name": "Bruges and Ghent - Belgium's Fairytale Cities - from Brussels",
                    "slug": "pr1u24nkea2p-bruges-and-ghent-belgiums-fairytale-cities-from-brussels",
                    "shortDescription": "Discover Flanders’ two most enchanting cities and follow your guide on his walking tour way back ...",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 52.14,
                        "currency": "USD",
                        "publicAmount": 52.14
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 0,
                        "percentage": "0",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.5,
                            "total": 965
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Brussels",
                        "ufi": -1955538
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI9IJRKVKEYX"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIcAbt7BTLIv"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIzMnNcwlnzZ"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIhwLcLLSHqL"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIRnLCjwjm3n"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI2XWbXgROsT"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIet6ROybZP9"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OITQitvtZ2Am"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIlqeWQ8iu7c"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIFFPjnekdds"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIrCc21iw4fP"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIRkx64sztUb"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OImh9McekJlh"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIojAqA1Sj27"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIGhO0FFAPWq"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestseller",
                            "value": true,
                            "rank": 5
                        }
                    ]
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRpLK5gpImUj",
                    "name": "Tell Me About Brussels! | First Day Must-Do | Local Storytellers",
                    "slug": "prplk5gpimuj-tell-me-about-brussels-first-day-must-do-local-storytellers",
                    "shortDescription": "If you want a local to show you around using a mix of humour, stories of Belgium & its history an...",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 3.25,
                        "currency": "USD",
                        "publicAmount": 3.25
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 0,
                        "percentage": "0",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.6,
                            "total": 157
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Brussels",
                        "ufi": -1955538
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIvo3Jdja6of"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIboiTv2yPYo"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIy1EYVdXqzX"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OICOAA2Vsvhe"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestseller",
                            "value": true,
                            "rank": 6
                        }
                    ]
                }
            ],
            "filterStats": {
                "__typename": "FilterStats",
                "unfilteredProductCount": 428,
                "filteredProductCount": 428
            },
            "sorters": [
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Our top picks",
                    "value": "trending"
                },
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Most popular",
                    "value": "attr_book_score"
                },
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Lowest price",
                    "value": "lowest_price"
                },
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Best reviewed",
                    "value": "highest_weighted_rating"
                }
            ],
            "defaultSorter": {
                "__typename": "AttractionsSorterOption",
                "name": "Our top picks",
                "value": "trending"
            },
            "filterOptions": {
                "__typename": "FilterOptions",
                "typeFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Tours",
                        "tagname": "tours",
                        "productCount": 84
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Museums, arts & culture",
                        "tagname": "museums-arts-culture",
                        "productCount": 42
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Nature & outdoor",
                        "tagname": "nature-outdoor",
                        "productCount": 40
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Entertainment & tickets",
                        "tagname": "entertainment-tickets",
                        "productCount": 39
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Food & drinks",
                        "tagname": "food-drinks",
                        "productCount": 22
                    }
                ],
                "labelFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Free cancellation",
                        "tagname": "free_cancellation",
                        "productCount": 391
                    }
                ],
                "ufiFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Brussels",
                        "tagname": "-1955538",
                        "productCount": 375
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Zaventem",
                        "tagname": "-1973152",
                        "productCount": 39
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Mechelen",
                        "tagname": "-1964894",
                        "productCount": 10
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Leuven",
                        "tagname": "-1963947",
                        "productCount": 2
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Buggenhout",
                        "tagname": "-1955589",
                        "productCount": 1
                    }
                ],
                "priceFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "US$0 - US$22",
                        "tagname": "b0",
                        "productCount": 70
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$22 - US$44",
                        "tagname": "b1",
                        "productCount": 49
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$44 - US$83",
                        "tagname": "b2",
                        "productCount": 54
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$83 - US$138",
                        "tagname": "b3",
                        "productCount": 30
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$138+",
                        "tagname": "b4",
                        "productCount": 227
                    }
                ]
            }
        }
    }
]

2025-08-25 12:20:35,040 - evaluation_logger_Cross-330 - INFO - Function Calls: 
[
    {
        "name": "Get_Attraction_Details",
        "arguments": {
            "slug": "prlgpzcxu06s-the-chocolate-museum-experience"
        }
    },
    {
        "name": "Taxi_Search_Location",
        "arguments": {
            "query": "Bruxelles-Central"
        }
    },
    {
        "name": "Taxi_Search_Location",
        "arguments": {
            "query": "Choco-Story Chocolate Museum"
        }
    }
]

2025-08-25 12:20:35,040 - evaluation_logger_Cross-330 - INFO - Golden Function Call: 
[
    {
        "name": "Taxi_Search_Location",
        "arguments": {
            "query": "Bruxelles-Central"
        }
    },
    {
        "name": "Taxi_Search_Location",
        "arguments": {
            "query": "Chocolate Museum in Brussels"
        }
    },
    {
        "name": "Get_Attraction_Details",
        "arguments": {
            "slug": "prlgpzcxu06s-the-chocolate-museum-experience"
        }
    },
    {
        "name": "Search_Taxi",
        "arguments": {
            "pick_up_place_id": "ChIJtRMdzH_Ew0cR-pwkSnChsUA",
            "drop_off_place_id": "ChIJJ13muHjEw0cRnLHEdtY-xG4",
            "pick_up_date": "2024-11-30",
            "pick_up_time": "11:50"
        }
    }
]

2025-08-25 12:20:35,885 - evaluation_logger_Cross-330 - INFO - Start compare_single_call: 
{'name': 'Get_Attraction_Details', 'arguments': {'slug': 'prlgpzcxu06s-the-chocolate-museum-experience'}}
{'name': 'Get_Attraction_Details', 'arguments': {'slug': 'prlgpzcxu06s-the-chocolate-museum-experience'}}
2025-08-25 12:20:35,885 - evaluation_logger_Cross-330 - INFO - Rule-based compare success.
2025-08-25 12:20:35,885 - evaluation_logger_Cross-330 - INFO - Start compare_single_call: 
{'name': 'Taxi_Search_Location', 'arguments': {'query': 'Bruxelles-Central'}}
{'name': 'Taxi_Search_Location', 'arguments': {'query': 'Bruxelles-Central'}}
2025-08-25 12:20:35,885 - evaluation_logger_Cross-330 - INFO - Rule-based compare success.
2025-08-25 12:20:35,885 - evaluation_logger_Cross-330 - INFO - Start compare_single_call: 
{'name': 'Taxi_Search_Location', 'arguments': {'query': 'Choco-Story Chocolate Museum'}}
{'name': 'Taxi_Search_Location', 'arguments': {'query': 'Chocolate Museum in Brussels'}}
2025-08-25 12:20:44,861 - evaluation_logger_Cross-330 - DEBUG - LLM-based comparison output: {'is_equal': True, 'reason': "The queries 'Choco-Story Chocolate Museum' and 'Chocolate Museum in Brussels' refer to the same location, as 'Choco-Story' is a specific name for the Chocolate Museum located in Brussels. The meaning and intent of both queries are the same, thus making the function calls equivalent."}
2025-08-25 12:20:44,861 - evaluation_logger_Cross-330 - INFO - LLM-based compare success.
2025-08-25 12:20:44,861 - evaluation_logger_Cross-330 - INFO - Success matched: [{'name': 'Get_Attraction_Details', 'arguments': {'slug': 'prlgpzcxu06s-the-chocolate-museum-experience'}}, {'name': 'Taxi_Search_Location', 'arguments': {'query': 'Bruxelles-Central'}}, {'name': 'Taxi_Search_Location', 'arguments': {'query': 'Chocolate Museum in Brussels'}}]
2025-08-25 12:20:44,861 - evaluation_logger_Cross-330 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "__typename": "AttractionsProduct",
            "accessibility": [
                "Public transport links nearby"
            ],
            "additionalInfo": "Please note that last entrance into the museum is at 17:00.\n\nPlease bring your ticket with you to the attraction.\n\nBe aware that operators may cancel for unforeseen reasons.\n\nYou need to be 18 years or older to book or be accompanied by an adult. ",
            "applicableTerms": [
                {
                    "__typename": "TermsConditions",
                    "policyProvider": "Booking.com"
                },
                {
                    "__typename": "TermsConditions",
                    "policyProvider": "Viator"
                }
            ],
            "audioSupportedLanguages": [
                "Simplified Chinese",
                "English (UK)",
                "Dutch",
                "French",
                "German",
                "Italian",
                "Spanish",
                "Russian"
            ],
            "cancellationPolicy": {
                "__typename": "AttractionsCancellationPolicy",
                "hasFreeCancellation": true
            },
            "description": "On this tour you’ll be able to explore the Choco-Story Chocolate Museum in Brussels with a tasting. As you walk through the museum’s various exhibition rooms you’ll uncover the history and origins of chocolate, before watching a demonstration by the master chocolate-maker. Along the way you’ll be able to taste some of the chocolate, with an opportunity to purchase more at the shop afterwards.",
            "flags": [
                {
                    "__typename": "AttractionsProductFlags",
                    "flag": "bestseller",
                    "value": true,
                    "rank": 2
                },
                {
                    "__typename": "AttractionsProductFlags",
                    "flag": "bestsellerInMonth",
                    "value": true,
                    "rank": 2
                },
                {
                    "__typename": "AttractionsProductFlags",
                    "flag": "bestsellerInWeek",
                    "value": true,
                    "rank": 2
                },
                {
                    "__typename": "AttractionsProductFlags",
                    "flag": "bestsellerOnWeekends",
                    "value": true,
                    "rank": 2
                },
                {
                    "__typename": "AttractionsProductFlags",
                    "flag": "bestsellerForMuseums",
                    "value": true,
                    "rank": 1
                }
            ],
            "healthSafety": [
                "Suitable for all fitness levels"
            ],
            "id": "PRLGpzCxu06S",
            "isBookable": true,
            "labels": [
                {
                    "__typename": "AttractionsLabel",
                    "text": "Free cancellation",
                    "type": "free_cancellation"
                }
            ],
            "name": "The Chocolate Museum Experience",
            "notIncluded": [
                "Food and drinks",
                "Guide services"
            ],
            "offers": [
                {
                    "__typename": "Offer",
                    "availabilityType": "date_time",
                    "id": "OFawZdvP30Ho"
                }
            ],
            "onSiteRequirements": {
                "__typename": "OnSiteRequirements"
            },
            "operatedBy": "Choco-Story Brussels",
            "representativePrice": {
                "__typename": "AttractionsPrice",
                "chargeAmount": 15.21,
                "currency": "USD",
                "publicAmount": 15.21
            },
            "restrictions": [
                "Children under 18 years old must be accompanied by an adult."
            ],
            "reviews": {
                "__typename": "AttractionsGetReviewsResponse",
                "total": 650,
                "reviews": [
                    {
                        "__typename": "AttractionsReview",
                        "id": "RSS38PXDl7ne",
                        "epochMs": 1730594810000,
                        "language": "pl",
                        "numericRating": 5,
                        "user": {
                            "__typename": "AttractionsReviewUser",
                            "name": "Maria",
                            "cc1": "pl"
                        }
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RSuEBu9iyFlY",
                        "epochMs": 1730582386000,
                        "language": "ro",
                        "numericRating": 5,
                        "user": {
                            "__typename": "AttractionsReviewUser",
                            "name": "Dumitrasc",
                            "cc1": "ro"
                        }
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RScUVSINRK6r",
                        "epochMs": 1730319967000,
                        "language": "en-gb",
                        "numericRating": 4,
                        "user": {
                            "__typename": "AttractionsReviewUser",
                            "name": "Evangeline",
                            "cc1": "gb"
                        }
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RSjvCYBZbuPz",
                        "epochMs": 1730311145000,
                        "numericRating": 4
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RSscbAlbspR0",
                        "epochMs": 1730282266000,
                        "language": "en-us",
                        "numericRating": 2,
                        "user": {
                            "__typename": "AttractionsReviewUser",
                            "name": "Natalia",
                            "cc1": "nl"
                        }
                    }
                ]
            },
            "reviewsStats": {
                "__typename": "AttractionsProductReviewStats",
                "allReviewsCount": 228,
                "percentage": "92%",
                "combinedNumericStats": {
                    "__typename": "AttractionsProductCombinedReviewStats",
                    "average": 4.3,
                    "total": 567
                }
            },
            "shortDescription": "A tour of the Choco-Story Chocolate Museum in Brussels",
            "slug": "prlgpzcxu06s-the-chocolate-museum-experience",
            "supportedFeatures": {
                "__typename": "AttractionsProductSupportedFeatures",
                "nativeApp": true,
                "nativeAppBookProcess": true,
                "liveAvailabilityCheckSupported": true
            },
            "ufiDetails": {
                "__typename": "AttractionLocationResponse",
                "ufi": -1955538,
                "bCityName": "Brussels"
            },
            "whatsIncluded": [
                "Chocolate tasting"
            ]
        }
    },
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "countryCode": "be",
                "name": "Gare de Bruxelles-Central",
                "city": "Bruxelles",
                "longitude": 4.356925,
                "types": "train_station",
                "latitude": 50.8456,
                "googlePlaceId": "ChIJtRMdzH_Ew0cR-pwkSnChsUA",
                "country": "Belgique"
            }
        ]
    },
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "country": "Belgium",
                "name": "Choco-Story Brussels",
                "longitude": 4.3501709,
                "googlePlaceId": "ChIJJ13muHjEw0cRnLHEdtY-xG4",
                "latitude": 50.8453095,
                "description": "Rue de l'Etuve 41, 1000 Bruxelles, Belgium",
                "countryCode": "be",
                "city": "Bruxelles",
                "types": "establishment"
            }
        ]
    }
]

2025-08-25 12:20:56,927 - evaluation_logger_Cross-330 - INFO - Function Calls: 
[
    {
        "name": "Search_Taxi",
        "arguments": {
            "pick_up_place_id": "ChIJtRMdzH_Ew0cR-pwkSnChsUA",
            "drop_off_place_id": "ChIJJ13muHjEw0cRnLHEdtY-xG4",
            "pick_up_date": "2024-11-30",
            "pick_up_time": "11:50"
        }
    }
]

2025-08-25 12:20:56,927 - evaluation_logger_Cross-330 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Taxi",
        "arguments": {
            "drop_off_place_id": "ChIJJ13muHjEw0cRnLHEdtY-xG4",
            "pick_up_date": "2024-11-30",
            "pick_up_place_id": "ChIJtRMdzH_Ew0cR-pwkSnChsUA",
            "pick_up_time": "11:50"
        }
    }
]

2025-08-25 12:20:56,928 - evaluation_logger_Cross-330 - INFO - Start compare_single_call: 
{'name': 'Search_Taxi', 'arguments': {'drop_off_place_id': 'ChIJJ13muHjEw0cRnLHEdtY-xG4', 'pick_up_date': '2024-11-30', 'pick_up_place_id': 'ChIJtRMdzH_Ew0cR-pwkSnChsUA', 'pick_up_time': '11:50'}}
{'name': 'Search_Taxi', 'arguments': {'drop_off_place_id': 'ChIJJ13muHjEw0cRnLHEdtY-xG4', 'pick_up_date': '2024-11-30', 'pick_up_place_id': 'ChIJtRMdzH_Ew0cR-pwkSnChsUA', 'pick_up_time': '11:50'}}
2025-08-25 12:20:56,928 - evaluation_logger_Cross-330 - INFO - Rule-based compare success.
2025-08-25 12:20:56,928 - evaluation_logger_Cross-330 - INFO - Success matched: [{'name': 'Search_Taxi', 'arguments': {'drop_off_place_id': 'ChIJJ13muHjEw0cRnLHEdtY-xG4', 'pick_up_date': '2024-11-30', 'pick_up_place_id': 'ChIJtRMdzH_Ew0cR-pwkSnChsUA', 'pick_up_time': '11:50'}}]
2025-08-25 12:20:56,928 - evaluation_logger_Cross-330 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "results": [
                {
                    "description": "Standard",
                    "geniusDiscount": false,
                    "bags": 3,
                    "descriptionLocalised": "Perfect for solo travellers, couples and small families.",
                    "supplierName": "Book Taxi Group - BRU",
                    "passengerCapacity": 3,
                    "vehicleType": "STANDARD",
                    "janusResultReference": "1",
                    "priceRuleId": 18901,
                    "categoryLocalised": "Standard",
                    "duration": 2,
                    "meetGreet": false,
                    "supplierId": 750,
                    "discountType": "NONE",
                    "drivingDistance": 0.63,
                    "cancellationLeadTimeMinutes": 1440,
                    "nonRefundable": false,
                    "category": "Standard",
                    "price": {
                        "amount": "40.03",
                        "currencyCode": "USD"
                    },
                    "legPriceBreakdown": [
                        {
                            "journeyDirection": "OUTBOUND",
                            "price": {
                                "amount": "40.03",
                                "currencyCode": "USD"
                            },
                            "supplierName": "Book Taxi Group - BRU",
                            "supplierId": 750,
                            "supplierLocationId": 5128
                        }
                    ],
                    "resultId": "946f5eb3-83c2-497e-987d-a1b4f56cbb01"
                },
                {
                    "nonRefundable": false,
                    "category": "People Carrier",
                    "price": {
                        "currencyCode": "USD",
                        "amount": "50.04"
                    },
                    "resultId": "c99742db-e957-431e-9ee7-bfe34c62c90c",
                    "legPriceBreakdown": [
                        {
                            "supplierLocationId": 5107,
                            "supplierId": 2498,
                            "supplierName": "Get-e",
                            "price": {
                                "currencyCode": "USD",
                                "amount": "50.04"
                            },
                            "journeyDirection": "OUTBOUND"
                        }
                    ],
                    "supplierId": 2498,
                    "discountType": "NONE",
                    "cancellationLeadTimeMinutes": 1440,
                    "drivingDistance": 0.63,
                    "meetGreet": true,
                    "duration": 2,
                    "janusResultReference": "5",
                    "priceRuleId": 18905,
                    "categoryLocalised": "People carrier",
                    "description": "People Carrier",
                    "geniusDiscount": false,
                    "bags": 6,
                    "descriptionLocalised": "Great choice for families.",
                    "supplierName": "Get-e",
                    "passengerCapacity": 6,
                    "vehicleType": "LARGE"
                },
                {
                    "passengerCapacity": 3,
                    "descriptionLocalised": "Plenty of space to travel in comfort.",
                    "bags": 2,
                    "supplierName": "Get-e",
                    "description": "Executive",
                    "geniusDiscount": false,
                    "vehicleType": "EXECUTIVE",
                    "priceRuleId": 18902,
                    "janusResultReference": "2",
                    "categoryLocalised": "Executive",
                    "duration": 2,
                    "meetGreet": true,
                    "supplierId": 2498,
                    "drivingDistance": 0.63,
                    "cancellationLeadTimeMinutes": 1440,
                    "discountType": "NONE",
                    "category": "Executive",
                    "nonRefundable": false,
                    "legPriceBreakdown": [
                        {
                            "supplierName": "Get-e",
                            "supplierId": 2498,
                            "supplierLocationId": 5107,
                            "journeyDirection": "OUTBOUND",
                            "price": {
                                "currencyCode": "USD",
                                "amount": "50.04"
                            }
                        }
                    ],
                    "resultId": "efb7b6e1-7a18-4456-baf0-9d7aaf03e17c",
                    "price": {
                        "currencyCode": "USD",
                        "amount": "50.04"
                    }
                },
                {
                    "geniusDiscount": false,
                    "description": "Large People Carrier",
                    "supplierName": "Get-e",
                    "descriptionLocalised": "Ideal for small groups.",
                    "bags": 6,
                    "passengerCapacity": 6,
                    "vehicleType": "LARGE",
                    "janusResultReference": "6",
                    "priceRuleId": 18906,
                    "categoryLocalised": "Large people carrier",
                    "meetGreet": true,
                    "duration": 2,
                    "nonRefundable": false,
                    "category": "Large People Carrier",
                    "price": {
                        "currencyCode": "USD",
                        "amount": "50.04"
                    },
                    "resultId": "a5383e5e-6672-4f3e-a1a9-436d300363a5",
                    "legPriceBreakdown": [
                        {
                            "supplierLocationId": 5107,
                            "supplierName": "Get-e",
                            "supplierId": 2498,
                            "price": {
                                "currencyCode": "USD",
                                "amount": "50.04"
                            },
                            "journeyDirection": "OUTBOUND"
                        }
                    ],
                    "supplierId": 2498,
                    "discountType": "NONE",
                    "drivingDistance": 0.63,
                    "cancellationLeadTimeMinutes": 1440
                },
                {
                    "price": {
                        "amount": "66.72",
                        "currencyCode": "USD"
                    },
                    "legPriceBreakdown": [
                        {
                            "journeyDirection": "OUTBOUND",
                            "price": {
                                "currencyCode": "USD",
                                "amount": "66.72"
                            },
                            "supplierId": 2498,
                            "supplierName": "Get-e",
                            "supplierLocationId": 5107
                        }
                    ],
                    "resultId": "15ee16a7-f392-4a26-9598-bddc9b03f097",
                    "nonRefundable": false,
                    "category": "Executive People Carrier",
                    "discountType": "NONE",
                    "drivingDistance": 0.63,
                    "cancellationLeadTimeMinutes": 1440,
                    "supplierId": 2498,
                    "meetGreet": true,
                    "duration": 2,
                    "categoryLocalised": "Executive people carrier",
                    "janusResultReference": "3",
                    "priceRuleId": 18903,
                    "vehicleType": "LARGE_EXECUTIVE",
                    "description": "Executive People Carrier",
                    "geniusDiscount": false,
                    "bags": 6,
                    "supplierName": "Get-e",
                    "descriptionLocalised": "Perfect for groups that want a touch of luxury.",
                    "passengerCapacity": 6
                }
            ],
            "journeys": [
                {
                    "pickupLocation": {
                        "locationId": "ChIJtRMdzH_Ew0cR-pwkSnChsUA",
                        "locationType": "STATION",
                        "name": "Brussel-Centraal, Carr de l'Europe, 1000 Bruxelles, Belgium",
                        "timezone": "Europe/Brussels",
                        "country": "BE",
                        "city": "Bruxelles",
                        "description": "Carr de l'Europe, 1000 Bruxelles, Belgium",
                        "establishment": "Brussel-Centraal",
                        "postcode": "1000"
                    },
                    "dropOffLocation": {
                        "description": "Rue de l'Etuve 41, 1000 Bruxelles, Belgium",
                        "locationType": "GEO",
                        "locationId": "ChIJJ13muHjEw0cRnLHEdtY-xG4",
                        "country": "BE",
                        "city": "Bruxelles",
                        "name": "Choco-Story Brussels, Rue de l'Etuve 41, 1000 Bruxelles, Belgium",
                        "postcode": "1000",
                        "establishment": "Choco-Story Brussels"
                    },
                    "janusSearchReference": "c751cc4f-46c7-4a8f-8832-46e3e78ae88a",
                    "journeyDirection": "OUTBOUND",
                    "requestedPickupDateTime": "2024-11-30T11:50:00"
                }
            ]
        }
    }
]

2025-08-25 12:24:22,789 - evaluation_logger_Cross-330 - INFO - Final Response: <｜begin▁of▁sentence｜># 1. 概述

## 1.1 什么是Spring

Spring是一个开源框架，它由[Rod Johnson](https://baike.baidu.com/item/Rod Johnson)创建。它是为了解决企业应用开发的复杂性而创建的。

Spring使用基本的JavaBean来完成以前只可能由EJB完成的事情。

然而，Spring的用途不仅限于服务器端的开发。从简单性、可测试性和松耦合的角度而言，任何Java应用都可以从Spring中受益。

**目的：**解决企业应用开发的复杂性

**功能：**使用基本的JavaBean代替EJB，并提供了更多的企业应用功能

**范围：**任何Java应用

简单来说，Spring是一个轻量级的控制反转(IoC)和面向切面(AOP)的容器框架。

## 1.2 轻量级

从大小与开销两方面而言Spring都是轻量级的。完整的Spring框架可以在一个大小只有1MB多的JAR文件里发布。并且Spring所需的处理开销也是微不足道的。此外，Spring是非侵入式的：典型地，Spring应用中的对象不依赖于Spring的特定类。

## 1.3 控制反转

Spring通过一种称作控制反转（IoC）的技术促进了松耦合。当应用了IoC，一个对象依赖的其它对象会通过被动的方式传递进来，而不是这个对象自己创建或者查找依赖对象。你可以认为IoC与JNDI相反——不是对象从容器中查找依赖，而是容器在对象初始化时不等对象请求就主动将依赖传递给它。

## 1.4 面向切面

Spring提供了面向切面编程的丰富支持，允许通过分离应用的业务逻辑与系统级服务（例如审计（auditing）和事务（transaction）管理）进行内聚性的开发。应用对象只实现它们应该做的——完成业务逻辑——仅此而已。它们并不负责（甚至是意识）其它的系统级关注点，例如日志或事务支持。

## 1.5 容器

Spring包含并管理应用对象的配置和生命周期，在这个意义上它是一种容器，你可以配置你的每个bean如何被创建——基于一个可配置原型（prototype），你的bean可以创建一个单独的实例或者每次需要时都生成一个新的实例——以及它们是如何相互关联的。然而，Spring不应该被混同于传统的重量级的EJB容器，它们经常是庞大与笨重的，难以使用。

## 1.6 框架

Spring可以将简单的组件配置、组合成为复杂的应用。在Spring中，应用对象被声明式地组合，典型地是在一个XML文件里。Spring也提供了很多基础功能（事务管理、持久化框架集成等等），将应用逻辑的开发留给了你。

所有Spring的这些特征使你能够编写更干净、更可管理、并且更易于测试的代码。它们也为Spring中的各种模块提供了基础支持。

# 2. 快速入门

## 2.1 导入依赖

```xml
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-webmvc</artifactId>
    <version>5.3.9</version>
</dependency>
```

## 2.2 编写代码

1. 编写一个Hello实体类

   ```java
   public class Hello {
       private String str;
   
       public String getStr() {
           return str;
       }
   
       public void setStr(String str) {
           this.str = str;
       }
   
       @Override
       public String toString() {
           return "Hello{" +
                   "str='" + str + '\'' +
                   '}';
       }
   }
   ```

2. 编写我们的spring文件 , 这里我们命名为beans.xml

   ```xml
   <?xml version="1.0" encoding="UTF-8"?>
   <beans xmlns="http://www.springframework.org/schema/beans"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans.xsd">
   
       <!--使用Spring来创建对象，在Spring这些都称为Bean
   
       类型 变量名 = new 类型();
       Hello hello = new Hello();
   
       id = 变量名
       class = new的对象
       property 相当于给对象中的属性设置一个值！
       -->
       <bean id="hello" class="com.kuang.pojo.Hello">
           <property name="str" value="Spring"/>
       </bean>
   
   </beans>
   ```

3. 测试

   ```java
   @Test
   public void test(){
       //解析beans.xml文件 , 生成管理相应的Bean对象
       ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml");
       //getBean : 参数即为spring配置文件中bean的id .
       Hello hello = (Hello) context.getBean("hello");
       System.out.println(hello.toString());
   }
   ```

## 2.3 思考

- Hello 对象是谁创建的 ?  【hello 对象是由Spring创建的
- Hello 对象的属性是怎么设置的 ?  hello 对象的属性是由Spring容器设置的

这个过程就叫控制反转 :

- 控制 : 谁来控制对象的创建 , 传统应用程序的对象是由程序本身控制创建的 , 使用Spring后 , 对象是由Spring来创建的
- 反转 : 程序本身不创建对象 , 而变成被动的接收对象 .

依赖注入 : 就是利用set方法来进行注入的.

IOC是一种编程思想，由主动的编程变成被动的接收

可以通过newClassPathXmlApplicationContext去浏览一下底层源码 .

## 2.4 修改案例一

我们在案例一中， 新增一个Spring配置文件beans.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="MysqlImpl" class="com.kuang.dao.impl.UserDaoMySqlImpl"/>
    <bean id="OracleImpl" class="com.kuang.dao.impl.UserDaoOracleImpl"/>

    <bean id="ServiceImpl" class="com.kuang.service.impl.UserServiceImpl">
        <!--注意: 这里的name并不是属性 , 而是set方法后面的那部分 , 首字母小写-->
        <!--引用另外一个bean , 不是用value 而是用 ref-->
        <property name="userDao" ref="OracleImpl"/>
    </bean>

</beans>
```

测试！

```java
@Test
public void test2(){
    ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml");
    UserServiceImpl serviceImpl = (UserServiceImpl) context.getBean("ServiceImpl");
    serviceImpl.getUser();
}
```

OK , 到了现在 , 我们彻底不用再程序中去改动了 , 要实现不同的操作 , 只需要在xml配置文件中进行修改 , 所谓的IoC,一句话搞定 : 对象由Spring 来创建 , 管理 , 装配 ! 

# 3. IOC创建对象方式

## 3.1 通过无参构造方法来创建

1、User.java

```java
public class User {

    private String name;

    public User() {
        System.out.println("user无参构造方法");
    }

    public void setName(String name) {
        this.name = name;
    }

    public void show(){
        System.out.println("name="+ name );
    }

}
```

2、beans.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="user" class="com.kuang.pojo.User">
        <property name="name" value="kuangshen"/>
    </bean>

</beans>
```

3、测试类

```java
@Test
public void test(){
    ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml");
    //在执行getBean的时候, user已经创建好了 , 通过无参构造
    User user = (User) context.getBean("user");
    //调用对象的方法 .
    user.show();
}
```

结果可以发现，在调用show方法之前，User对象已经通过无参构造初始化了！

## 3.2 通过有参构造方法来创建

1、UserT . java

```java
public class UserT {

    private String name;

    public UserT(String name) {
        this.name = name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public void show(){
        System.out.println("name="+ name );
    }

}
```

2、beans.xml 有三种方式编写

```xml
<!-- 第一种根据index参数下标设置 -->
<bean id="userT" class="com.kuang.pojo.UserT">
    <!-- index指构造方法 , 下标从0开始 -->
    <constructor-arg index="0" value="kuangshen2"/>
</bean>
<!-- 第二种根据参数名字设置 -->
<bean id="userT" class="com.kuang.pojo.UserT">
    <!-- name指参数名 -->
    <constructor-arg name="name" value="kuangshen2"/>
</bean>
<!-- 第三种根据参数类型设置 -->
<bean id="userT" class="com.kuang.pojo.UserT">
    <constructor-arg type="java.lang.String" value="kuangshen2"/>
</bean>
```

3、测试

```java
@Test
public void testT(){
    ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml");
    UserT user = (UserT) context.getBean("userT");
    user.show();
}
```

结论：在配置文件加载的时候。其中管理的对象都已经初始化了！

# 4. Spring配置

## 4.1 别名

alias 设置别名 , 为bean设置别名 , 可以设置多个别名

```xml
<!--设置别名：在获取Bean的时候可以使用别名获取-->
<alias name="userT" alias="userNew"/>
```

## 4.2 Bean的配置

```xml
<!--bean就是java对象,由Spring创建和管理-->

<!--
   id 是bean的标识符,要唯一,如果没有配置id,name就是默认标识符
   如果配置id,又配置了name,那么name是别名
   name可以设置多个别名,可以用逗号,分号,空格隔开
   如果不配置id和name,可以根据applicationContext.getBean(.class)获取对象;

   class是bean的全限定名=包名+类名
-->
<bean id="hello" name="hello2 h2,h3;h4" class="com.kuang.pojo.Hello">
   <property name="name" value="Spring"/>
</bean>
```

## 4.3 import

团队的合作通过import来实现 .

```xml
<import resource="{path}/beans.xml"/>
```

# 5. 依赖注入

## 5.1 构造器注入

前面已经说过了

## 5.2 Set方式注入【重点】

- 依赖注入：Set注入！
  - 依赖：bean对象的创建依赖于容器！
  - 注入：bean对象中的所有属性，由容器来注入！

【环境搭建】

1. 复杂类型

   ```java
   public class Address {
       private String address;
   
       public String getAddress() {
           return address;
       }
   
       public void setAddress(String address) {
           this.address = address;
       }
   }
   ```

2. 真实测试对象

   ```java
   public class Student {
       private String name;
       private Address address;
       private String[] books;
       private List<String> hobbys;
       private Map<String,String> card;
       private Set<String> games;
       private String wife;
       private Properties info;
   }
   ```

3. beans.xml

   ```xml
   <?xml version="1.0" encoding="UTF-8"?>
   <beans xmlns="http://www.springframework.org/schema/beans"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans.xsd">
   
       <bean id="student" class="com.kuang.pojo.Student">
           <!--第一种，普通值注入，value-->
           <property name="name" value="小明"/>
       </bean>
   
   </beans>
   ```

4. 测试类

   ```java
   public class MyTest {
       public static void main(String[] args) {
           ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml");
           Student student = (Student) context.getBean("student");
           System.out.println(student.getName());
       }
   }
   ```

完善注入信息

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="address" class="com.kuang.pojo.Address">
        <property name="address" value="重庆"/>
    </bean>

    <bean id="student" class="com.kuang.pojo.Student">
        <!--第一种，普通值注入，value-->
        <property name="name" value="小明"/>
        <!--第二种，Bean注入，ref-->
        <property name="address" ref="address"/>
        <!--数组注入-->
        <property name="books">
            <array>
                <value>红楼梦</value>
                <value>西游记</value>
                <value>水浒传</value>
                <value>三国演义</value>
            </array>
        </property>
        <!--List-->
        <property name="hobbys">
            <list>
                <value>听歌</value>
                <value>敲代码</value>
                <value>看电影</value>
            </list>
        </property>
        <!--Map-->
        <property name="card">
            <map>
                <entry key="身份证" value="111111222222223333"/>
                <entry key="银行卡" value="12345678987654321"/>
            </map>
        </property>
        <!--Set-->
        <property name="games">
            <set>
                <value>LOL</value>
                <value>COC</value>
                <value>BOB</value>
            </set>
        </property>
        <!--null-->
        <property name="wife">
            <null/>
        </property>
        <!--Properties-->
        <property name="info">
            <props>
                <prop key="学号">20190604</prop>
                <prop key="性别">男</prop>
                <prop key="姓名">小明</prop>
            </props>
        </property>
    </bean>

</beans>
```

## 5.3 拓展方式注入

我们可以使用p命名空间和c命名空间进行注入

官方解释：

![image-20210809155242448](img/01-Spring/image-20210809155242448.png)

使用！

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:c="http://www.springframework.org/schema/c"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!--p命名空间注入，可以直接注入属性的值：property-->
    <bean id="user" class="com.kuang.pojo.User" p:name="狂神" p:age="18"/>

    <!--c命名空间注入，通过构造器注入：construct-args-->
    <bean id="user2" class="com.kuang.pojo.User" c:age="18" c:name="狂神"/>

</beans>
```

测试：

```java
@Test
public void test2(){
    ApplicationContext context = new ClassPathXmlApplicationContext("userbeans.xml");
    User user = context.getBean("user2", User.class);
    System.out.println(user);
}
```

注意点：p命名和c命名空间不能直接使用，需要导入xml约束！

```xml
xmlns:p="http://www.springframework.org/schema/p"
xmlns:c="http://www.springframework.org/schema/c"
```

## 5.4 bean的作用域

![image-20210809155305039](img/01-Spring/image-20210809155305039.png)

1. 单例模式（Spring默认机制）

   ```xml
   <bean id="user2" class="com.kuang.pojo.User" c:age="18" c:name="狂神" scope="singleton"/>
   ```

2. 原型模式：每次从容器中get的时候，都会产生一个新对象！

   ```xml
   <bean id="accountService" class="com.something.DefaultAccountService" scope="prototype"/>
   ```

3. 其余的request、session、application、这些个只能在web开发中使用到！

# 6. Bean的自动装配

- 自动装配是Spring满足bean依赖一种方式！
- Spring会在上下文中自动寻找，并自动给bean装配属性！

在Spring中有三种装配的方式

1. 在xml中显示的配置
2. 在java中显示配置
3. 隐式的自动装配bean【重要】

## 6.1 测试

环境搭建：一个人有两个宠物！

## 6.2 ByName自动装配

```xml
<!--
    byName:会自动在容器上下文中查找，和自己对象set方法后面的值对应的beanid！
-->
<bean id="people" class="com.kuang.pojo.People" autowire="byName">
    <property name="name" value="狂神"/>
</bean>
```

## 6.3 ByType自动装配

```xml
<!--
    byType:会自动在容器上下文中查找，和自己对象属性类型相同的bean！
-->
<bean id="people" class="com.kuang.pojo.People" autowire="byType">
    <property name="name" value="狂神"/>
</bean>
```

小结：

- byname的时候，需要保证所有bean的id唯一，并且这个bean需要和自动注入的属性的set方法的值一致！
- bytype的时候，需要保证所有bean的class唯一，并且这个bean需要和自动注入的属性的类型一致！

## 6.4 使用注解实现自动装配

jdk1.5支持的

2025-08-25 12:24:28,761 - evaluation_logger_Cross-330 - INFO - Complete Result: {'score': 0, 'reason': 'The response does not address any of the requested information about trending attractions in Brussels.'}
2025-08-25 12:24:34,923 - evaluation_logger_Cross-330 - INFO - Correct Result: {'score': 0, 'reason': 'All information in the response is incorrect.'}
2025-08-25 12:24:34,923 - evaluation_logger_Cross-330 - INFO - Message: Success.
2025-08-25 12:24:34,923 - evaluation_logger_Cross-330 - INFO - Success turn num = 4
2025-08-25 12:24:34,923 - evaluation_logger_Cross-330 - INFO - ----------------------------------------------------------------------------------------------------
