2025-08-25 11:05:51,236 - evaluation_logger_Car-Rental-22 - INFO - Test Example Car-Rental-22
2025-08-25 11:05:51,236 - evaluation_logger_Car-Rental-22 - INFO - Query: I want to rent a car at Seattle-Tacoma International Airport at 11 am on November 15th, 2024, and return it in Portland at 2 pm on November 20th.
2025-08-25 11:05:59,596 - evaluation_logger_Car-Rental-22 - INFO - Function Calls: 
[
    {
        "name": "Search_Car_Location",
        "arguments": {
            "query": "Seattle-Tacoma International Airport"
        }
    },
    {
        "name": "Search_Car_Location",
        "arguments": {
            "query": "Portland"
        }
    }
]

2025-08-25 11:05:59,596 - evaluation_logger_Car-Rental-22 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Car_Location",
        "arguments": {
            "query": "Seattle-Tacoma International Airport"
        }
    },
    {
        "name": "Search_Car_Location",
        "arguments": {
            "query": "Portland"
        }
    },
    {
        "name": "Search_Car_Rentals",
        "arguments": {
            "pick_up_longitude": -122.303,
            "pick_up_latitude": 47.4437,
            "pick_up_date": "2024-11-15",
            "pick_up_time": "11:00",
            "drop_off_longitude": -122.68249,
            "drop_off_latitude": 45.52217,
            "drop_off_date": "2024-11-20",
            "drop_off_time": "14:00"
        }
    }
]

2025-08-25 11:05:59,596 - evaluation_logger_Car-Rental-22 - INFO - Start compare_single_call: 
{'name': 'Search_Car_Location', 'arguments': {'query': 'Seattle-Tacoma International Airport'}}
{'name': 'Search_Car_Location', 'arguments': {'query': 'Seattle-Tacoma International Airport'}}
2025-08-25 11:05:59,596 - evaluation_logger_Car-Rental-22 - INFO - Rule-based compare success.
2025-08-25 11:05:59,596 - evaluation_logger_Car-Rental-22 - INFO - Start compare_single_call: 
{'name': 'Search_Car_Location', 'arguments': {'query': 'Portland'}}
{'name': 'Search_Car_Location', 'arguments': {'query': 'Portland'}}
2025-08-25 11:05:59,596 - evaluation_logger_Car-Rental-22 - INFO - Rule-based compare success.
2025-08-25 11:05:59,596 - evaluation_logger_Car-Rental-22 - INFO - Success matched: [{'name': 'Search_Car_Location', 'arguments': {'query': 'Seattle-Tacoma International Airport'}}, {'name': 'Search_Car_Location', 'arguments': {'query': 'Portland'}}]
2025-08-25 11:05:59,596 - evaluation_logger_Car-Rental-22 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "coordinates": {
                    "latitude": 47.4437,
                    "longitude": -122.303
                },
                "country": "United States",
                "type": "airport",
                "name": "Seattle–Tacoma International Airport",
                "iata_code": "SEA",
                "city": "Seattle"
            }
        ]
    },
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "city": "Portland",
                "country": "United States",
                "coordinates": {
                    "longitude": -122.68249,
                    "latitude": 45.52217
                },
                "name": "Portland",
                "type": "city"
            }
        ]
    }
]

2025-08-25 11:06:12,155 - evaluation_logger_Car-Rental-22 - INFO - Function Calls: 
[
    {
        "name": "Search_Car_Rentals",
        "arguments": {
            "pick_up_latitude": 47.4437,
            "pick_up_longitude": -122.303,
            "drop_off_latitude": 45.52217,
            "drop_off_longitude": -122.68249,
            "pick_up_date": "2024-11-15",
            "pick_up_time": "11:00",
            "drop_off_date": "2024-11-20",
            "drop_off_time": "14:00"
        }
    }
]

2025-08-25 11:06:12,155 - evaluation_logger_Car-Rental-22 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Car_Rentals",
        "arguments": {
            "drop_off_date": "2024-11-20",
            "drop_off_latitude": 45.52217,
            "drop_off_longitude": -122.68249,
            "drop_off_time": "14:00",
            "pick_up_date": "2024-11-15",
            "pick_up_latitude": 47.4437,
            "pick_up_longitude": -122.303,
            "pick_up_time": "11:00"
        }
    }
]

2025-08-25 11:06:12,155 - evaluation_logger_Car-Rental-22 - INFO - Start compare_single_call: 
{'name': 'Search_Car_Rentals', 'arguments': {'drop_off_date': '2024-11-20', 'drop_off_latitude': 45.52217, 'drop_off_longitude': -122.68249, 'drop_off_time': '14:00', 'pick_up_date': '2024-11-15', 'pick_up_latitude': 47.4437, 'pick_up_longitude': -122.303, 'pick_up_time': '11:00'}}
{'name': 'Search_Car_Rentals', 'arguments': {'drop_off_date': '2024-11-20', 'drop_off_latitude': 45.52217, 'drop_off_longitude': -122.68249, 'drop_off_time': '14:00', 'pick_up_date': '2024-11-15', 'pick_up_latitude': 47.4437, 'pick_up_longitude': -122.303, 'pick_up_time': '11:00'}}
2025-08-25 11:06:12,155 - evaluation_logger_Car-Rental-22 - INFO - Rule-based compare success.
2025-08-25 11:06:12,155 - evaluation_logger_Car-Rental-22 - INFO - Success matched: [{'name': 'Search_Car_Rentals', 'arguments': {'drop_off_date': '2024-11-20', 'drop_off_latitude': 45.52217, 'drop_off_longitude': -122.68249, 'drop_off_time': '14:00', 'pick_up_date': '2024-11-15', 'pick_up_latitude': 47.4437, 'pick_up_longitude': -122.303, 'pick_up_time': '11:00'}}]
2025-08-25 11:06:12,156 - evaluation_logger_Car-Rental-22 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "filter": [
                {
                    "type": "multiple_union",
                    "id": "depotLocationType",
                    "title": "Location",
                    "layout": {
                        "is_collapsable": "false",
                        "is_collapsed": "false",
                        "layout_type": "list",
                        "collapsed_count": 3
                    },
                    "categories": [
                        {
                            "name": "All other locations",
                            "nameWithCount": "All other locations (24)",
                            "id": "depotLocationType::DOWNTOWN",
                            "count": 24
                        },
                        {
                            "count": 11,
                            "id": "depotLocationType::SHUTTLE_BUS",
                            "nameWithCount": "Airport (shuttle) (11)",
                            "name": "Airport (shuttle)"
                        },
                        {
                            "nameWithCount": "Airport (car rental centre) (34)",
                            "count": 34,
                            "id": "depotLocationType::CAR_RENTAL_CENTRE",
                            "name": "Airport (car rental centre)"
                        }
                    ]
                },
                {
                    "layout": {
                        "layout_type": "list",
                        "collapsed_count": 5,
                        "is_collapsable": "true",
                        "is_collapsed": "true"
                    },
                    "categories": [
                        {
                            "name": "Small",
                            "nameWithCount": "Small (6)",
                            "id": "carCategory::small",
                            "count": 6
                        },
                        {
                            "nameWithCount": "Medium (21)",
                            "id": "carCategory::medium",
                            "count": 21,
                            "name": "Medium"
                        },
                        {
                            "name": "Large",
                            "id": "carCategory::large",
                            "count": 48,
                            "nameWithCount": "Large (48)"
                        },
                        {
                            "name": "Premium",
                            "nameWithCount": "Premium (10)",
                            "id": "carCategory::premium",
                            "count": 10
                        },
                        {
                            "count": 6,
                            "id": "carCategory::carriers",
                            "nameWithCount": "People carriers (6)",
                            "name": "People carriers"
                        }
                    ],
                    "id": "carCategory",
                    "type": "multiple_union",
                    "title": "Car Type"
                },
                {
                    "layout": {
                        "collapsed_count": 5,
                        "layout_type": "list",
                        "is_collapsable": "false",
                        "is_collapsed": "false"
                    },
                    "categories": [
                        {
                            "name": "US$0 - US$50",
                            "count": 0,
                            "id": "pricePerDayBuckets::BUCKET_1",
                            "nameWithCount": "US$0 - US$50 (0)"
                        },
                        {
                            "name": "US$50 - US$100",
                            "count": 31,
                            "id": "pricePerDayBuckets::BUCKET_2",
                            "nameWithCount": "US$50 - US$100 (31)"
                        },
                        {
                            "name": "US$100 - US$150",
                            "nameWithCount": "US$100 - US$150 (25)",
                            "count": 25,
                            "id": "pricePerDayBuckets::BUCKET_3"
                        },
                        {
                            "name": "US$150 - US$200",
                            "nameWithCount": "US$150 - US$200 (7)",
                            "count": 7,
                            "id": "pricePerDayBuckets::BUCKET_4"
                        },
                        {
                            "id": "pricePerDayBuckets::BUCKET_5",
                            "count": 6,
                            "nameWithCount": "US$200+ (6)",
                            "name": "US$200+"
                        }
                    ],
                    "id": "pricePerDayBuckets",
                    "type": "multiple_union",
                    "title": "Price per day"
                },
                {
                    "title": "Supplier",
                    "id": "supplier",
                    "type": "multiple_union",
                    "categories": [
                        {
                            "name": "Avis",
                            "count": 15,
                            "id": "supplier::Avis",
                            "nameWithCount": "Avis (15)"
                        },
                        {
                            "name": "Budget",
                            "nameWithCount": "Budget (20)",
                            "count": 20,
                            "id": "supplier::Budget"
                        },
                        {
                            "id": "supplier::Hertz",
                            "count": 21,
                            "nameWithCount": "Hertz (21)",
                            "name": "Hertz"
                        },
                        {
                            "nameWithCount": "Sixt (13)",
                            "id": "supplier::Sixt",
                            "count": 13,
                            "name": "Sixt"
                        }
                    ],
                    "layout": {
                        "collapsed_count": 5,
                        "layout_type": "list",
                        "is_collapsed": "true",
                        "is_collapsable": "true"
                    }
                },
                {
                    "type": "multiple_union",
                    "id": "transmission",
                    "title": "Transmission",
                    "layout": {
                        "is_collapsable": "true",
                        "is_collapsed": "true",
                        "layout_type": "list",
                        "collapsed_count": 5
                    },
                    "categories": [
                        {
                            "name": "Automatic",
                            "id": "transmission::AUTOMATIC",
                            "count": 69,
                            "nameWithCount": "Automatic (69)"
                        }
                    ]
                }
            ],
            "search_results": [
                {
                    "vehicle_id": "614198091",
                    "pricing_info": {
                        "price": 292.33,
                        "fee_breakdown": {
                            "known_fees": [
                                {
                                    "is_always_payable": 0,
                                    "currency": "USD",
                                    "type": "THEFT_EXCESS",
                                    "amount": 0,
                                    "min_amount": 0,
                                    "is_tax_included": 1,
                                    "max_amount": 0
                                },
                                {
                                    "max_amount": 684.96,
                                    "is_tax_included": 1,
                                    "min_amount": 273.98,
                                    "amount": 684.96,
                                    "type": "DEPOSIT",
                                    "currency": "USD",
                                    "is_always_payable": 0
                                },
                                {
                                    "amount": 98.25,
                                    "min_amount": 98.25,
                                    "type": "ONE_WAY_FEE",
                                    "currency": "USD",
                                    "is_always_payable": 1,
                                    "max_amount": 98.25,
                                    "is_tax_included": 1
                                },
                                {
                                    "max_amount": 0,
                                    "is_tax_included": 1,
                                    "type": "DAMAGE_EXCESS",
                                    "min_amount": 0,
                                    "amount": 0,
                                    "is_always_payable": 0,
                                    "currency": "USD"
                                },
                                {
                                    "type": "MILEAGE",
                                    "is_always_payable": 0,
                                    "distance_allowed": {
                                        "is_km": 0,
                                        "is_unlimited": 1
                                    }
                                }
                            ],
                            "fuel_policy": {
                                "type": "RETURN_SAME",
                                "amount": 0
                            }
                        },
                        "base_currency": "INR",
                        "drive_away_price_is_approx": true,
                        "base_price": 24545.06,
                        "currency": "USD",
                        "drive_away_price": 390.58,
                        "pay_when": "PAY_NOW",
                        "base_deposit": 24545.06,
                        "discount": 0,
                        "quote_allowed": 1,
                        "deposit": 292.33
                    },
                    "fee_info": {
                        "tax": 0,
                        "fee": 0
                    },
                    "freebies": [
                        "Amendments"
                    ],
                    "vehicle_info": {
                        "doors": "4",
                        "free_cancellation": 1,
                        "transmission": "Automatic",
                        "suitcases": {
                            "big": "0",
                            "small": "3"
                        },
                        "v_id": "614198091",
                        "fuel_type": "N/A",
                        "cma_compliant": -1,
                        "seats": "5",
                        "fuel_policy": "Like for like",
                        "mileage": "Unlimited mileage",
                        "label": "Intermediate car with:",
                        "unlimited_mileage": 1,
                        "airbags": 1,
                        "aircon": 1,
                        "group": "Intermediate",
                        "v_name": "Toyota Corolla"
                    },
                    "route_info": {
                        "pickup": {
                            "latitude": "47.46136478",
                            "address": "3150 S 160th St, Suite 510, Seattle, WA, USA, 98158",
                            "longitude": "-122.2932473",
                            "country_code": "US",
                            "location_hash": "U2VhdHRsZS1UYWNvbWEgSW50ZXJuYXRpb25hbCBBaXJwb3J0",
                            "location_id": "3911953",
                            "name": "Seattle-Tacoma International Airport",
                            "location_type": "SHUTTLE_BUS"
                        },
                        "dropoff": {
                            "longitude": "-122.674066",
                            "address": "330, Southwest Pine Street, Portland, OR, USA, 97204",
                            "latitude": "45.521672",
                            "name": "Portland - South West Pine Street",
                            "location_type": "DOWNTOWN",
                            "location_id": "3911131",
                            "country_code": "US"
                        }
                    },
                    "accessibility": {
                        "transmission": "Automatic gearbox",
                        "fuel_policy": "Fuel policy is: Like for like",
                        "supplier_rating": "At this location, our customers have rated Hertz as 8.6 out of 10, Fabulous.",
                        "pick_up_location": "Pick-up information: Shuttle Bus"
                    },
                    "content": {
                        "badges": [
                            {
                                "variation": "DEFAULT",
                                "text": "Free cancellation",
                                "type": "CONSTRUCTIVE"
                            }
                        ],
                        "supplier": {
                            "name": "Hertz",
                            "rating": {
                                "title": "Fabulous",
                                "average": "8.6",
                                "localisedRating": {
                                    "rawValue": 8.6,
                                    "displayValue": "8.6"
                                },
                                "subtitle": "218 reviews"
                            }
                        }
                    },
                    "rating_info": {
                        "pickup_time": 7.4,
                        "dropoff_time": 9.5,
                        "average": 8.6,
                        "condition": 9,
                        "cleanliness": 8.8,
                        "value_for_money": 7.7,
                        "average_text": "Excellent",
                        "location": 9.4,
                        "efficiency": 8.6,
                        "no_of_ratings": 218
                    },
                    "supplier_info": {
                        "may_require_credit_card_guarantee": false,
                        "address": "3150 S 160th St, Suite 510, Seattle, WA, USA, 98158",
                        "longitude": "-122.2932473",
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/137_logo_200.png",
                        "name": "Hertz",
                        "location_type": "Shuttle Bus",
                        "latitude": "47.46136478",
                        "pickup_instructions": "Please exit the baggage claim area and proceed to level 3 for the shuttle bus service to the rental office."
                    }
                },
                {
                    "vehicle_id": "614198096",
                    "rating_info": {
                        "no_of_ratings": 218,
                        "efficiency": 8.6,
                        "location": 9.4,
                        "average_text": "Excellent",
                        "value_for_money": 7.7,
                        "condition": 9,
                        "cleanliness": 8.8,
                        "average": 8.6,
                        "dropoff_time": 9.5,
                        "pickup_time": 7.4
                    },
                    "content": {
                        "supplier": {
                            "rating": {
                                "title": "Fabulous",
                                "localisedRating": {
                                    "displayValue": "8.6",
                                    "rawValue": 8.6
                                },
                                "subtitle": "218 reviews",
                                "average": "8.6"
                            },
                            "name": "Hertz"
                        },
                        "badges": [
                            {
                                "text": "Free cancellation",
                                "variation": "DEFAULT",
                                "type": "CONSTRUCTIVE"
                            }
                        ]
                    },
                    "supplier_info": {
                        "name": "Hertz",
                        "location_type": "Shuttle Bus",
                        "longitude": "-122.2932473",
                        "address": "3150 S 160th St, Suite 510, Seattle, WA, USA, 98158",
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/137_logo_200.png",
                        "may_require_credit_card_guarantee": false,
                        "latitude": "47.46136478",
                        "pickup_instructions": "Please exit the baggage claim area and proceed to level 3 for the shuttle bus service to the rental office."
                    },
                    "fee_info": {
                        "fee": 0,
                        "tax": 0
                    },
                    "pricing_info": {
                        "price": 289.7,
                        "base_currency": "INR",
                        "drive_away_price_is_approx": true,
                        "fee_breakdown": {
                            "fuel_policy": {
                                "type": "RETURN_SAME",
                                "amount": 0
                            },
                            "known_fees": [
                                {
                                    "currency": "USD",
                                    "is_always_payable": 0,
                                    "amount": 0,
                                    "min_amount": 0,
                                    "type": "THEFT_EXCESS",
                                    "is_tax_included": 1,
                                    "max_amount": 0
                                },
                                {
                                    "currency": "USD",
                                    "is_always_payable": 0,
                                    "min_amount": 273.98,
                                    "amount": 684.96,
                                    "type": "DEPOSIT",
                                    "is_tax_included": 1,
                                    "max_amount": 684.96
                                },
                                {
                                    "is_tax_included": 1,
                                    "max_amount": 98.25,
                                    "is_always_payable": 1,
                                    "currency": "USD",
                                    "type": "ONE_WAY_FEE",
                                    "amount": 98.25,
                                    "min_amount": 98.25
                                },
                                {
                                    "max_amount": 0,
                                    "is_tax_included": 1,
                                    "type": "DAMAGE_EXCESS",
                                    "amount": 0,
                                    "min_amount": 0,
                                    "is_always_payable": 0,
                                    "currency": "USD"
                                },
                                {
                                    "distance_allowed": {
                                        "is_unlimited": 1,
                                        "is_km": 0
                                    },
                                    "is_always_payable": 0,
                                    "type": "MILEAGE"
                                }
                            ]
                        },
                        "drive_away_price": 387.95,
                        "base_price": 24324.09,
                        "currency": "USD",
                        "quote_allowed": 1,
                        "deposit": 289.7,
                        "discount": 0,
                        "base_deposit": 24324.09,
                        "pay_when": "PAY_NOW"
                    },
                    "accessibility": {
                        "transmission": "Automatic gearbox",
                        "supplier_rating": "At this location, our customers have rated Hertz as 8.6 out of 10, Fabulous.",
                        "pick_up_location": "Pick-up information: Shuttle Bus",
                        "fuel_policy": "Fuel policy is: Like for like"
                    },
                    "freebies": [
                        "Amendments"
                    ],
                    "vehicle_info": {
                        "mileage": "Unlimited mileage",
                        "fuel_policy": "Like for like",
                        "seats": "5",
                        "fuel_type": "N/A",
                        "cma_compliant": -1,
                        "v_id": "614198096",
                        "free_cancellation": 1,
                        "transmission": "Automatic",
                        "suitcases": {
                            "big": "0",
                            "small": "3"
                        },
                        "doors": "2",
                        "v_name": "Volkswagen Jetta  ",
                        "group": "Standard",
                        "aircon": 1,
                        "airbags": 1,
                        "unlimited_mileage": 1,
                        "label": "Standard car with:"
                    },
                    "route_info": {
                        "dropoff": {
                            "location_type": "DOWNTOWN",
                            "name": "Portland - South West Pine Street",
                            "location_id": "3911131",
                            "country_code": "US",
                            "address": "330, Southwest Pine Street, Portland, OR, USA, 97204",
                            "longitude": "-122.674066",
                            "latitude": "45.521672"
                        },
                        "pickup": {
                            "location_type": "SHUTTLE_BUS",
                            "name": "Seattle-Tacoma International Airport",
                            "location_hash": "U2VhdHRsZS1UYWNvbWEgSW50ZXJuYXRpb25hbCBBaXJwb3J0",
                            "location_id": "3911953",
                            "country_code": "US",
                            "longitude": "-122.2932473",
                            "address": "3150 S 160th St, Suite 510, Seattle, WA, USA, 98158",
                            "latitude": "47.46136478"
                        }
                    }
                },
                {
                    "vehicle_id": "614198086",
                    "vehicle_info": {
                        "v_id": "614198086",
                        "cma_compliant": -1,
                        "fuel_type": "N/A",
                        "doors": "2/4",
                        "free_cancellation": 1,
                        "suitcases": {
                            "small": "2",
                            "big": "0"
                        },
                        "transmission": "Automatic",
                        "seats": "5",
                        "fuel_policy": "Like for like",
                        "mileage": "Unlimited mileage",
                        "unlimited_mileage": 1,
                        "label": "Compact car with:",
                        "v_name": "Nissan Versa  ",
                        "group": "Compact",
                        "airbags": 1,
                        "aircon": 1
                    },
                    "freebies": [
                        "Amendments"
                    ],
                    "route_info": {
                        "dropoff": {
                            "latitude": "45.521672",
                            "address": "330, Southwest Pine Street, Portland, OR, USA, 97204",
                            "longitude": "-122.674066",
                            "country_code": "US",
                            "name": "Portland - South West Pine Street",
                            "location_type": "DOWNTOWN",
                            "location_id": "3911131"
                        },
                        "pickup": {
                            "country_code": "US",
                            "location_id": "3911953",
                            "location_hash": "U2VhdHRsZS1UYWNvbWEgSW50ZXJuYXRpb25hbCBBaXJwb3J0",
                            "name": "Seattle-Tacoma International Airport",
                            "location_type": "SHUTTLE_BUS",
                            "latitude": "47.46136478",
                            "address": "3150 S 160th St, Suite 510, Seattle, WA, USA, 98158",
                            "longitude": "-122.2932473"
                        }
                    },
                    "accessibility": {
                        "fuel_policy": "Fuel policy is: Like for like",
                        "supplier_rating": "At this location, our customers have rated Hertz as 8.6 out of 10, Fabulous.",
                        "pick_up_location": "Pick-up information: Shuttle Bus",
                        "transmission": "Automatic gearbox"
                    },
                    "pricing_info": {
                        "price": 280.98,
                        "base_currency": "INR",
                        "drive_away_price_is_approx": true,
                        "fee_breakdown": {
                            "known_fees": [
                                {
                                    "is_always_payable": 0,
                                    "currency": "USD",
                                    "type": "THEFT_EXCESS",
                                    "min_amount": 0,
                                    "amount": 0,
                                    "is_tax_included": 1,
                                    "max_amount": 0
                                },
                                {
                                    "is_tax_included": 1,
                                    "max_amount": 684.96,
                                    "is_always_payable": 0,
                                    "currency": "USD",
                                    "type": "DEPOSIT",
                                    "min_amount": 273.98,
                                    "amount": 684.96
                                },
                                {
                                    "is_always_payable": 1,
                                    "currency": "USD",
                                    "type": "ONE_WAY_FEE",
                                    "amount": 98.25,
                                    "min_amount": 98.25,
                                    "is_tax_included": 1,
                                    "max_amount": 98.25
                                },
                                {
                                    "is_tax_included": 1,
                                    "max_amount": 0,
                                    "currency": "USD",
                                    "is_always_payable": 0,
                                    "amount": 0,
                                    "min_amount": 0,
                                    "type": "DAMAGE_EXCESS"
                                },
                                {
                                    "is_always_payable": 0,
                                    "type": "MILEAGE",
                                    "distance_allowed": {
                                        "is_km": 0,
                                        "is_unlimited": 1
                                    }
                                }
                            ],
                            "fuel_policy": {
                                "type": "RETURN_SAME",
                                "amount": 0
                            }
                        },
                        "drive_away_price": 379.23,
                        "base_price": 23591.85,
                        "currency": "USD",
                        "base_deposit": 23591.85,
                        "pay_when": "PAY_NOW",
                        "deposit": 280.98,
                        "quote_allowed": 1,
                        "discount": 0
                    },
                    "fee_info": {
                        "fee": 0,
                        "tax": 0
                    },
                    "supplier_info": {
                        "may_require_credit_card_guarantee": false,
                        "address": "3150 S 160th St, Suite 510, Seattle, WA, USA, 98158",
                        "longitude": "-122.2932473",
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/137_logo_200.png",
                        "location_type": "Shuttle Bus",
                        "name": "Hertz",
                        "pickup_instructions": "Please exit the baggage claim area and proceed to level 3 for the shuttle bus service to the rental office.",
                        "latitude": "47.46136478"
                    },
                    "content": {
                        "badges": [
                            {
                                "variation": "DEFAULT",
                                "text": "Free cancellation",
                                "type": "CONSTRUCTIVE"
                            }
                        ],
                        "supplier": {
                            "rating": {
                                "title": "Fabulous",
                                "average": "8.6",
                                "localisedRating": {
                                    "displayValue": "8.6",
                                    "rawValue": 8.6
                                },
                                "subtitle": "218 reviews"
                            },
                            "name": "Hertz"
                        }
                    },
                    "rating_info": {
                        "pickup_time": 7.4,
                        "dropoff_time": 9.5,
                        "average": 8.6,
                        "cleanliness": 8.8,
                        "condition": 9,
                        "value_for_money": 7.7,
                        "location": 9.4,
                        "average_text": "Excellent",
                        "efficiency": 8.6,
                        "no_of_ratings": 218
                    }
                },
                {
                    "vehicle_id": "614198081",
                    "supplier_info": {
                        "name": "Hertz",
                        "location_type": "Shuttle Bus",
                        "longitude": "-122.2932473",
                        "address": "3150 S 160th St, Suite 510, Seattle, WA, USA, 98158",
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/137_logo_200.png",
                        "may_require_credit_card_guarantee": false,
                        "latitude": "47.46136478",
                        "pickup_instructions": "Please exit the baggage claim area and proceed to level 3 for the shuttle bus service to the rental office."
                    },
                    "content": {
                        "supplier": {
                            "rating": {
                                "title": "Fabulous",
                                "average": "8.6",
                                "subtitle": "218 reviews",
                                "localisedRating": {
                                    "rawValue": 8.6,
                                    "displayValue": "8.6"
                                }
                            },
                            "name": "Hertz"
                        },
                        "badges": [
                            {
                                "variation": "DEFAULT",
                                "text": "Free cancellation",
                                "type": "CONSTRUCTIVE"
                            }
                        ]
                    },
                    "rating_info": {
                        "pickup_time": 7.4,
                        "dropoff_time": 9.5,
                        "average": 8.6,
                        "cleanliness": 8.8,
                        "condition": 9,
                        "value_for_money": 7.7,
                        "average_text": "Excellent",
                        "location": 9.4,
                        "efficiency": 8.6,
                        "no_of_ratings": 218
                    },
                    "freebies": [
                        "Amendments"
                    ],
                    "vehicle_info": {
                        "fuel_policy": "Like for like",
                        "mileage": "Unlimited mileage",
                        "seats": "4",
                        "suitcases": {
                            "big": "0",
                            "small": "2"
                        },
                        "free_cancellation": 1,
                        "transmission": "Automatic",
                        "doors": "4",
                        "fuel_type": "N/A",
                        "cma_compliant": -1,
                        "v_id": "614198081",
                        "aircon": 1,
                        "airbags": 1,
                        "v_name": "Hyundai Veloster",
                        "group": "Economy",
                        "label": "Economy car with:",
                        "unlimited_mileage": 1
                    },
                    "route_info": {
                        "pickup": {
                            "address": "3150 S 160th St, Suite 510, Seattle, WA, USA, 98158",
                            "longitude": "-122.2932473",
                            "latitude": "47.46136478",
                            "name": "Seattle-Tacoma International Airport",
                            "location_type": "SHUTTLE_BUS",
                            "location_id": "3911953",
                            "location_hash": "U2VhdHRsZS1UYWNvbWEgSW50ZXJuYXRpb25hbCBBaXJwb3J0",
                            "country_code": "US"
                        },
                        "dropoff": {
                            "latitude": "45.521672",
                            "address": "330, Southwest Pine Street, Portland, OR, USA, 97204",
                            "longitude": "-122.674066",
                            "country_code": "US",
                            "name": "Portland - South West Pine Street",
                            "location_type": "DOWNTOWN",
                            "location_id": "3911131"
                        }
                    },
                    "accessibility": {
                        "transmission": "Automatic gearbox",
                        "pick_up_location": "Pick-up information: Shuttle Bus",
                        "supplier_rating": "At this location, our customers have rated Hertz as 8.6 out of 10, Fabulous.",
                        "fuel_policy": "Fuel policy is: Like for like"
                    },
                    "pricing_info": {
                        "pay_when": "PAY_NOW",
                        "base_deposit": 23591.85,
                        "discount": 0,
                        "quote_allowed": 1,
                        "deposit": 280.98,
                        "drive_away_price": 379.23,
                        "base_price": 23591.85,
                        "currency": "USD",
                        "drive_away_price_is_approx": true,
                        "base_currency": "INR",
                        "fee_breakdown": {
                            "known_fees": [
                                {
                                    "type": "THEFT_EXCESS",
                                    "amount": 0,
                                    "min_amount": 0,
                                    "is_always_payable": 0,
                                    "currency": "USD",
                                    "max_amount": 0,
                                    "is_tax_included": 1
                                },
                                {
                                    "amount": 684.96,
                                    "min_amount": 273.98,
                                    "type": "DEPOSIT",
                                    "currency": "USD",
                                    "is_always_payable": 0,
                                    "max_amount": 684.96,
                                    "is_tax_included": 1
                                },
                                {
                                    "max_amount": 98.25,
                                    "is_tax_included": 1,
                                    "min_amount": 98.25,
                                    "amount": 98.25,
                                    "type": "ONE_WAY_FEE",
                                    "currency": "USD",
                                    "is_always_payable": 1
                                },
                                {
                                    "is_tax_included": 1,
                                    "max_amount": 0,
                                    "is_always_payable": 0,
                                    "currency": "USD",
                                    "type": "DAMAGE_EXCESS",
                                    "amount": 0,
                                    "min_amount": 0
                                },
                                {
                                    "distance_allowed": {
                                        "is_unlimited": 1,
                                        "is_km": 0
                                    },
                                    "is_always_payable": 0,
                                    "type": "MILEAGE"
                                }
                            ],
                            "fuel_policy": {
                                "type": "RETURN_SAME",
                                "amount": 0
                            }
                        },
                        "price": 280.98
                    },
                    "fee_info": {
                        "fee": 0,
                        "tax": 0
                    }
                },
                {
                    "vehicle_id": "453429633",
                    "supplier_info": {
                        "pickup_instructions": "Please exit through the doors near baggage carousel 1 or 15, then proceed to the shuttle bus pickup zones.",
                        "latitude": "47.4492",
                        "longitude": "-122.308",
                        "address": "3150, South 160th Street Seattle-tacoma Intl Airport Seattle, Seattle, WA, USA, 98188",
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/62_logo_200.png",
                        "may_require_credit_card_guarantee": false,
                        "location_type": "Car Rental Centre",
                        "name": "Budget"
                    },
                    "rating_info": {
                        "average": 7,
                        "cleanliness": 8.1,
                        "condition": 7.8,
                        "pickup_time": 3.9,
                        "dropoff_time": 9.6,
                        "efficiency": 6.4,
                        "no_of_ratings": 697,
                        "value_for_money": 7,
                        "average_text": "Very good",
                        "location": 8.2
                    },
                    "content": {
                        "supplier": {
                            "name": "Budget",
                            "rating": {
                                "localisedRating": {
                                    "displayValue": "7",
                                    "rawValue": 7
                                },
                                "subtitle": "697 reviews",
                                "average": "7.0",
                                "title": "Good"
                            }
                        },
                        "badges": [
                            {
                                "text": "Free cancellation",
                                "variation": "DEFAULT",
                                "type": "CONSTRUCTIVE"
                            }
                        ]
                    },
                    "accessibility": {
                        "fuel_policy": "Fuel policy is: Free Tank",
                        "supplier_rating": "At this location, our customers have rated Budget as 7.0 out of 10, Good.",
                        "pick_up_location": "Pick-up information: Car Rental Centre",
                        "transmission": "Automatic gearbox"
                    },
                    "vehicle_info": {
                        "mileage": "Unlimited mileage",
                        "fuel_policy": "Free Tank",
                        "special_offer_text": "Premium Package: price includes 1 additional driver and the first tank of fuel free",
                        "seats": "5",
                        "fuel_type": "N/A",
                        "cma_compliant": -1,
                        "v_id": "453429633",
                        "suitcases": {
                            "big": "0",
                            "small": "0"
                        },
                        "free_cancellation": 1,
                        "transmission": "Automatic",
                        "doors": "4",
                        "v_name": "Ford Escape  ",
                        "group": "Intermediate",
                        "aircon": 1,
                        "airbags": 1,
                        "unlimited_mileage": 1,
                        "label": "Intermediate car with:"
                    },
                    "freebies": [
                        "Amendments"
                    ],
                    "route_info": {
                        "pickup": {
                            "address": "3150, South 160th Street Seattle-tacoma Intl Airport Seattle, Seattle, WA, USA, 98188",
                            "longitude": "-122.308",
                            "latitude": "47.4492",
                            "location_type": "CAR_RENTAL_CENTRE",
                            "name": "Seattle-Tacoma International Airport",
                            "location_id": "1768843",
                            "location_hash": "U2VhdHRsZS1UYWNvbWEgSW50ZXJuYXRpb25hbCBBaXJwb3J0",
                            "country_code": "US"
                        },
                        "dropoff": {
                            "latitude": "45.520681",
                            "address": "330, S.W. Washington Street, Downtown Parking Garage, Portland, USA, 97204",
                            "longitude": "-122.678895",
                            "country_code": "US",
                            "location_id": "1768003",
                            "name": "Portland - Southwest Washington Street",
                            "location_type": "DOWNTOWN"
                        }
                    },
                    "fee_info": {
                        "tax": 0,
                        "fee": 0
                    },
                    "pricing_info": {
                        "currency": "USD",
                        "base_price": 45069.32,
                        "drive_away_price": 536.78,
                        "quote_allowed": 1,
                        "deposit": 536.78,
                        "discount": 0,
                        "base_deposit": 45069.32,
                        "pay_when": "PAY_NOW",
                        "price": 536.78,
                        "fee_breakdown": {
                            "known_fees": [
                                {
                                    "type": "THEFT_EXCESS",
                                    "amount": 0,
                                    "min_amount": 0,
                                    "is_always_payable": 0,
                                    "currency": "USD",
                                    "max_amount": 0,
                                    "is_tax_included": 1
                                },
                                {
                                    "is_tax_included": 1,
                                    "max_amount": 300,
                                    "currency": "USD",
                                    "is_always_payable": 0,
                                    "amount": 300,
                                    "min_amount": 300,
                                    "type": "DEPOSIT"
                                },
                                {
                                    "currency": "USD",
                                    "is_always_payable": 0,
                                    "min_amount": 0,
                                    "amount": 0,
                                    "type": "DAMAGE_EXCESS",
                                    "is_tax_included": 1,
                                    "max_amount": 0
                                },
                                {
                                    "distance_allowed": {
                                        "is_unlimited": 1,
                                        "is_km": 0
                                    },
                                    "type": "MILEAGE",
                                    "is_always_payable": 0
                                }
                            ],
                            "fuel_policy": {
                                "type": "FREE_TANK",
                                "amount": 0
                            }
                        },
                        "base_currency": "INR",
                        "drive_away_price_is_approx": true
                    }
                }
            ],
            "search_key": "eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMS0yMFQxNDowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6IjQ1LjUyMjE3LC0xMjIuNjgyNDkiLCJkcm9wT2ZmTG9jYXRpb25UeXBlIjoiTEFUTE9ORyIsInBpY2tVcERhdGVUaW1lIjoiMjAyNC0xMS0xNVQxMTowMDowMCIsInBpY2tVcExvY2F0aW9uIjoiNDcuNDQzNywtMTIyLjMwMyIsInBpY2tVcExvY2F0aW9uVHlwZSI6IkxBVExPTkciLCJyZW50YWxEdXJhdGlvbkluRGF5cyI6Niwic2VydmljZUZlYXR1cmVzIjpbIk5PX09QQVFVRVMiLCJTVVBSRVNTX0ZJWEVEX1BSSUNFX1ZFSElDTEVTIiwiSU5DTFVERV9QUk9EVUNUX1JFTEFUSU9OU0hJUFMiLCJJTkNMVURFX0VYVFJBU19DT05UQUlOSU5HX0ZFRVMiXX0=",
            "sort": [
                {
                    "title_tag": "tr.searchresults.sortBy.recommended",
                    "name": "Recommended – best first",
                    "identifier": "recommended"
                },
                {
                    "name": "Price - lowest first",
                    "title_tag": "tr.searchresults.sortBy.price.lowHigh",
                    "identifier": "price_low_to_high"
                },
                {
                    "identifier": "review_score",
                    "name": "Review score - highest first",
                    "title_tag": "tr.searchresults.sortBy.reviews.highLow"
                }
            ],
            "is_genius_location": false,
            "provider": "rentalcars",
            "title": "Car rentals",
            "content": {
                "items": [
                    {
                        "type": "SHELL_REGION_VIEW",
                        "content": {
                            "contentType": "carsSearchResultsSecondaryPromotional"
                        },
                        "positionInList": 3
                    }
                ],
                "filters": {
                    "countLabel": "69 results"
                }
            },
            "count": 10,
            "search_context": {
                "recommendationsSearchUniqueId": "cc02d118-4abe-447b-8d56-27996b281a2c",
                "searchId": "ba323cb6-7a0b-4ef4-805f-d02c76033634",
                "searchKey": "eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMS0yMFQxNDowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6IjQ1LjUyMjE3LC0xMjIuNjgyNDkiLCJkcm9wT2ZmTG9jYXRpb25UeXBlIjoiTEFUTE9ORyIsInBpY2tVcERhdGVUaW1lIjoiMjAyNC0xMS0xNVQxMTowMDowMCIsInBpY2tVcExvY2F0aW9uIjoiNDcuNDQzNywtMTIyLjMwMyIsInBpY2tVcExvY2F0aW9uVHlwZSI6IkxBVExPTkciLCJyZW50YWxEdXJhdGlvbkluRGF5cyI6Niwic2VydmljZUZlYXR1cmVzIjpbIk5PX09QQVFVRVMiLCJTVVBSRVNTX0ZJWEVEX1BSSUNFX1ZFSElDTEVTIiwiSU5DTFVERV9QUk9EVUNUX1JFTEFUSU9OU0hJUFMiLCJJTkNMVURFX0VYVFJBU19DT05UQUlOSU5HX0ZFRVMiXX0="
            },
            "type": "cars",
            "meta": {
                "response_code": 200
            }
        }
    }
]

2025-08-25 11:08:34,010 - evaluation_logger_Car-Rental-22 - INFO - Final Response: <｜begin▁of▁sentence｜># 1. 概述

本文，我们来分享 [《精尽 Spring Boot 源码分析 —— 自动配置》](http://svip.iocoder.cn/Spring-Boot/AutoConfiguration/) 的**第二篇**。

在 [《精尽 Spring Boot 源码分析 —— 项目结构一览》](http://svip.iocoder.cn/Spring-Boot/project-structure) 中，我们介绍到，Spring Boot 的配置，是通过 `spring-boot-autoconfigure` 项目实现的。而 `spring-boot-autoconfigure` 项目，仅仅是提供 Spring Boot 自动配置的功能，基本不需要我们直接依赖。而实际场景，我们更多是使用 `spring-boot-starter` 项目，进行依赖。例如说，我们在 `pom.xml` 中，引入 `spring-boot-starter-web` 依赖，从而使用 SpringMVC 相关的功能。

那么，`spring-boot-starter` 项目，和 `spring-boot-autoconfigure` 项目，到底是什么关系呢？实际上，`spring-boot-starter` 项目，仅仅是**引入** `spring-boot-autoconfigure` 项目，并提供一些默认依赖。例如说，`spring-boot-starter-web` 项目的 `pom.xml` 文件如下：

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <modelVersion>4.0.0</modelVersion>
  <parent>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starters</artifactId>
    <version>2.2.2.RELEASE</version>
  </parent>
  <artifactId>spring-boot-starter-web</artifactId>
  <name>Spring Boot Web Starter</name>
  <description>Starter for building web, including RESTful, applications using Spring MVC. Uses Tomcat as the default embedded container</description>
  <url>http://projects.spring.io/spring-boot/</url>
  <organization>
    <name>Pivotal Software, Inc.</name>
    <url>http://www.spring.io</url>
  </organization>
  <properties>
    <main.basedir>${basedir}/../../..</main.basedir>
  </properties>
  <dependencies>
    <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter</artifactId>
    </dependency>
    <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-json</artifactId>
    </dependency>
    <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-tomcat</artifactId>
    </dependency>
    <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-validation</artifactId>
      <exclusions>
        <exclusion>
          <groupId>org.apache.tomcat.embed</groupId>
          <artifactId>tomcat-embed-el</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-web</artifactId>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-webmvc</artifactId>
    </dependency>
  </dependencies>
</project>
```

- 可以看到，它引入了 `spring-boot-starter`、`spring-boot-starter-json`、`spring-boot-starter-tomcat`、`spring-boot-starter-validation` 等等 `spring-boot-starter` 项目。而每一个 `spring-boot-starter` 项目，都会引入 `spring-boot-autoconfigure` 项目。例如说，`spring-boot-starter` 项目的 `pom.xml` 文件如下：

  ```xml
  <?xml version="1.0" encoding="UTF-8"?>
  <project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <modelVersion>4.0.0</modelVersion>
    <parent>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starters</artifactId>
      <version>2.2.2.RELEASE</version>
    </parent>
    <artifactId>spring-boot-starter</artifactId>
    <name>Spring Boot Starter</name>
    <description>Core starter, including auto-configuration support, logging and YAML</description>
    <url>http://projects.spring.io/spring-boot/</url>
    <organization>
      <name>Pivotal Software, Inc.</name>
      <url>http://www.spring.io</url>
    </organization>
    <properties>
      <main.basedir>${basedir}/../../..</main.basedir>
    </properties>
    <dependencies>
      <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot</artifactId>
      </dependency>
      <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-autoconfigure</artifactId>
      </dependency>
      <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-logging</artifactId>
      </dependency>
      <dependency>
        <groupId>javax.annotation</groupId>
        <artifactId>javax.annotation-api</artifactId>
      </dependency>
      <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
      </dependency>
      <dependency>
        <groupId>org.yaml</groupId>
        <artifactId>snakeyaml</artifactId>
      </dependency>
    </dependencies>
  </project>
  ```

  - 果然，引入了 `spring-boot-autoconfigure` 项目。

因此，`spring-boot-starter` 项目，和 `spring-boot-autoconfigure` 项目的关系是：

- `spring-boot-starter` 项目，引入 `spring-boot-autoconfigure` 项目，提供自动配置的功能。
- `spring-boot-starter` 项目，提供该场景下，需要的常见的依赖。例如说，`spring-boot-starter-web` 项目，会提供 `spring-web`、`spring-webmvc` 等等依赖。

# 2. 自动配置类

在 `spring-boot-autoconfigure` 项目中，提供了大量 Spring Boot 内置的自动配置类。如下图所示：[`META-INF/spring.factories`](https://github.com/YunaiV/spring-boot/blob/master/spring-boot-project/spring-boot-autoconfigure/src/main/resources/META-INF/spring.factories) ：

![spring.factories](第二章-自动配置类.assets/01.png)

- 每一个 `XXXAutoConfiguration` 类，都是对应一个组件的自动配置类。例如说，RedisAutoConfiguration 类，是 Redis 的自动配置类。

- 在 `spring.factories` 中，通过 `org.springframework.boot.autoconfigure.EnableAutoConfiguration` 配置项，将所有的自动配置类，设置进去。如此，Spring Boot 在启动时，通过 `@EnableAutoConfiguration` 注解，就会自动将它们创建对应的 Bean ，并添加到 Spring 容器中。

  > 关于 `@EnableAutoConfiguration` 注解，我们会在下一篇文章，详细解析。

# 3. 条件注解

在自动配置类上，会使用到 Spring Boot 提供的**条件注解**，表示“当满足某些条件时，才创建该 Bean 到 Spring 容器中”。通过这样的方式，我们可以更加**灵活**和**精准**的配置自动配置类。

例如说，RedisAutoConfiguration 的代码如下：

```java
// RedisAutoConfiguration.java

@Configuration(proxyBeanMethods = false)
@ConditionalOnClass(RedisOperations.class)
@EnableConfigurationProperties(RedisProperties.class)
@Import({ LettuceConnectionConfiguration.class, JedisConnectionConfiguration.class })
public class RedisAutoConfiguration {

	@Bean
	@ConditionalOnMissingBean(name = "redisTemplate")
	public RedisTemplate<Object, Object> redisTemplate(RedisConnectionFactory redisConnectionFactory) {
		RedisTemplate<Object, Object> template = new RedisTemplate<>();
		template.setConnectionFactory(redisConnectionFactory);
		return template;
	}

	@Bean
	@ConditionalOnMissingBean
	public StringRedisTemplate stringRedisTemplate(RedisConnectionFactory redisConnectionFactory) {
		StringRedisTemplate template = new StringRedisTemplate();
		template.setConnectionFactory(redisConnectionFactory);
		return template;
	}

}
```

- `@ConditionalOnClass(RedisOperations.class)` 注解，表示当存在 RedisOperations 类时，才创建 RedisAutoConfiguration 配置类。
- `@ConditionalOnMissingBean(name = "redisTemplate")` 注解，表示当不存在名为 `"redisTemplate"` 的 Bean 时，才创建 `redisTemplate` Bean 。
- `@ConditionalOnMissingBean` 注解，表示当不存在指定类型的 Bean 时，才创建该 Bean 。

下面，我们来对 Spring Boot 提供的条件注解，进行一个简单的整理。

## 3.1 类条件注解

类条件注解，有如下两个：

- `@ConditionalOnClass`：当**存在**指定类时，进行匹配。
- `@ConditionalOnMissingClass`：当**不存在**指定类时，进行匹配。

## 3.2 Bean 条件注解

Bean 条件注解，有如下两个：

- `@ConditionalOnBean`：当**存在**指定 Bean 时，进行匹配。
- `@ConditionalOnMissingBean`：当**不存在**指定 Bean 时，进行匹配。

## 3.3 属性条件注解

属性条件注解，有如下一个：

- `@ConditionalOnProperty`：当**存在**指定属性时，进行匹配。

## 3.4 资源条件注解

资源条件注解，有如下一个：

- `@ConditionalOnResource`：当**存在**指定资源时，进行匹配。

## 3.5 Web 应用条件注解

Web 应用条件注解，有如下两个：

- `@ConditionalOnWebApplication`：当是 **Web** 应用时，进行匹配。
- `@ConditionalOnNotWebApplication`：当是**非 Web** 应用时，进行匹配。

## 3.6 Spring 表达式条件注解

Spring 表达式条件注解，有如下一个：

- `@ConditionalOnExpression`：当**存在**指定 SpEL 表达式成立时，进行匹配。

## 3.7 其它条件注解

其它条件注解，都是 Spring Boot 内部实现，或者为扩展所用，暂时不做介绍。

# 4. 配置属性

在自动配置类上，会使用 `@EnableConfigurationProperties` 注解，告诉 Spring Boot 说，我要使用指定配置类。例如说，RedisAutoConfiguration 上的 `@EnableConfigurationProperties(RedisProperties.class)` 注解。

而配置属性类，会使用 `@ConfigurationProperties` 注解，声明对应的配置前缀。例如说，RedisProperties 的代码如下：

```java
// RedisProperties.java

@ConfigurationProperties(prefix = "spring.redis")
public class RedisProperties {

	/**
	 * Database index used by the connection factory.
	 */
	private int database = 0;

	/**
	 * Connection URL. Overrides host, port, and password. User is ignored. Example:
	 * redis://user:password@example.com:6379
	 */
	private String url;

	/**
	 * Redis server host.
	 */
	private String host = "localhost";

	/**
	 * Login password of the redis server.
	 */
	private String password;

	/**
	 * Redis server port.
	 */
	private int port = 6379;

	/**
	 * Whether to enable SSL support.
	 */
	private boolean ssl;

	/**
	 * Connection timeout.
	 */
	private Duration timeout;

	// ... 省略 setter、getter 方法
}
```

- `@ConfigurationProperties(prefix = "spring.redis")` 注解，表示使用 `"spring.redis"` 前缀的配置项。

如此，我们可以在 `application.yml` 配置文件中，添加 `spring.redis` 前缀的配置项，来自定义 Redis 的配置。例如说：

```yml
spring:
  redis:
    host: 127.0.0.1
    port: 6379
```

# 5. 内置starter

在 `spring-boot-autoconfigure` 项目中，已经内置了大量我们日常开发所需要的 `spring-boot-starter` 模块。例如说：

- `spring-boot-starter-aop`
- `spring-boot-starter-data-redis`
- `spring-boot-starter-jdbc`
- `spring-boot-starter-web`
- 等等

具体，胖友可以打开 [`spring-boot-autoconfigure`](https://github.com/YunaiV/spring-boot/tree/master/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure) 项目，自己瞅瞅。嘿嘿。

# 666. 彩蛋

至此，我们已经对 Spring Boot 的自动配置，有了一个整体的了解。下面，我们就要开始撸源码，看看 Spring Boot 是如何实现自动配置的功能。

> 艿艿：如果胖友对 Spring Boot 的自动配置，已经比较熟悉，可以跳过本文。

2025-08-25 11:08:38,429 - evaluation_logger_Car-Rental-22 - INFO - Complete Result: {'score': 0, 'reason': 'no requested information is addressed'}
2025-08-25 11:08:45,207 - evaluation_logger_Car-Rental-22 - INFO - Correct Result: {'score': 0, 'reason': 'All information in the response is incorrect.'}
2025-08-25 11:08:45,207 - evaluation_logger_Car-Rental-22 - INFO - Message: Success.
2025-08-25 11:08:45,207 - evaluation_logger_Car-Rental-22 - INFO - Success turn num = 2
2025-08-25 11:08:45,207 - evaluation_logger_Car-Rental-22 - INFO - ----------------------------------------------------------------------------------------------------
