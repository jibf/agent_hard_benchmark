2025-08-25 13:03:38,434 - evaluation_logger_Attraction-75 - INFO - Test Example Attraction-75
2025-08-25 13:03:38,434 - evaluation_logger_Attraction-75 - INFO - Query: Check if tickets are available for the two most trending attractions in Warsaw on any Tuesday in November 2024.
2025-08-25 13:03:45,967 - evaluation_logger_Attraction-75 - INFO - Function Calls: 
[
    {
        "name": "Search_Attraction_Location",
        "arguments": {
            "query": "Warsaw"
        }
    }
]

2025-08-25 13:03:45,967 - evaluation_logger_Attraction-75 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Attraction_Location",
        "arguments": {
            "query": "Warszawa"
        }
    },
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOi01MzQ0MzN9",
            "sortBy": "trending"
        }
    }
]

2025-08-25 13:03:46,657 - evaluation_logger_Attraction-75 - INFO - Start compare_single_call: 
{'name': 'Search_Attraction_Location', 'arguments': {'query': 'Warsaw'}}
{'name': 'Search_Attraction_Location', 'arguments': {'query': 'Warszawa'}}
2025-08-25 13:03:55,387 - evaluation_logger_Attraction-75 - DEBUG - LLM-based comparison output: {'is_equal': True, 'reason': "The parameter 'query' in Function call 1 is 'Warsaw', and in Function call 2 is 'Warszawa'. 'Warsaw' and 'Warszawa' are equivalent as they refer to the same city, with 'Warszawa' being the Polish name for 'Warsaw'. Therefore, both function calls are equivalent."}
2025-08-25 13:03:55,387 - evaluation_logger_Attraction-75 - INFO - LLM-based compare success.
2025-08-25 13:03:55,387 - evaluation_logger_Attraction-75 - INFO - Success matched: [{'name': 'Search_Attraction_Location', 'arguments': {'query': 'Warszawa'}}]
2025-08-25 13:03:55,387 - evaluation_logger_Attraction-75 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "products": [
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFJLeXlGRzFrZUFhIiwidWZpIjotNTM0NDMzfQ==",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "Private transfer from Warszawa to Krakow",
                    "productId": "PRKyyFG1keAa",
                    "productSlug": "prkyyfg1keaa-private-transfer-from-warszawa-to-krakow",
                    "taxonomySlug": "transfers-services",
                    "cityUfi": -534433,
                    "cityName": "Warsaw",
                    "countryCode": "pl"
                },
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFJnZ055UVF0UlhRIiwidWZpIjotNTM0NDMzfQ==",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "Indoor Shooting Range in Warszawa",
                    "productId": "PRggNyQQtRXQ",
                    "productSlug": "prggnyqqtrxq-indoor-shooting-range-in-warszawa",
                    "taxonomySlug": "activities",
                    "cityUfi": -534433,
                    "cityName": "Warsaw",
                    "countryCode": "pl"
                },
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFJ4T3J6TnFlYTBRIiwidWZpIjotNTAxNDAwfQ==",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "Taxi Transfer from Gdańsk airport to Warszawa",
                    "productId": "PRxOrzNqea0Q",
                    "productSlug": "prxorznqea0q-taxi-transfer-from-gdansk-airport-to-warszawa",
                    "taxonomySlug": "transfers-services",
                    "cityUfi": -501400,
                    "cityName": "Gdansk",
                    "countryCode": "pl"
                },
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFJyUnhQakpwNnNXIiwidWZpIjotNTEwNjI1fQ==",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "Private transfer from Krakow to Warszawa",
                    "productId": "PRrRxPjJp6sW",
                    "productSlug": "prrrxpjjp6sw-private-transfer-from-krakow-to-warszawa",
                    "taxonomySlug": "transfers-services",
                    "cityUfi": -510625,
                    "cityName": "Kraków",
                    "countryCode": "pl"
                },
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFJsajlMdWFVQTRoIiwidWZpIjotNTM0NDMzfQ==",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "Private Transfer from Warszawa city to Gdansk (GDN) Airport",
                    "productId": "PRlj9LuaUA4h",
                    "productSlug": "prlj9luaua4h-private-transfer-from-warszawa-city-to-gdansk-gdn-airport",
                    "taxonomySlug": "transfers-services",
                    "cityUfi": -534433,
                    "cityName": "Warsaw",
                    "countryCode": "pl"
                }
            ],
            "destinations": [
                {
                    "id": "eyJ1ZmkiOi01MzQ0MzN9",
                    "__typename": "AttractionsSearchDestinationSuggestion",
                    "ufi": -534433,
                    "country": "Polska",
                    "cityName": "Warszawa",
                    "productCount": 316,
                    "cc1": "pl"
                }
            ]
        }
    }
]

2025-08-25 13:04:05,664 - evaluation_logger_Attraction-75 - INFO - Function Calls: 
[
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOi01MzQ0MzN9",
            "sortBy": "trending"
        }
    }
]

2025-08-25 13:04:05,665 - evaluation_logger_Attraction-75 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOi01MzQ0MzN9",
            "sortBy": "trending"
        }
    },
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRn8hY2WEPBS"
        }
    },
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRxq2gPwEBM5"
        }
    }
]

2025-08-25 13:04:05,665 - evaluation_logger_Attraction-75 - INFO - Start compare_single_call: 
{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOi01MzQ0MzN9', 'sortBy': 'trending'}}
{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOi01MzQ0MzN9', 'sortBy': 'trending'}}
2025-08-25 13:04:05,665 - evaluation_logger_Attraction-75 - INFO - Rule-based compare success.
2025-08-25 13:04:05,665 - evaluation_logger_Attraction-75 - INFO - Success matched: [{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOi01MzQ0MzN9', 'sortBy': 'trending'}}]
2025-08-25 13:04:05,665 - evaluation_logger_Attraction-75 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "__typename": "AttractionsProductSearchResponse",
            "products": [
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRn8hY2WEPBS",
                    "name": "Vistula River Sightseeing Cruise",
                    "slug": "prn8hy2wepbs-vistula-river-sightseeing-cruise",
                    "shortDescription": "A tour to explore the sights of Warsaw from the water",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 15.08,
                        "currency": "USD",
                        "publicAmount": 15.08
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 176,
                        "percentage": "88%",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.5,
                            "total": 458
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Warsaw",
                        "ufi": -534433
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI0FiiKgG918"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI1N6xQNV6YO"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestseller",
                            "value": true,
                            "rank": 1
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerInWeek",
                            "value": true,
                            "rank": 2
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerForTours",
                            "value": true,
                            "rank": 1
                        }
                    ]
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRxq2gPwEBM5",
                    "name": "Chopin Concert in Old Town",
                    "slug": "prxq2gpwebm5-chopin-concert-in-old-town",
                    "shortDescription": "A Chopin concert with a complimentary drink in Warsaw's Old Town",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 23.7,
                        "currency": "USD",
                        "publicAmount": 23.7
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 196,
                        "percentage": "97%",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.7,
                            "total": 390
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Warsaw",
                        "ufi": -534433
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI5o4V7jEi79"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIdyfAeFgZIN"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OISAkL9gvelG"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIs4iTAliv7b"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIsEgonn0FWO"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIHlb6osfqNn"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OITJS3xOpc4X"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIZj8x9JTcts"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIZE01AQan1z"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIjfOSCIBqyV"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIW6UkkpRp2E"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIQORGOCI21E"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIrtY24dFCY3"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIESlbRqIihX"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIqCio8eNktO"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIwOCYX7lvUM"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIUNIpI2bde6"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIVH5QNR1QCl"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIxPGVDwK6PL"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIwN1PCMfWLU"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OITHK310z06F"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI615fQV7lnp"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIQrY6PrhTen"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI5pAUIThrCH"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestseller",
                            "value": true,
                            "rank": 2
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerInMonth",
                            "value": true,
                            "rank": 1
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerInWeek",
                            "value": true,
                            "rank": 1
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerOnWeekends",
                            "value": true,
                            "rank": 1
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerForActivities",
                            "value": true,
                            "rank": 1
                        }
                    ]
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRkI1tLtnZUa",
                    "name": "Chopin Concerts everyday at the Fryderyk Concert Hall",
                    "slug": "prki1tltnzua-chopin-concerts-everyday-at-the-fryderyk-concert-hall",
                    "shortDescription": "Chopin concerts at The Fryderyk Concert Hall, considered most beautiful and luxurious musical ven...",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 23.17,
                        "currency": "USD",
                        "publicAmount": 23.17
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 0,
                        "percentage": "0",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.8,
                            "total": 160
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Warsaw",
                        "ufi": -534433
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIWlRaWrlRoH"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OILph1T7I97p"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI51PSMUZXJH"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIpQPrr0jGw7"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI0UgbYRdNGm"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIGuFJvjNjZa"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI8qD0kTd2b2"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIYl7lWTFxtj"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIuV36QgCTNn"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIfOwWogClTz"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIv7TZmEYX7j"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI6HMzZzrtAz"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIOJJtzBMXAz"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI2iGsjfR7dp"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI8qSeVOoJPt"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OINrd1CQUd6a"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIE03h3O23dt"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIretBtVr9mn"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OInDKDqhFEL1"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI4WzHanV5nc"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestseller",
                            "value": true,
                            "rank": 3
                        }
                    ]
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PR0VvNfqlZ5d",
                    "name": "Admission to Museum World of Illusion",
                    "slug": "pr0vvnfqlz5d-admission-to-museum-world-of-illusion",
                    "shortDescription": "A visit to a unique museum featuring interactive exhibits",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 11.15,
                        "currency": "USD",
                        "publicAmount": 11.15
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 51,
                        "percentage": "84%",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 3.9,
                            "total": 143
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Warsaw",
                        "ufi": -534433
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIlrIHfaTPmG"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIEVlC304rTm"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIN8B65vooYF"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI0iDRZsPZ1r"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIV60y9RrSMF"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI3GiyhYymbg"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIANI52xbiLQ"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OItBSTKJWMSp"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIR4embeQINV"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIrPSgFLqrbM"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OICg3CPZi0Os"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIFZK1wReA4H"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIavfklXzMGe"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI63R1l9uDkp"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIzv50VEXSRF"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerInMonth",
                            "value": true,
                            "rank": 2
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerOnWeekends",
                            "value": true,
                            "rank": 2
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerForMuseums",
                            "value": true,
                            "rank": 1
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "popularFor3Travelers",
                            "value": true,
                            "rank": 3
                        }
                    ]
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRakSVMu0whl",
                    "name": "Vistula River Sunset Cruise with Prosecco",
                    "slug": "praksvmu0whl-vistula-river-sunset-cruise-with-prosecco",
                    "shortDescription": "A pleasant river cruise during sunset with views of Warsaw's landmarks",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 22.3,
                        "currency": "USD",
                        "publicAmount": 22.3
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 0,
                        "percentage": "0",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.1,
                            "total": 17
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Warsaw",
                        "ufi": -534433
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI7n8l4P7Lbk"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestseller",
                            "value": true,
                            "rank": 4
                        }
                    ]
                }
            ],
            "filterStats": {
                "__typename": "FilterStats",
                "unfilteredProductCount": 331,
                "filteredProductCount": 331
            },
            "sorters": [
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Our top picks",
                    "value": "trending"
                },
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Most popular",
                    "value": "attr_book_score"
                },
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Lowest price",
                    "value": "lowest_price"
                }
            ],
            "defaultSorter": {
                "__typename": "AttractionsSorterOption",
                "name": "Our top picks",
                "value": "trending"
            },
            "filterOptions": {
                "__typename": "FilterOptions",
                "typeFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Tours",
                        "tagname": "tours",
                        "productCount": 87
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Nature & outdoor",
                        "tagname": "nature-outdoor",
                        "productCount": 46
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Museums, arts & culture",
                        "tagname": "museums-arts-culture",
                        "productCount": 45
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Entertainment & tickets",
                        "tagname": "entertainment-tickets",
                        "productCount": 24
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Food & drinks",
                        "tagname": "food-drinks",
                        "productCount": 12
                    }
                ],
                "labelFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Free cancellation",
                        "tagname": "free_cancellation",
                        "productCount": 294
                    }
                ],
                "ufiFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Warsaw",
                        "tagname": "-534433",
                        "productCount": 331
                    }
                ],
                "priceFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "US$0 - US$22",
                        "tagname": "b0",
                        "productCount": 28
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$22 - US$44",
                        "tagname": "b1",
                        "productCount": 31
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$44 - US$83",
                        "tagname": "b2",
                        "productCount": 30
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$83 - US$138",
                        "tagname": "b3",
                        "productCount": 40
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$138+",
                        "tagname": "b4",
                        "productCount": 208
                    }
                ]
            }
        }
    }
]

2025-08-25 13:04:16,811 - evaluation_logger_Attraction-75 - INFO - Function Calls: 
[
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRn8hY2WEPBS"
        }
    },
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRxq2gPwEBM5"
        }
    }
]

2025-08-25 13:04:16,811 - evaluation_logger_Attraction-75 - INFO - Golden Function Call: 
[
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRn8hY2WEPBS"
        }
    },
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRxq2gPwEBM5"
        }
    }
]

2025-08-25 13:04:16,811 - evaluation_logger_Attraction-75 - INFO - Start compare_single_call: 
{'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRn8hY2WEPBS'}}
{'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRn8hY2WEPBS'}}
2025-08-25 13:04:16,811 - evaluation_logger_Attraction-75 - INFO - Rule-based compare success.
2025-08-25 13:04:16,811 - evaluation_logger_Attraction-75 - INFO - Start compare_single_call: 
{'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRxq2gPwEBM5'}}
{'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRxq2gPwEBM5'}}
2025-08-25 13:04:16,811 - evaluation_logger_Attraction-75 - INFO - Rule-based compare success.
2025-08-25 13:04:16,811 - evaluation_logger_Attraction-75 - INFO - Success matched: [{'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRn8hY2WEPBS'}}, {'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRxq2gPwEBM5'}}]
2025-08-25 13:04:16,812 - evaluation_logger_Attraction-75 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "timestamp": 1729839701347,
        "data": [
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-27"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-28"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-10-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-31"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-19"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-20"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-23"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-24"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-27"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-28"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-19"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-20"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-23"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-24"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-27"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-28"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-31"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-19"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-20"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-23"
            }
        ]
    },
    {
        "status": true,
        "message": "Success",
        "timestamp": 1729839721128,
        "data": [
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-27"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-28"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-31"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-19"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-20"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-23"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-24"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-27"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-28"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-19"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-20"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-23"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-24"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-27"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-28"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-31"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-19"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-20"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-23"
            }
        ]
    }
]

2025-08-25 13:07:31,774 - evaluation_logger_Attraction-75 - INFO - Final Response: <｜begin▁of▁sentence｜># 1. 概述

本文，我们来分享 MyBatis 的日志模块，对应 `logging` 包。如下图所示：[![`logging` 包](http://static.iocoder.cn/images/MyBatis/2020_01_07/01.png)](http://static.iocoder.cn/images/MyBatis/2020_01_07/01.png)`logging` 包

在 [《精尽 MyBatis 源码解析 —— 项目结构一览》](http://svip.iocoder.cn/MyBatis/intro) 中，简单介绍了这个模块如下：

> 无论在开发测试环境中，还是在线上生产环境中，日志在整个系统中的地位都是非常重要的。良好的日志功能可以帮助开发人员和测试人员快速定位 Bug 代码，也可以帮助运维人员快速定位性能瓶颈等问题。目前的 Java 世界中存在很多优秀的日志框架，例如 Log4j、 Log4j2、Slf4j 等。
>
> MyBatis 作为一个设计优良的框架，除了提供详细的日志输出信息，还要能够集成多种日志框架，其日志模块的一个主要功能就是**集成第三方日志框架**。

本文涉及的类如下图所示：![类图](http://static.iocoder.cn/images/MyBatis/2020_01_07/02.png)

- 从图的**上面**部分，我们可以看到，MyBatis 直接提供了多种日志框架的实现，直接使用对应的日志框架的打印 Logger 。
- 从图的**下面**部分，我们可以看到，MyBatis 还提供了 `jdbc` 包，这个包将 SQL 的打印日志，整合到日志模块中。

下面，让我们开始干源码吧。

# 2. LogFactory

`org.apache.ibatis.logging.LogFactory` ，Log 工厂类。

## 2.1 构造方法

```java
// LogFactory.java

/**
 * Marker to be used by logging implementations that support markers
 */
public static final String MARKER = "MYBATIS";

/**
 * 使用的 Log 的构造方法
 */
private static Constructor<? extends Log> logConstructor;

static {
    // <1> 尝试依次初始化每个日志框架的对应的 Log 构造方法
    tryImplementation(LogFactory::useSlf4jLogging);
    tryImplementation(LogFactory::useCommonsLogging);
    tryImplementation(LogFactory::useLog4J2Logging);
    tryImplementation(LogFactory::useLog4JLogging);
    tryImplementation(LogFactory::useJdkLogging);
    tryImplementation(LogFactory::useNoLogging);
}
```

- `logConstructor` 静态属性，使用的 Log 的构造方法。

- `<1>` 处，在类加载时，通过 `#tryImplementation(Runnable runnable)` 方法，尝试依次初始化每个日志框架的对应的 Log 构造方法。代码如下：

  ```java
  // LogFactory.java
  
  private static void tryImplementation(Runnable runnable) {
      if (logConstructor == null) {
          try {
              runnable.run();
          } catch (Throwable t) {
              // ignore
          }
      }
  }
  ```

  - 当 `logConstructor` 为空时，执行 `runnable` 的方法。

- 那么，`runnable` 方法，对应的是 `#useXXXLogging()` 方法。例如 `#useSlf4jLogging()` 方法，代码如下：

  ```java
  // LogFactory.java
  
  public static synchronized void useSlf4jLogging() {
      setImplementation(org.apache.ibatis.logging.slf4j.Slf4jImpl.class);
  }
  ```

  - 调用 `#setImplementation(Class<? extends Log> implClass)` 方法，设置使用的 `logConstructor` 。代码如下：

    ```java
    // LogFactory.java
    
    private static void setImplementation(Class<? extends Log> implClass) {
        try {
            // 获得参数为 String 的构造方法
            Constructor<? extends Log> candidate = implClass.getConstructor(String.class);
            // 创建 Log 对象，并尝试打印日志，如果报错，说明没成功。
            Log log = candidate.newInstance(LogFactory.class.getName());
            if (log.isDebugEnabled()) {
                log.debug("Logging initialized using '" + implClass + "' adapter.");
            }
            // 设置 logConstructor
            logConstructor = candidate;
        } catch (Throwable t) {
            throw new LogException("Error setting Log implementation.  Cause: " + t, t);
        }
    }
    ```

    - 通过**反射**的方式，创建 `implClass` 对应的 Log 对象，并尝试打印日志。如果不报错，说明初始化成功，此时 `logConstructor` 就会被设置。

- 其它 `#useXXXLogging()` 方法，代码如下：

  ```java
  // LogFactory.java
  
  public static synchronized void useCommonsLogging() {
      setImplementation(org.apache.ibatis.logging.commons.JakartaCommonsLoggingImpl.class);
  }
  
  public static synchronized void useLog4JLogging() {
      setImplementation(org.apache.ibatis.logging.log4j.Log4jImpl.class);
  }
  
  public static synchronized void useLog4J2Logging() {
      setImplementation(org.apache.ibatis.logging.log4j2.Log4j2Impl.class);
  }
  
  public static synchronized void useJdkLogging() {
      setImplementation(org.apache.ibatis.logging.jdk14.Jdk14LoggingImpl.class);
  }
  
  public static synchronized void useStdOutLogging() {
      setImplementation(org.apache.ibatis.logging.stdout.StdOutImpl.class);
  }
  
  public static synchronized void useNoLogging() {
      setImplementation(org.apache.ibatis.logging.nologging.NoLoggingImpl.class);
  }
  ```

## 2.2 getLog

`#getLog(...)` 方法，获得 Log 对象。代码如下：

```java
// LogFactory.java

public static Log getLog(Class<?> aClass) {
    return getLog(aClass.getName());
}

public static Log getLog(String logger) {
    try {
        return logConstructor.newInstance(logger);
    } catch (Throwable t) {
        throw new LogException("Error creating logger for logger " + logger + ".  Cause: " + t, t);
    }
}
```

- 通过 `logConstructor` 反射创建 Log 对象。

## 2.3 小结

LogFactory 负责**自动扫描**日志实现，并且**延迟日志的打印**。也就是说，在打印日志之前才在 `#tryImplementation(Runnable runnable)` 中，进行自动扫描。当然，我们也可以自定义使用哪种日志框架，只需要调用对应的 `#useXXXLogging()` 方法即可。

# 3. Log

`org.apache.ibatis.logging.Log` ，MyBatis Log 接口。代码如下：

```java
// Log.java

public interface Log {

    boolean isDebugEnabled();

    boolean isTraceEnabled();

    void error(String s, Throwable e);

    void error(String s);

    void debug(String s);

    void trace(String s);

    void warn(String s);

}
```

- 和主流日志框架的接口基本一致。

## 3.1 Slf4jImpl

`org.apache.ibatis.logging.slf4j.Slf4jImpl` ，实现 Log 接口，SLF4J 实现类。代码如下：

```java
// Slf4jImpl.java

public class Slf4jImpl implements Log {

    private Log log;

    public Slf4jImpl(String clazz) {
        // 使用 SLF4J 的 LoggerFactory 获得 Logger 对象
        Logger logger = LoggerFactory.getLogger(clazz);

        // 如果使用 SLF4J 桥接，例如 log4j-over-slf4j、jcl-over-slf4j、jul-to-slf4j
        if (logger instanceof LocationAwareLogger) {
            try {
                // check for slf4j >= 1.6 method signature
                logger.getClass().getMethod("log", Marker.class, String.class, int.class, String.class, Object[].class, Throwable.class);
                log = new Slf4jLocationAwareLoggerImpl((LocationAwareLogger) logger);
                return;
            } catch (SecurityException | NoSuchMethodException e) {
                // fail-back to Slf4jLoggerImpl
            }
        }

        // Logger is not LocationAwareLogger or slf4j version < 1.6
        log = new Slf4jLoggerImpl(logger);
    }

    @Override
    public boolean isDebugEnabled() {
        return log.isDebugEnabled();
    }

    @Override
    public boolean isTraceEnabled() {
        return log.isTraceEnabled();
    }

    @Override
    public void error(String s, Throwable e) {
        log.error(s, e);
    }

    @Override
    public void error(String s) {
        log.error(s);
    }

    @Override
    public void debug(String s) {
        log.debug(s);
    }

    @Override
    public void trace(String s) {
        log.trace(s);
    }

    @Override
    public void warn(String s) {
        log.warn(s);
    }

}
```

- 通过组合的方式，来对应 SLF4J 不同的 Logger 实现类。分成两种情况：
  - 第一种，使用 `org.slf4j.spi.LocationAwareLogger` 实现类，对应 Slf4jLocationAwareLoggerImpl 类。
  - 第二种，使用非 `org.slf4j.spi.LocationAwareLogger` 实现类，对应 Slf4jLoggerImpl 类。

### 3.1.1 Slf4jLocationAwareLoggerImpl

`org.apache.ibatis.logging.slf4j.Slf4jLocationAwareLoggerImpl` ，实现 Log 接口，代码如下：

```java
// Slf4jLocationAwareLoggerImpl.java

public class Slf4jLocationAwareLoggerImpl implements Log {

    private static final Marker MARKER = MarkerFactory.getMarker(LogFactory.MARKER);

    /**
     * 日志对象
     */
    private static final String FQCN = Slf4jImpl.class.getName();
    private LocationAwareLogger logger;

    public Slf4jLocationAwareLoggerImpl(LocationAwareLogger logger) {
        this.logger = logger;
    }

    @Override
    public boolean isDebugEnabled() {
        return logger.isDebugEnabled();
    }

    @Override
    public boolean isTraceEnabled() {
        return logger.isTraceEnabled();
    }

    @Override
    public void error(String s, Throwable e) {
        logger.log(MARKER, FQCN, LocationAwareLogger.ERROR_INT, s, null, e);
    }

    @Override
    public void error(String s) {
        logger.log(MARKER, FQCN, LocationAwareLogger.ERROR_INT, s, null, null);
    }

    @Override
    public void debug(String s) {
        logger.log(MARKER, FQCN, LocationAwareLogger.DEBUG_INT, s, null, null);
    }

    @Override
    public void trace(String s) {
        logger.log(MARKER, FQCN, LocationAwareLogger.TRACE_INT, s, null, null);
    }

    @Override
    public void warn(String s) {
        logger.log(MARKER, FQCN, LocationAwareLogger.WARN_INT, s, null, null);
    }

}
```

- 通过 `LocationAwareLogger` 打印日志。

### 3.1.2 Slf4jLoggerImpl

`org.apache.ibatis.logging.slf4j.Slf4jLoggerImpl` ，实现 Log 接口，代码如下：

```java
// Slf4jLoggerImpl.java

public class Slf4jLoggerImpl implements Log {

    private Log log;

    public Slf4jLoggerImpl(Logger logger) {
        if (logger instanceof LocationAwareLogger) {
            // 如果是 LocationAwareLogger ，打印错误日志，说明代码有问题
            try {
                // check for slf4j >= 1.6 method signature
                logger.getClass().getMethod("log", Marker.class, String.class, int.class, String.class, Object[].class, Throwable.class);
                // 如果是 LocationAwareLogger 类型，应该使用 Slf4jLocationAwareLoggerImpl 类
                new Slf4jLocationAwareLoggerImpl((LocationAwareLogger) logger);
                return;
            } catch (SecurityException | NoSuchMethodException e) {
                // fail-back to Slf4jLoggerImpl
            }
        }
        // 普通 Logger
        this.log = logger;
    }

    @Override
    public boolean isDebugEnabled() {
        return log.isDebugEnabled();
    }

    @Override
    public boolean isTraceEnabled() {
        return log.isTraceEnabled();
    }

    @Override
    public void error(String s, Throwable e) {
        log.error(s, e);
    }

    @Override
    public void error(String s) {
        log.error(s);
    }

    @Override
    public void debug(String s) {
        log.debug(s);
    }

    @Override
    public void trace(String s) {
        log.trace(s);
    }

    @Override
    public void warn(String s) {
        log.warn(s);
    }

}
```

- 实际上，Slf4jLoggerImpl 是**错误**的，因为传入的 Logger 对象，一定是非 LocationAwareLogger 类型。所以，在构造方法的**前半段**，实际是打印错误日志，提示开发者。

## 3.2 其它实现类

其它 Log 实现类，代码都比较简单，感兴趣的胖友，自己简单看下哈。

- `org.apache.ibatis.logging.commons.JakartaCommonsLoggingImpl`
- `org.apache.ibatis.logging.log4j.Log4jImpl`
- `org.apache.ibatis.logging.log4j2.Log4j2Impl`
- `org.apache.ibatis.logging.jdk14.Jdk14LoggingImpl`
- `org.apache.ibatis.logging.stdout.StdOutImpl`
- `org.apache.ibatis.logging.nologging.NoLoggingImpl`

# 4. BaseJdbcLogger

`org.apache.ibatis.logging.jdbc.BaseJdbcLogger` ，实现 Log 接口，JDBC 日志抽象基类。

## 4.1 构造方法

```java
// BaseJdbcLogger.java

/**
 * 常用的 Set 的方法名集合
 */
protected static final Set<String> SET_METHODS = new HashSet<>();
/**
 * 执行 SQL 的方法名集合
 */
protected static final Set<String> EXECUTE_METHODS = new HashSet<>();

/**
 * 设置 SET_METHODS 和 EXECUTE_METHODS
 */
static {
    SET_METHODS.add("setString");
    SET_METHODS.add("setInt");
    SET_METHODS.add("setByte");
    SET_METHODS.add("setShort");
    SET_METHODS.add("setLong");
    SET_METHODS.add("setDouble");
    SET_METHODS.add("setFloat");
    SET_METHODS.add("setTimestamp");
    SET_METHODS.add("setDate");
    SET_METHODS.add("setTime");
    SET_METHODS.add("setArray");
    SET_METHODS.add("setBigDecimal");
    SET_METHODS.add("setAsciiStream");
    SET_METHODS.add("setBinaryStream");
    SET_METHODS.add("setBlob");
    SET_METHODS.add("setBoolean");
    SET_METHODS.add("setBytes");
    SET_METHODS.add("setCharacterStream");
    SET_METHODS.add("setClob");
    SET_METHODS.add("setObject");
    SET_METHODS.add("setNull");

    EXECUTE_METHODS.add("execute");
    EXECUTE_METHODS.add("executeUpdate");
    EXECUTE_METHODS.add("executeQuery");
}

/**
 * Log 对象
 */
private Log statementLog;
/**
 * 查询的列数
 */
protected int columnCount;
/**
 * 列名集合
 */
protected Map<String, Object> columnMap = new HashMap<>();

/**
 * 字段名集合
 */
private List<Object> columnNames = new ArrayList<>();
/**
 * 字段值集合
 */
private List<Object> columnValues = new ArrayList<>();

/**
 * 构造方法
 *
 * @param log 日志对象
 */
protected BaseJdbcLogger(Log log) {
    this.statementLog = log;
}
```

- 代码比较简单，胖友自己看注释。

## 4.2 其它方法

```java
// BaseJdbcLogger.java

protected void setColumn(Object key, Object value) {
    columnMap.put(key.toString(), value);
    columnNames.add(key);
    columnValues.add(value);
}

protected Object getColumn(Object key) {
    return columnMap.get(key);
}

protected String getParameterValueString() {
    List<Object> typeList = new ArrayList<>(columnValues.size());
    for (Object value : columnValues) {
        if (value == null) {
            typeList.add("null");
        } else {
            typeList.add(objectValueString(value) + "(" + value.getClass().getSimpleName() + ")");
        }
    }
    final String parameters = typeList.toString();
    return parameters.substring(1, parameters.length() - 1);
}

protected String objectValueString(Object value) {
    if (value instanceof Array) {
        try {
            return Arrays.toString((Object[]) ((Array) value).getArray());
        } catch (SQLException e) {
            return value.toString();
        }
    }
    return value.toString();
}

protected String getColumnString() {
    return columnNames.toString();
}

protected void clearColumnInfo() {
    columnCount = 0;
    columnMap.clear();
    columnNames.clear();
    columnValues.clear();
}

protected String removeBreakingWhitespace(String original) {
    return original.replaceAll("[\\s\\n\\r]+", " ");
}
```

- 代码比较简单，胖友自己看注释。

## 4.3 子类

BaseJdbcLogger 有多个子类，如下图所示：![BaseJdbcLogger 子类](http://static.iocoder.cn/images/MyBatis/2020_01_07/03.png)

- 每个子类，对应一个 JDBC 的接口 / 类的日志增强。例如：ConnectionLogger 对应的是 Connection 的日志增强。

- 每个子类，代码都非常简单，基本就是使用**动态代理**的方式，实现对对应的方法的增强，打印出日志。所以，我们仅仅看 ConnectionLogger 一个类即可。

  > 老艿艿：实际上，这块的代码，和我们在 [《精尽 MyBatis 源码分析 —— 数据源》](http://svip.iocoder.cn/MyBatis/datasource-package) 看到的差不多。

### 4.

2025-08-25 13:07:38,218 - evaluation_logger_Attraction-75 - INFO - Complete Result: {'score': 0, 'reason': 'The response does not address any of the requested information about ticket availability for attractions in Warsaw.'}
2025-08-25 13:07:44,690 - evaluation_logger_Attraction-75 - INFO - Correct Result: {'score': 0, 'reason': 'All information in the response is incorrect.'}
2025-08-25 13:07:44,690 - evaluation_logger_Attraction-75 - INFO - Message: Success.
2025-08-25 13:07:44,690 - evaluation_logger_Attraction-75 - INFO - Success turn num = 3
2025-08-25 13:07:44,690 - evaluation_logger_Attraction-75 - INFO - ----------------------------------------------------------------------------------------------------
