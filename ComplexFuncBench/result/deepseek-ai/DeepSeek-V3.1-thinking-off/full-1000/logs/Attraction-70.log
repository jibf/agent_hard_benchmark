2025-08-25 13:02:42,236 - evaluation_logger_Attraction-70 - INFO - Test Example Attraction-70
2025-08-25 13:02:42,236 - evaluation_logger_Attraction-70 - INFO - Query: Check if tickets are available for the two most trending attractions in New York on any Tuesday in September 2024.
2025-08-25 13:02:52,702 - evaluation_logger_Attraction-70 - INFO - Function Calls: 
[
    {
        "name": "Search_Attraction_Location",
        "arguments": {
            "query": "New York"
        }
    }
]

2025-08-25 13:02:52,702 - evaluation_logger_Attraction-70 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Attraction_Location",
        "arguments": {
            "query": "New York"
        }
    },
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOjIwMDg4MzI1fQ==",
            "sortBy": "trending"
        }
    }
]

2025-08-25 13:02:52,702 - evaluation_logger_Attraction-70 - INFO - Start compare_single_call: 
{'name': 'Search_Attraction_Location', 'arguments': {'query': 'New York'}}
{'name': 'Search_Attraction_Location', 'arguments': {'query': 'New York'}}
2025-08-25 13:02:52,702 - evaluation_logger_Attraction-70 - INFO - Rule-based compare success.
2025-08-25 13:02:52,702 - evaluation_logger_Attraction-70 - INFO - Success matched: [{'name': 'Search_Attraction_Location', 'arguments': {'query': 'New York'}}]
2025-08-25 13:02:52,702 - evaluation_logger_Attraction-70 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "products": [
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFJKN2RIa0FlWllaIiwidWZpIjoyMDA4ODMyNX0=",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "New York CityPASS",
                    "productId": "PRJ7dHkAeZYZ",
                    "productSlug": "prj7dhkaezyz-new-york-city-pass",
                    "taxonomySlug": "transfers-services",
                    "cityUfi": 20088325,
                    "cityName": "New York",
                    "countryCode": "us"
                },
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFI0dVBJejM2NFZ1IiwidWZpIjoyMDA4ODMyNX0=",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "New York CityPASS",
                    "productId": "PR4uPIz364Vu",
                    "productSlug": "pr4upiz364vu-new-york-citypass",
                    "taxonomySlug": "transfers-services",
                    "cityUfi": 20088325,
                    "cityName": "New York",
                    "countryCode": "us"
                },
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFJncTVVM0xUU2phIiwidWZpIjoyMDA3OTExMH0=",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "The Big Apple Coaster at New York New York Hotel and Casino",
                    "productId": "PRgq5U3LTSja",
                    "productSlug": "prgq5u3ltsja-roller-coaster-ride-at-new-york-new-york-hotel",
                    "taxonomySlug": "attractions",
                    "cityUfi": 20079110,
                    "cityName": "Las Vegas",
                    "countryCode": "us"
                },
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFJDeG5vVko2d241IiwidWZpIjoyMDA4ODMyNX0=",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "New York Explorer Pass",
                    "productId": "PRCxnoVJ6wn5",
                    "productSlug": "prcxnovj6wn5-new-york-explorer-pass",
                    "taxonomySlug": "transfers-services",
                    "cityUfi": 20088325,
                    "cityName": "New York",
                    "countryCode": "us"
                },
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFIweWp1Qlk1VTIyIiwidWZpIjoyMDA4ODMyNX0=",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "New York Neighbourhoods Tour",
                    "productId": "PR0yjuBY5U22",
                    "productSlug": "pr0yjuby5u22-new-york-neighbourhoods-tour",
                    "taxonomySlug": "tours",
                    "cityUfi": 20088325,
                    "cityName": "New York",
                    "countryCode": "us"
                }
            ],
            "destinations": [
                {
                    "id": "eyJ1ZmkiOjIwMDg4MzI1fQ==",
                    "__typename": "AttractionsSearchDestinationSuggestion",
                    "ufi": 20088325,
                    "country": "United States",
                    "cityName": "New York",
                    "productCount": 1584,
                    "cc1": "us"
                }
            ]
        }
    }
]

2025-08-25 13:03:03,884 - evaluation_logger_Attraction-70 - INFO - Function Calls: 
[
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOjIwMDg4MzI1fQ==",
            "sortBy": "trending"
        }
    }
]

2025-08-25 13:03:03,884 - evaluation_logger_Attraction-70 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOjIwMDg4MzI1fQ==",
            "sortBy": "trending"
        }
    },
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRCMOkYUz7Um"
        }
    },
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRGstbYhf5aJ"
        }
    }
]

2025-08-25 13:03:03,884 - evaluation_logger_Attraction-70 - INFO - Start compare_single_call: 
{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOjIwMDg4MzI1fQ==', 'sortBy': 'trending'}}
{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOjIwMDg4MzI1fQ==', 'sortBy': 'trending'}}
2025-08-25 13:03:03,884 - evaluation_logger_Attraction-70 - INFO - Rule-based compare success.
2025-08-25 13:03:03,884 - evaluation_logger_Attraction-70 - INFO - Success matched: [{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOjIwMDg4MzI1fQ==', 'sortBy': 'trending'}}]
2025-08-25 13:03:03,885 - evaluation_logger_Attraction-70 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "__typename": "AttractionsProductSearchResponse",
            "products": [
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRCMOkYUz7Um",
                    "name": "SUMMIT One Vanderbilt Tickets",
                    "slug": "prcmokyuz7um-summit-one-vanderbilt-tickets",
                    "shortDescription": "Digital art installations and views of New York from a skyscraper terrace",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 46.82,
                        "currency": "USD",
                        "publicAmount": 46.82
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 1312,
                        "percentage": "96%",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.7,
                            "total": 2189
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "New York",
                        "ufi": 20088325
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIeMCbRjNgmr"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIvFKbAYjwLY"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIfUGWEmdWzI"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIqn0SXffVJg"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OImwt60hz2zK"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIAI6L6KhvTa"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIL3pgiPlpZ0"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIekOTxXZSJa"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI7j4P1brxYK"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestseller",
                            "value": true,
                            "rank": 1
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerInMonth",
                            "value": true,
                            "rank": 1
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerInWeek",
                            "value": true,
                            "rank": 1
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerOnWeekends",
                            "value": true,
                            "rank": 1
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerForMuseums",
                            "value": true,
                            "rank": 1
                        }
                    ]
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRGstbYhf5aJ",
                    "name": "9/11 Memorial & Museum Admission",
                    "slug": "prgstbyhf5aj-911-memorial-museum-admission",
                    "shortDescription": "Chance to visit a memorial and museum that's dedicated to the 9/11 tragedy",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 33,
                        "currency": "USD",
                        "publicAmount": 33
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 442,
                        "percentage": "97%",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.8,
                            "total": 1389
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "New York",
                        "ufi": 20088325
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIbj5GRhTKNN"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI4fzEicRnb9"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIdw71XYXZfI"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIWSJZ7KEJ6u"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIi9bfPbqNSS"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestseller",
                            "value": true,
                            "rank": 3
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerInWeek",
                            "value": true,
                            "rank": 2
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerForMuseums",
                            "value": true,
                            "rank": 2
                        }
                    ]
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRBWN2PbERlH",
                    "name": "One World Observatory Standard Admission",
                    "slug": "prbwn2pberlh-one-world-observatory-standard-admission",
                    "shortDescription": "A visit to the One World Observatory at New York's Freedom Tower",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 35.92,
                        "currency": "USD",
                        "publicAmount": 35.92
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 89,
                        "percentage": "96%",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.7,
                            "total": 405
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "New York",
                        "ufi": 20088325
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIa0nsp5IF70"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIVoFCdplDWD"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIfsRVni60Z7"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI6W4fcdr4Ys"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIyM2BWVLttA"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIpe5WMIpR08"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIyby1YLTDFa"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI8Bln4AU5wf"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI7VbrZZ33VI"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIx1sQSyTt8m"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestseller",
                            "value": true,
                            "rank": 2
                        }
                    ]
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": false
                    },
                    "id": "PRJ7dHkAeZYZ",
                    "name": "New York CityPASS",
                    "slug": "prj7dhkaezyz-new-york-city-pass",
                    "shortDescription": "A sightseeing pass to explore Big Apple attractions at your own pace across nine days",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 146,
                        "currency": "USD",
                        "publicAmount": 146
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 217,
                        "percentage": "82%",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.5,
                            "total": 310
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "New York",
                        "ufi": 20088325
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIJ3JaHLlhz3"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIjpHp3dCMWm"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIjkbjY2rypM"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI4uFE5pC16e"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIzw4l3hRi8F"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI4Y6vT1osN0"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIYNtlnWmt6l"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI9LtOZJUIaZ"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIfBjweR2N8o"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestseller",
                            "value": true,
                            "rank": 4
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerOnWeekends",
                            "value": true,
                            "rank": 3
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerForTransfersServices",
                            "value": true,
                            "rank": 1
                        }
                    ]
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRulfEbTv6Ii",
                    "name": "One-hour Sightseeing Yacht Cruise",
                    "slug": "prulfebtv6ii-one-hour-sightseeing-yacht-cruise",
                    "shortDescription": "A narrated cruise with views of the Statue of Liberty and other popular attractions",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 16,
                        "currency": "USD",
                        "publicAmount": 16
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 95,
                        "percentage": "83%",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 3.9,
                            "total": 799
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "New York",
                        "ufi": 20088325
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIXx4ARw2SEX"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIkj0WPQFNa8"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIAxKnxTM70C"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIyGAZeLpSxG"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI8FOLniGbOO"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerForTours",
                            "value": true,
                            "rank": 2
                        }
                    ]
                }
            ],
            "filterStats": {
                "__typename": "FilterStats",
                "unfilteredProductCount": 1583,
                "filteredProductCount": 1583
            },
            "sorters": [
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Our top picks",
                    "value": "trending"
                },
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Most popular",
                    "value": "attr_book_score"
                },
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Lowest price",
                    "value": "lowest_price"
                }
            ],
            "defaultSorter": {
                "__typename": "AttractionsSorterOption",
                "name": "Our top picks",
                "value": "trending"
            },
            "filterOptions": {
                "__typename": "FilterOptions",
                "typeFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Tours",
                        "tagname": "tours",
                        "productCount": 1240
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Activities",
                        "tagname": "activities",
                        "productCount": 177
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Transfers & services",
                        "tagname": "transfers-services",
                        "productCount": 70
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Attractions",
                        "tagname": "attractions",
                        "productCount": 41
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Museums",
                        "tagname": "museums",
                        "productCount": 29
                    }
                ],
                "labelFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Free cancellation",
                        "tagname": "free_cancellation",
                        "productCount": 1325
                    }
                ],
                "ufiFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "New York",
                        "tagname": "20088325",
                        "productCount": 1467
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Brooklyn",
                        "tagname": "20085207",
                        "productCount": 71
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Newark",
                        "tagname": "20081957",
                        "productCount": 27
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Jersey City",
                        "tagname": "20081509",
                        "productCount": 10
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Westchester",
                        "tagname": "20090608",
                        "productCount": 7
                    }
                ],
                "priceFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "US$0 - US$22",
                        "tagname": "b0",
                        "productCount": 126
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$22 - US$44",
                        "tagname": "b1",
                        "productCount": 303
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$44 - US$83",
                        "tagname": "b2",
                        "productCount": 415
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$83 - US$138",
                        "tagname": "b3",
                        "productCount": 324
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$138+",
                        "tagname": "b4",
                        "productCount": 513
                    }
                ]
            }
        }
    }
]

2025-08-25 13:03:13,244 - evaluation_logger_Attraction-70 - INFO - Function Calls: 
[
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRCMOkYUz7Um"
        }
    },
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRGstbYhf5aJ"
        }
    }
]

2025-08-25 13:03:13,244 - evaluation_logger_Attraction-70 - INFO - Golden Function Call: 
[
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRCMOkYUz7Um"
        }
    },
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRGstbYhf5aJ"
        }
    }
]

2025-08-25 13:03:13,244 - evaluation_logger_Attraction-70 - INFO - Start compare_single_call: 
{'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRCMOkYUz7Um'}}
{'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRCMOkYUz7Um'}}
2025-08-25 13:03:13,244 - evaluation_logger_Attraction-70 - INFO - Rule-based compare success.
2025-08-25 13:03:13,244 - evaluation_logger_Attraction-70 - INFO - Start compare_single_call: 
{'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRGstbYhf5aJ'}}
{'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRGstbYhf5aJ'}}
2025-08-25 13:03:13,244 - evaluation_logger_Attraction-70 - INFO - Rule-based compare success.
2025-08-25 13:03:13,244 - evaluation_logger_Attraction-70 - INFO - Success matched: [{'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRCMOkYUz7Um'}}, {'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRGstbYhf5aJ'}}]
2025-08-25 13:03:13,245 - evaluation_logger_Attraction-70 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "timestamp": 1724918497728,
        "data": [
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-08-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-08-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-08-31"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-09-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-09-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-09-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-19"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-20"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-23"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-09-24"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-27"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-28"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-10-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-19"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-20"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-10-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-23"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-24"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-27"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-28"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-10-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-31"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-19"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-20"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-23"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-24"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-27"
            }
        ]
    },
    {
        "status": true,
        "message": "Success",
        "timestamp": 1724918574868,
        "data": [
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-08-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-08-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-08-31"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-09-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-09-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-09-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-19"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-20"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-23"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-09-24"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-27"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-28"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-09-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-10-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-19"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-20"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-23"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-24"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-27"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-28"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-31"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-19"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-20"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-23"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-24"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-27"
            }
        ]
    }
]

2025-08-25 13:05:17,497 - evaluation_logger_Attraction-70 - INFO - Final Response: <beginofsentence># 1. 

 [ Spring Boot   SpringApplication](http://svip.iocoder.cn/Spring-Boot/SpringApplication/) ****

 SpringApplication  Spring  Spring ****

# 2. 

SpringApplication  SpringApplication 

```java
// SpringApplication.java

/**
 * 
 */
private Set<Class<?>> primarySources;
/**
 * 
 */
private Class<? extends ConfigurableApplicationContext> applicationContextClass;
/**
 * 
 */
private ResourceLoader resourceLoader;
/**
 *  Bean 
 */
private Set<Class<?>> sources = new LinkedHashSet<>();
/**
 *  Web 
 */
private boolean webEnvironment;
/**
 * ApplicationContextInitializer
 */
private List<ApplicationContextInitializer<?>> initializers;
/**
 * ApplicationListener
 */
private List<ApplicationListener<?>> listeners;

public SpringApplication(Class<?>... primarySources) {
    this(null, primarySources);
}

public SpringApplication(ResourceLoader resourceLoader, Class<?>... primarySources) {
    this.resourceLoader = resourceLoader;
    Assert.notNull(primarySources, "PrimarySources must not be null");
    this.primarySources = new LinkedHashSet<>(Arrays.asList(primarySources));
    // <1>  Web 
    this.webApplicationType = deduceWebApplicationType();
    // <2> ApplicationContextInitializer
    setInitializers((Collection) getSpringFactoriesInstances(ApplicationContextInitializer.class));
    // <3> ApplicationListener
    setListeners((Collection) getSpringFactoriesInstances(ApplicationListener.class));
    // <4> 
    this.mainApplicationClass = deduceMainApplicationClass();
}
```

- `primarySources`  `DemoApplication` 

- `applicationContextClass`  `AnnotationConfigServletWebServerApplicationContext` 

- `resourceLoader` 

- `sources`  Bean  `DemoApplication` 

- `webEnvironment`  Web  `webApplicationType` 

- `initializers` ApplicationContextInitializer

- `listeners` ApplicationListener

- `<1>`  `#deduceWebApplicationType()`  Web  [2.1 deduceWebApplicationType](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) 

- `<2>`  `#getSpringFactoriesInstances(Class<T> type)`  `ApplicationContextInitializer`  `#setInitializers(Collection<? extends ApplicationContextInitializer<?>> initializers)`  [2.2 getSpringFactoriesInstances](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#)  [2.3 setInitializers](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) 

- `<3>`  `#getSpringFactoriesInstances(Class<T> type)`  `ApplicationListener`  `#setListeners(Collection<? extends ApplicationListener<?>> listeners)`  [2.2 getSpringFactoriesInstances](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#)  [2.4 setListeners](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) 

- `<4>`  `#deduceMainApplicationClass()`  [2.5 deduceMainApplicationClass](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) 

## 2.1 deduceWebApplicationType

`#deduceWebApplicationType()`  Web 

```java
// SpringApplication.java

private WebApplicationType webApplicationType;

private WebApplicationType deduceWebApplicationType() {
    //  org.springframework.web.reactive.DispatcherHandler
    if (ClassUtils.isPresent(REACTIVE_WEB_ENVIRONMENT_CLASS, null)
            //  org.springframework.web.servlet.DispatcherServlet
            && !ClassUtils.isPresent(MVC_WEB_ENVIRONMENT_CLASS, null)
            //  org.glassfish.jersey.servlet.ServletContainer
            && !ClassUtils.isPresent(JERSEY_WEB_ENVIRONMENT_CLASS, null)) {
        return WebApplicationType.REACTIVE;
    }
    //  Web 
    for (String className : WEB_ENVIRONMENT_CLASSES) {
        if (!ClassUtils.isPresent(className, null)) {
            return WebApplicationType.NONE;
        }
    }
    //  Servlet Web 
    return WebApplicationType.SERVLET;
}
```

- 
- `REACTIVE_WEB_ENVIRONMENT_CLASS`  `"org.springframework.web.reactive.DispatcherHandler"` 
- `MVC_WEB_ENVIRONMENT_CLASS`  `"org.springframework.web.servlet.DispatcherServlet"` 
- `JERSEY_WEB_ENVIRONMENT_CLASS`  `"org.glassfish.jersey.servlet.ServletContainer"` 
- `WEB_ENVIRONMENT_CLASSES`  `"javax.servlet.Servlet"`  `"org.springframework.web.context.ConfigurableWebApplicationContext"` 
-  WebApplicationType 

  ```java
  // WebApplicationType.java
  
  public enum WebApplicationType {
  
      /**
       *  Web 
       */
      NONE,
  
      /**
       * Servlet Web 
       */
      SERVLET,
  
      /**
       * Reactive Web 
       */
      REACTIVE;
  
  }
  ```

## 2.2 getSpringFactoriesInstances

`#getSpringFactoriesInstances(Class<T> type)` 

```java
// SpringApplication.java

private <T> Collection<T> getSpringFactoriesInstances(Class<T> type) {
    return getSpringFactoriesInstances(type, new Class<?>[] {});
}

private <T> Collection<T> getSpringFactoriesInstances(Class<T> type, Class<?>[] parameterTypes, Object... args) {
    ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
    // Use names and ensure unique to protect against duplicates
    // <1>  `META-INF/spring.factories` 
    Set<String> names = new LinkedHashSet<>(SpringFactoriesLoader.loadFactoryNames(type, classLoader));
    // <2> 
    List<T> instances = createSpringFactoriesInstances(type, parameterTypes, classLoader, args, names);
    // <3> 
    AnnotationAwareOrderComparator.sort(instances);
    return instances;
}
```

- `<1>`  `SpringFactoriesLoader#loadFactoryNames(Class<?> factoryClass, ClassLoader classLoader)`  `META-INF/spring.factories` 

  >  SpringFactoriesLoader  [ Spring IoC  BeanDefinition](http://svip.iocoder.cn/Spring/IoC-load-BeanDefinitions/?vip)  [3. loadFactoryNames](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) 

- `<2>`  `#createSpringFactoriesInstances(Class<T> type, Class<?>[] parameterTypes, ClassLoader classLoader, Object[] args, Set<String> names)` 

  ```java
  // SpringApplication.java
  
  private <T> List<T> createSpringFactoriesInstances(Class<T> type, Class<?>[] parameterTypes,
          ClassLoader classLoader, Object[] args, Set<String> names) {
      List<T> instances = new ArrayList<>(names.size());
      for (String name : names) {
          try {
              Class<?> instanceClass = ClassUtils.forName(name, classLoader);
              Assert.isAssignable(type, instanceClass);
              Constructor<?> constructor = instanceClass.getDeclaredConstructor(parameterTypes);
              T instance = (T) BeanUtils.instantiateClass(constructor, args);
              instances.add(instance);
          } catch (Throwable ex) {
              throw new IllegalArgumentException("Cannot instantiate " + type + " : " + name, ex);
          }
      }
      return instances;
  }
  ```

  - 

- `<3>`  `AnnotationAwareOrderComparator#sort(List<?> list)`  `@Order` 

## 2.3 setInitializers

`#setInitializers(Collection<? extends ApplicationContextInitializer<?>> initializers)` ApplicationContextInitializer

```java
// SpringApplication.java

public void setInitializers(Collection<? extends ApplicationContextInitializer<?>> initializers) {
	this.initializers = new ArrayList<>();
	this.initializers.addAll(initializers);
}
```

## 2.4 setListeners

`#setListeners(Collection<? extends ApplicationListener<?>> listeners)` ApplicationListener

```java
// SpringApplication.java

public void setListeners(Collection<? extends ApplicationListener<?>> listeners) {
	this.listeners = new ArrayList<>();
	this.listeners.addAll(listeners);
}
```

## 2.5 deduceMainApplicationClass

`#deduceMainApplicationClass()` 

```java
// SpringApplication.java

private Class<?> mainApplicationClass;

private Class<?> deduceMainApplicationClass() {
    try {
        // 
        StackTraceElement[] stackTrace = new RuntimeException().getStackTrace();
        //  main 
        for (StackTraceElement stackTraceElement : stackTrace) {
            if ("main".equals(stackTraceElement.getMethodName())) {
                return Class.forName(stackTraceElement.getClassName());
            }
        }
    } catch (ClassNotFoundException ex) {
        // Swallow and continue
    }
    return null;
}
```

-  `#main(String[] args)` 

# 3. 

SpringApplication  `primarySources``initializers``listeners` 

- `primarySources` `DemoApplication` 
- `initializers` ![`initializers`](-SpringApplication-.assets/01.png)
- `listeners` ![`listeners`](-SpringApplication-.assets/02.png)

 Spring Boot 

2025-08-25 13:05:24,233 - evaluation_logger_Attraction-70 - INFO - Complete Result: {'score': 0, 'reason': 'The response does not address any of the requested information about ticket availability for attractions in New York.'}
2025-08-25 13:05:31,354 - evaluation_logger_Attraction-70 - INFO - Correct Result: {'score': 0, 'reason': 'All information in the response is incorrect.'}
2025-08-25 13:05:31,354 - evaluation_logger_Attraction-70 - INFO - Message: Success.
2025-08-25 13:05:31,354 - evaluation_logger_Attraction-70 - INFO - Success turn num = 3
2025-08-25 13:05:31,354 - evaluation_logger_Attraction-70 - INFO - ----------------------------------------------------------------------------------------------------
