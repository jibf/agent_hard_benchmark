2025-08-25 13:09:29,464 - evaluation_logger_Attraction-110 - INFO - Test Example Attraction-110
2025-08-25 13:09:29,464 - evaluation_logger_Attraction-110 - INFO - Query: Can you find the two most trending attractions in New York and provide a detailed comparison of them? Also, check if there are any tickets available for both attractions in November.
2025-08-25 13:09:37,299 - evaluation_logger_Attraction-110 - INFO - Function Calls: 
[
    {
        "name": "Search_Attraction_Location",
        "arguments": {
            "query": "New York"
        }
    }
]

2025-08-25 13:09:37,300 - evaluation_logger_Attraction-110 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Attraction_Location",
        "arguments": {
            "query": "New York, America"
        }
    },
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOjIwMDg4MzI1fQ==",
            "sortBy": "trending"
        }
    }
]

2025-08-25 13:09:37,929 - evaluation_logger_Attraction-110 - INFO - Start compare_single_call: 
{'name': 'Search_Attraction_Location', 'arguments': {'query': 'New York'}}
{'name': 'Search_Attraction_Location', 'arguments': {'query': 'New York, America'}}
2025-08-25 13:09:46,975 - evaluation_logger_Attraction-110 - DEBUG - LLM-based comparison output: {'is_equal': True, 'reason': "The parameter 'query' in both function calls refers to the same location, 'New York'. The addition of 'America' in Function call 2 does not change the meaning as 'New York' is commonly understood to be in America. Therefore, both function calls are equivalent."}
2025-08-25 13:09:46,975 - evaluation_logger_Attraction-110 - INFO - LLM-based compare success.
2025-08-25 13:09:46,975 - evaluation_logger_Attraction-110 - INFO - Success matched: [{'name': 'Search_Attraction_Location', 'arguments': {'query': 'New York, America'}}]
2025-08-25 13:09:46,976 - evaluation_logger_Attraction-110 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "products": [
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFJKN2RIa0FlWllaIiwidWZpIjoyMDA4ODMyNX0=",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "New York CityPASS",
                    "productId": "PRJ7dHkAeZYZ",
                    "productSlug": "prj7dhkaezyz-new-york-city-pass",
                    "taxonomySlug": "transfers-services",
                    "cityUfi": 20088325,
                    "cityName": "New York",
                    "countryCode": "us"
                },
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFJlbFE4cFNBWnVrIiwidWZpIjoyMDA4ODMyNX0=",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "New York Aquarium",
                    "productId": "PRelQ8pSAZuk",
                    "productSlug": "prelq8psazuk-new-york-aquarium",
                    "taxonomySlug": "attractions",
                    "cityUfi": 20088325,
                    "cityName": "New York",
                    "countryCode": "us"
                },
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFJ6bUxzZW14dHRwIiwidWZpIjoyMDA4ODMyNX0=",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "Photographer in New York",
                    "productId": "PRzmLsemxttp",
                    "productSlug": "przmlsemxttp-photographer-in-new-york",
                    "taxonomySlug": "tours",
                    "cityUfi": 20088325,
                    "cityName": "New York",
                    "countryCode": "us"
                },
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFI0dVBJejM2NFZ1IiwidWZpIjoyMDA4ODMyNX0=",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "New York CityPASS",
                    "productId": "PR4uPIz364Vu",
                    "productSlug": "pr4upiz364vu-new-york-citypass",
                    "taxonomySlug": "transfers-services",
                    "cityUfi": 20088325,
                    "cityName": "New York",
                    "countryCode": "us"
                },
                {
                    "id": "eyJwaW5uZWRQcm9kdWN0IjoiUFJ4TWpoTlZyTHhxIiwidWZpIjoyMDA4ODAzNX0=",
                    "__typename": "AttractionsSearchProductSuggestion",
                    "title": "Arrival Transfer: New York Airport JFK to New York in SUV",
                    "productId": "PRxMjhNVrLxq",
                    "productSlug": "prxmjhnvrlxq-arrival-transfer-new-york-airport-jfk-to-new-york-in-suv",
                    "taxonomySlug": "transfers-services",
                    "cityUfi": 20088035,
                    "cityName": "Middle Island",
                    "countryCode": "us"
                }
            ],
            "destinations": [
                {
                    "id": "eyJ1ZmkiOjIwMDg4MzI1fQ==",
                    "__typename": "AttractionsSearchDestinationSuggestion",
                    "ufi": 20088325,
                    "country": "United States of America",
                    "cityName": "New York",
                    "productCount": 1816,
                    "cc1": "us"
                },
                {
                    "id": "eyJ1ZmkiOjIwMDg4MzEyfQ==",
                    "__typename": "AttractionsSearchDestinationSuggestion",
                    "ufi": 20088312,
                    "country": "United States of America",
                    "cityName": "New Rochelle",
                    "productCount": 1816,
                    "cc1": "us"
                }
            ]
        }
    }
]

2025-08-25 13:09:57,704 - evaluation_logger_Attraction-110 - INFO - Function Calls: 
[
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOjIwMDg4MzI1fQ==",
            "sortBy": "trending"
        }
    }
]

2025-08-25 13:09:57,704 - evaluation_logger_Attraction-110 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOjIwMDg4MzI1fQ==",
            "sortBy": "trending"
        }
    },
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRCMOkYUz7Um"
        }
    },
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRGstbYhf5aJ"
        }
    },
    {
        "name": "Get_Attraction_Details",
        "arguments": {
            "slug": "prcmokyuz7um-summit-one-vanderbilt-tickets"
        }
    },
    {
        "name": "Get_Attraction_Details",
        "arguments": {
            "slug": "prgstbyhf5aj-911-memorial-museum-admission"
        }
    }
]

2025-08-25 13:09:57,704 - evaluation_logger_Attraction-110 - INFO - Start compare_single_call: 
{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOjIwMDg4MzI1fQ==', 'sortBy': 'trending'}}
{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOjIwMDg4MzI1fQ==', 'sortBy': 'trending'}}
2025-08-25 13:09:57,704 - evaluation_logger_Attraction-110 - INFO - Rule-based compare success.
2025-08-25 13:09:57,704 - evaluation_logger_Attraction-110 - INFO - Success matched: [{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOjIwMDg4MzI1fQ==', 'sortBy': 'trending'}}]
2025-08-25 13:09:57,705 - evaluation_logger_Attraction-110 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "__typename": "AttractionsProductSearchResponse",
            "products": [
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRCMOkYUz7Um",
                    "name": "SUMMIT One Vanderbilt Tickets",
                    "slug": "prcmokyuz7um-summit-one-vanderbilt-tickets",
                    "shortDescription": "Digital art installations and views of New York from a skyscraper terrace",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 46.82,
                        "currency": "USD",
                        "publicAmount": 46.82
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 1312,
                        "percentage": "96%",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.7,
                            "total": 2449
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "New York",
                        "ufi": 20088325
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIeMCbRjNgmr"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIvFKbAYjwLY"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIfUGWEmdWzI"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIqn0SXffVJg"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OImwt60hz2zK"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIAI6L6KhvTa"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIL3pgiPlpZ0"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIekOTxXZSJa"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI7j4P1brxYK"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestseller",
                            "value": true,
                            "rank": 1
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerInMonth",
                            "value": true,
                            "rank": 1
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerInWeek",
                            "value": true,
                            "rank": 1
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerOnWeekends",
                            "value": true,
                            "rank": 1
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerForMuseums",
                            "value": true,
                            "rank": 1
                        }
                    ]
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRGstbYhf5aJ",
                    "name": "9/11 Memorial & Museum Admission",
                    "slug": "prgstbyhf5aj-911-memorial-museum-admission",
                    "shortDescription": "Chance to visit a memorial and museum that's dedicated to the 9/11 tragedy",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 33,
                        "currency": "USD",
                        "publicAmount": 33
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 431,
                        "percentage": "97%",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.8,
                            "total": 1491
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "New York",
                        "ufi": 20088325
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIbj5GRhTKNN"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI4fzEicRnb9"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIdw71XYXZfI"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIWSJZ7KEJ6u"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIi9bfPbqNSS"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestseller",
                            "value": true,
                            "rank": 3
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerInWeek",
                            "value": true,
                            "rank": 2
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerForMuseums",
                            "value": true,
                            "rank": 2
                        }
                    ]
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRBWN2PbERlH",
                    "name": "One World Observatory Standard Admission",
                    "slug": "prbwn2pberlh-one-world-observatory-standard-admission",
                    "shortDescription": "A visit to the One World Observatory at New York's Freedom Tower",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 35.92,
                        "currency": "USD",
                        "publicAmount": 35.92
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 84,
                        "percentage": "98%",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.7,
                            "total": 507
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "New York",
                        "ufi": 20088325
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIa0nsp5IF70"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIVoFCdplDWD"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIfsRVni60Z7"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI6W4fcdr4Ys"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIyM2BWVLttA"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIpe5WMIpR08"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIyby1YLTDFa"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI8Bln4AU5wf"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI7VbrZZ33VI"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIx1sQSyTt8m"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestseller",
                            "value": true,
                            "rank": 2
                        }
                    ]
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": false
                    },
                    "id": "PRJ7dHkAeZYZ",
                    "name": "New York CityPASS",
                    "slug": "prj7dhkaezyz-new-york-city-pass",
                    "shortDescription": "A sightseeing pass to explore Big Apple attractions at your own pace across nine days",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 146,
                        "currency": "USD",
                        "publicAmount": 146
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 216,
                        "percentage": "83%",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.5,
                            "total": 326
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "New York",
                        "ufi": 20088325
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIJ3JaHLlhz3"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIjpHp3dCMWm"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIjkbjY2rypM"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI4uFE5pC16e"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIzw4l3hRi8F"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI4Y6vT1osN0"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIYNtlnWmt6l"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI9LtOZJUIaZ"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIfBjweR2N8o"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestseller",
                            "value": true,
                            "rank": 4
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerOnWeekends",
                            "value": true,
                            "rank": 3
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerForTransfersServices",
                            "value": true,
                            "rank": 1
                        }
                    ]
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRulfEbTv6Ii",
                    "name": "One-hour Sightseeing Yacht Cruise",
                    "slug": "prulfebtv6ii-one-hour-sightseeing-yacht-cruise",
                    "shortDescription": "A narrated cruise with views of the Statue of Liberty and other popular attractions",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 16,
                        "currency": "USD",
                        "publicAmount": 16
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 95,
                        "percentage": "83%",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 3.9,
                            "total": 866
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "New York",
                        "ufi": 20088325
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIXx4ARw2SEX"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIkj0WPQFNa8"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIAxKnxTM70C"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIyGAZeLpSxG"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI8FOLniGbOO"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerForTours",
                            "value": true,
                            "rank": 2
                        }
                    ]
                }
            ],
            "filterStats": {
                "__typename": "FilterStats",
                "unfilteredProductCount": 1757,
                "filteredProductCount": 1757
            },
            "sorters": [
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Our top picks",
                    "value": "trending"
                },
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Most popular",
                    "value": "attr_book_score"
                },
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Lowest price",
                    "value": "lowest_price"
                }
            ],
            "defaultSorter": {
                "__typename": "AttractionsSorterOption",
                "name": "Our top picks",
                "value": "trending"
            },
            "filterOptions": {
                "__typename": "FilterOptions",
                "typeFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Tours",
                        "tagname": "tours",
                        "productCount": 501
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Nature & outdoor",
                        "tagname": "nature-outdoor",
                        "productCount": 347
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Museums, arts & culture",
                        "tagname": "museums-arts-culture",
                        "productCount": 246
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Entertainment & tickets",
                        "tagname": "entertainment-tickets",
                        "productCount": 200
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Food & drinks",
                        "tagname": "food-drinks",
                        "productCount": 55
                    }
                ],
                "labelFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Free cancellation",
                        "tagname": "free_cancellation",
                        "productCount": 1477
                    }
                ],
                "ufiFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "New York",
                        "tagname": "20088325",
                        "productCount": 1615
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Brooklyn",
                        "tagname": "20085207",
                        "productCount": 78
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Newark",
                        "tagname": "20081957",
                        "productCount": 45
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Jersey City",
                        "tagname": "20081509",
                        "productCount": 11
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Westchester",
                        "tagname": "20090608",
                        "productCount": 7
                    }
                ],
                "priceFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "US$0 - US$22",
                        "tagname": "b0",
                        "productCount": 137
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$22 - US$44",
                        "tagname": "b1",
                        "productCount": 299
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$44 - US$83",
                        "tagname": "b2",
                        "productCount": 447
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$83 - US$138",
                        "tagname": "b3",
                        "productCount": 357
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$138+",
                        "tagname": "b4",
                        "productCount": 668
                    }
                ]
            }
        }
    }
]

2025-08-25 13:10:09,354 - evaluation_logger_Attraction-110 - INFO - Function Calls: 
[
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRCMOkYUz7Um"
        }
    },
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRGstbYhf5aJ"
        }
    },
    {
        "name": "Get_Attraction_Details",
        "arguments": {
            "slug": "prcmokyuz7um-summit-one-vanderbilt-tickets"
        }
    },
    {
        "name": "Get_Attraction_Details",
        "arguments": {
            "slug": "prgstbyhf5aj-911-memorial-museum-admission"
        }
    }
]

2025-08-25 13:10:09,355 - evaluation_logger_Attraction-110 - INFO - Golden Function Call: 
[
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRCMOkYUz7Um"
        }
    },
    {
        "name": "Get_Availability_Calendar",
        "arguments": {
            "id": "PRGstbYhf5aJ"
        }
    },
    {
        "name": "Get_Attraction_Details",
        "arguments": {
            "slug": "prcmokyuz7um-summit-one-vanderbilt-tickets"
        }
    },
    {
        "name": "Get_Attraction_Details",
        "arguments": {
            "slug": "prgstbyhf5aj-911-memorial-museum-admission"
        }
    }
]

2025-08-25 13:10:09,355 - evaluation_logger_Attraction-110 - INFO - Start compare_single_call: 
{'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRCMOkYUz7Um'}}
{'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRCMOkYUz7Um'}}
2025-08-25 13:10:09,355 - evaluation_logger_Attraction-110 - INFO - Rule-based compare success.
2025-08-25 13:10:09,355 - evaluation_logger_Attraction-110 - INFO - Start compare_single_call: 
{'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRGstbYhf5aJ'}}
{'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRGstbYhf5aJ'}}
2025-08-25 13:10:09,355 - evaluation_logger_Attraction-110 - INFO - Rule-based compare success.
2025-08-25 13:10:09,355 - evaluation_logger_Attraction-110 - INFO - Start compare_single_call: 
{'name': 'Get_Attraction_Details', 'arguments': {'slug': 'prcmokyuz7um-summit-one-vanderbilt-tickets'}}
{'name': 'Get_Attraction_Details', 'arguments': {'slug': 'prcmokyuz7um-summit-one-vanderbilt-tickets'}}
2025-08-25 13:10:09,355 - evaluation_logger_Attraction-110 - INFO - Rule-based compare success.
2025-08-25 13:10:09,355 - evaluation_logger_Attraction-110 - INFO - Start compare_single_call: 
{'name': 'Get_Attraction_Details', 'arguments': {'slug': 'prgstbyhf5aj-911-memorial-museum-admission'}}
{'name': 'Get_Attraction_Details', 'arguments': {'slug': 'prgstbyhf5aj-911-memorial-museum-admission'}}
2025-08-25 13:10:09,355 - evaluation_logger_Attraction-110 - INFO - Rule-based compare success.
2025-08-25 13:10:09,355 - evaluation_logger_Attraction-110 - INFO - Success matched: [{'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRCMOkYUz7Um'}}, {'name': 'Get_Availability_Calendar', 'arguments': {'id': 'PRGstbYhf5aJ'}}, {'name': 'Get_Attraction_Details', 'arguments': {'slug': 'prcmokyuz7um-summit-one-vanderbilt-tickets'}}, {'name': 'Get_Attraction_Details', 'arguments': {'slug': 'prgstbyhf5aj-911-memorial-museum-admission'}}]
2025-08-25 13:10:09,356 - evaluation_logger_Attraction-110 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "timestamp": 1729528870212,
        "data": [
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-10-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-10-23"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-24"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-27"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-28"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-10-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-31"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-19"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-20"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-23"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-24"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-27"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-28"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-19"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-20"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-23"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-24"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-27"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-28"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-31"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-19"
            }
        ]
    },
    {
        "status": true,
        "message": "Success",
        "timestamp": 1729528902592,
        "data": [
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-10-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-23"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-24"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-27"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-28"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-10-31"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-19"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-20"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-23"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-24"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-27"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-11-28"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-11-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-19"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-20"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-21"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-22"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-23"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-24"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2024-12-25"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-26"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-27"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-28"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-29"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-30"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2024-12-31"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-01"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-02"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-03"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-04"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-05"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-06"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-07"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-08"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-09"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-10"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-11"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-12"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-13"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": false,
                "date": "2025-01-14"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-15"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-16"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-17"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-18"
            },
            {
                "__typename": "AttractionsCalendarItem",
                "available": true,
                "date": "2025-01-19"
            }
        ]
    },
    {
        "status": true,
        "message": "Success",
        "data": {
            "__typename": "AttractionsProduct",
            "additionalInfo": "Please note that all Summit tickets are timed. Please arrive at your scheduled time, which is indicated on your ticket. \r\n\r\nThe Summit operates at full capacity. You might not be able to get in if arriving more than 20 minutes after the time indicated on your ticket. \r\n\r\nAny late arrival is subject to availability and a rescheduling fee\r\n\r\nChildren aged 0–5 years can join for free.\r\n\r\nPlease note that some rooms and installations have mirrored floors. Please dress comfortably and in accordance with the tour. Trousers, shorts or tights are recommended. Sunglasses are recommended for day visits. Note that stiletto heels, steel-toe boots and any footwear that could cause damage to the mirrored floors are not allowed on this tour.\r\n\r\nPlease note that there is no storage for personal items. Large bags, large backpacks and luggage are not permitted on this tour.\r\n\r\nProfessional photographs are available to purchase in print and digital format at the end of the tour.\r\n\r\nFood and drinks, including cocktails, are available for purchase on-site, at Après. \r\n\r\nWiFi access is available throughout the Summit.\n\nPlease bring your ticket with you to the attraction.\n\nBe aware that operators may cancel for unforeseen reasons.\n\nYou need to be 18 years or older to book or be accompanied by an adult. ",
            "applicableTerms": [
                {
                    "__typename": "TermsConditions",
                    "policyProvider": "Booking.com"
                },
                {
                    "__typename": "TermsConditions",
                    "policyProvider": "Musement"
                }
            ],
            "cancellationPolicy": {
                "__typename": "AttractionsCancellationPolicy",
                "hasFreeCancellation": true
            },
            "description": "With this ticket to the Summit One Vanderbilt, you’ll see futuristic digital shows inside one of New York’s newest skyscrapers. You’ll also take in views of Manhattan from a height of 370 metres. \r\n\r\nAs you explore three levels of multi-sensory galleries inside the skyscraper, you’ll see digital art installations by internationally acclaimed artists and designers. You’ll see works inspired by stories, optical illusions and interactivity. You’ll also see the busy streets below the building during the ‘Levitation’ experience, which involves standing on a transparent platform over 300 metres above the ground. \r\n\r\nWhen you reach the SUMMIT Terrace, you can see New York’s skyline and views for up to 80 miles. You can also order cocktails and light fare from Café Après.",
            "flags": [
                {
                    "__typename": "AttractionsProductFlags",
                    "flag": "bestseller",
                    "value": true,
                    "rank": 1
                },
                {
                    "__typename": "AttractionsProductFlags",
                    "flag": "bestsellerInMonth",
                    "value": true,
                    "rank": 1
                },
                {
                    "__typename": "AttractionsProductFlags",
                    "flag": "bestsellerInWeek",
                    "value": true,
                    "rank": 1
                },
                {
                    "__typename": "AttractionsProductFlags",
                    "flag": "bestsellerOnWeekends",
                    "value": true,
                    "rank": 1
                },
                {
                    "__typename": "AttractionsProductFlags",
                    "flag": "bestsellerForMuseums",
                    "value": true,
                    "rank": 1
                }
            ],
            "id": "PRCMOkYUz7Um",
            "isBookable": true,
            "labels": [
                {
                    "__typename": "AttractionsLabel",
                    "text": "Free cancellation",
                    "type": "free_cancellation"
                }
            ],
            "name": "SUMMIT One Vanderbilt Tickets",
            "notIncluded": [
                "Ascent experience",
                "Food and drinks"
            ],
            "offers": [
                {
                    "__typename": "Offer",
                    "availabilityType": "date_time",
                    "id": "OF9EGFbfXLkb"
                },
                {
                    "__typename": "Offer",
                    "availabilityType": "date_time",
                    "id": "OFBjhG7pJos5"
                },
                {
                    "__typename": "Offer",
                    "availabilityType": "date_time",
                    "id": "OFgo9yD3iOP3"
                },
                {
                    "__typename": "Offer",
                    "availabilityType": "date_time",
                    "id": "OFsiFVZK2N2n"
                },
                {
                    "__typename": "Offer",
                    "availabilityType": "date_time",
                    "id": "OFakJEcI7zzo"
                }
            ],
            "onSiteRequirements": {
                "__typename": "OnSiteRequirements"
            },
            "operatedBy": "SUMMIT One Vanderbilt",
            "representativePrice": {
                "__typename": "AttractionsPrice",
                "chargeAmount": 46.82,
                "currency": "USD",
                "publicAmount": 46.82
            },
            "restrictions": [
                "Comfortable footwear is recommended."
            ],
            "reviews": {
                "__typename": "AttractionsGetReviewsResponse",
                "total": 3021,
                "reviews": [
                    {
                        "__typename": "AttractionsReview",
                        "id": "RS1WA2lUSx5f",
                        "epochMs": 1729516564000,
                        "numericRating": 5
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RS2HuVDtnjfn",
                        "epochMs": 1729476925000,
                        "numericRating": 5,
                        "user": {
                            "__typename": "AttractionsReviewUser",
                            "name": "Yanci",
                            "cc1": "pr"
                        }
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RSP4tYQiZk8W",
                        "epochMs": 1729474459000,
                        "numericRating": 5
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RSjjBfIEpJ3J",
                        "epochMs": 1729463225000,
                        "language": "fr",
                        "numericRating": 5,
                        "user": {
                            "__typename": "AttractionsReviewUser",
                            "name": "Lionnelle",
                            "cc1": "ch"
                        }
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RS68FtvVasAR",
                        "content": "Amazing experience. Recommend this highly. The views were spectacular and the immersive experiences were wonderful.",
                        "epochMs": 1729456855000,
                        "language": "en-gb",
                        "numericRating": 5,
                        "user": {
                            "__typename": "AttractionsReviewUser",
                            "name": "Rita",
                            "cc1": "au"
                        }
                    }
                ]
            },
            "reviewsStats": {
                "__typename": "AttractionsProductReviewStats",
                "allReviewsCount": 1312,
                "percentage": "96%",
                "combinedNumericStats": {
                    "__typename": "AttractionsProductCombinedReviewStats",
                    "average": 4.7,
                    "total": 2449
                }
            },
            "shortDescription": "Digital art installations and views of New York from a skyscraper terrace",
            "slug": "prcmokyuz7um-summit-one-vanderbilt-tickets",
            "supportedFeatures": {
                "__typename": "AttractionsProductSupportedFeatures",
                "nativeApp": true,
                "nativeAppBookProcess": true,
                "liveAvailabilityCheckSupported": true
            },
            "uniqueSellingPoints": [
                "Three floors of multi-sensory immersive experiences at the top of a skyscraper",
                "Panoramic views of New York and landmarks like the Empire State Building",
                "Futuristic observation deck that combines elements of art and technology"
            ],
            "ufiDetails": {
                "__typename": "AttractionLocationResponse",
                "ufi": 20088325,
                "bCityName": "New York"
            },
            "whatsIncluded": [
                "Admission",
                "Levitation experience"
            ]
        }
    },
    {
        "status": true,
        "message": "Success",
        "data": {
            "__typename": "AttractionsProduct",
            "additionalBookingInfo": {
                "__typename": "AttractionsAdditionalBookingInfo",
                "freeForChildren": {
                    "__typename": "AttractionsFreeForChildren",
                    "age": {
                        "__typename": "MinMax",
                        "label": "Children aged 0 to 6 years can participate for free. "
                    }
                }
            },
            "additionalInfo": "Tickets must be presented at the time specified when booked. Please note you cannot enter before you selected timeslot. \r\n\r\nPlease note that everyone has to go through the security line in order to enter the museum. All visitors and baggage are subject to security screening. \r\n\r\nPlease note that the use of cell phones for talking is prohibited in exhibition spaces and the theatre. \r\n\r\nWheelchairs and other mobility devices can be accommodated. \r\n\r\nPlease limit the number of items that you bring with you. No baggage larger than 8”x17”x19” (20x43x48 cm) will be permitted into the memorial. Items deemed too large or a danger to exhibits are subject to mandatory storage in the cloakroom.\r\n\r\nPersonal photography is allowed, but please be respectful of other visitors.\n\nPlease bring your ticket with you to the attraction.\n\nBe aware that operators may cancel for unforeseen reasons.\n\nYou need to be 18 years or older to book or be accompanied by an adult. ",
            "applicableTerms": [
                {
                    "__typename": "TermsConditions",
                    "policyProvider": "Booking.com"
                },
                {
                    "__typename": "TermsConditions",
                    "policyProvider": "Musement"
                }
            ],
            "cancellationPolicy": {
                "__typename": "AttractionsCancellationPolicy",
                "hasFreeCancellation": true
            },
            "description": "This ticket will give you admission to the 9/11 Memorial & Museum. While there, you'll be able to explore a collection of artefacts, archives and multimedia displays related to the events of 9/11. You will also have the opportunity to see the last visible remains of the Vesey Street staircase, known as the 'Survivors' Staircase'. \r\n\r\nAdditionally, you will be able to visit the Memorial Plaza pools, which were built where the World Trade Center once stood.\r\n",
            "flags": [
                {
                    "__typename": "AttractionsProductFlags",
                    "flag": "bestseller",
                    "value": true,
                    "rank": 3
                },
                {
                    "__typename": "AttractionsProductFlags",
                    "flag": "bestsellerInWeek",
                    "value": true,
                    "rank": 2
                },
                {
                    "__typename": "AttractionsProductFlags",
                    "flag": "bestsellerForMuseums",
                    "value": true,
                    "rank": 2
                }
            ],
            "id": "PRGstbYhf5aJ",
            "isBookable": true,
            "labels": [
                {
                    "__typename": "AttractionsLabel",
                    "text": "Free cancellation",
                    "type": "free_cancellation"
                }
            ],
            "name": "9/11 Memorial & Museum Admission",
            "offers": [
                {
                    "__typename": "Offer",
                    "availabilityType": "date_time",
                    "id": "OFLAHhVEcZnB"
                }
            ],
            "onSiteRequirements": {
                "__typename": "OnSiteRequirements",
                "voucherPrintingRequired": {
                    "__typename": "Value",
                    "value": "false"
                }
            },
            "operatedBy": "9/11 Memorial Museum",
            "representativePrice": {
                "__typename": "AttractionsPrice",
                "chargeAmount": 33,
                "currency": "USD",
                "publicAmount": 33
            },
            "reviews": {
                "__typename": "AttractionsGetReviewsResponse",
                "total": 1298,
                "reviews": [
                    {
                        "__typename": "AttractionsReview",
                        "id": "RSUAtJ0ZAwc1",
                        "epochMs": 1729507560000,
                        "numericRating": 5
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RSWALAoAy0PD",
                        "epochMs": 1729507355000,
                        "numericRating": 5
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RShhPBLdRPC7",
                        "epochMs": 1729477959000,
                        "numericRating": 3
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RS4bVC7OQcIZ",
                        "epochMs": 1729328697000,
                        "language": "de",
                        "numericRating": 5
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RSR5zVrCgQ4E",
                        "epochMs": 1729306391000,
                        "numericRating": 5,
                        "user": {
                            "__typename": "AttractionsReviewUser",
                            "name": "Tamara",
                            "cc1": "ch"
                        }
                    }
                ]
            },
            "reviewsStats": {
                "__typename": "AttractionsProductReviewStats",
                "allReviewsCount": 431,
                "percentage": "97%",
                "combinedNumericStats": {
                    "__typename": "AttractionsProductCombinedReviewStats",
                    "average": 4.8,
                    "total": 1491
                }
            },
            "shortDescription": "Chance to visit a memorial and museum that's dedicated to the 9/11 tragedy",
            "slug": "prgstbyhf5aj-911-memorial-museum-admission",
            "supportedFeatures": {
                "__typename": "AttractionsProductSupportedFeatures",
                "nativeApp": true,
                "nativeAppBookProcess": true,
                "liveAvailabilityCheckSupported": true
            },
            "uniqueSellingPoints": [
                "Self-guided tour of 9/11 Memorial & Museum",
                "Chance to explore exhibits about the 9/11 tragedy",
                "Opportunity to visit the pools at Memorial Plaza"
            ],
            "ufiDetails": {
                "__typename": "AttractionLocationResponse",
                "ufi": 20088325,
                "bCityName": "New York"
            },
            "whatsIncluded": [
                "Admission "
            ]
        }
    }
]

2025-08-25 13:13:25,144 - evaluation_logger_Attraction-110 - INFO - Final Response: <｜begin▁of▁sentence｜># 1. 概述

本文，我们来分享 [《精尽 Spring MVC 源码分析 —— 容器的初始化（二）之 Root WebApplicationContext 容器》](http://svip.iocoder.cn/Spring-MVC/context-init-Root-WebApplicationContext) 的**第二篇：Root WebApplicationContext 容器**。

在 [《精尽 Spring MVC 源码分析 —— 容器的初始化（一）之 Servlet WebApplicationContext 容器》](http://svip.iocoder.cn/Spring-MVC/context-init-Servlet-WebApplicationContext) 中，我们已经分享了 Servlet WebApplicationContext 容器的初始化过程。所以，本文的重点是，Root WebApplicationContext 容器。当然，两者有大量相同的代码，所以本文更多的，是解析差异的部分。

在具体开始之前，我们先来看一段配置。在 `web.xml` 中，我们可能会配置如下：

```xml
<!-- 配置 Spring 配置文件的地址 -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:applicationContext.xml</param-value>
</context-param>

<!-- 配置 ContextLoaderListener -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
```

- 通过 `<context-param />` 的方式，配置 Spring 配置文件的地址。
- 通过 `<listener />` 的方式，配置 ContextLoaderListener 监听器。

而 ContextLoaderListener 的用途是，在 Web 应用启动时，**初始化** Root WebApplicationContext 容器。注意，是**初始化**，而不是创建。默认情况下，Root WebApplicationContext 容器，在 `web.xml` 配置被加载时，就会被创建。但是此时，它未进行初始化。

那么 ContextLoaderListener 是怎么初始化的呢？我们先来看下它的类图：

![ContextLoaderListener 类图](1/1.png)

- 实现 `javax.servlet.ServletContextListener` 接口，在 Servlet 容器启动和关闭时，会触发相应的操作，从而对 Root WebApplicationContext 容器，进行初始化和销毁。

下面，我们开始正式撸源码。

# 2. ContextLoaderListener

`org.springframework.web.context.ContextLoaderListener` ，实现 ServletContextListener 接口，ContextLoader 的监听器实现类。代码如下：

```java
// ContextLoaderListener.java

public class ContextLoaderListener extends ContextLoader implements ServletContextListener {

    /**
     * 构造方法
     */
	public ContextLoaderListener() {
	}

	/**
	 * 构造方法
	 *
	 * @param context 配置的 WebApplicationContext 对象
	 */
	public ContextLoaderListener(WebApplicationContext context) {
		super(context);
	}

	// 实现 ServletContextListener 接口，当 Servlet 容器启动时，会触发该方法，进行初始化。
	@Override
	public void contextInitialized(ServletContextEvent event) {
		// 初始化 WebApplicationContext
		initWebApplicationContext(event.getServletContext());
	}

	// 实现 ServletContextListener 接口，当 Servlet 容器关闭时，会触发该方法，进行销毁。
	@Override
	public void contextDestroyed(ServletContextEvent event) {
		// 销毁 WebApplicationContext
		closeWebApplicationContext(event.getServletContext());
		// 进行清除
		ContextCleanupListener.cleanupAttributes(event.getServletContext());
	}

}
```

- 继承 ContextLoader 类，所以具体的初始化逻辑，在 ContextLoader 中实现。
- 实现 `javax.servlet.ServletContextListener` 接口，实现如下：
  - `#contextInitialized(ServletContextEvent event)` 方法，当 Servlet 容器启动时，会触发该方法，调用 `ContextLoader#initWebApplicationContext(ServletContext servletContext)` 方法，初始化 Root WebApplicationContext 容器。
  - `#contextDestroyed(ServletContextEvent event)` 方法，当 Servlet 容器关闭时，会触发该方法，调用 `ContextLoader#closeWebApplicationContext(ServletContext servletContext)` 方法，销毁 Root WebApplicationContext 容器。而后，调用 `ContextCleanupListener#cleanupAttributes(ServletContext servletContext)` 方法，进行清除。

# 3. ContextLoader

`org.springframework.web.context.ContextLoader` ，用于**初始化** Root WebApplicationContext 容器。

## 3.1 构造方法

```java
// ContextLoader.java

/**
 * 配置在 {@link ServletContext} 的 WebApplicationContext 的键
 */
public static final String CONTEXT_ID_PARAM = "contextId";

/**
 * 配置在 {@link ServletContext} 的 WebApplicationContext 的键
 */
public static final String CONTEXT_CLASS_PARAM = "contextClass";

/**
 * 配置文件的地址的参数名
 */
public static final String CONFIG_LOCATION_PARAM = "contextConfigLocation";

/**
 * 配置的 WebApplicationContext 的实现的类名的键
 */
public static final String CONTEXT_INITIALIZER_CLASSES_PARAM = "contextInitializerClasses";

/**
 * 是否在 ServletContext 中存储的键
 */
public static final String GLOBAL_INITIALIZER_CLASSES_PARAM = "globalInitializerClasses";

/**
 * 默认的配置文件的地址
 */
public static final String DEFAULT_CONFIG_LOCATION = "/WEB-INF/applicationContext.xml";

/**
 * 默认的配置的 WebApplicationContext 的实现的类
 */
public static final String DEFAULT_CONTEXT_CLASS = "org.springframework.web.context.support.XmlWebApplicationContext";

/**
 * 默认的配置的 WebApplicationContext 的实现的类
 */
public static final String DEFAULT_STRATEGIES_PATH = "ContextLoader.properties";

/**
 * 配置的 WebApplicationContext 的实现的类的集合
 */
private static final Properties defaultStrategies;

static {
    // Load default strategy implementations from properties file.
    // This is currently strictly internal and not meant to be customized
    // by application developers.
    try {
        // 创建 ClassPathResource 对象
        ClassPathResource resource = new ClassPathResource(DEFAULT_STRATEGIES_PATH, ContextLoader.class);
        // 创建 Properties 对象，并加载 resource
        defaultStrategies = PropertiesLoaderUtils.loadProperties(resource);
    } catch (IOException ex) {
        throw new IllegalStateException("Could not load 'ContextLoader.properties': " + ex.getMessage());
    }
}

/**
 * 当前 ContextLoader 的 WebApplicationContext 对象
 */
private WebApplicationContext context;

/**
 * 创建 ContextLoader 对象
 */
public ContextLoader() {
}

/**
 * 创建 ContextLoader 对象，并设置 context 属性
 *
 * @param context 配置的 WebApplicationContext 对象
 */
public ContextLoader(WebApplicationContext context) {
	this.context = context;
}
```

- 静态属性，我们只看 `DEFAULT_CONFIG_LOCATION` 和 `DEFAULT_CONTEXT_CLASS` 即可。从 `DEFAULT_CONFIG_LOCATION` 可以看出，默认情况下，Spring 配置文件地址为 `"/WEB-INF/applicationContext.xml"` 。从 `DEFAULT_CONTEXT_CLASS` 可以看出，默认情况下，Root WebApplicationContext 容器是 XmlWebApplicationContext 类。

- 构造方法，有两个，主要看第二个，设置 `context` 属性。而 `context` 属性，就是 Root WebApplicationContext 容器。

## 3.2 initWebApplicationContext

`#initWebApplicationContext(ServletContext servletContext)` 方法，初始化 Root WebApplicationContext 容器。代码如下：

```java
// ContextLoader.java

/**
 * Initialize Spring's web application context for the given servlet context,
 * using the application context provided at construction time, or creating a new one
 * according to the "{@link #CONTEXT_CLASS_PARAM contextClass}" and
 * "{@link #CONFIG_LOCATION_PARAM contextConfigLocation}" context-params.
 * @param servletContext the servlet context to initialize the application context for
 * @return the new WebApplicationContext
 * @see #ContextLoader(WebApplicationContext)
 * @see #CONTEXT_CLASS_PARAM
 * @see #CONFIG_LOCATION_PARAM
 */
public WebApplicationContext initWebApplicationContext(ServletContext servletContext) {
    // <1> 如果已经存在 ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE 对应的 WebApplicationContext 对象，则抛出 IllegalStateException 异常
    if (servletContext.getAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE) != null) {
        throw new IllegalStateException(
                "Cannot initialize context because there is already a root application context present - " +
                "check whether you have multiple ContextLoader* definitions in your web.xml!");
    }

    // 打日志
    servletContext.log("Initializing Spring root WebApplicationContext");

    // 打日志
    Log logger = LogFactory.getLog(ContextLoader.class);
    if (logger.isInfoEnabled()) {
        logger.info("Root WebApplicationContext: initialization started");
    }

    // 记录开始时间
    long startTime = System.currentTimeMillis();

    try {
        // Store context in local instance variable, to guarantee that
        // it is available on ServletContext shutdown.
        // <2> 如果 context 为空，则进行初始化。
        if (this.context == null) {
            this.context = createWebApplicationContext(servletContext);
        }
        // <3> 如果是 ConfigurableWebApplicationContext 类型，则进行配置和刷新
        if (this.context instanceof ConfigurableWebApplicationContext) {
            ConfigurableWebApplicationContext cwac = (ConfigurableWebApplicationContext) this.context;
            // 如果未激活，则进行配置和刷新
            if (!cwac.isActive()) {
                // The context has not yet been refreshed -> provide services such as
                // setting the parent context, setting the application context id, etc
                // <3.1> 设置父容器
                if (cwac.getParent() == null) {
                    // The context instance was injected without an explicit parent ->
                    // determine parent for root web application context, if any.
                    ApplicationContext parent = loadParentContext(servletContext);
                    cwac.setParent(parent);
                }
                // <3.2> 配置和刷新 WebApplicationContext
                configureAndRefreshWebApplicationContext(cwac, servletContext);
            }
        }
        // <4> 设置到 ServletContext 中
        servletContext.setAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE, this.context);

        // <5> 设置到 currentContext 或 currentContextPerThread 中
        ClassLoader ccl = Thread.currentThread().getContextClassLoader();
        if (ccl == ContextLoader.class.getClassLoader()) {
            currentContext = this.context;
        } else if (ccl != null) {
            currentContextPerThread.put(ccl, this.context);
        }

        // 打日志
        if (logger.isInfoEnabled()) {
            long elapsedTime = System.currentTimeMillis() - startTime;
            logger.info("Root WebApplicationContext initialized in " + elapsedTime + " ms");
        }

        // <6> 返回
        return this.context;
    } catch (RuntimeException | Error ex) {
        logger.error("Context initialization failed", ex);
        servletContext.setAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE, ex);
        throw ex;
    }
}
```

- `<1>` 处，如果已经存在 `ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE` 对应的 WebApplicationContext 对象，则抛出 IllegalStateException 异常。也就是说，Root WebApplicationContext 容器，只能有一个。

- `<2>` 处，如果 `context` 为空，则调用 `#createWebApplicationContext(ServletContext sc)` 方法，进行创建。详细解析，见 [「3.3 createWebApplicationContext」](http://svip.iocoder.cn/Spring-MVC/context-init-Root-WebApplicationContext/#) 。

- `<3>` 处，如果是 ConfigurableWebApplicationContext 类型，则进行配置和刷新。

  - `<3.1>` 处，设置父容器。但是，对于 Root WebApplicationContext 容器来说，父容器为 `null` 。所以，此处的 `#loadParentContext(ServletContext servletContext)` 方法，返回的也是 `null` 。代码如下：

    ```java
    // ContextLoader.java
    
    /**
     * Return the parent for the root web application context, if any.
     * <p>Default implementation looks for a {@link #CONTEXT_CLASS_PARAM "contextClass"}
     * parameter at the servlet context level and falls back to the
     * {@link org.springframework.context.support.ClassPathXmlApplicationContext}
     * class if not found.
     * @param servletContext current servlet context
     * @return the parent context, or {@code null} if none
     * @see org.springframework.web.context.WebApplicationContext#getParent()
     */
    @Nullable
    protected ApplicationContext loadParentContext(ServletContext servletContext) {
    	return null;
    }
    ```

    - 返回 `null` 。所以，对于 Root WebApplicationContext 容器来说，父容器为 `null` 。😈 但是，对于 Spring MVC 提供的 `org.springframework.web.context.support.XmlWebApplicationContext` 来说，它自己提供了设置父容器的逻辑。当然，这是后话。

  - `<3.2>` 处，调用 `#configureAndRefreshWebApplicationContext(ConfigurableWebApplicationContext wac, ServletContext sc)` 方法，配置和刷新 WebApplicationContext 。详细解析，见 [「3.4 configureAndRefreshWebApplicationContext」](http://svip.iocoder.cn/Spring-MVC/context-init-Root-WebApplicationContext/#) 。

- `<4>` 处，设置到 ServletContext 中。

- `<5>` 处，设置到 `currentContext` 或 `currentContextPerThread` 中。代码如下：

  ```java
  // ContextLoader.java
  
  /**
   * The root WebApplicationContext instance that this loader manages.
   */
  @Nullable
  private WebApplicationContext context;
  
  /**
   * Map from (thread context) ClassLoader to corresponding 'current' WebApplicationContext.
   */
  private static final Map<ClassLoader, WebApplicationContext> currentContextPerThread = new ConcurrentHashMap<>(1);
  
  /**
   * The 'current' WebApplicationContext, if the ContextLoader class is
   * deployed in the web app ClassLoader itself.
   */
  @Nullable
  private static WebApplicationContext currentContext;
  ```

  - 根据当前线程的 ClassLoader 的情况，设置到不同的属性。当然，具体怎么用，我们暂时不需要了解。

- `<6>` 处，返回初始化的 Root WebApplicationContext 容器。

## 3.3 createWebApplicationContext

`#createWebApplicationContext(ServletContext sc)` 方法，创建 Root WebApplicationContext 容器。代码如下：

```java
// ContextLoader.java

/**
 * Instantiate the root WebApplicationContext for this loader, either the
 * default context class or a custom context class if specified.
 * <p>This implementation expects custom contexts to implement the
 * {@link ConfigurableWebApplicationContext} interface.
 * Can be overridden in subclasses.
 * <p>In addition, {@link #customizeContext} gets called prior to refreshing the
 * context, allowing subclasses to perform custom modifications to the context.
 * @param sc the current servlet context
 * @return the root WebApplicationContext
 * @see ConfigurableWebApplicationContext
 */
protected WebApplicationContext createWebApplicationContext(ServletContext sc) {
    // <1> 获得 context 的类
    Class<?> contextClass = determineContextClass(sc);
    // <2> 判断是否是 ConfigurableWebApplicationContext 的子类
    if (!ConfigurableWebApplicationContext.class.isAssignableFrom(contextClass)) {
        throw new ApplicationContextException("Custom context class [" + contextClass.getName() +
                "] is not of type [" + ConfigurableWebApplicationContext.class.getName() + "]");
    }
    // <3> 创建 context 类的对象
    return (ConfigurableWebApplicationContext) BeanUtils.instantiateClass(contextClass);
}
```

- `<1>` 处，调用 `#determineContextClass(ServletContext servletContext)` 方法，获得 context 的类。代码如下：

  ```java
  // ContextLoader.java
  
  /**
   * Return the WebApplicationContext implementation class to use, either the
   * default XmlWebApplicationContext or a custom context class if specified.
   * @param servletContext current servlet context
   * @return the WebApplicationContext implementation class to use
   * @see #CONTEXT_CLASS_PARAM
   * @see org.springframework.web.context.support.XmlWebApplicationContext
   */
  protected Class<?> determineContextClass(ServletContext servletContext) {
      // 获得配置的 context 的类
      String contextClassName = servletContext.getInitParameter(CONTEXT_CLASS_PARAM);
      // 如果配置，则使用该类
      if (contextClassName != null) {
          try {
              return ClassUtils.forName(contextClassName, ClassUtils.getDefaultClassLoader());
          } catch (ClassNotFoundException ex) {
              throw new ApplicationContextException(
                      "Failed to load custom context class [" + contextClassName + "]", ex);
          }
      // 如果未配置，则使用默认的 DEFAULT_CONTEXT_CLASS 类
      } else {
          contextClassName = defaultStrategies.getProperty(WebApplicationContext.class.getName());
          try {
              return ClassUtils.forName(contextClassName, ContextLoader.class.getClassLoader());
          } catch (ClassNotFoundException ex) {
              throw new ApplicationContextException(
                      "Failed to load default context class [" + contextClassName + "]", ex);
          }
      }
  }
  ```

  - 优先，从 ServletContext 的配置中，获得 `contextClass` 对应的类。
  - 如果未配置，则使用默认的 `DEFAULT_CONTEXT_CLASS` 类，即 `"org.springframework.web.context.support.XmlWebApplicationContext"` 。

- `<2>` 处，判断是否是 ConfigurableWebApplicationContext 的子类。如果不是，则抛出 ApplicationContextException 异常。

- `<3>` 处，创建 `contextClass` 类的对象，并返回。

## 3.4 configureAndRefreshWebApplicationContext

`#configureAndRefreshWebApplicationContext(ConfigurableWebApplicationContext wac, ServletContext sc)` 方法，配置和刷新 WebApplicationContext 。代码如下：

```java
// ContextLoader.java

protected void configureAndRefreshWebApplicationContext(ConfigurableWebApplicationContext wac, ServletContext sc) {
    // <1> 如果 wac 使用了默认的编号，则重新设置 id 属性
    if (ObjectUtils.identityToString(wac).equals(wac.getId())) {
        // The application context id is still set to its original default value
        // -> assign a more useful id based on available information
        // 获得 id 属性
        String

2025-08-25 13:13:31,312 - evaluation_logger_Attraction-110 - INFO - Complete Result: {'score': 0, 'reason': "The response does not address any part of the user's query about trending attractions in New York or ticket availability."}
2025-08-25 13:13:37,664 - evaluation_logger_Attraction-110 - INFO - Correct Result: {'score': 0, 'reason': 'All information in the response is incorrect.'}
2025-08-25 13:13:37,664 - evaluation_logger_Attraction-110 - INFO - Message: Success.
2025-08-25 13:13:37,664 - evaluation_logger_Attraction-110 - INFO - Success turn num = 3
2025-08-25 13:13:37,664 - evaluation_logger_Attraction-110 - INFO - ----------------------------------------------------------------------------------------------------
