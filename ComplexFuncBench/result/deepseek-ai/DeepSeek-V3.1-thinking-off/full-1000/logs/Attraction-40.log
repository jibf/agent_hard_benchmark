2025-08-25 12:58:32,428 - evaluation_logger_Attraction-40 - INFO - Test Example Attraction-40
2025-08-25 12:58:32,428 - evaluation_logger_Attraction-40 - INFO - Query: I'm thinking about heading to Rome. Can you tell me which museums are currently trending?
2025-08-25 12:58:41,708 - evaluation_logger_Attraction-40 - INFO - Function Calls: 
[
    {
        "name": "Search_Attraction_Location",
        "arguments": {
            "query": "Rome"
        }
    }
]

2025-08-25 12:58:41,708 - evaluation_logger_Attraction-40 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Attraction_Location",
        "arguments": {
            "query": "Rome"
        }
    },
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOi0xMjY2OTN9",
            "sortBy": "trending"
        }
    }
]

2025-08-25 12:58:41,708 - evaluation_logger_Attraction-40 - INFO - Start compare_single_call: 
{'name': 'Search_Attraction_Location', 'arguments': {'query': 'Rome'}}
{'name': 'Search_Attraction_Location', 'arguments': {'query': 'Rome'}}
2025-08-25 12:58:41,708 - evaluation_logger_Attraction-40 - INFO - Rule-based compare success.
2025-08-25 12:58:41,708 - evaluation_logger_Attraction-40 - INFO - Success matched: [{'name': 'Search_Attraction_Location', 'arguments': {'query': 'Rome'}}]
2025-08-25 12:58:41,708 - evaluation_logger_Attraction-40 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "destinations": [
                {
                    "id": "eyJ1ZmkiOi0xMjY2OTN9",
                    "__typename": "AttractionsSearchDestinationSuggestion",
                    "ufi": -126693,
                    "country": "Italy",
                    "cityName": "Rome",
                    "productCount": 4795,
                    "cc1": "it"
                }
            ]
        }
    }
]

2025-08-25 12:58:49,962 - evaluation_logger_Attraction-40 - INFO - Function Calls: 
[
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOi0xMjY2OTN9",
            "sortBy": "trending"
        }
    }
]

2025-08-25 12:58:49,963 - evaluation_logger_Attraction-40 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOi0xMjY2OTN9",
            "sortBy": "trending"
        }
    }
]

2025-08-25 12:58:49,963 - evaluation_logger_Attraction-40 - INFO - Start compare_single_call: 
{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOi0xMjY2OTN9', 'sortBy': 'trending'}}
{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOi0xMjY2OTN9', 'sortBy': 'trending'}}
2025-08-25 12:58:49,963 - evaluation_logger_Attraction-40 - INFO - Rule-based compare success.
2025-08-25 12:58:49,963 - evaluation_logger_Attraction-40 - INFO - Success matched: [{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOi0xMjY2OTN9', 'sortBy': 'trending'}}]
2025-08-25 12:58:49,963 - evaluation_logger_Attraction-40 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "__typename": "AttractionsProductSearchResponse",
            "products": [
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": false
                    },
                    "id": "PRNkzsd3arln",
                    "name": "Skip-The-Line Tickets To Vatican Museum And Sistine chapel",
                    "slug": "prnkzsd3arln-skip-the-line-tickets-to-vatican-museum-and-sistine-chapel",
                    "shortDescription": "Vatican City, one of the most sacred locations in Christianity, is a monument to a spiritual ques...",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 78.17,
                        "currency": "USD",
                        "publicAmount": 78.17
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 0,
                        "percentage": "0",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.6,
                            "total": 9
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Rome",
                        "ufi": -126693
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIAFlKNbEZfv"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIvPu8Uq5ebZ"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIa3OXANFGxZ"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIGcFVyBrZGO"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI7VipmmnbYS"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    }
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRXU8Ciq2aB5",
                    "name": "Vatican City Tickets - Museums & Sistine Chapel",
                    "slug": "prxu8ciq2ab5-vatican-city-tickets-museums-sistine-chapel",
                    "shortDescription": "With this priority access admission you will skip the line for Vatican museums & Sistine Chapel. ...",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 61.42,
                        "currency": "USD",
                        "publicAmount": 61.42
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Rome",
                        "ufi": -126693
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OICX1yIaknXa"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIoaNvjp8MHb"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIy48u8ZcBO5"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    }
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRZz8czGK1O1",
                    "name": "Skip The Ticketing Queue: Colosseum, Roman Forum & Palatine Hill",
                    "slug": "przz8czgk1o1-colosseum-underground-and-arena-floor-access-ticket",
                    "shortDescription": "Skip the ticketing line entry to the Colosseum will allow you to save time and avoid the frustrat...",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 43.55,
                        "currency": "USD",
                        "publicAmount": 43.55
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 0,
                        "percentage": "0",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.2,
                            "total": 166
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Rome",
                        "ufi": -126693
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIcdfYpZzTIo"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIPGgUN11ZsH"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIuEJSQQkrNj"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OITLJUEgmhF9"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIOSCcvRtYYS"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIrAaX1iafY7"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    }
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRzbGI7TRhEC",
                    "name": "Admission to the Vatican Museum & Sistine Chapel",
                    "slug": "przbgi7trhec-admission-to-the-vatican-museum-sistine-chapel",
                    "shortDescription": "Skip-the-line admission to see two of Rome's most popular attractions",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 54.72,
                        "currency": "USD",
                        "publicAmount": 54.72
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 1237,
                        "percentage": "83%",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.1,
                            "total": 1995
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Rome",
                        "ufi": -126693
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIRH7ewh732v"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OINBxlIbslnp"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestseller",
                            "value": true,
                            "rank": 3
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerInMonth",
                            "value": true,
                            "rank": 2
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerInWeek",
                            "value": true,
                            "rank": 1
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerOnWeekends",
                            "value": true,
                            "rank": 2
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerForMuseums",
                            "value": true,
                            "rank": 1
                        }
                    ]
                },
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": false
                    },
                    "id": "PRBlwzjMIvr0",
                    "name": "Colosseum Skip The Line With Roman Forum & Palatine Hill Access",
                    "slug": "prblwzjmivr0-colosseum-skip-the-line-with-roman-forum-palatine-hill-access",
                    "shortDescription": "Our ticket offers the convenience of skip-the-line access, allowing you to bypass the queues and ...",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 43.55,
                        "currency": "USD",
                        "publicAmount": 43.55
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 0,
                        "percentage": "0",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.1,
                            "total": 47
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Rome",
                        "ufi": -126693
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OINuiXzKHInA"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OInizF0dSnCD"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    }
                }
            ],
            "filterStats": {
                "__typename": "FilterStats",
                "unfilteredProductCount": 4440,
                "filteredProductCount": 4440
            },
            "sorters": [
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Our top picks",
                    "value": "trending"
                },
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Most popular",
                    "value": "attr_book_score"
                },
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Lowest price",
                    "value": "lowest_price"
                }
            ],
            "defaultSorter": {
                "__typename": "AttractionsSorterOption",
                "name": "Our top picks",
                "value": "trending"
            },
            "filterOptions": {
                "__typename": "FilterOptions",
                "typeFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Tours",
                        "tagname": "tours",
                        "productCount": 3631
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Activities",
                        "tagname": "activities",
                        "productCount": 343
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Transfers & services",
                        "tagname": "transfers-services",
                        "productCount": 332
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Attractions",
                        "tagname": "attractions",
                        "productCount": 61
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Landmarks",
                        "tagname": "landmarks",
                        "productCount": 43
                    }
                ],
                "labelFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Free cancellation",
                        "tagname": "free_cancellation",
                        "productCount": 3489
                    }
                ],
                "ufiFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Rome",
                        "tagname": "-126693",
                        "productCount": 4301
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Bracciano",
                        "tagname": "-112072",
                        "productCount": 105
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Lido di Ostia",
                        "tagname": "-120159",
                        "productCount": 26
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Centocelle",
                        "tagname": "-115026",
                        "productCount": 5
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Tivoli",
                        "tagname": "-130829",
                        "productCount": 2
                    }
                ],
                "priceFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "US$0 - US$22",
                        "tagname": "b0",
                        "productCount": 157
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$22 - US$44",
                        "tagname": "b1",
                        "productCount": 277
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$44 - US$83",
                        "tagname": "b2",
                        "productCount": 533
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$83 - US$138",
                        "tagname": "b3",
                        "productCount": 679
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$138+",
                        "tagname": "b4",
                        "productCount": 2818
                    }
                ]
            }
        }
    }
]

2025-08-25 13:00:31,746 - evaluation_logger_Attraction-40 - INFO - Final Response: <｜begin▁of▁sentence｜># 1. 概述

本文，我们来分享 [《精尽 Spring Boot 源码分析 —— SpringApplication》](http://svip.iocoder.cn/Spring-Boot/SpringApplication/) 的**初始化**的源码解析。

在 SpringApplication 实例对象创建时，会进行一些初始化的工作。虽然说，它还没有开始启动，但是我们有**必要**先了解 SpringApplication 实例的变量，以及初始化时做了哪些事。

# 2. SpringApplication 构造方法

`org.springframework.boot.SpringApplication` ，Spring 应用启动器。它的构造方法，主要代码如下：

```java
// SpringApplication.java

/**
 * 资源加载器
 */
private ResourceLoader resourceLoader;
/**
 * 主要的 Java Config 类的数组
 */
private Set<Class<?>> primarySources;
/**
 * Web 应用类型
 */
private WebApplicationType webApplicationType;
/**
 * 应用上下文初始化器（ApplicationContextInitializer）数组
 */
private List<ApplicationContextInitializer<?>> initializers;
/**
 * 应用事件监听器（ApplicationListener）数组
 */
private List<ApplicationListener<?>> listeners;

public SpringApplication(ResourceLoader resourceLoader, Class<?>... primarySources) {
    // 设置 resourceLoader
    this.resourceLoader = resourceLoader;
    // 断言 primarySources 非空
    Assert.notNull(primarySources, "PrimarySources must not be null");
    // 初始化 primarySources
    this.primarySources = new LinkedHashSet<>(Arrays.asList(primarySources));
    // 判断 Web 应用类型
    this.webApplicationType = WebApplicationType.deduceFromClasspath();
    // 设置初始化器
    setInitializers((Collection) getSpringFactoriesInstances(ApplicationContextInitializer.class));
    // 设置监听器
    setListeners((Collection) getSpringFactoriesInstances(ApplicationListener.class));
    // 推断主应用类
    this.mainApplicationClass = deduceMainApplicationClass();
}
```

- 虽然代码不长，但是每一行都是关键。我们逐行来看。

## 2.1 resourceLoader

`resourceLoader` 属性，资源加载器。可以暂时不理解，后续文章会详细解析。

## 2.2 primarySources

`primarySources` 属性，主要的 Java Config 类的数组。在文初的示例中，就是 `DemoApplication` 类。

## 2.3 webApplicationType

`webApplicationType` 属性，Web 应用类型。通过 `WebApplicationType#deduceFromClasspath()` 方法，来推断类型。代码如下：

```java
// WebApplicationType.java

static WebApplicationType deduceFromClasspath() {
	// classpath 下，如果有 org.springframework.web.reactive.DispatcherHandler ，并且不存在 org.springframework.web.servlet.DispatcherServlet 和 org.glassfish.jersey.servlet.ServletContainer 类，则定义为 REACTIVE 类型
	if (ClassUtils.isPresent(WEBFLUX_INDICATOR_CLASS, null) && !ClassUtils.isPresent(WEBMVC_INDICATOR_CLASS, null)
			&& !ClassUtils.isPresent(JERSEY_INDICATOR_CLASS, null)) {
		return WebApplicationType.REACTIVE;
	}
	// classpath 下，如果不存在 javax.servlet.Servlet 和 org.springframework.web.context.ConfigurableWebApplicationContext 类，则定义为 NONE 类型
	for (String className : SERVLET_INDICATOR_CLASSES) {
		if (!ClassUtils.isPresent(className, null)) {
			return WebApplicationType.NONE;
		}
	}
	// 否则，定义为 SERVLET 类型
	return WebApplicationType.SERVLET;
}
```

- 根据 classpath 中，判断是否存在指定的类，从而推断 Web 应用类型。
- 三种 Web 应用类型，枚举在 WebApplicationType 中。代码如下：

```java
// WebApplicationType.java

public enum WebApplicationType {

	/**
	 * 非 Web 项目
	 */
	NONE,

	/**
	 * 基于 Servlet 的 Web 项目
	 */
	SERVLET,

	/**
	 * 基于 Reactive 的 Web 项目
	 */
	REACTIVE

}
```

## 2.4 initializers

`initializers` 属性，应用上下文初始化器（ApplicationContextInitializer）数组。通过 `#getSpringFactoriesInstances(ApplicationContextInitializer.class)` 方法，进行获得。详细解析，见 [「2.6 getSpringFactoriesInstances」](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) 。

## 2.5 listeners

`listeners` 属性，应用事件监听器（ApplicationListener）数组。通过 `#getSpringFactoriesInstances(ApplicationListener.class)` 方法，进行获得。详细解析，见 [「2.6 getSpringFactoriesInstances」](http://svip.iocoder.cn/Spring-Boot/SpringApplication/#) 。

## 2.6 getSpringFactoriesInstances

`#getSpringFactoriesInstances(Class<T> type)` 方法，获得对应的 Spring Factory 机制创建的类数组。代码如下：

```java
// SpringApplication.java

private <T> Collection<T> getSpringFactoriesInstances(Class<T> type) {
    return getSpringFactoriesInstances(type, new Class<?>[] {});
}

private <T> Collection<T> getSpringFactoriesInstances(Class<T> type, Class<?>[] parameterTypes, Object... args) {
    ClassLoader classLoader = getClassLoader();
    // Use names and ensure unique to protect against duplicates
    // <1> 加载指定类型对应的，在 `META-INF/spring.factories` 里的类名的数组
    Set<String> names = new LinkedHashSet<>(SpringFactoriesLoader.loadFactoryNames(type, classLoader));
    // <2> 创建对象
    List<T> instances = createSpringFactoriesInstances(type, parameterTypes, classLoader, args, names);
    // <3> 排序
    AnnotationAwareOrderComparator.sort(instances);
    return instances;
}
```

- `<1>` 处：调用 `SpringFactoriesLoader#loadFactoryNames(Class<?> factoryClass, ClassLoader classLoader)` 方法，加载指定类型对应的，在 `META-INF/spring.factories` 里的类名的数组。

  - 在 `spring-boot` 项目中的 `META-INF/spring.factories` 文件，就有 ApplicationContextInitializer、ApplicationListener 的配置。如下图所示：![spring.factories](SpringApplication.assets/01.png)

- `<2>` 处：调用 `#createSpringFactoriesInstances(Class<T> type, Class<?>[] parameterTypes, ClassLoader classLoader, Object[] args, Set<String> names)` 方法，创建对象数组。代码如下：

  ```java
  // SpringApplication.java
  
  private <T> List<T> createSpringFactoriesInstances(Class<T> type, Class<?>[] parameterTypes,
  		ClassLoader classLoader, Object[] args, Set<String> names) {
  	List<T> instances = new ArrayList<>(names.size());
  	for (String name : names) {
  		try {
  			Class<?> instanceClass = ClassUtils.forName(name, classLoader);
  			Assert.isAssignable(type, instanceClass);
  			Constructor<?> constructor = instanceClass.getDeclaredConstructor(parameterTypes);
  			T instance = (T) BeanUtils.instantiateClass(constructor, args);
  			instances.add(instance);
  		} catch (Throwable ex) {
  			throw new IllegalArgumentException("Cannot instantiate " + type + " : " + name, ex);
  		}
  	}
  	return instances;
  }
  ```

  - 通过反射，创建对象。

- `<3>` 处：调用 `AnnotationAwareOrderComparator#sort(List<?> list)` 方法，排序对象数组。

  - 关于 Order 排序，如果不了解的胖友，可以看看 [《【Spring】Spring Order 接口与 Ordered 排序接口》](https://www.jianshu.com/p/7947b00b7b9e) 文章。

## 2.7 mainApplicationClass

`mainApplicationClass` 属性，调用 `#deduceMainApplicationClass()` 方法，推断主应用类。代码如下：

```java
// SpringApplication.java

private Class<?> deduceMainApplicationClass() {
    try {
        // 获得当前 StackTraceElement 数组
        StackTraceElement[] stackTrace = new RuntimeException().getStackTrace();
        // 遍历每个 StackTraceElement ，通过方法名是否为 main 方法，从而获得主应用类
        for (StackTraceElement stackTraceElement : stackTrace) {
            if ("main".equals(stackTraceElement.getMethodName())) {
                return Class.forName(stackTraceElement.getClassName());
            }
        }
    } catch (ClassNotFoundException ex) {
        // Swallow and continue
    }
    return null;
}
```

- 通过异常的方式，获取当前 StackTraceElement 数组，然后遍历，判断哪个方法名为 `"main"` 方法，从而获得主应用类。

# 3. 小结

至此，我们已经完成了 SpringApplication 实例的初始化。但是，此时它并未启动，即并未真正启动 Spring 应用。

在下一篇文章中，我们将开始真正启动 Spring 应用。

2025-08-25 13:00:36,374 - evaluation_logger_Attraction-40 - INFO - Complete Result: {'score': 0, 'reason': 'no requested information is addressed'}
2025-08-25 13:00:43,145 - evaluation_logger_Attraction-40 - INFO - Correct Result: {'score': 0, 'reason': 'All information in the response is incorrect.'}
2025-08-25 13:00:43,146 - evaluation_logger_Attraction-40 - INFO - Message: Success.
2025-08-25 13:00:43,146 - evaluation_logger_Attraction-40 - INFO - Success turn num = 2
2025-08-25 13:00:43,146 - evaluation_logger_Attraction-40 - INFO - ----------------------------------------------------------------------------------------------------
