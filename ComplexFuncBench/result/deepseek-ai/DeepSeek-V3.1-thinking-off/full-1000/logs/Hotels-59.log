2025-08-25 12:39:41,459 - evaluation_logger_Hotels-59 - INFO - Test Example Hotels-59
2025-08-25 12:39:41,459 - evaluation_logger_Hotels-59 - INFO - Query: My friends and I are planning to go to London to celebrate New Year's from December 5, 2024, to December 15, 2024. We hope to find a hotel near Big Ben. We also want detailed information and payment options for these hotels.
2025-08-25 12:39:49,235 - evaluation_logger_Hotels-59 - INFO - Function Calls: 
[
    {
        "name": "Location_to_Lat_Long",
        "arguments": {
            "query": "Big Ben"
        }
    }
]

2025-08-25 12:39:49,236 - evaluation_logger_Hotels-59 - INFO - Golden Function Call: 
[
    {
        "name": "Location_to_Lat_Long",
        "arguments": {
            "query": "Big Ben"
        }
    },
    {
        "name": "Search_Hotels_By_Coordinates",
        "arguments": {
            "arrival_date": "2024-12-05",
            "departure_date": "2024-12-15",
            "latitude": "51.50072919999999",
            "longitude": "-0.1246254"
        }
    }
]

2025-08-25 12:39:49,236 - evaluation_logger_Hotels-59 - INFO - Start compare_single_call: 
{'name': 'Location_to_Lat_Long', 'arguments': {'query': 'Big Ben'}}
{'name': 'Location_to_Lat_Long', 'arguments': {'query': 'Big Ben'}}
2025-08-25 12:39:49,236 - evaluation_logger_Hotels-59 - INFO - Rule-based compare success.
2025-08-25 12:39:49,236 - evaluation_logger_Hotels-59 - INFO - Success matched: [{'name': 'Location_to_Lat_Long', 'arguments': {'query': 'Big Ben'}}]
2025-08-25 12:39:49,236 - evaluation_logger_Hotels-59 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "business_status": "OPERATIONAL",
                "formatted_address": "London SW1A 0AA, United Kingdom",
                "geometry": {
                    "location": {
                        "lat": 51.50072919999999,
                        "lng": -0.1246254
                    },
                    "viewport": {
                        "northeast": {
                            "lat": 51.50211092989272,
                            "lng": -0.12381425
                        },
                        "southwest": {
                            "lat": 51.49941127010727,
                            "lng": -0.12695525
                        }
                    }
                },
                "name": "Big Ben",
                "place_id": "ChIJ2dGMjMMEdkgRqVqkuXQkj7c",
                "plus_code": {
                    "compound_code": "GV2G+74 London, United Kingdom",
                    "global_code": "9C3XGV2G+74"
                },
                "rating": 4.5,
                "reference": "ChIJ2dGMjMMEdkgRqVqkuXQkj7c",
                "types": [
                    "tourist_attraction",
                    "point_of_interest",
                    "establishment"
                ],
                "user_ratings_total": 70405
            }
        ]
    }
]

2025-08-25 12:40:00,703 - evaluation_logger_Hotels-59 - INFO - Function Calls: 
[
    {
        "name": "Search_Hotels_By_Coordinates",
        "arguments": {
            "latitude": "51.50072919999999",
            "longitude": "-0.1246254",
            "arrival_date": "2024-12-05",
            "departure_date": "2024-12-15"
        }
    }
]

2025-08-25 12:40:00,703 - evaluation_logger_Hotels-59 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Hotels_By_Coordinates",
        "arguments": {
            "arrival_date": "2024-12-05",
            "departure_date": "2024-12-15",
            "latitude": "51.50072919999999",
            "longitude": "-0.1246254"
        }
    },
    {
        "name": "Get_Hotel_Details",
        "arguments": {
            "hotel_id": "321100"
        }
    },
    {
        "name": "Payment_features_of_the_Hotel",
        "arguments": {
            "hotel_id": "321100"
        }
    }
]

2025-08-25 12:40:00,703 - evaluation_logger_Hotels-59 - INFO - Start compare_single_call: 
{'name': 'Search_Hotels_By_Coordinates', 'arguments': {'arrival_date': '2024-12-05', 'departure_date': '2024-12-15', 'latitude': '51.50072919999999', 'longitude': '-0.1246254'}}
{'name': 'Search_Hotels_By_Coordinates', 'arguments': {'arrival_date': '2024-12-05', 'departure_date': '2024-12-15', 'latitude': '51.50072919999999', 'longitude': '-0.1246254'}}
2025-08-25 12:40:00,703 - evaluation_logger_Hotels-59 - INFO - Rule-based compare success.
2025-08-25 12:40:00,703 - evaluation_logger_Hotels-59 - INFO - Success matched: [{'name': 'Search_Hotels_By_Coordinates', 'arguments': {'arrival_date': '2024-12-05', 'departure_date': '2024-12-15', 'latitude': '51.50072919999999', 'longitude': '-0.1246254'}}]
2025-08-25 12:40:00,703 - evaluation_logger_Hotels-59 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "unfiltered_count": 37423,
            "b_max_los_data": {
                "max_allowed_los": 90,
                "has_extended_los": 1,
                "experiment": "long_stays_ios_extend_los_2",
                "is_fullon": 0,
                "default_los": 45,
                "extended_los": 90
            },
            "primary_count": 1,
            "count": 1,
            "room_distribution": [
                {
                    "adults": "1"
                }
            ],
            "extended_count": 0,
            "page_loading_threshold": 10,
            "result": [
                {
                    "hotel_id": 321100,
                    "preferred_plus": 1,
                    "review_score_word": "Very good",
                    "class_is_estimated": 0,
                    "badges": [
                        {
                            "badge_variant": "constructive",
                            "id": "Mobile Rate",
                            "text": "Mobile-only price"
                        }
                    ],
                    "bwallet": {
                        "hotel_eligibility": 0
                    },
                    "default_wishlist_name": "Alton",
                    "timezone": "Europe/London",
                    "review_nr": 1327,
                    "last_reservation_data": {
                        "last_reservation_ellapsed_months": 1
                    },
                    "review_score": 8,
                    "longitude": -1.04144811630249,
                    "countrycode": "gb",
                    "genius_discount_percentage": 0,
                    "has_free_parking": 1,
                    "city_in_trans": "in Alton",
                    "main_photo_id": 532261768,
                    "city": "Alton",
                    "min_total_price": 661.01,
                    "is_genius_deal": 0,
                    "is_free_cancellable": 1,
                    "checkin": {
                        "from": "15:00",
                        "until": "00:00"
                    },
                    "hotel_name_trans": "The Angel Hotel",
                    "unit_configuration_label": "<b>Hotel room</b>: 2Â beds",
                    "accommodation_type": 204,
                    "preferred": 1,
                    "soldout": 0,
                    "ufi": -2588181,
                    "composite_price_breakdown": {
                        "has_long_stays_weekly_rate_price": 0,
                        "net_amount": {
                            "currency": "USD",
                            "value": 703.504856463165,
                            "amount_rounded": "US$704",
                            "amount_unrounded": "US$703.50"
                        },
                        "strikethrough_amount_per_night": {
                            "amount_rounded": "US$104",
                            "amount_unrounded": "US$103.76",
                            "currency": "USD",
                            "value": 103.761642768902
                        },
                        "charges_details": {
                            "mode": "all_included",
                            "amount": {
                                "value": 0,
                                "currency": "USD"
                            }
                        },
                        "included_taxes_and_charges_amount": {
                            "value": 155.642897403357,
                            "currency": "USD",
                            "amount_unrounded": "US$155.64",
                            "amount_rounded": "US$156"
                        },
                        "gross_amount_per_night": {
                            "amount_unrounded": "US$85.91",
                            "amount_rounded": "US$86",
                            "value": 85.9147753866522,
                            "currency": "USD"
                        },
                        "strikethrough_amount": {
                            "currency": "USD",
                            "value": 1037.61642768902,
                            "amount_rounded": "US$1,038",
                            "amount_unrounded": "US$1,037.62"
                        },
                        "discounted_amount": {
                            "amount_rounded": "US$178",
                            "amount_unrounded": "US$178.47",
                            "currency": "USD",
                            "value": 178.468673822502
                        },
                        "items": [
                            {
                                "name": "VAT",
                                "item_amount": {
                                    "value": 155.642897403357,
                                    "currency": "USD",
                                    "amount_unrounded": "US$155.64",
                                    "amount_rounded": "US$156"
                                },
                                "kind": "charge",
                                "base": {
                                    "percentage": 20,
                                    "kind": "percentage"
                                },
                                "details": "20 % VAT",
                                "inclusion_type": "included"
                            },
                            {
                                "item_amount": {
                                    "currency": "USD",
                                    "value": 103.759043268883,
                                    "amount_rounded": "US$104",
                                    "amount_unrounded": "US$103.76"
                                },
                                "kind": "discount",
                                "name": "Mobile-only price",
                                "identifier": "mobile-discount",
                                "base": {
                                    "kind": "rate"
                                },
                                "details": "Youâre getting a reduced rate compared to the rate available on a computer or laptop."
                            },
                            {
                                "details": "Youâre getting a reduced rate because Booking.com is paying part of the price.",
                                "base": {
                                    "kind": "bsb"
                                },
                                "identifier": "BSB",
                                "item_amount": {
                                    "amount_rounded": "US$75",
                                    "amount_unrounded": "US$74.71",
                                    "currency": "USD",
                                    "value": 74.709630553619
                                },
                                "kind": "discount",
                                "name": "Booking.com pays"
                            }
                        ],
                        "excluded_amount": {
                            "amount_rounded": "US$0",
                            "amount_unrounded": "US$0",
                            "currency": "USD",
                            "value": 0
                        },
                        "client_translations": {
                            "tooltip_total_text": "Total"
                        },
                        "gross_amount": {
                            "amount_unrounded": "US$859.15",
                            "amount_rounded": "US$859",
                            "value": 859.147753866522,
                            "currency": "USD"
                        },
                        "all_inclusive_amount_hotel_currency": {
                            "value": 661.01,
                            "currency": "GBP",
                            "amount_unrounded": "Â£661.01",
                            "amount_rounded": "Â£661"
                        },
                        "benefits": [
                            {
                                "name": "Mobile-only price",
                                "kind": "badge",
                                "identifier": "mobile-rate",
                                "badge_variant": "constructive",
                                "details": "Youâre getting a reduced rate compared to the rate available on a computer or laptop."
                            }
                        ],
                        "all_inclusive_amount": {
                            "amount_unrounded": "US$859.15",
                            "amount_rounded": "US$859",
                            "value": 859.147753866522,
                            "currency": "USD"
                        },
                        "gross_amount_hotel_currency": {
                            "amount_unrounded": "Â£661.01",
                            "amount_rounded": "Â£661",
                            "value": 661.01,
                            "currency": "GBP"
                        },
                        "has_long_stays_monthly_rate_price": 0,
                        "price_display_config": [
                            {
                                "key": "use_nightly_prices",
                                "value": 0
                            }
                        ]
                    },
                    "urgency_message": "Only 3 left at this price on Booking.com",
                    "latitude": 51.0533729782581,
                    "default_language": "en",
                    "extended": 0,
                    "is_smart_deal": 0,
                    "class": 0,
                    "is_no_prepayment_block": 0,
                    "hotel_has_vb_boost": 0,
                    "checkout": {
                        "from": "01:00",
                        "until": "11:00"
                    },
                    "hotel_include_breakfast": 0,
                    "hotel_name": "The Angel Hotel",
                    "type": "property_card",
                    "currencycode": "GBP",
                    "id": "property_card_321100",
                    "block_ids": [
                        "32110003_298297570_2_2_0"
                    ]
                }
            ],
            "unfiltered_primary_count": 37423
        }
    }
]

2025-08-25 12:40:11,650 - evaluation_logger_Hotels-59 - INFO - Function Calls: 
[
    {
        "name": "Get_Hotel_Details",
        "arguments": {
            "hotel_id": "321100"
        }
    },
    {
        "name": "Payment_features_of_the_Hotel",
        "arguments": {
            "hotel_id": "321100"
        }
    }
]

2025-08-25 12:40:11,650 - evaluation_logger_Hotels-59 - INFO - Golden Function Call: 
[
    {
        "name": "Get_Hotel_Details",
        "arguments": {
            "hotel_id": "321100"
        }
    },
    {
        "name": "Payment_features_of_the_Hotel",
        "arguments": {
            "hotel_id": "321100"
        }
    }
]

2025-08-25 12:40:11,650 - evaluation_logger_Hotels-59 - INFO - Start compare_single_call: 
{'name': 'Get_Hotel_Details', 'arguments': {'hotel_id': '321100'}}
{'name': 'Get_Hotel_Details', 'arguments': {'hotel_id': '321100'}}
2025-08-25 12:40:11,650 - evaluation_logger_Hotels-59 - INFO - Rule-based compare success.
2025-08-25 12:40:11,650 - evaluation_logger_Hotels-59 - INFO - Start compare_single_call: 
{'name': 'Payment_features_of_the_Hotel', 'arguments': {'hotel_id': '321100'}}
{'name': 'Payment_features_of_the_Hotel', 'arguments': {'hotel_id': '321100'}}
2025-08-25 12:40:11,650 - evaluation_logger_Hotels-59 - INFO - Rule-based compare success.
2025-08-25 12:40:11,650 - evaluation_logger_Hotels-59 - INFO - Success matched: [{'name': 'Get_Hotel_Details', 'arguments': {'hotel_id': '321100'}}, {'name': 'Payment_features_of_the_Hotel', 'arguments': {'hotel_id': '321100'}}]
2025-08-25 12:40:11,651 - evaluation_logger_Hotels-59 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "ufi": -2588181,
            "hotel_id": 321100,
            "hotel_name": "The Angel Hotel",
            "review_nr": 1327,
            "arrival_date": "2024-12-05",
            "departure_date": "2024-12-15",
            "price_transparency_mode": "none",
            "accommodation_type_name": "Hotels",
            "latitude": 51.0533729782581,
            "longitude": -1.04144811630249,
            "address": "Gosport Road",
            "city": "Alton",
            "city_trans": "Alton",
            "city_in_trans": "in Alton",
            "city_name_en": "Alton",
            "countrycode": "gb",
            "distance_to_cc": 11.5698021995557,
            "default_language": "en-gb",
            "country_trans": "United Kingdom",
            "currency_code": "GBP",
            "zip": "GU34 3NN",
            "timezone": "Europe/London",
            "rare_find_state": "NOT_RARE",
            "soldout": 0,
            "available_rooms": 3,
            "max_rooms_in_reservation": 10,
            "average_room_size_for_ufi_m2": "14.41",
            "is_family_friendly": 0,
            "is_closed": 0,
            "is_crimea": 0,
            "is_hotel_ctrip": 0,
            "is_price_transparent": 0,
            "is_genius_deal": 0,
            "is_cash_accepted_check_enabled": 1,
            "qualifies_for_no_cc_reservation": 0,
            "hotel_include_breakfast": 1,
            "opted_out_from_gallery_changes": 1,
            "cc1": "gb",
            "family_facilities": [
                "Soundproof rooms",
                "Family rooms"
            ],
            "product_price_breakdown": {
                "gross_amount_hotel_currency": {
                    "value": 661.01,
                    "amount_rounded": "Â£661",
                    "amount_unrounded": "Â£661.01",
                    "currency": "GBP"
                },
                "client_translations": {
                    "tooltip_total_text": "Total"
                },
                "price_display_config": [
                    {
                        "value": 0,
                        "key": "use_nightly_prices"
                    }
                ],
                "strikethrough_amount": {
                    "amount_unrounded": "US$1,037.62",
                    "currency": "USD",
                    "value": 1037.61642768902,
                    "amount_rounded": "US$1,038"
                },
                "included_taxes_and_charges_amount": {
                    "value": 155.642897403357,
                    "amount_rounded": "US$156",
                    "amount_unrounded": "US$155.64",
                    "currency": "USD"
                },
                "benefits": [
                    {
                        "name": "17% off",
                        "details": "Youâre getting 17% off the original price due to multiple deals and benefits.",
                        "kind": "badge",
                        "identifier": "combined-discount",
                        "badge_variant": "constructive"
                    },
                    {
                        "details": "Youâre getting a reduced rate compared to the rate available on a computer or laptop.",
                        "kind": "badge",
                        "identifier": "mobile-rate",
                        "badge_variant": "constructive",
                        "name": "Mobile-only price"
                    }
                ],
                "discounted_amount": {
                    "value": 178.468673822502,
                    "amount_rounded": "US$178",
                    "amount_unrounded": "US$178.47",
                    "currency": "USD"
                },
                "items": [
                    {
                        "base": {
                            "kind": "percentage",
                            "percentage": 20
                        },
                        "name": "VAT",
                        "kind": "charge",
                        "inclusion_type": "included",
                        "details": "20 % VAT",
                        "item_amount": {
                            "currency": "USD",
                            "amount_unrounded": "US$155.64",
                            "amount_rounded": "US$156",
                            "value": 155.642897403357
                        }
                    },
                    {
                        "item_amount": {
                            "currency": "USD",
                            "amount_unrounded": "US$103.76",
                            "amount_rounded": "US$104",
                            "value": 103.759043268883
                        },
                        "kind": "discount",
                        "identifier": "mobile-discount",
                        "details": "Youâre getting a reduced rate compared to the rate available on a computer or laptop.",
                        "name": "Mobile-only price",
                        "base": {
                            "kind": "rate"
                        }
                    },
                    {
                        "item_amount": {
                            "value": 74.709630553619,
                            "amount_rounded": "US$75",
                            "amount_unrounded": "US$74.71",
                            "currency": "USD"
                        },
                        "kind": "discount",
                        "identifier": "BSB",
                        "details": "Youâre getting a reduced rate because Booking.com is paying part of the price.",
                        "name": "Booking.com pays",
                        "base": {
                            "kind": "bsb"
                        }
                    }
                ],
                "net_amount": {
                    "value": 703.504856463165,
                    "amount_rounded": "US$704",
                    "amount_unrounded": "US$703.50",
                    "currency": "USD"
                },
                "charges_details": {
                    "amount": {
                        "currency": "USD",
                        "value": 0
                    },
                    "mode": "all_included"
                },
                "gross_amount": {
                    "value": 859.147753866522,
                    "amount_rounded": "US$859",
                    "amount_unrounded": "US$859.15",
                    "currency": "USD"
                },
                "strikethrough_amount_per_night": {
                    "currency": "USD",
                    "amount_unrounded": "US$103.76",
                    "amount_rounded": "US$104",
                    "value": 103.761642768902
                },
                "nr_stays": 3,
                "all_inclusive_amount": {
                    "currency": "USD",
                    "amount_unrounded": "US$859.15",
                    "amount_rounded": "US$859",
                    "value": 859.147753866522
                },
                "gross_amount_per_night": {
                    "value": 85.9147753866522,
                    "amount_rounded": "US$86",
                    "amount_unrounded": "US$85.91",
                    "currency": "USD"
                },
                "has_long_stays_monthly_rate_price": 0,
                "excluded_amount": {
                    "amount_rounded": "US$0",
                    "value": 0,
                    "currency": "USD",
                    "amount_unrounded": "US$0"
                },
                "all_inclusive_amount_hotel_currency": {
                    "amount_rounded": "Â£661",
                    "value": 661.01,
                    "currency": "GBP",
                    "amount_unrounded": "Â£661.01"
                },
                "has_long_stays_weekly_rate_price": 0
            },
            "composite_price_breakdown": {
                "price_display_config": [
                    {
                        "value": 0,
                        "key": "use_nightly_prices"
                    }
                ],
                "client_translations": {
                    "tooltip_total_text": "Total"
                },
                "gross_amount_hotel_currency": {
                    "amount_unrounded": "Â£661.01",
                    "currency": "GBP",
                    "value": 661.01,
                    "amount_rounded": "Â£661"
                },
                "items": [
                    {
                        "item_amount": {
                            "value": 155.642897403357,
                            "amount_rounded": "US$156",
                            "amount_unrounded": "US$155.64",
                            "currency": "USD"
                        },
                        "details": "20 % VAT",
                        "kind": "charge",
                        "inclusion_type": "included",
                        "name": "VAT",
                        "base": {
                            "kind": "percentage",
                            "percentage": 20
                        }
                    },
                    {
                        "base": {
                            "kind": "rate"
                        },
                        "name": "Mobile-only price",
                        "details": "Youâre getting a reduced rate compared to the rate available on a computer or laptop.",
                        "kind": "discount",
                        "identifier": "mobile-discount",
                        "item_amount": {
                            "amount_rounded": "US$104",
                            "value": 103.759043268883,
                            "currency": "USD",
                            "amount_unrounded": "US$103.76"
                        }
                    },
                    {
                        "base": {
                            "kind": "bsb"
                        },
                        "name": "Booking.com pays",
                        "details": "Youâre getting a reduced rate because Booking.com is paying part of the price.",
                        "identifier": "BSB",
                        "kind": "discount",
                        "item_amount": {
                            "amount_unrounded": "US$74.71",
                            "currency": "USD",
                            "value": 74.709630553619,
                            "amount_rounded": "US$75"
                        }
                    }
                ],
                "strikethrough_amount": {
                    "currency": "USD",
                    "amount_unrounded": "US$1,037.62",
                    "amount_rounded": "US$1,038",
                    "value": 1037.61642768902
                },
                "included_taxes_and_charges_amount": {
                    "currency": "USD",
                    "amount_unrounded": "US$155.64",
                    "amount_rounded": "US$156",
                    "value": 155.642897403357
                },
                "discounted_amount": {
                    "amount_rounded": "US$178",
                    "value": 178.468673822502,
                    "currency": "USD",
                    "amount_unrounded": "US$178.47"
                },
                "benefits": [
                    {
                        "details": "Youâre getting 17% off the original price due to multiple deals and benefits.",
                        "identifier": "combined-discount",
                        "kind": "badge",
                        "badge_variant": "constructive",
                        "name": "17% off"
                    },
                    {
                        "name": "Mobile-only price",
                        "badge_variant": "constructive",
                        "identifier": "mobile-rate",
                        "kind": "badge",
                        "details": "Youâre getting a reduced rate compared to the rate available on a computer or laptop."
                    }
                ],
                "strikethrough_amount_per_night": {
                    "currency": "USD",
                    "amount_unrounded": "US$103.76",
                    "amount_rounded": "US$104",
                    "value": 103.761642768902
                },
                "gross_amount": {
                    "currency": "USD",
                    "amount_unrounded": "US$859.15",
                    "amount_rounded": "US$859",
                    "value": 859.147753866522
                },
                "charges_details": {
                    "mode": "all_included",
                    "amount": {
                        "value": 0,
                        "currency": "USD"
                    }
                },
                "net_amount": {
                    "currency": "USD",
                    "amount_unrounded": "US$703.50",
                    "amount_rounded": "US$704",
                    "value": 703.504856463165
                },
                "all_inclusive_amount_hotel_currency": {
                    "currency": "GBP",
                    "amount_unrounded": "Â£661.01",
                    "amount_rounded": "Â£661",
                    "value": 661.01
                },
                "has_long_stays_weekly_rate_price": 0,
                "gross_amount_per_night": {
                    "value": 85.9147753866522,
                    "amount_rounded": "US$86",
                    "amount_unrounded": "US$85.91",
                    "currency": "USD"
                },
                "all_inclusive_amount": {
                    "amount_unrounded": "US$859.15",
                    "currency": "USD",
                    "value": 859.147753866522,
                    "amount_rounded": "US$859"
                },
                "excluded_amount": {
                    "amount_rounded": "US$0",
                    "value": 0,
                    "currency": "USD",
                    "amount_unrounded": "US$0"
                },
                "has_long_stays_monthly_rate_price": 0
            },
            "property_highlight_strip": [
                {
                    "name": "Free parking",
                    "icon_list": [
                        {
                            "icon": "iconset/parking_sign",
                            "size": 1
                        }
                    ]
                },
                {
                    "name": "Restaurant",
                    "icon_list": [
                        {
                            "icon": "iconset/food",
                            "size": 1
                        }
                    ]
                },
                {
                    "icon_list": [
                        {
                            "size": 1,
                            "icon": "iconset/shower"
                        }
                    ],
                    "name": "Private bathroom"
                },
                {
                    "icon_list": [
                        {
                            "size": 1,
                            "icon": "iconset/wifi"
                        }
                    ],
                    "name": "Free WiFi"
                },
                {
                    "icon_list": [
                        {
                            "icon": "iconset/bath",
                            "size": 1
                        }
                    ],
                    "name": "Bath"
                }
            ],
            "facilities_block": {
                "type": "popular",
                "name": "Most popular facilities",
                "facilities": [
                    {
                        "icon": "nosmoking",
                        "name": "Non-smoking rooms"
                    },
                    {
                        "name": "Restaurant",
                        "icon": "food_and_drink"
                    },
                    {
                        "name": "Free WiFi",
                        "icon": "wifi"
                    },
                    {
                        "name": "Facilities for disabled guests",
                        "icon": "disabled"
                    },
                    {
                        "name": "WiFi available in all areas",
                        "icon": "wifi"
                    }
                ]
            },
            "top_ufi_benefits": [
                {
                    "icon": "parking_sign",
                    "translated_name": "Parking"
                },
                {
                    "icon": "wifi",
                    "translated_name": "WiFi"
                }
            ],
            "languages_spoken": {
                "languagecode": [
                    "fr",
                    "en-gb"
                ]
            },
            "spoken_languages": [
                "fr",
                "en-gb"
            ],
            "breakfast_review_score": {
                "review_score": 8.1,
                "review_score_word": "Very good",
                "review_count": 39,
                "review_number": 39,
                "rating": 8.1
            },
            "wifi_review_score": {
                "rating": 7.3
            },
            "min_room_distribution": {
                "adults": 1
            },
            "aggregated_data": {
                "has_refundable": 1,
                "has_kitchen": 0,
                "has_nonrefundable": 0,
                "has_seating": 1,
                "common_kitchen_fac": [
                    {
                        "id": 86,
                        "name": "Electric kettle"
                    }
                ]
            },
            "free_facilities_cancel_breakfast": [
                {
                    "facility_id": 46
                },
                {
                    "facility_id": 105
                }
            ],
            "room_recommendation": [
                {
                    "number_of_extra_beds_for_adults": 0,
                    "number_of_extra_beds_for_children": 0,
                    "extra_beds_for_children_price": 0,
                    "extra_babycots_price": 0,
                    "extra_beds_for_adults_price_in_hotel_currency": 0,
                    "children": 0,
                    "adults": 1,
                    "extra_beds_for_children_price_in_hotel_currency": 0,
                    "extra_babycots_price_in_hotel_currency": 0,
                    "extra_beds_for_adults_price": 0,
                    "babies": 0,
                    "total_extra_bed_price_in_hotel_currency": 0,
                    "number_of_extra_beds_and_babycots_total": 0,
                    "number_of_extra_babycots": 0,
                    "total_extra_bed_price": 0,
                    "block_id": "32110003_298297570_2_2_0_354315"
                }
            ],
            "rooms": {
                "32110003": {
                    "facilities": [
                        {
                            "name": "TV",
                            "alt_facilitytype_id": 6,
                            "facilitytype_id": 6,
                            "alt_facilitytype_name": "Media & Technology",
                            "id": 8
                        },
                        {
                            "facilitytype_id": 5,
                            "name": "Toilet",
                            "alt_facilitytype_id": 5,
                            "id": 31,
                            "alt_facilitytype_name": "Bathroom"
                        },
                        {
                            "facilitytype_id": 6,
                            "name": "Flat-screen TV",
                            "alt_facilitytype_id": 6,
                            "id": 75,
                            "alt_facilitytype_name": "Media & Technology"
                        },
                        {
                            "alt_facilitytype_id": 12,
                            "name": "Electric kettle",
                            "facilitytype_id": 7,
                            "alt_facilitytype_name": "Kitchen",
                            "id": 86
                        },
                        {
                            "name": "Iron",
                            "alt_facilitytype_id": 1,
                            "facilitytype_id": 4,
                            "alt_facilitytype_name": "General",
                            "id": 15
                        }
                    ],
                    "highlights": [
                        {
                            "translated_name": "Free WiFi",
                            "icon": "wifi"
                        },
                        {
                            "translated_name": "Ensuite bathroom",
                            "icon": "bath",
                            "id": 38
                        },
                        {
                            "id": 75,
                            "icon": "screen",
                            "translated_name": "Flat-screen TV"
                        }
                    ],
                    "private_bathroom_highlight": {
                        "has_highlight": 1
                    },
                    "bed_configurations": [
                        {
                            "bed_types": [
                                {
                                    "description_imperial": "35-51 inches wide",
                                    "count": 2,
                                    "description": "90-130 cm wide",
                                    "name": "Single bed(s)",
                                    "bed_type": 1,
                                    "name_with_count": "2 single beds"
                                }
                            ]
                        }
                    ],
                    "children_and_beds_text": {
                        "cribs_and_extra_beds": [
                            {
                                "text": "There is no capacity for extra beds or cots.",
                                "highlight": 0
                            }
                        ],
                        "allow_children": 1,
                        "children_at_the_property": [
                            {
                                "text": "Children of any age are welcome.",
                                "highlight": 0
                            },
                            {
                                "highlight": 0,
                                "text": "Children 12 years and above will be charged as adults at this property."
                            },
                            {
                                "text": "To see correct prices and occupancy information, please add the number of children in your group and their ages to your search.",
                                "highlight": 1
                            }
                        ]
                    },
                    "description": "Bright and airy bedroom with luxury Hypnos bed and flat-screen TV. A modern bathroom with power shower and free toiletries are also provided.",
                    "photos_may_sorted": 1,
                    "private_bathroom_count": 0
                }
            },
            "block": [
                {
                    "full_board": 0,
                    "must_reserve_free_parking": 0,
                    "extrabed_available": 0,
                    "room_name": "Twin Room",
                    "is_domestic_rate": 0,
                    "number_of_bedrooms": 0,
                    "refundable_until": "2024-12-03 23:59:59 +0000",
                    "name_without_policy": "Twin Room",
                    "breakfast_included": 0,
                    "room_id": 32110003,
                    "max_children_free_age": 12,
                    "all_inclusive": 0,
                    "pod_ios_migrate_policies_to_smp_fullon": 0,
                    "number_of_bathrooms": 0,
                    "can_reserve_free_parking": 1,
                    "is_secret_deal": 0,
                    "is_block_fit": 1,
                    "babycots_available": 0,
                    "smoking": 0,
                    "name": "Twin Room - Free cancellation",
                    "room_surface_in_feet2": 172.2225664,
                    "package_id": 0,
                    "nr_children": 0,
                    "block_id": "32110003_298297570_2_2_0_354315",
                    "is_flash_deal": 0,
                    "b_pay_later_deadline_epoch": 1733097540,
                    "nr_adults": 2,
                    "bundle_extras": {
                        "generated_name": "Parking+ high-speed internet",
                        "benefits": [
                            {
                                "icon": "parking_sign",
                                "name": "Parking",
                                "details": [
                                    "Self parking for one vehicle per room per stay."
                                ],
                                "title": "Parking"
                            },
                            {
                                "details": [
                                    "High-speed internet throughout your stay."
                                ],
                                "title": "High-speed internet",
                                "icon": "wifi",
                                "name": "Internet"
                            }
                        ],
                        "highlighted_text": "Includes parking+ high-speed internet",
                        "footer": [
                            "All additional services are the responsibility of the property.",
                            "Any unused products and services included in the rate are non-refundable.",
                            "Contact the property to arrange this service."
                        ]
                    },
                    "deals": {
                        "deal_attributes": {
                            "has_secret_channel_option": 0
                        }
                    },
                    "is_smart_deal": 0,
                    "deposit_required": 0,
                    "roomtype_id": 8,
                    "is_last_minute_deal": 0,
                    "mealplan": "Breakfast US$15",
                    "paymentterms": {
                        "cancellation": {
                            "bucket": "SMP_FLEX",
                            "type_translation": "Free cancellation",
                            "info": {
                                "date": "4 December 2024",
                                "time": "00:00",
                                "date_before_raw": "2024-12-03",
                                "timezone_offset": "0",
                                "timezone": "GMT",
                                "date_before": "3 December 2024",
                                "time_before_midnight": "23:59",
                                "date_raw": "2024-12-04 00:00:00",
                                "refundable": 1,
                                "is_midnight": 1,
                                "refundable_date_midnight": "2024-12-03T23:59:59Z",
                                "refundable_date": "2024-12-04T00:00:00Z"
                            },
                            "type": "free_cancellation",
                            "guaranteed_non_refundable": 0,
                            "non_refundable_anymore": 0,
                            "description": "You may cancel free of charge until 1 day before arrival. You will be charged the cost of the first night if you cancel within 1 day before arrival. If you don't show up, the no-show fee will be the same as the cancellation fee."
                        },
                        "prepayment": {
                            "description": "You'll pay during your stay.",
                            "simple_translation": "No prepayment",
                            "extended_type_translation": "No payment needed today",
                            "info": {
                                "refundable": "anytime",
                                "prepayment_at_booktime": 0
                            },
                            "type_translation": "No payment needed today",
                            "type": "no_prepayment",
                            "type_extended": "non_refundable_prepayment"
                        }
                    },
                    "max_children_free": 0,
                    "block_text": {
                        "policies": [
                            {
                                "class": "POLICY_CANCELLATION",
                                "content": "You may cancel free of charge until 1 day before arrival. If you cancel within 1 day before arrival, the cancellation fee will be the cost of the first night. If you don't show up, the no-show fee will be the same as the cancellation fee."
                            },
                            {
                                "class": "POLICY_PREPAY",
                                "content": "The total price of the reservation is charged at the time of booking."
                            },
                            {
                                "content": "Breakfast US$15",
                                "class": "POLICY_HOTEL_MEALPLAN",
                                "mealplan_vector": "2"
                            },
                            {
                                "content": "General",
                                "class": "POLICY_TITLE"
                            }
                        ]
                    },
                    "genius_discount_percentage": 0,
                    "room_surface_in_m2": 16,
                    "half_board": 0,
                    "pay_in_advance": 1,
                    "refundable": 1,
                    "room_count": 6,
                    "max_occupancy": "2"
                }
            ],
            "rawData": {
                "name": "The Angel Hotel",
                "rankingPosition": 0,
                "reviewScore": 8,
                "ufi": -2588181,
                "checkoutDate": "2024-10-20",
                "priceBreakdown": {
                    "strikethroughPrice": {
                        "currency": "GBP",
                        "value": 310,
                        "amountRounded": "Â£310"
                    },
                    "chargesInfo": "Includes taxes and charges",
                    "benefitBadges": [
                        {
                            "variant": "constructive",
                            "explanation": "Mobile-only price",
                            "text": "Mobile-only price",
                            "identifier": "Mobile Rate"
                        }
                    ],
                    "grossPrice": {
                        "currency": "GBP",
                        "value": 279,
                        "amountRounded": "Â£279"
                    }
                },
                "latitude": 51.0533729782581,
                "position": 0,
                "reviewScoreWord": "Very good",
                "countryCode": "gb",
                "isPreferredPlus": true,
                "isFirstPage": true,
                "longitude": -1.04144811630249,
                "id": 321100,
                "currency": "GBP",
                "optOutFromGalleryChanges": 1,
                "reviewCount": 1327,
                "wishlistName": "Alton",
                "blockIds": [
                    "32110006_298297570_1_2_0_354315",
                    "32110006_298297570_1_2_0_354315"
                ],
                "isPreferred": true,
                "checkout": {
                    "untilTime": "11:00",
                    "fromTime": "01:00"
                },
                "accuratePropertyClass": 0,
                "qualityClass": 0,
                "mainPhotoId": 532261768,
                "checkinDate": "2024-10-19",
                "isHighlightedHotel": true,
                "propertyClass": 0,
                "checkin": {
                    "untilTime": "00:00",
                    "fromTime": "15:00"
                }
            }
        }
    },
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "is_direct_payment": 0,
                "hotel_id": "321100",
                "bookable": 1,
                "payable": 1,
                "creditcard_id": 3,
                "cvc_required": 3
            },
            {
                "cvc_required": 3,
                "hotel_id": "321100",
                "is_direct_payment": 0,
                "payable": 0,
                "creditcard_id": 14,
                "bookable": 1
            },
            {
                "payable": 1,
                "creditcard_id": 2,
                "bookable": 1,
                "hotel_id": "321100",
                "is_direct_payment": 0,
                "cvc_required": 3
            },
            {
                "cvc_required": 0,
                "bookable": 0,
                "creditcard_id": 10,
                "payable": 1,
                "is_direct_payment": 0,
                "hotel_id": "321100"
            },
            {
                "cvc_required": 0,
                "creditcard_id": 18,
                "payable": 1,
                "bookable": 0,
                "hotel_id": "321100",
                "is_direct_payment": 0
            }
        ]
    }
]

2025-08-25 12:43:16,476 - evaluation_logger_Hotels-59 - INFO - Final Response: <ï½beginâofâsentenceï½># 1. æ¦è¿°

## 1.1 ä»ä¹æ¯Spring

Springæ¯ä¸ä¸ªå¼æºæ¡æ¶ï¼å®ç±[Rod Johnson](https://baike.baidu.com/item/Rod Johnson)åå»ºãå®æ¯ä¸ºäºè§£å³ä¼ä¸åºç¨å¼åçå¤ææ§èåå»ºçã

Springä½¿ç¨åºæ¬çJavaBeanæ¥å®æä»¥ååªå¯è½ç±EJBå®æçäºæã

ç¶èï¼Springçç¨éä¸ä»éäºæå¡å¨ç«¯çå¼åãä»ç®åæ§ãå¯æµè¯æ§åæ¾è¦åçè§åº¦èè¨ï¼ä»»ä½Javaåºç¨é½å¯ä»¥ä»Springä¸­åçã

**ç®çï¼**è§£å³ä¼ä¸åºç¨å¼åçå¤ææ§

**åè½ï¼**ä½¿ç¨åºæ¬çJavaBeanä»£æ¿EJBï¼å¹¶æä¾äºæ´å¤çä¼ä¸åºç¨åè½

**èå´ï¼**ä»»ä½Javaåºç¨

ç®åæ¥è¯´ï¼Springæ¯ä¸ä¸ªè½»éçº§çæ§å¶åè½¬(IoC)åé¢ååé¢(AOP)çå®¹å¨æ¡æ¶ã

## 1.2 Springæ¡æ¶çç¹ç¹

- **è½»é**

  ä»å¤§å°ä¸å¼éä¸¤æ¹é¢èè¨Springé½æ¯è½»éçãå®æ´çSpringæ¡æ¶å¯ä»¥å¨ä¸ä¸ªå¤§å°åªæ1MBå¤çJARæä»¶éåå¸ãå¹¶ä¸Springæéçå¤çå¼éä¹æ¯å¾®ä¸è¶³éçãæ­¤å¤ï¼Springæ¯éä¾µå¥å¼çï¼å¸åå°ï¼Springåºç¨ä¸­çå¯¹è±¡ä¸ä¾èµäºSpringçç¹å®ç±»ã

- **æ§å¶åè½¬**

  Springéè¿ä¸ç§ç§°ä½æ§å¶åè½¬ï¼IoCï¼çææ¯ä¿è¿äºæ¾è¦åãå½åºç¨äºIoCï¼ä¸ä¸ªå¯¹è±¡ä¾èµçå¶å®å¯¹è±¡ä¼éè¿è¢«å¨çæ¹å¼ä¼ éè¿æ¥ï¼èä¸æ¯è¿ä¸ªå¯¹è±¡èªå·±åå»ºæèæ¥æ¾ä¾èµå¯¹è±¡ãä½ å¯ä»¥è®¤ä¸ºIoCä¸JNDIç¸åââä¸æ¯å¯¹è±¡ä»å®¹å¨ä¸­æ¥æ¾ä¾èµï¼èæ¯å®¹å¨å¨å¯¹è±¡åå§åæ¶ä¸ç­å¯¹è±¡è¯·æ±å°±ä¸»å¨å°ä¾èµä¼ éç»å®ã

- **é¢ååé¢**

  Springæä¾äºé¢ååé¢ç¼ç¨çä¸°å¯æ¯æï¼åè®¸éè¿åç¦»åºç¨çä¸å¡é»è¾ä¸ç³»ç»çº§æå¡ï¼ä¾å¦å®¡è®¡ï¼auditingï¼åäºå¡ï¼transactionï¼ç®¡çï¼è¿è¡åèæ§çå¼åãåºç¨å¯¹è±¡åªå®ç°å®ä»¬åºè¯¥åçââå®æä¸å¡é»è¾ââä»æ­¤èå·²ãå®ä»¬å¹¶ä¸è´è´£ï¼çè³æ¯æè¯ï¼å¶å®çç³»ç»çº§å³æ³¨ç¹ï¼ä¾å¦æ¥å¿æäºå¡æ¯æã

- **å®¹å¨**

  Springåå«å¹¶ç®¡çåºç¨å¯¹è±¡çéç½®åçå½å¨æï¼å¨è¿ä¸ªæä¹ä¸å®æ¯ä¸ç§å®¹å¨ï¼ä½ å¯ä»¥éç½®ä½ çæ¯ä¸ªbeanå¦ä½è¢«åå»ºââåºäºä¸ä¸ªå¯éç½®ååï¼prototypeï¼ï¼ä½ çbeanå¯ä»¥åå»ºä¸ä¸ªåç¬çå®ä¾æèæ¯æ¬¡éè¦æ¶é½çæä¸ä¸ªæ°çå®ä¾ââä»¥åå®ä»¬æ¯å¦ä½ç¸äºå³èçãç¶èï¼Springä¸åºè¯¥è¢«æ··åäºä¼ ç»çééçº§çEJBå®¹å¨ï¼å®ä»¬ç»å¸¸æ¯åºå¤§ä¸ç¬¨éçï¼é¾ä»¥ä½¿ç¨ã

- **æ¡æ¶**

  Springå¯ä»¥å°ç®åçç»ä»¶éç½®ãç»åæä¸ºå¤æçåºç¨ãå¨Springä¸­ï¼åºç¨å¯¹è±¡è¢«å£°æå¼å°ç»åï¼å¸åå°æ¯å¨ä¸ä¸ªXMLæä»¶éãSpringä¹æä¾äºå¾å¤åºç¡åè½ï¼äºå¡ç®¡çãæä¹åæ¡æ¶éæç­ç­ï¼ï¼å°åºç¨é»è¾çå¼åçç»äºä½ ã

ææSpringçè¿äºç¹å¾ä½¿ä½ è½å¤ç¼åæ´å¹²åãæ´å¯ç®¡çãå¹¶ä¸æ´æäºæµè¯çä»£ç ãå®ä»¬ä¹ä¸ºSpringä¸­çåç§æ¨¡åæä¾äºåºç¡æ¯æã

## 1.3 Springæ¡æ¶çç»æ

Spring æ¡æ¶æ¯ä¸ä¸ªåå±æ¶æï¼ç± 7 ä¸ªå®ä¹è¯å¥½çæ¨¡åç»æãSpring æ¨¡åæå»ºå¨æ ¸å¿å®¹å¨ä¹ä¸ï¼æ ¸å¿å®¹å¨å®ä¹äºåå»ºãéç½®åç®¡ç bean çæ¹å¼ï¼å¦å¾ 1 æç¤ºã

![Springæ¡æ¶ç7ä¸ªæ¨¡å](https://img-blog.csdnimg.cn/20181126145158413.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMDAxMDM1,size_16,color_FFFFFF,t_70)

ç»æ Spring æ¡æ¶çæ¯ä¸ªæ¨¡åï¼æç»ä»¶ï¼é½å¯ä»¥åç¬å­å¨ï¼æèä¸å¶ä»ä¸ä¸ªæå¤ä¸ªæ¨¡åèåå®ç°ãæ¯ä¸ªæ¨¡åçåè½å¦ä¸ï¼

- **æ ¸å¿å®¹å¨**ï¼æ ¸å¿å®¹å¨æä¾ Spring æ¡æ¶çåºæ¬åè½ãæ ¸å¿å®¹å¨çä¸»è¦ç»ä»¶æ¯ BeanFactoryï¼å®æ¯å·¥åæ¨¡å¼çå®ç°ãBeanFactory ä½¿ç¨*æ§å¶åè½¬*ï¼IOCï¼ æ¨¡å¼å°åºç¨ç¨åºçéç½®åä¾èµæ§è§èä¸å®éçåºç¨ç¨åºä»£ç åå¼ã
- **Spring ä¸ä¸æ**ï¼Spring ä¸ä¸ææ¯ä¸ä¸ªéç½®æä»¶ï¼å Spring æ¡æ¶æä¾ä¸ä¸æä¿¡æ¯ãSpring ä¸ä¸æåæ¬ä¼ä¸æå¡ï¼ä¾å¦ JNDIãEJBãçµå­é®ä»¶ãå½éåãæ ¡éªåè°åº¦åè½ã
- **Spring AOP**ï¼éè¿éç½®ç®¡çç¹æ§ï¼Spring AOP æ¨¡åç´æ¥å°é¢ååé¢çç¼ç¨åè½éæå°äº Spring æ¡æ¶ä¸­ãæä»¥ï¼å¯ä»¥å¾å®¹æå°ä½¿ Spring æ¡æ¶ç®¡ççä»»ä½å¯¹è±¡æ¯æ AOPãSpring AOP æ¨¡åä¸ºåºäº Spring çåºç¨ç¨åºä¸­çå¯¹è±¡æä¾äºäºå¡ç®¡çæå¡ãéè¿ä½¿ç¨ Spring AOPï¼ä¸ç¨ä¾èµ EJB ç»ä»¶ï¼å°±å¯ä»¥å°å£°ææ§äºå¡ç®¡çéæå°åºç¨ç¨åºä¸­ã
- **Spring DAO**ï¼JDBC DAO æ½è±¡å±æä¾äºææä¹çå¼å¸¸å±æ¬¡ç»æï¼å¯ç¨è¯¥ç»ææ¥ç®¡çå¼å¸¸å¤çåä¸åæ°æ®åºä¾åºåæåºçéè¯¯æ¶æ¯ãå¼å¸¸å±æ¬¡ç»æç®åäºéè¯¯å¤çï¼å¹¶ä¸æå¤§å°éä½äºéè¦ç¼åçå¼å¸¸ä»£ç æ°éï¼ä¾å¦æå¼åå³é­è¿æ¥ï¼ãSpring DAO çé¢å JDBC çå¼å¸¸éµä»éç¨ç DAO å¼å¸¸å±æ¬¡ç»æã
- **Spring ORM**ï¼Spring æ¡æ¶æå¥äºè¥å¹²ä¸ª ORM æ¡æ¶ï¼ä»èæä¾äº ORM çå¯¹è±¡å³ç³»å·¥å·ï¼å¶ä¸­åæ¬ JDOãHibernate å iBatis SQL Mapãææè¿äºé½éµä» Spring çéç¨äºå¡å DAO å¼å¸¸å±æ¬¡ç»æã
- **Spring Web æ¨¡å**ï¼Web ä¸ä¸ææ¨¡åå»ºç«å¨åºç¨ç¨åºä¸ä¸ææ¨¡åä¹ä¸ï¼ä¸ºåºäº Web çåºç¨ç¨åºæä¾äºä¸ä¸æãæä»¥ï¼Spring æ¡æ¶æ¯æä¸ Jakarta Struts çéæãWeb æ¨¡åè¿ç®åäºå¤çå¤é¨åè¯·æ±ä»¥åå°è¯·æ±åæ°ç»å®å°åå¯¹è±¡çå·¥ä½ã
- **Spring MVC æ¡æ¶**ï¼MVC æ¡æ¶æ¯ä¸ä¸ªå¨åè½çæå»º Web åºç¨ç¨åºç MVC å®ç°ãéè¿ç­ç¥æ¥å£ï¼MVC æ¡æ¶åæä¸ºé«åº¦å¯éç½®çï¼MVC å®¹çº³äºå¤§éè§å¾ææ¯ï¼å¶ä¸­åæ¬ JSPãVelocityãTilesãiText å POIã

Spring æ¡æ¶çåè½å¯ä»¥ç¨å¨ä»»ä½ J2EE æå¡å¨ä¸­ï¼å¤§å¤æ°åè½ä¹éç¨äºä¸åç®¡ççç¯å¢ãSpring çæ ¸å¿è¦ç¹æ¯ï¼æ¯æä¸ç»å®å°ç¹å® J2EE æå¡çå¯éç¨ä¸å¡åæ°æ®è®¿é®å¯¹è±¡ãæ¯«æ çé®ï¼è¿æ ·çå¯¹è±¡å¯ä»¥å¨ä¸å J2EE ç¯å¢ ï¼Web æ EJBï¼ãç¬ç«åºç¨ç¨åºãæµè¯ç¯å¢ä¹é´éç¨ã

# 2. IoC

## 2.1 ä»ä¹æ¯IoC

IoC(Inversion of Control)ï¼å³æ§å¶åè½¬ãå®ä¸æ¯ä¸ç§ææ¯ï¼èæ¯ä¸ç§è®¾è®¡ææ³ãå¨Javaå¼åä¸­ï¼IoCæå³çå°ä½ è®¾è®¡å¥½çå¯¹è±¡äº¤ç»å®¹å¨æ§å¶ï¼èä¸æ¯ä¼ ç»çå¨ä½ çå¯¹è±¡åé¨ç´æ¥æ§å¶ã

å¦ä½çè§£å¥½IoCå¢ï¼çè§£å¥½IoCçå³é®æ¯è¦æç¡®âè°æ§å¶è°ï¼æ§å¶ä»ä¹ï¼ä¸ºä½æ¯åè½¬ï¼æåè½¬å°±åºè¯¥ææ­£è½¬äºï¼ï¼åªäºæ¹é¢åè½¬äºâï¼é£æä»¬æ¥æ·±å¥åæä¸ä¸ï¼

- **è°æ§å¶è°ï¼æ§å¶ä»ä¹**ï¼ä¼ ç»Java SEç¨åºè®¾è®¡ï¼æä»¬ç´æ¥å¨å¯¹è±¡åé¨éè¿newè¿è¡åå»ºå¯¹è±¡ï¼æ¯ç¨åºä¸»å¨å»åå»ºä¾èµå¯¹è±¡ï¼èIoCæ¯æä¸é¨ä¸ä¸ªå®¹å¨æ¥åå»ºè¿äºå¯¹è±¡ï¼å³ç±IoCå®¹å¨æ¥æ§å¶å¯¹è±¡çåå»ºï¼è°æ§å¶è°ï¼å½ç¶æ¯IoC å®¹å¨æ§å¶äºå¯¹è±¡ï¼æ§å¶ä»ä¹ï¼é£å°±æ¯ä¸»è¦æ§å¶äºå¤é¨èµæºè·åï¼ä¸åªæ¯å¯¹è±¡åæ¬æ¯å¦æä»¶ç­ï¼ã

- **ä¸ºä½æ¯åè½¬ï¼åªäºæ¹é¢åè½¬äº**ï¼æåè½¬å°±ææ­£è½¬ï¼ä¼ ç»åºç¨ç¨åºæ¯ç±æä»¬èªå·±å¨å¯¹è±¡ä¸­ä¸»å¨æ§å¶å»ç´æ¥è·åä¾èµå¯¹è±¡ï¼ä¹å°±æ¯æ­£è½¬ï¼èåè½¬åæ¯ç±å®¹å¨æ¥å¸®å¿åå»ºåæ³¨å¥ä¾èµå¯¹è±¡ï¼ä¸ºä½æ¯åè½¬ï¼å ä¸ºç±å®¹å¨å¸®æä»¬æ¥æ¾åæ³¨å¥ä¾èµå¯¹è±¡ï¼å¯¹è±¡åªæ¯è¢«å¨çæ¥åä¾èµå¯¹è±¡ï¼æä»¥æ¯åè½¬ï¼åªäºæ¹é¢åè½¬äºï¼ä¾èµå¯¹è±¡çè·åè¢«åè½¬äºã

ç¨å¾ä¾è¯´æä¸ä¸ï¼ä¼ ç»ç¨åºè®¾è®¡å¦å¾2ï¼é½æ¯ä¸»å¨å»åå»ºç¸å³å¯¹è±¡ç¶ååç»åèµ·æ¥ï¼

![ä¼ ç»åºç¨ç¨åºç¤ºæå¾](https://img-blog.csdnimg.cn/2018112614521240.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMDAxMDM1,size_16,color_FFFFFF,t_70)

å½æäºIoC/DIçå®¹å¨åï¼å¨å®¢æ·ç«¯ç±»ä¸­ä¸åä¸»å¨å»åå»ºè¿äºå¯¹è±¡äºï¼å¦å¾3æç¤º:

![æIoC/DIå®¹å¨åç¨åºç»æç¤ºæå¾](https://img-blog.csdnimg.cn/2018112614522430.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMDAxMDM1,size_16,color_FFFFFF,t_70)

## 2.2 IoCè½åä»ä¹

IoC ä¸æ¯ä¸ç§ææ¯ï¼åªæ¯ä¸ç§ææ³ï¼ä¸ä¸ªéè¦çé¢åå¯¹è±¡ç¼ç¨çæ³åï¼å®è½æå¯¼æä»¬å¦ä½è®¾è®¡åºæ¾è¦åãæ´ä¼è¯çç¨åºãä¼ ç»åºç¨ç¨åºé½æ¯ç±æä»¬å¨ç±»åé¨ä¸»å¨åå»ºä¾èµå¯¹è±¡ï¼ä»èå¯¼è´ç±»ä¸ç±»ä¹é´é«è¦åï¼é¾äºæµè¯ï¼æäºIoCå®¹å¨åï¼æåå»ºåæ¥æ¾ä¾èµå¯¹è±¡çæ§å¶æäº¤ç»äºå®¹å¨ï¼ç±å®¹å¨è¿è¡æ³¨å¥ç»åå¯¹è±¡ï¼æä»¥å¯¹è±¡ä¸å¯¹è±¡ä¹é´æ¯ æ¾æ£è¦åï¼è¿æ ·ä¹æ¹ä¾¿æµè¯ï¼å©äºåè½å¤ç¨ï¼æ´éè¦çæ¯ä½¿å¾ç¨åºçæ´ä¸ªä½ç³»ç»æåå¾éå¸¸çµæ´»ã

å¶å®IoCå¯¹ç¼ç¨å¸¦æ¥çæå¤§æ¹åä¸æ¯ä»ä»£ç ä¸ï¼èæ¯ä»ææ³ä¸ï¼åçäºâä¸»ä»æ¢ä½âçååãåºç¨ç¨åºåæ¬æ¯èå¤§ï¼è¦è·åä»ä¹èµæºé½æ¯ä¸»å¨åºå»ï¼ä½æ¯å¨IoC/DIææ³ä¸­ï¼åºç¨ç¨åºå°±åæè¢«å¨çäºï¼è¢«å¨çç­å¾IoCå®¹å¨æ¥åå»ºå¹¶æ³¨å¥å®æéè¦çèµæºäºã

IoCå¾å¥½çä½ç°äºé¢åå¯¹è±¡è®¾è®¡æ³åä¹ä¸ââ å¥½è±åæ³åï¼âå«æ¾æä»¬ï¼æä»¬æ¾ä½ âï¼å³ç±IoCå®¹å¨å¸®å¯¹è±¡æ¾ç¸åºçä¾èµå¯¹è±¡å¹¶æ³¨å¥ï¼èä¸æ¯ç±å¯¹è±¡ä¸»å¨å»æ¾ã

## 2.3 IoCåDI

DIâDependency Injectionï¼å³âä¾èµæ³¨å¥âï¼æ¯ç»ä»¶ä¹é´ä¾èµå³ç³»ç±å®¹å¨å¨è¿è¡æå³å®ï¼å½¢è±¡çè¯´ï¼å³ç±å®¹å¨å¨æçå°æä¸ªä¾èµå³ç³»æ³¨å¥å°ç»ä»¶ä¹ä¸­ãä¾èµæ³¨å¥çç®çå¹¶éä¸ºè½¯ä»¶ç³»ç»å¸¦æ¥æ´å¤åè½ï¼èæ¯ä¸ºäºæåç»ä»¶éç¨çé¢çï¼å¹¶ä¸ºç³»ç»æ­å»ºä¸ä¸ªçµæ´»ãå¯æ©å±çå¹³å°ãéè¿ä¾èµæ³¨å¥æºå¶ï¼æä»¬åªéè¦éè¿ç®åçéç½®ï¼èæ éä»»ä½ä»£ç å°±å¯æå®ç®æ éè¦çèµæºï¼å®æèªèº«çä¸å¡é»è¾ï¼èä¸éè¦å³å¿å·ä½çèµæºæ¥èªä½å¤ï¼ç±è°å®ç°ã

çè§£DIçå³é®æ¯ï¼âè°ä¾èµè°ï¼ä¸ºä»ä¹éè¦ä¾èµï¼è°æ³¨å¥è°ï¼æ³¨å¥äºä»ä¹âï¼é£æä»¬æ¥æ·±å¥åæä¸ä¸ï¼

- **è°ä¾èµäºè°ï¼**å½ç¶æ¯åºç¨ç¨åºä¾èµäºIoCå®¹å¨ï¼
- **ä¸ºä»ä¹éè¦ä¾èµï¼**åºç¨ç¨åºéè¦IoCå®¹å¨æ¥æä¾å¯¹è±¡éè¦çå¤é¨èµæºï¼
- **è°æ³¨å¥è°ï¼**å¾ææ¾æ¯IoCå®¹å¨æ³¨å¥åºç¨ç¨åºæä¸ªå¯¹è±¡ï¼åºç¨ç¨åºä¾èµçå¯¹è±¡ï¼
- **æ³¨å¥äºä»ä¹ï¼**å°±æ¯æ³¨å¥æä¸ªå¯¹è±¡æéè¦çå¤é¨èµæºï¼åæ¬å¯¹è±¡ãèµæºãå¸¸éæ°æ®ï¼ã

IoCåDIç±ä»ä¹å³ç³»å¢ï¼å¶å®å®ä»¬æ¯åä¸ä¸ªæ¦å¿µçä¸åè§åº¦æè¿°ï¼ç±äºæ§å¶åè½¬æ¦å¿µæ¯è¾å«ç³ï¼å¯è½åªæ¯çè§£ä¸ºå®¹å¨æ§å¶å¯¹è±¡è¿ä¸ä¸ªå±é¢ï¼å¾é¾è®©äººæ³å°è°æ¥ç»´æ¤å¯¹è±¡å³ç³»ï¼ï¼æä»¥2004å¹´å¤§å¸çº§äººç©Martin Fowleråç»åºäºä¸ä¸ªæ°çåå­ï¼âä¾èµæ³¨å¥âï¼ç¸å¯¹IoC èè¨ï¼âä¾èµæ³¨å¥âæç¡®æè¿°äºâè¢«æ³¨å¥å¯¹è±¡ä¾èµIoCå®¹å¨éç½®ä¾èµå¯¹è±¡âã

# 3. ç¬¬ä¸ä¸ªSpringç¨åº

## 3.1 å¯¼å¥jarå

æ³¨ : spring éè¦å¯¼å¥commons-loggingè¿è¡æ¥å¿è®°å½ . æä»¬å©ç¨maven , ä»ä¼èªå¨ä¸è½½å¯¹åºçä¾èµé¡¹ .

```xml
<dependency>
   <groupId>org.springframework</groupId>
   <artifactId>spring-webmvc</artifactId>
   <version>5.1.10.RELEASE</version>
</dependency>
```

## 3.2 ç¼åä»£ç 

1ãç¼åä¸ä¸ªHelloå®ä½ç±»

```java
public class Hello {
   private String name;

   public String getName() {
       return name;
  }
   public void setName(String name) {
       this.name = name;
  }

   public void show(){
       System.out.println("Hello,"+ name );
  }
}
```

2ãç¼åæä»¬çspringæä»¶ , è¿éæä»¬å½åä¸ºbeans.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd">

   <!--beanå°±æ¯javaå¯¹è±¡ , ç±Springåå»ºåç®¡ç-->
   <bean id="hello" class="com.kuang.pojo.Hello">
       <property name="name" value="Spring"/>
   </bean>

</beans>
```

3ãæä»¬å¯ä»¥å»è¿è¡æµè¯äº .

```java
@Test
public void test(){
   //è§£æbeans.xmlæä»¶ , çæç®¡çç¸åºçBeanå¯¹è±¡
   ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml");
   //getBean : åæ°å³ä¸ºspringéç½®æä»¶ä¸­beançid .
   Hello hello = (Hello) context.getBean("hello");
   hello.show();
}
```

## 3.3 æè

- Hello å¯¹è±¡æ¯è°åå»ºç ?  ãhello å¯¹è±¡æ¯ç±Springåå»ºç
- Hello å¯¹è±¡çå±æ§æ¯æä¹è®¾ç½®ç ?  ãhello å¯¹è±¡çå±æ§æ¯ç±Springå®¹å¨è®¾ç½®çã

è¿ä¸ªè¿ç¨å°±å«æ§å¶åè½¬ :

- æ§å¶ : è°æ¥æ§å¶å¯¹è±¡çåå»º , ä¼ ç»åºç¨ç¨åºçå¯¹è±¡æ¯ç±ç¨åºæ¬èº«æ§å¶åå»ºç , ä½¿ç¨Springå , å¯¹è±¡æ¯ç±Springæ¥åå»ºç
- åè½¬ : ç¨åºæ¬èº«ä¸åå»ºå¯¹è±¡ , èåæè¢«å¨çæ¥æ¶å¯¹è±¡ .

ä¾èµæ³¨å¥ : å°±æ¯å©ç¨setæ¹æ³æ¥è¿è¡æ³¨å¥ç.

IOCæ¯ä¸ç§ç¼ç¨ææ³ï¼ç±ä¸»å¨çç¼ç¨åæè¢«å¨çæ¥æ¶

å¯ä»¥éè¿newClassPathXmlApplicationContextå»æµè§ä¸ä¸åºå±æºç  .

## 3.4 ä¿®æ¹æ¡ä¾ä¸

æä»¬å¨æ¡ä¾ä¸ä¸­ï¼ æ°å¢ä¸ä¸ªSpringéç½®æä»¶beans.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd">

   <bean id="MysqlImpl" class="com.kuang.dao.impl.UserDaoMySqlImpl"/>
   <bean id="OracleImpl" class="com.kuang.dao.impl.UserDaoOracleImpl"/>

   <bean id="ServiceImpl" class="com.kuang.service.impl.UserServiceImpl">
       <!--æ³¨æ: è¿éçnameå¹¶ä¸æ¯å±æ§ , èæ¯setæ¹æ³åé¢çé£é¨å , é¦å­æ¯å°å-->
       <!--å¼ç¨å¦å¤ä¸ä¸ªbean , ä¸æ¯ç¨value èæ¯ç¨ ref-->
       <property name="userDao" ref="OracleImpl"/>
   </bean>

</beans>
```

æµè¯ï¼

```java
@Test
public void test2(){
   ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml");
   UserServiceImpl serviceImpl = (UserServiceImpl) context.getBean("ServiceImpl");
   serviceImpl.getUser();
}
```

OK , å°äºç°å¨ , æä»¬å½»åºä¸ç¨åç¨åºä¸­å»æ¹å¨äº , è¦å®ç°ä¸åçæä½ , åªéè¦å¨xmléç½®æä»¶ä¸­è¿è¡ä¿®æ¹ , æè°çIoC,ä¸å¥è¯æå® : å¯¹è±¡ç±Spring æ¥åå»º , ç®¡ç , è£é !

# 4. IoCåå»ºå¯¹è±¡çæ¹å¼

## 4.1 éè¿æ åæé æ¹æ³æ¥åå»º

1ãUser.java

```java
public class User {

   private String name;

   public User() {
       System.out.println("useræ åæé æ¹æ³");
  }

   public void setName(String name) {
       this.name = name;
  }

   public void show(){
       System.out.println("name="+ name );
  }

}
```

2ãbeans.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd">

   <bean id="user" class="com.kuang.pojo.User">
       <property name="name" value="kuangshen"/>
   </bean>

</beans>
```

3ãæµè¯ç±»

```java
@Test
public void test(){
   ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml");
   //å¨æ§è¡getBeançæ¶å, userå·²ç»åå»ºå¥½äº , éè¿æ åæé 
   User user = (User) context.getBean("user");
   //è°ç¨å¯¹è±¡çæ¹æ³ .
   user.show();
}
```

ç»æå¯ä»¥åç°ï¼å¨è°ç¨showæ¹æ³ä¹åï¼Userå¯¹è±¡å·²ç»éè¿æ åæé åå§åäºï¼

## 4.2 éè¿æåæé æ¹æ³æ¥åå»º

1ãUserT . java

```java
public class UserT {

   private String name;

   public UserT(String name) {
       this.name = name;
  }

   public void setName(String name) {
       this.name = name;
  }

   public void show(){
       System.out.println("name="+ name );
  }

}
```

2ãbeans.xml æä¸ç§æ¹å¼ç¼å

```xml
<!-- ç¬¬ä¸ç§æ ¹æ®indexåæ°ä¸æ è®¾ç½® -->
<bean id="userT" class="com.kuang.pojo.UserT">
   <!-- indexææé æ¹æ³ , ä¸æ ä»0å¼å§ -->
   <constructor-arg index="0" value="kuangshen2"/>
</bean>
<!-- ç¬¬äºç§æ ¹æ®åæ°åå­è®¾ç½® -->
<bean id="userT" class="com.kuang.pojo.UserT">
   <!-- nameæåæ°å -->
   <constructor-arg name="name" value="kuangshen2"/>
</bean>
<!-- ç¬¬ä¸ç§æ ¹æ®åæ°ç±»åè®¾ç½® -->
<bean id="userT" class="com.kuang.pojo.UserT">
   <constructor-arg type="java.lang.String" value="kuangshen2"/>
</bean>
```

3ãæµè¯

```java
@Test
public void testT(){
   ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml");
   UserT user = (UserT) context.getBean("userT");
   user.show();
}
```

ç»è®ºï¼å¨éç½®æä»¶å è½½çæ¶åãå¶ä¸­ç®¡ççå¯¹è±¡é½å·²ç»åå§åäºï¼

# 5. Springéç½®

## 5.1 å«å

alias è®¾ç½®å«å , ä¸ºbeanè®¾ç½®å«å , å¯ä»¥è®¾ç½®å¤ä¸ªå«å

```xml
<!--è®¾ç½®å«åï¼å¨è·åBeançæ¶åå¯ä»¥ä½¿ç¨å«åè·å-->
<alias name="userT" alias="userNew"/>
```

## 5.2 Beançéç½®

```xml
<!--beanå°±æ¯javaå¯¹è±¡,ç±Springåå»ºåç®¡ç-->

<!--
   id æ¯beançæ è¯ç¬¦,è¦å¯ä¸,å¦ææ²¡æéç½®id,nameå°±æ¯é»è®¤æ è¯ç¬¦
   å¦æéç½®id,åéç½®äºname,é£ä¹nameæ¯å«å
   nameå¯ä»¥è®¾ç½®å¤ä¸ªå«å,å¯ä»¥ç¨éå·,åå·,ç©ºæ ¼éå¼
   å¦æä¸éç½®idåname,å¯ä»¥æ ¹æ®applicationContext.getBean(.class)è·åå¯¹è±¡;

classæ¯beançå¨éå®å=åå+ç±»å
-->
<bean id="hello" name="hello2 h2,h3;h4" class="com.kuang.pojo.Hello">
   <property name="name" value="Spring"/>
</bean>
```

## 5.3 import

å¢éçåä½éè¿importæ¥å®ç° .

```xml
<import resource="{path}/beans.xml"/>
```

# 6. ä¾èµæ³¨å¥

## 6.1 æé å¨æ³¨å¥

åé¢å·²ç»è¯´

2025-08-25 12:43:21,380 - evaluation_logger_Hotels-59 - INFO - Complete Result: {'score': 0, 'reason': 'The response does not address any of the requested information about hotels near Big Ben, detailed information, or payment options.'}
2025-08-25 12:43:28,018 - evaluation_logger_Hotels-59 - INFO - Correct Result: {'score': 0, 'reason': 'All information in the response is incorrect.'}
2025-08-25 12:43:28,018 - evaluation_logger_Hotels-59 - INFO - Message: Success.
2025-08-25 12:43:28,018 - evaluation_logger_Hotels-59 - INFO - Success turn num = 3
2025-08-25 12:43:28,018 - evaluation_logger_Hotels-59 - INFO - ----------------------------------------------------------------------------------------------------
