2025-08-25 13:15:29,041 - evaluation_logger_Flights-6 - INFO - Test Example Flights-6
2025-08-25 13:15:29,041 - evaluation_logger_Flights-6 - INFO - Query: My partner and I are gonna fly from Miami to Berlin on December 20th, 2024. Then we'll fly from Berlin to Amsterdam on December 24th, 2024. Finally, we'll go back to Miami on December 30th, 2024. Can you give us the info about economy class?
2025-08-25 13:15:39,644 - evaluation_logger_Flights-6 - INFO - Function Calls: 
[
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "Miami"
        }
    },
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "Berlin"
        }
    },
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "Amsterdam"
        }
    }
]

2025-08-25 13:15:39,644 - evaluation_logger_Flights-6 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "Miami"
        }
    },
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "Berlin"
        }
    },
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "Amsterdam"
        }
    },
    {
        "name": "Search_Flights_Multi_Stops",
        "arguments": {
            "legs": [
                {
                    "fromId": "MIA.AIRPORT",
                    "toId": "BER.AIRPORT",
                    "date": "2024-12-20"
                },
                {
                    "fromId": "BER.AIRPORT",
                    "toId": "AMS.AIRPORT",
                    "date": "2024-12-24"
                },
                {
                    "fromId": "AMS.AIRPORT",
                    "toId": "MIA.AIRPORT",
                    "date": "2024-12-30"
                }
            ],
            "cabinClass": "ECONOMY",
            "adults": 2
        }
    }
]

2025-08-25 13:15:39,644 - evaluation_logger_Flights-6 - INFO - Start compare_single_call: 
{'name': 'Search_Flight_Location', 'arguments': {'query': 'Miami'}}
{'name': 'Search_Flight_Location', 'arguments': {'query': 'Miami'}}
2025-08-25 13:15:39,644 - evaluation_logger_Flights-6 - INFO - Rule-based compare success.
2025-08-25 13:15:39,644 - evaluation_logger_Flights-6 - INFO - Start compare_single_call: 
{'name': 'Search_Flight_Location', 'arguments': {'query': 'Berlin'}}
{'name': 'Search_Flight_Location', 'arguments': {'query': 'Berlin'}}
2025-08-25 13:15:39,644 - evaluation_logger_Flights-6 - INFO - Rule-based compare success.
2025-08-25 13:15:39,644 - evaluation_logger_Flights-6 - INFO - Start compare_single_call: 
{'name': 'Search_Flight_Location', 'arguments': {'query': 'Amsterdam'}}
{'name': 'Search_Flight_Location', 'arguments': {'query': 'Amsterdam'}}
2025-08-25 13:15:39,644 - evaluation_logger_Flights-6 - INFO - Rule-based compare success.
2025-08-25 13:15:39,644 - evaluation_logger_Flights-6 - INFO - Success matched: [{'name': 'Search_Flight_Location', 'arguments': {'query': 'Miami'}}, {'name': 'Search_Flight_Location', 'arguments': {'query': 'Berlin'}}, {'name': 'Search_Flight_Location', 'arguments': {'query': 'Amsterdam'}}]
2025-08-25 13:15:39,644 - evaluation_logger_Flights-6 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "id": "MIA.AIRPORT",
                "type": "AIRPORT",
                "name": "Miami International Airport",
                "code": "MIA",
                "city": "MIA",
                "cityName": "Miami",
                "regionName": "Florida",
                "country": "US",
                "countryName": "United States",
                "countryNameShort": "US",
                "distanceToCity": {
                    "value": 8.83656740030448,
                    "unit": "km"
                },
                "parent": "MIA"
            }
        ]
    },
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "id": "BER.AIRPORT",
                "type": "AIRPORT",
                "name": "Berlin Brandenburg Airport Willy Brandt",
                "code": "BER",
                "city": "BER",
                "cityName": "Berlin",
                "regionName": "Berlin Federal State",
                "country": "DE",
                "countryName": "Germany",
                "countryNameShort": "Germany",
                "distanceToCity": {
                    "value": 19.28047053602839,
                    "unit": "km"
                },
                "parent": "BER"
            }
        ]
    },
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "id": "AMS.AIRPORT",
                "type": "AIRPORT",
                "name": "Schiphol Airport",
                "code": "AMS",
                "city": "AMS",
                "cityName": "Amsterdam",
                "regionName": "Noord-Holland",
                "country": "NL",
                "countryName": "Netherlands",
                "countryNameShort": "Netherlands",
                "distanceToCity": {
                    "value": 11.396990072691436,
                    "unit": "km"
                },
                "parent": "AMS"
            }
        ]
    }
]

2025-08-25 13:15:53,862 - evaluation_logger_Flights-6 - INFO - Function Calls: 
[
    {
        "name": "Search_Flights_Multi_Stops",
        "arguments": {
            "cabinClass": "ECONOMY",
            "legs": [
                {
                    "fromId": "MIA.AIRPORT",
                    "toId": "BER.AIRPORT",
                    "date": "2024-12-20"
                },
                {
                    "fromId": "BER.AIRPORT",
                    "toId": "AMS.AIRPORT",
                    "date": "2024-12-24"
                },
                {
                    "fromId": "AMS.AIRPORT",
                    "toId": "MIA.AIRPORT",
                    "date": "2024-12-30"
                }
            ],
            "adults": 2
        }
    }
]

2025-08-25 13:15:53,862 - evaluation_logger_Flights-6 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Flights_Multi_Stops",
        "arguments": {
            "adults": 2,
            "cabinClass": "ECONOMY",
            "legs": [
                {
                    "fromId": "MIA.AIRPORT",
                    "toId": "BER.AIRPORT",
                    "date": "2024-12-20"
                },
                {
                    "fromId": "BER.AIRPORT",
                    "toId": "AMS.AIRPORT",
                    "date": "2024-12-24"
                },
                {
                    "fromId": "AMS.AIRPORT",
                    "toId": "MIA.AIRPORT",
                    "date": "2024-12-30"
                }
            ]
        }
    }
]

2025-08-25 13:15:53,863 - evaluation_logger_Flights-6 - INFO - Start compare_single_call: 
{'name': 'Search_Flights_Multi_Stops', 'arguments': {'adults': 2, 'cabinClass': 'ECONOMY', 'legs': [{'fromId': 'MIA.AIRPORT', 'toId': 'BER.AIRPORT', 'date': '2024-12-20'}, {'fromId': 'BER.AIRPORT', 'toId': 'AMS.AIRPORT', 'date': '2024-12-24'}, {'fromId': 'AMS.AIRPORT', 'toId': 'MIA.AIRPORT', 'date': '2024-12-30'}]}}
{'name': 'Search_Flights_Multi_Stops', 'arguments': {'adults': 2, 'cabinClass': 'ECONOMY', 'legs': [{'fromId': 'MIA.AIRPORT', 'toId': 'BER.AIRPORT', 'date': '2024-12-20'}, {'fromId': 'BER.AIRPORT', 'toId': 'AMS.AIRPORT', 'date': '2024-12-24'}, {'fromId': 'AMS.AIRPORT', 'toId': 'MIA.AIRPORT', 'date': '2024-12-30'}]}}
2025-08-25 13:15:53,863 - evaluation_logger_Flights-6 - INFO - Rule-based compare success.
2025-08-25 13:15:53,863 - evaluation_logger_Flights-6 - INFO - Success matched: [{'name': 'Search_Flights_Multi_Stops', 'arguments': {'adults': 2, 'cabinClass': 'ECONOMY', 'legs': [{'fromId': 'MIA.AIRPORT', 'toId': 'BER.AIRPORT', 'date': '2024-12-20'}, {'fromId': 'BER.AIRPORT', 'toId': 'AMS.AIRPORT', 'date': '2024-12-24'}, {'fromId': 'AMS.AIRPORT', 'toId': 'MIA.AIRPORT', 'date': '2024-12-30'}]}}]
2025-08-25 13:15:53,865 - evaluation_logger_Flights-6 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "flightOffers": [
                {
                    "token": "d6a1f_H4sIAAAAAAAA_2WRXY-iMBSGf41ztRTaIuAkzUYFV5Sqo0XD3BCtiKgru7YzqL9-j-DuXGz6cZ7nbXoawl7rX-rVNHenIt9rZXwolJe6zNc6Q7L8ae4usG3K8licc3NdXEwednvBnFh-0P8G0OULYj8YAI7oIzeJacCQr8n37KoNdZHspdhkaM2MTqfToJKMLp54YQ6yAzux_b5TR7LUzEZtbE0nhK56vSa8sB8zF7-J2raM96sq8gPFi-oW-aH7n4tEcdFV3FdXUVT1mt4TK_KbNb3HVx50pvwwWvJDrCYiqIRl3_gpvk2KCnPRm4lDeFuKkE5veBEXlY5PIfRczuD8Ook9Au9hcU_UKjgNHxz7iYqWo8X0Du_2K83jo4rEYBT1rTtfgIt5AnyN_EFvlbeoD7P-nExKhhGy3Q6uvVwr5tEGpWau1-BWs0U0fG-HjWpGqe16pLYrw5R67ReVnTKpi_I8zm5sHDnEM-BvZZLYhkjHEXZdbBD8N4hJm3gQ2E2QpEHoWNSgzxszcEy-fAnu2q7zFbRIH3_i04dzBGrRLsw8tdC_Ab6vHSPyGODrdO4jf4h6CRq8o5GD3oaQbtLOEopMu20o25RS3HYkYJY-muxSG_YiJc-mhzRcQbmnWObn38c_x9XyncgCAAA.",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "MIA",
                                "name": "Miami International Airport",
                                "city": "MIA",
                                "cityName": "Miami",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "BER",
                                "name": "Berlin Brandenburg Airport Willy Brandt",
                                "city": "BER",
                                "cityName": "Berlin",
                                "country": "DE",
                                "countryName": "Germany"
                            },
                            "departureTime": "2024-12-20T16:25:00",
                            "arrivalTime": "2024-12-21T09:25:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-20T16:25:00",
                                    "arrivalTime": "2024-12-21T07:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "MIA",
                                        "name": "Miami International Airport",
                                        "city": "MIA",
                                        "cityName": "Miami",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 628,
                                        "carrierInfo": {
                                            "operatingCarrier": "KL",
                                            "marketingCarrier": "KL"
                                        }
                                    },
                                    "carriers": [
                                        "KL",
                                        "KL"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        },
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        }
                                    ],
                                    "totalTime": 31800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A330"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                },
                                {
                                    "departureTime": "2024-12-21T08:05:00",
                                    "arrivalTime": "2024-12-21T09:25:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "BER",
                                        "name": "Berlin Brandenburg Airport Willy Brandt",
                                        "city": "BER",
                                        "cityName": "Berlin",
                                        "country": "DE",
                                        "countryName": "Germany"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 1771,
                                        "carrierInfo": {
                                            "operatingCarrier": "KL",
                                            "marketingCarrier": "KL"
                                        }
                                    },
                                    "carriers": [
                                        "KL",
                                        "KL"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        },
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        }
                                    ],
                                    "totalTime": 4800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 39600,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "BER",
                                "name": "Berlin Brandenburg Airport Willy Brandt",
                                "city": "BER",
                                "cityName": "Berlin",
                                "country": "DE",
                                "countryName": "Germany"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "AMS",
                                "name": "Schiphol Airport",
                                "city": "AMS",
                                "cityName": "Amsterdam",
                                "country": "NL",
                                "countryName": "Netherlands"
                            },
                            "departureTime": "2024-12-24T07:10:00",
                            "arrivalTime": "2024-12-24T08:40:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-24T07:10:00",
                                    "arrivalTime": "2024-12-24T08:40:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "BER",
                                        "name": "Berlin Brandenburg Airport Willy Brandt",
                                        "city": "BER",
                                        "cityName": "Berlin",
                                        "country": "DE",
                                        "countryName": "Germany"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 5281,
                                        "carrierInfo": {
                                            "operatingCarrier": "U2",
                                            "marketingCarrier": "U2"
                                        }
                                    },
                                    "carriers": [
                                        "U2",
                                        "U2"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Easyjet",
                                            "code": "U2"
                                        },
                                        {
                                            "name": "Easyjet",
                                            "code": "U2"
                                        }
                                    ],
                                    "totalTime": 5400,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A320"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 5400,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "AMS",
                                "name": "Schiphol Airport",
                                "city": "AMS",
                                "cityName": "Amsterdam",
                                "country": "NL",
                                "countryName": "Netherlands"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "MIA",
                                "name": "Miami International Airport",
                                "city": "MIA",
                                "cityName": "Miami",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "departureTime": "2024-12-30T09:35:00",
                            "arrivalTime": "2024-12-30T20:15:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-30T09:35:00",
                                    "arrivalTime": "2024-12-30T10:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "DUB",
                                        "name": "Dublin Airport",
                                        "city": "DUB",
                                        "cityName": "Dublin",
                                        "country": "IE",
                                        "countryName": "Ireland"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 603,
                                        "planeType": "320",
                                        "carrierInfo": {
                                            "operatingCarrier": "EI",
                                            "marketingCarrier": "EI"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "EI"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        }
                                    ],
                                    "totalTime": 6000,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A320"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        }
                                    ],
                                    "arrivalTerminal": "2"
                                },
                                {
                                    "departureTime": "2024-12-30T11:30:00",
                                    "arrivalTime": "2024-12-30T14:00:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "DUB",
                                        "name": "Dublin Airport",
                                        "city": "DUB",
                                        "cityName": "Dublin",
                                        "country": "IE",
                                        "countryName": "Ireland"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORD",
                                        "name": "Chicago O'Hare International Airport",
                                        "city": "CHI",
                                        "cityName": "Chicago",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 123,
                                        "planeType": "332",
                                        "carrierInfo": {
                                            "operatingCarrier": "EI",
                                            "marketingCarrier": "EI"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "EI"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        }
                                    ],
                                    "totalTime": 30600,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A330"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "2",
                                    "arrivalTerminal": "3"
                                },
                                {
                                    "departureTime": "2024-12-30T15:53:00",
                                    "arrivalTime": "2024-12-30T20:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORD",
                                        "name": "Chicago O'Hare International Airport",
                                        "city": "CHI",
                                        "cityName": "Chicago",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "MIA",
                                        "name": "Miami International Airport",
                                        "city": "MIA",
                                        "cityName": "Miami",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 7476,
                                        "planeType": "738",
                                        "carrierInfo": {
                                            "operatingCarrier": "AA",
                                            "marketingCarrier": "EI",
                                            "operatingCarrierDisclosureText": "AA/American Airlines"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "AA"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        }
                                    ],
                                    "totalTime": 12120,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "3"
                                }
                            ],
                            "totalTime": 60000,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                },
                {
                    "token": "d6a1f_H4sIAAAAAAAA_2WRa4-iMBSGf43zaSn0AsgkzQYFRxTEGS6G-UIQUXFc2bWd5fLrt4DZyWZzOO3zvA2FpmfOf7JnWT5ey9OZM-mTgVPFq1PGC5BXP-TjXQz7qvoobyc5K--y55gz-w0plj3_JsD0AkR6FiCWcJ_LSJZE5c_J96LhErvn9KncFyCjkmEYI7Kc4uCBd6oBYpOEWHNtiPKKUwJUqPgbhHczNIZ3-rLV4Ws42IF687p2LZt5Zd26lqP_52HChrZYE5b10H6XKK41tt9FjWcbvndZxd4lYpvQrkOFtN41ajdlDb1wtg0vThuHDvZbGERlzaOrI_aMt2K92URTJL4Hwy5hO_u67DmyEubGq8DvTCb-h3vRB3PDxcqdK50X9B6_CG5ca-EG5gRb4hmOU-Q5hQAQ3YCDVxmjUzxizqk-HfHAaeAu31VnVE4x0VWDDNZQiPFUfWLFtch5Wd3WRUvXroamkritIkdECtO1C3UdSgj-EyiSuMNHYDuagiX8eGMrHKIvj4XrRNe-ggmaw9_81_WWCZpgcSjzlCrgbwk_Dw4B6kt4lr5ZwFoCUwGLd7DSwOtSpPvUiMWUp6YqpkOKVcUoiMAi7Tc5pj2XKXpsekmdnZi6FF6qkjV_AMDEv-PIAgAA",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "MIA",
                                "name": "Miami International Airport",
                                "city": "MIA",
                                "cityName": "Miami",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "BER",
                                "name": "Berlin Brandenburg Airport Willy Brandt",
                                "city": "BER",
                                "cityName": "Berlin",
                                "country": "DE",
                                "countryName": "Germany"
                            },
                            "departureTime": "2024-12-20T16:25:00",
                            "arrivalTime": "2024-12-21T09:25:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-20T16:25:00",
                                    "arrivalTime": "2024-12-21T07:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "MIA",
                                        "name": "Miami International Airport",
                                        "city": "MIA",
                                        "cityName": "Miami",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 628,
                                        "carrierInfo": {
                                            "operatingCarrier": "KL",
                                            "marketingCarrier": "KL"
                                        }
                                    },
                                    "carriers": [
                                        "KL",
                                        "KL"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        },
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        }
                                    ],
                                    "totalTime": 31800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A330"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                },
                                {
                                    "departureTime": "2024-12-21T08:05:00",
                                    "arrivalTime": "2024-12-21T09:25:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "BER",
                                        "name": "Berlin Brandenburg Airport Willy Brandt",
                                        "city": "BER",
                                        "cityName": "Berlin",
                                        "country": "DE",
                                        "countryName": "Germany"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 1771,
                                        "carrierInfo": {
                                            "operatingCarrier": "KL",
                                            "marketingCarrier": "KL"
                                        }
                                    },
                                    "carriers": [
                                        "KL",
                                        "KL"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        },
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        }
                                    ],
                                    "totalTime": 4800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 39600,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "BER",
                                "name": "Berlin Brandenburg Airport Willy Brandt",
                                "city": "BER",
                                "cityName": "Berlin",
                                "country": "DE",
                                "countryName": "Germany"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "AMS",
                                "name": "Schiphol Airport",
                                "city": "AMS",
                                "cityName": "Amsterdam",
                                "country": "NL",
                                "countryName": "Netherlands"
                            },
                            "departureTime": "2024-12-24T06:00:00",
                            "arrivalTime": "2024-12-24T07:25:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-24T06:00:00",
                                    "arrivalTime": "2024-12-24T07:25:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "BER",
                                        "name": "Berlin Brandenburg Airport Willy Brandt",
                                        "city": "BER",
                                        "cityName": "Berlin",
                                        "country": "DE",
                                        "countryName": "Germany"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 1770,
                                        "carrierInfo": {
                                            "operatingCarrier": "KL",
                                            "marketingCarrier": "KL"
                                        }
                                    },
                                    "carriers": [
                                        "KL",
                                        "KL"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        },
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        }
                                    ],
                                    "totalTime": 5100,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 5100,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "AMS",
                                "name": "Schiphol Airport",
                                "city": "AMS",
                                "cityName": "Amsterdam",
                                "country": "NL",
                                "countryName": "Netherlands"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "MIA",
                                "name": "Miami International Airport",
                                "city": "MIA",
                                "cityName": "Miami",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "departureTime": "2024-12-30T09:35:00",
                            "arrivalTime": "2024-12-30T20:15:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-30T09:35:00",
                                    "arrivalTime": "2024-12-30T10:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "DUB",
                                        "name": "Dublin Airport",
                                        "city": "DUB",
                                        "cityName": "Dublin",
                                        "country": "IE",
                                        "countryName": "Ireland"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 603,
                                        "planeType": "320",
                                        "carrierInfo": {
                                            "operatingCarrier": "EI",
                                            "marketingCarrier": "EI"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "EI"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        }
                                    ],
                                    "totalTime": 6000,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A320"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        }
                                    ],
                                    "arrivalTerminal": "2"
                                },
                                {
                                    "departureTime": "2024-12-30T11:30:00",
                                    "arrivalTime": "2024-12-30T14:00:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "DUB",
                                        "name": "Dublin Airport",
                                        "city": "DUB",
                                        "cityName": "Dublin",
                                        "country": "IE",
                                        "countryName": "Ireland"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORD",
                                        "name": "Chicago O'Hare International Airport",
                                        "city": "CHI",
                                        "cityName": "Chicago",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 123,
                                        "planeType": "332",
                                        "carrierInfo": {
                                            "operatingCarrier": "EI",
                                            "marketingCarrier": "EI"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "EI"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        }
                                    ],
                                    "totalTime": 30600,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A330"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "2",
                                    "arrivalTerminal": "3"
                                },
                                {
                                    "departureTime": "2024-12-30T15:53:00",
                                    "arrivalTime": "2024-12-30T20:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORD",
                                        "name": "Chicago O'Hare International Airport",
                                        "city": "CHI",
                                        "cityName": "Chicago",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "MIA",
                                        "name": "Miami International Airport",
                                        "city": "MIA",
                                        "cityName": "Miami",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 7476,
                                        "planeType": "738",
                                        "carrierInfo": {
                                            "operatingCarrier": "AA",
                                            "marketingCarrier": "EI",
                                            "operatingCarrierDisclosureText": "AA/American Airlines"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "AA"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        }
                                    ],
                                    "totalTime": 12120,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "3"
                                }
                            ],
                            "totalTime": 60000,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                },
                {
                    "token": "d6a1f_H4sIAAAAAAAA_2WRa4-iMBSGf43zaSmUFpBJmg0KjiiIM1wM84UoouK4w8Z2w-XX7wHcnWw2pZzneQsHml6E-MmfZfl0K88XwaVfHJ0rUZ33okB59UM-3eF2qKqP8vMs78u77LvWzHlTFduZfwOw_FClPQPAEulzWZUlGPlz-r1ohMTvOXsqDwXaM8k0zRF5zkj4wDvTEXVoSu25PkR5JRhFGlaCjUp2s_UY3tnL1sCv0WBH5s_r2rMd7pd169mu8Z9HKR-mzZuorIcZdKni2eMMurjxHTPwr6vEv8Z8Ezl1pNDWv8XtpqyxH8220dVtk8glQYvDuKxFfHOhZ7KF9WYTT1X4Ho66lO-c27Ln2E65l6zCoLM4_I_w4w_uRYuVN1c6P-w9eQFuPHvhhdaE2HAN2ynynGGEqGHiwas9Z1MyYi6YMR3xKFjoLd81d1TBCDU0kw7WMEzIVHvixa3IRVl9rouWrT1dnUpwWkWuUinK1h42DCyp-J8AnqB_AsfVFSKRxxtbcKx-eQJuUEP_CibqHNdHcji0QBMCm7LOmYL-DvDL4Bip_QDfZ282spdos0OLd7TS0esS0kNmJlDyzNKgHDOiKWZBAYusb3LKei4z9dH0mrk7KF2Gr1XJm9-hXgkIyAIAAA..",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "MIA",
                                "name": "Miami International Airport",
                                "city": "MIA",
                                "cityName": "Miami",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "BER",
                                "name": "Berlin Brandenburg Airport Willy Brandt",
                                "city": "BER",
                                "cityName": "Berlin",
                                "country": "DE",
                                "countryName": "Germany"
                            },
                            "departureTime": "2024-12-20T16:25:00",
                            "arrivalTime": "2024-12-21T09:25:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-20T16:25:00",
                                    "arrivalTime": "2024-12-21T07:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "MIA",
                                        "name": "Miami International Airport",
                                        "city": "MIA",
                                        "cityName": "Miami",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 628,
                                        "carrierInfo": {
                                            "operatingCarrier": "KL",
                                            "marketingCarrier": "KL"
                                        }
                                    },
                                    "carriers": [
                                        "KL",
                                        "KL"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        },
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        }
                                    ],
                                    "totalTime": 31800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A330"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                },
                                {
                                    "departureTime": "2024-12-21T08:05:00",
                                    "arrivalTime": "2024-12-21T09:25:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "BER",
                                        "name": "Berlin Brandenburg Airport Willy Brandt",
                                        "city": "BER",
                                        "cityName": "Berlin",
                                        "country": "DE",
                                        "countryName": "Germany"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 1771,
                                        "carrierInfo": {
                                            "operatingCarrier": "KL",
                                            "marketingCarrier": "KL"
                                        }
                                    },
                                    "carriers": [
                                        "KL",
                                        "KL"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        },
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        }
                                    ],
                                    "totalTime": 4800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 39600,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "BER",
                                "name": "Berlin Brandenburg Airport Willy Brandt",
                                "city": "BER",
                                "cityName": "Berlin",
                                "country": "DE",
                                "countryName": "Germany"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "AMS",
                                "name": "Schiphol Airport",
                                "city": "AMS",
                                "cityName": "Amsterdam",
                                "country": "NL",
                                "countryName": "Netherlands"
                            },
                            "departureTime": "2024-12-24T14:20:00",
                            "arrivalTime": "2024-12-24T15:45:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-24T14:20:00",
                                    "arrivalTime": "2024-12-24T15:45:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "BER",
                                        "name": "Berlin Brandenburg Airport Willy Brandt",
                                        "city": "BER",
                                        "cityName": "Berlin",
                                        "country": "DE",
                                        "countryName": "Germany"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 1778,
                                        "carrierInfo": {
                                            "operatingCarrier": "KL",
                                            "marketingCarrier": "KL"
                                        }
                                    },
                                    "carriers": [
                                        "KL",
                                        "KL"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        },
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        }
                                    ],
                                    "totalTime": 5100,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "32Q"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 5100,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "AMS",
                                "name": "Schiphol Airport",
                                "city": "AMS",
                                "cityName": "Amsterdam",
                                "country": "NL",
                                "countryName": "Netherlands"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "MIA",
                                "name": "Miami International Airport",
                                "city": "MIA",
                                "cityName": "Miami",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "departureTime": "2024-12-30T09:35:00",
                            "arrivalTime": "2024-12-30T20:15:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-30T09:35:00",
                                    "arrivalTime": "2024-12-30T10:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "DUB",
                                        "name": "Dublin Airport",
                                        "city": "DUB",
                                        "cityName": "Dublin",
                                        "country": "IE",
                                        "countryName": "Ireland"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 603,
                                        "planeType": "320",
                                        "carrierInfo": {
                                            "operatingCarrier": "EI",
                                            "marketingCarrier": "EI"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "EI"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        }
                                    ],
                                    "totalTime": 6000,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A320"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        }
                                    ],
                                    "arrivalTerminal": "2"
                                },
                                {
                                    "departureTime": "2024-12-30T11:30:00",
                                    "arrivalTime": "2024-12-30T14:00:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "DUB",
                                        "name": "Dublin Airport",
                                        "city": "DUB",
                                        "cityName": "Dublin",
                                        "country": "IE",
                                        "countryName": "Ireland"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORD",
                                        "name": "Chicago O'Hare International Airport",
                                        "city": "CHI",
                                        "cityName": "Chicago",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 123,
                                        "planeType": "332",
                                        "carrierInfo": {
                                            "operatingCarrier": "EI",
                                            "marketingCarrier": "EI"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "EI"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        }
                                    ],
                                    "totalTime": 30600,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A330"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "2",
                                    "arrivalTerminal": "3"
                                },
                                {
                                    "departureTime": "2024-12-30T15:53:00",
                                    "arrivalTime": "2024-12-30T20:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORD",
                                        "name": "Chicago O'Hare International Airport",
                                        "city": "CHI",
                                        "cityName": "Chicago",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "MIA",
                                        "name": "Miami International Airport",
                                        "city": "MIA",
                                        "cityName": "Miami",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 7476,
                                        "planeType": "738",
                                        "carrierInfo": {
                                            "operatingCarrier": "AA",
                                            "marketingCarrier": "EI",
                                            "operatingCarrierDisclosureText": "AA/American Airlines"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "AA"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        }
                                    ],
                                    "totalTime": 12120,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "3"
                                }
                            ],
                            "totalTime": 60000,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                },
                {
                    "token": "d6a1f_H4sIAAAAAAAA_2WRa4-iMBSGf43zaSmUFpBJmg0KjjggjlwM84UoouK4w8Z2l8uv3wOYnU02h9M-z9tQaHoR4id_luXTrTxfBJd-cXSuRHXeiwLl1Q_5dIfhUFUf5edZ3pd32XetmbNVFduZfwOw_FClPQPAEulzWZUlqPw5_V40QuL3nD2VhwLtmWSa5og8ZyR84J3piDo0pfZcH6K8EowiDSvBWiW7WTSGd_ayMfDbaEfmz-vasx3ul3Xr2a7xn0cpH9rmTVTWQwddqnj22EEXN75jBv51lfjXmK8jp44U2vq3uF2XNfaj2Sa6um0SuSRocRiXtYhvLuyZbGC9WcdTFb6Hoy7lO-e27Dm2U-4lqzDoLA7_I_z4g3vRYuXNlc4Pe09egBvPXnihNSE2PMNxijxnGCFqmHjwas_ZlIyYC2ZMRzwKFnrLd80dVTBCDc2kgzUMEzLVnnhxK3JRVp-vRctePV2dSnBbRa5SKcpePWwYWFLxv8FUkeAOH4Hj6gqRyOONDThWvzwBN6ihfwUTdY5_1wY5HYAmBA5lnTMF_S3wy-AYqX2B77Otjewl2rpo8Y5WOnpbQnrIzASmPLM0mI4Z0RSzoIBF1m9yynouM_Wx6TVzdzB1Gb5WJW_-AJt5UC7IAgAA",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "MIA",
                                "name": "Miami International Airport",
                                "city": "MIA",
                                "cityName": "Miami",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "BER",
                                "name": "Berlin Brandenburg Airport Willy Brandt",
                                "city": "BER",
                                "cityName": "Berlin",
                                "country": "DE",
                                "countryName": "Germany"
                            },
                            "departureTime": "2024-12-20T16:25:00",
                            "arrivalTime": "2024-12-21T09:25:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-20T16:25:00",
                                    "arrivalTime": "2024-12-21T07:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "MIA",
                                        "name": "Miami International Airport",
                                        "city": "MIA",
                                        "cityName": "Miami",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 628,
                                        "carrierInfo": {
                                            "operatingCarrier": "KL",
                                            "marketingCarrier": "KL"
                                        }
                                    },
                                    "carriers": [
                                        "KL",
                                        "KL"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        },
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        }
                                    ],
                                    "totalTime": 31800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A330"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                },
                                {
                                    "departureTime": "2024-12-21T08:05:00",
                                    "arrivalTime": "2024-12-21T09:25:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "BER",
                                        "name": "Berlin Brandenburg Airport Willy Brandt",
                                        "city": "BER",
                                        "cityName": "Berlin",
                                        "country": "DE",
                                        "countryName": "Germany"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 1771,
                                        "carrierInfo": {
                                            "operatingCarrier": "KL",
                                            "marketingCarrier": "KL"
                                        }
                                    },
                                    "carriers": [
                                        "KL",
                                        "KL"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        },
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        }
                                    ],
                                    "totalTime": 4800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 39600,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "BER",
                                "name": "Berlin Brandenburg Airport Willy Brandt",
                                "city": "BER",
                                "cityName": "Berlin",
                                "country": "DE",
                                "countryName": "Germany"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "AMS",
                                "name": "Schiphol Airport",
                                "city": "AMS",
                                "cityName": "Amsterdam",
                                "country": "NL",
                                "countryName": "Netherlands"
                            },
                            "departureTime": "2024-12-24T16:30:00",
                            "arrivalTime": "2024-12-24T17:55:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-24T16:30:00",
                                    "arrivalTime": "2024-12-24T17:55:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "BER",
                                        "name": "Berlin Brandenburg Airport Willy Brandt",
                                        "city": "BER",
                                        "cityName": "Berlin",
                                        "country": "DE",
                                        "countryName": "Germany"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 1780,
                                        "carrierInfo": {
                                            "operatingCarrier": "KL",
                                            "marketingCarrier": "KL"
                                        }
                                    },
                                    "carriers": [
                                        "KL",
                                        "KL"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        },
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        }
                                    ],
                                    "totalTime": 5100,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 5100,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "AMS",
                                "name": "Schiphol Airport",
                                "city": "AMS",
                                "cityName": "Amsterdam",
                                "country": "NL",
                                "countryName": "Netherlands"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "MIA",
                                "name": "Miami International Airport",
                                "city": "MIA",
                                "cityName": "Miami",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "departureTime": "2024-12-30T09:35:00",
                            "arrivalTime": "2024-12-30T20:15:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-30T09:35:00",
                                    "arrivalTime": "2024-12-30T10:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "DUB",
                                        "name": "Dublin Airport",
                                        "city": "DUB",
                                        "cityName": "Dublin",
                                        "country": "IE",
                                        "countryName": "Ireland"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 603,
                                        "planeType": "320",
                                        "carrierInfo": {
                                            "operatingCarrier": "EI",
                                            "marketingCarrier": "EI"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "EI"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        }
                                    ],
                                    "totalTime": 6000,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A320"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        }
                                    ],
                                    "arrivalTerminal": "2"
                                },
                                {
                                    "departureTime": "2024-12-30T11:30:00",
                                    "arrivalTime": "2024-12-30T14:00:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "DUB",
                                        "name": "Dublin Airport",
                                        "city": "DUB",
                                        "cityName": "Dublin",
                                        "country": "IE",
                                        "countryName": "Ireland"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORD",
                                        "name": "Chicago O'Hare International Airport",
                                        "city": "CHI",
                                        "cityName": "Chicago",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 123,
                                        "planeType": "332",
                                        "carrierInfo": {
                                            "operatingCarrier": "EI",
                                            "marketingCarrier": "EI"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "EI"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        }
                                    ],
                                    "totalTime": 30600,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A330"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "2",
                                    "arrivalTerminal": "3"
                                },
                                {
                                    "departureTime": "2024-12-30T15:53:00",
                                    "arrivalTime": "2024-12-30T20:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORD",
                                        "name": "Chicago O'Hare International Airport",
                                        "city": "CHI",
                                        "cityName": "Chicago",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "MIA",
                                        "name": "Miami International Airport",
                                        "city": "MIA",
                                        "cityName": "Miami",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 7476,
                                        "planeType": "738",
                                        "carrierInfo": {
                                            "operatingCarrier": "AA",
                                            "marketingCarrier": "EI",
                                            "operatingCarrierDisclosureText": "AA/American Airlines"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "AA"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        }
                                    ],
                                    "totalTime": 12120,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "3"
                                }
                            ],
                            "totalTime": 60000,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                },
                {
                    "token": "d6a1f_H4sIAAAAAAAA_2WRa4-iMBSGf43zaSn0gsAkzYYBHFHwMlwM84UoouK4w8Z2Avrr9wBmNpvNofR53qYHmp6k_C2eVfVwqY4nKZQvgY61rI9bWaKi_qUervDa1fVH9XlUt9VVDX37xXsjmus5PwDsMCKsYwBYol2uElWBKp6zn2UrFXEt-FO1K9GWK5ZlDSgKTqMHXvkYMY9lzHXGfVTUkjOkY225IHTjkCG88teVgddxb3seOk0TuJ4Iq-YWuL7xn8eZ6Icr2rhq-rG8Z1rgDmN5T9rQs5bheZaG50QsYq-JNXYLL8ltUTU4jF9W8dm_pbFPlzccJVUjk4sPPdMVrLeLxCTwPRzfM7HxLtOOEzcTQTqLlndbwP_IMPkQQTyZBY52D6PO01fgNnAnQWSPqAtPf5yyKDhGiBkW7r3eCm7SAQvJDXPAveRRMH3X_UElp8zQLdZbyzGlpv4kyktZyKr-nJc3Pg_GxFTgtsqCMCXO5wE2DKwQ_E8wVuAOH4HnjzWq0MeOFTgmfz0FNxhs-A5GxMGNabFGAI0oHMo-5hr6LvBT7xiRrsC3-ZuL3CmardHkHc3GaD2FdJdbKUxFbusw7XOqa1bJAMu8a3LIO65y8mh6zv0NTPccn-tKtH8A979-28gCAAA.",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "MIA",
                                "name": "Miami International Airport",
                                "city": "MIA",
                                "cityName": "Miami",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "BER",
                                "name": "Berlin Brandenburg Airport Willy Brandt",
                                "city": "BER",
                                "cityName": "Berlin",
                                "country": "DE",
                                "countryName": "Germany"
                            },
                            "departureTime": "2024-12-20T16:25:00",
                            "arrivalTime": "2024-12-21T09:25:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-20T16:25:00",
                                    "arrivalTime": "2024-12-21T07:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "MIA",
                                        "name": "Miami International Airport",
                                        "city": "MIA",
                                        "cityName": "Miami",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 628,
                                        "carrierInfo": {
                                            "operatingCarrier": "KL",
                                            "marketingCarrier": "KL"
                                        }
                                    },
                                    "carriers": [
                                        "KL",
                                        "KL"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        },
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        }
                                    ],
                                    "totalTime": 31800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A330"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                },
                                {
                                    "departureTime": "2024-12-21T08:05:00",
                                    "arrivalTime": "2024-12-21T09:25:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "BER",
                                        "name": "Berlin Brandenburg Airport Willy Brandt",
                                        "city": "BER",
                                        "cityName": "Berlin",
                                        "country": "DE",
                                        "countryName": "Germany"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 1771,
                                        "carrierInfo": {
                                            "operatingCarrier": "KL",
                                            "marketingCarrier": "KL"
                                        }
                                    },
                                    "carriers": [
                                        "KL",
                                        "KL"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        },
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        }
                                    ],
                                    "totalTime": 4800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 39600,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "BER",
                                "name": "Berlin Brandenburg Airport Willy Brandt",
                                "city": "BER",
                                "cityName": "Berlin",
                                "country": "DE",
                                "countryName": "Germany"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "AMS",
                                "name": "Schiphol Airport",
                                "city": "AMS",
                                "cityName": "Amsterdam",
                                "country": "NL",
                                "countryName": "Netherlands"
                            },
                            "departureTime": "2024-12-24T11:50:00",
                            "arrivalTime": "2024-12-24T13:15:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-24T11:50:00",
                                    "arrivalTime": "2024-12-24T13:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "BER",
                                        "name": "Berlin Brandenburg Airport Willy Brandt",
                                        "city": "BER",
                                        "cityName": "Berlin",
                                        "country": "DE",
                                        "countryName": "Germany"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 1776,
                                        "carrierInfo": {
                                            "operatingCarrier": "KL",
                                            "marketingCarrier": "KL"
                                        }
                                    },
                                    "carriers": [
                                        "KL",
                                        "KL"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        },
                                        {
                                            "name": "KLM",
                                            "code": "KL"
                                        }
                                    ],
                                    "totalTime": 5100,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 5100,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "AMS",
                                "name": "Schiphol Airport",
                                "city": "AMS",
                                "cityName": "Amsterdam",
                                "country": "NL",
                                "countryName": "Netherlands"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "MIA",
                                "name": "Miami International Airport",
                                "city": "MIA",
                                "cityName": "Miami",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "departureTime": "2024-12-30T09:35:00",
                            "arrivalTime": "2024-12-30T20:15:00",
                            "legs": [
                                {
                                    "departureTime": "2024-12-30T09:35:00",
                                    "arrivalTime": "2024-12-30T10:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "AMS",
                                        "name": "Schiphol Airport",
                                        "city": "AMS",
                                        "cityName": "Amsterdam",
                                        "country": "NL",
                                        "countryName": "Netherlands"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "DUB",
                                        "name": "Dublin Airport",
                                        "city": "DUB",
                                        "cityName": "Dublin",
                                        "country": "IE",
                                        "countryName": "Ireland"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 603,
                                        "planeType": "320",
                                        "carrierInfo": {
                                            "operatingCarrier": "EI",
                                            "marketingCarrier": "EI"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "EI"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        }
                                    ],
                                    "totalTime": 6000,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A320"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        }
                                    ],
                                    "arrivalTerminal": "2"
                                },
                                {
                                    "departureTime": "2024-12-30T11:30:00",
                                    "arrivalTime": "2024-12-30T14:00:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "DUB",
                                        "name": "Dublin Airport",
                                        "city": "DUB",
                                        "cityName": "Dublin",
                                        "country": "IE",
                                        "countryName": "Ireland"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORD",
                                        "name": "Chicago O'Hare International Airport",
                                        "city": "CHI",
                                        "cityName": "Chicago",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 123,
                                        "planeType": "332",
                                        "carrierInfo": {
                                            "operatingCarrier": "EI",
                                            "marketingCarrier": "EI"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "EI"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        }
                                    ],
                                    "totalTime": 30600,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A330"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "2",
                                    "arrivalTerminal": "3"
                                },
                                {
                                    "departureTime": "2024-12-30T15:53:00",
                                    "arrivalTime": "2024-12-30T20:15:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORD",
                                        "name": "Chicago O'Hare International Airport",
                                        "city": "CHI",
                                        "cityName": "Chicago",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "MIA",
                                        "name": "Miami International Airport",
                                        "city": "MIA",
                                        "cityName": "Miami",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 7476,
                                        "planeType": "738",
                                        "carrierInfo": {
                                            "operatingCarrier": "AA",
                                            "marketingCarrier": "EI",
                                            "operatingCarrierDisclosureText": "AA/American Airlines"
                                        }
                                    },
                                    "carriers": [
                                        "EI",
                                        "AA"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Aer Lingus",
                                            "code": "EI"
                                        },
                                        {
                                            "name": "American Airlines",
                                            "code": "AA"
                                        }
                                    ],
                                    "totalTime": 12120,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "737"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "snack"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "departureTerminal": "3"
                                }
                            ],
                            "totalTime": 60000,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                }
            ],
            "flightDeals": [
                {
                    "key": "CHEAPEST",
                    "offerToken": "d6a1f_H4sIAAAAAAAA_12R226jMBCGn6a9WoxPgVDJWlGgKSmHpByi5AalDqWk3dKNqQI8_U5Ctquuxvb8_zeWB-OXtv1QN7r-_FZXL63SPhWqmraptm2JZPNLfz7A8tQ0r_V7pW_rgx769q33SLHrOT9A2GFC-UmDgBI7cZ3qGoS8Wf8su1ZTBymu66cSbYVmWdYolRTMn60u5iAMxD2-5q5jnJFsWsHRhOA4omw1XY7wIGaz1dKant1OhM7xGLi2CpNjH7i-CutzNoF3geud_BC4SxU5RxK4mRkl3Rw4Ba2ivnuIB5_Bfph38ZjHGQ_zDTDYu8aB--gCg3O8Lh6yLvSsONzP83BfqSj1jinmffiW9VF9JGF6u0j3fp-ncycePJIOaxWm-QJqXZRNaXD3cZvU3XaZNSe-jPaqDbNXFaTQy8ED3IOlBL432yXgu_M1SykFQYibFjn7ZqsEHpVshTn-zmbXiiS430z80baCGhPL4GfXCcLYdHKtyrdStnXz_lD2IsKUa_CKpYQcFA8BodjQKBlBegKmSTRKvwGswWNfwH1uYEw09nVGwon53TNqfvm4WLgEU41dWuTgJ5z981fUIQe8-_25B3XFbBhVgdF_AfTlQgmifwPotiDERfkcuffIxmjGUcBRZiN7g-42UH8qrBySLGwD0q6gBmZSgiwLahHjpJ4LDmtd0EujfeGvIA1FxXvOyz9rwogDKwMAAA..",
                    "price": {
                        "currencyCode": "USD",
                        "units": 2659,
                        "nanos": 640000000
                    },
                    "travellerPrices": [
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 1329,
                                    "nanos": 820000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 745,
                                    "nanos": 600000000
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 84,
                                    "nanos": 150000000
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 500,
                                    "nanos": 70000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 1330
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 1329,
                                    "nanos": 820000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 1330
                                }
                            },
                            "travellerReference": "1",
                            "travellerType": "ADULT"
                        },
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 1329,
                                    "nanos": 820000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 745,
                                    "nanos": 600000000
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 84,
                                    "nanos": 150000000
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 500,
                                    "nanos": 70000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 1330
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 1329,
                                    "nanos": 820000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 1330
                                }
                            },
                            "travellerReference": "2",
                            "travellerType": "ADULT"
                        }
                    ]
                },
                {
                    "key": "FASTEST",
                    "offerToken": "d6a1f_H4sIAAAAAAAA_1WRYY-aMBjHP83dq1HaUlQuaRYEnHit3gS8uDdEKyrMHRfbBfDT7xHMlqU8fX6_f9MC6dmYT_1i28dLeTobbf3W6FSb-rQzBVL1L_t4hWlf1z_Lj5O9K6-2jP1ptKY4jIIvAL5MKLszACw599ymtgVDvWy_Fq2x9FXx53JfoB23PM8bUCvuBg-88hFiEduyMBj1kaoNZ8gleLWkzvsUD-GVf1sFy--z3g5cBk0jwkjLsulWN1-DtyKMtax0uyyboYBT6H1Vmi6DZqhQE5lO39Iq7jZpTESYtTLyVrJabGS11cs0alLMOnnJulWqTXaJtdgsEngfSW9bLdPNW39-NqFidl6sO-CNT0VAkqzS8F2-FulsIQLcJklj5C3SIjskdxcRyfpfKJTiBCE29kjv9U7zCRtQGT6eDHgwPBHzH248qOEuZQ6jvbWcOM7EfdbFpVCmrD9ei46_ihGdWHBDhaLMSvNXQcZjYlHyX4AtuLe_AcV4bDmPLfIeEMb-BU80IO7oUx0vQE-OD88px-gxwM69EUQRBdvl6xCFc-RjNI-R2EK0z70NNJX7LrRD7mJMiQIs8vv-Y85gLnP6OK_K43dot5xQB9f0D2BmEGmmAgAA",
                    "price": {
                        "currencyCode": "USD",
                        "units": 5243,
                        "nanos": 420000000
                    },
                    "travellerPrices": [
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 2621,
                                    "nanos": 710000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 1961,
                                    "nanos": 810000000
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 659,
                                    "nanos": 900000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 2622
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 2621,
                                    "nanos": 710000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 2622
                                }
                            },
                            "travellerReference": "1",
                            "travellerType": "ADULT"
                        },
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 2621,
                                    "nanos": 710000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 1961,
                                    "nanos": 810000000
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 659,
                                    "nanos": 900000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 2622
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 2621,
                                    "nanos": 710000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 2622
                                }
                            },
                            "travellerReference": "2",
                            "travellerType": "ADULT"
                        }
                    ]
                },
                {
                    "key": "BEST",
                    "offerToken": "d6a1f_H4sIAAAAAAAA_2WRXY-iMBSGf41ztRTaIuAkzUYFV5Sqo0XD3BCtiKgru7YzqL9-j-DuXGz6cZ7nbXoawl7rX-rVNHenIt9rZXwolJe6zNc6Q7L8ae4usG3K8licc3NdXEwednvBnFh-0P8G0OULYj8YAI7oIzeJacCQr8n37KoNdZHspdhkaM2MTqfToJKMLp54YQ6yAzux_b5TR7LUzEZtbE0nhK56vSa8sB8zF7-J2raM96sq8gPFi-oW-aH7n4tEcdFV3FdXUVT1mt4TK_KbNb3HVx50pvwwWvJDrCYiqIRl3_gpvk2KCnPRm4lDeFuKkE5veBEXlY5PIfRczuD8Ook9Au9hcU_UKjgNHxz7iYqWo8X0Du_2K83jo4rEYBT1rTtfgIt5AnyN_EFvlbeoD7P-nExKhhGy3Q6uvVwr5tEGpWau1-BWs0U0fG-HjWpGqe16pLYrw5R67ReVnTKpi_I8zm5sHDnEM-BvZZLYhkjHEXZdbBD8N4hJm3gQ2E2QpEHoWNSgzxszcEy-fAnu2q7zFbRIH3_i04dzBGrRLsw8tdC_Ab6vHSPyGODrdO4jf4h6CRq8o5GD3oaQbtLOEopMu20o25RS3HYkYJY-muxSG_YiJc-mhzRcQbmnWObn38c_x9XyncgCAAA.",
                    "price": {
                        "currencyCode": "USD",
                        "units": 3347,
                        "nanos": 820000000
                    },
                    "travellerPrices": [
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 1673,
                                    "nanos": 910000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 1026,
                                    "nanos": 210000000
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 647,
                                    "nanos": 700000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 1674
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 1673,
                                    "nanos": 910000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 1674
                                }
                            },
                            "travellerReference": "1",
                            "travellerType": "ADULT"
                        },
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 1673,
                                    "nanos": 910000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 1026,
                                    "nanos": 210000000
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 647,
                                    "nanos": 700000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 1674
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 1673,
                                    "nanos": 910000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 1674
                                }
                            },
                            "travellerReference": "2",
                            "travellerType": "ADULT"
                        }
                    ]
                }
            ],
            "atolProtectedStatus": "NONE",
            "searchId": "0B2955F2C9033B74A94DCD8F4A0F758C",
            "displayOptions": {
                "brandedFaresShownByDefault": false,
                "directFlightsOnlyFilterIgnored": false,
                "hideFlexiblePricesBanner": false
            },
            "isOffersCabinClassExtended": false,
            "searchCriteria": {
                "cabinClass": "ECONOMY"
            }
        }
    }
]

2025-08-25 13:19:10,955 - evaluation_logger_Flights-6 - INFO - Final Response: <｜begin▁of▁sentence｜># 1. 概述

本文，我们来分享 [《精尽 Spring MVC 源码分析 —— 容器的初始化（二）之 Root WebApplicationContext 容器》](http://svip.iocoder.cn/Spring-MVC/context-init-Root-WebApplicationContext) 的**第二篇：Root WebApplicationContext 容器**。

在 [《精尽 Spring MVC 源码分析 —— 容器的初始化（一）之 Servlet WebApplicationContext 容器》](http://svip.iocoder.cn/Spring-MVC/context-init-Servlet-WebApplicationContext) 中，我们已经详细分析了 Servlet WebApplicationContext 容器的初始化过程。所以，本文更多的，是解析两者的差异之处。

# 2. 环境

在具体开始之前，我们先来看看整个项目的环境。如下图所示：

![环境](第二章.assets/01.png)

- 一共有**两个** Spring 容器。
- 其中，`app1` 和 `app2` 的 Servlet WebApplicationContext 容器，**都继承**自 Root WebApplicationContext 容器。

# 3. ContextLoaderListener

`org.springframework.web.context.ContextLoaderListener` ，实现 `javax.servlet.ServletContextListener` 接口，Web 应用的监听器，主要用于初始化 Root WebApplicationContext 容器。代码如下：

```java
// ContextLoaderListener.java

public class ContextLoaderListener extends ContextLoader implements ServletContextListener {

	/**
     * 构造方法
     */
	public ContextLoaderListener() {
	}

	/**
     * 构造方法
     *
     * @param context 配置的 WebApplicationContext 对象
     */
	public ContextLoaderListener(WebApplicationContext context) {
		super(context);
	}

	// 实现 ServletContextListener 的 contextInitialized 方法，在 Servlet 容器启动时，进行初始化
	@Override
	public void contextInitialized(ServletContextEvent event) {
		// 初始化 WebApplicationContext
		initWebApplicationContext(event.getServletContext());
	}

	// 实现 ServletContextListener 的 contextDestroyed 方法，在 Servlet 容器关闭时，进行销毁
	@Override
	public void contextDestroyed(ServletContextEvent event) {
		// 关闭 WebApplicationContext
		closeWebApplicationContext(event.getServletContext());
		// 进行清理
		ContextCleanupListener.cleanupAttributes(event.getServletContext());
	}

}
```

- 代码比较简单，在 Servlet 容器启动时，调用 `#initWebApplicationContext(ServletContext servletContext)` 方法，初始化 WebApplicationContext 容器。而该方法，继承自父类 ContextLoader 。
- 在 Servlet 容器关闭时，调用 `#closeWebApplicationContext(ServletContext servletContext)` 方法，关闭 WebApplicationContext 容器。而该方法，继承自父类 ContextLoader 。

# 4. ContextLoader

`org.springframework.web.context.ContextLoader` ，用于初始化 Root WebApplicationContext 容器。代码如下：

```java
// ContextLoader.java

public class ContextLoader {

    /**
     * 默认配置类的地址
     */
	public static final String CONFIG_LOCATION_PARAM = "contextConfigLocation";

    /**
     * 创建 Root WebApplicationContext 实现类的类名
     */
	public static final String CONTEXT_CLASS_PARAM = "contextClass";

    /**
     * 自定义的 ContextInitializer 实现类的类名
     */
	public static final String CONTEXT_INITIALIZER_CLASSES_PARAM = "contextInitializerClasses";

    /**
     * 是否在 Servlet 容器启动时，就初始化 Root WebApplicationContext 容器
     */
	public static final String LOCATOR_FACTORY_SELECTOR_PARAM = "locatorFactorySelector";

    /**
     * 
     */
	public static final String LOCATOR_FACTORY_KEY_PARAM = "parentContextKey";

	private static final String SERVLET_CONTEXT_PREFIX = ContextLoader.class.getName() + ".";

	private static final String DEFAULT_STRATEGIES_PATH = "ContextLoader.properties";

	private static final Properties defaultStrategies;

	static {
		// Load default strategy implementations from properties file.
		// This is currently strictly internal and not meant to be customized
		// by application developers.
		try {
			ClassPathResource resource = new ClassPathResource(DEFAULT_STRATEGIES_PATH, ContextLoader.class);
			defaultStrategies = PropertiesLoaderUtils.loadProperties(resource);
		} catch (IOException ex) {
			throw new IllegalStateException("Could not load 'ContextLoader.properties': " + ex.getMessage());
		}
	}

	/**
	 * 根 WebApplicationContext 容器
	 */
	private WebApplicationContext context;

	/**
	 * 创建 Root WebApplicationContext 的实现类
	 */
	private Class<?> contextClass;

	// 上面是定义的静态变量和成员变量，下面开始是方法

}
```

- 定义的静态变量和成员变量，我们只看注释，暂时不理解也不要紧，下面会使用到。

## 4.1 initWebApplicationContext

`#initWebApplicationContext(ServletContext servletContext)` 方法，初始化 Root WebApplicationContext 容器。代码如下：

```java
// ContextLoader.java

/**
 * Initialize Spring's web application context for the given servlet context,
 * using the application context provided at construction time, or creating a new one
 * according to the "{@link #CONTEXT_CLASS_PARAM contextClass}" and
 * "{@link #CONFIG_LOCATION_PARAM contextConfigLocation}" context-params.
 * @param servletContext current servlet context
 * @return the new WebApplicationContext
 * @see #ContextLoader(WebApplicationContext)
 * @see #CONTEXT_CLASS_PARAM
 * @see #CONFIG_LOCATION_PARAM
 */
public WebApplicationContext initWebApplicationContext(ServletContext servletContext) {
    // <1> 如果已经存在 Root WebApplicationContext 容器，则抛出 IllegalStateException 异常
    if (servletContext.getAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE) != null) {
        throw new IllegalStateException(
                "Cannot initialize context because there is already a root application context present - " +
                "check whether you have multiple ContextLoader* definitions in your web.xml!");
    }

    // 记录日志
    servletContext.log("Initializing Spring root WebApplicationContext");

    // 记录日志
    Log logger = LogFactory.getLog(ContextLoader.class);
    if (logger.isInfoEnabled()) {
        logger.info("Root WebApplicationContext: initialization started");
    }

    // 记录开始时间
    long startTime = System.currentTimeMillis();

    try {
        // Store context in local instance variable, to guarantee that
        // it is available on ServletContext shutdown.
        // <2> 如果不存在 context 上下文，则进行创建
        if (this.context == null) {
            this.context = createWebApplicationContext(servletContext);
        }
        // <3> 如果是 ConfigurableWebApplicationContext 类型的，并且未激活，则进行配置和初始化
        if (this.context instanceof ConfigurableWebApplicationContext) {
            ConfigurableWebApplicationContext cwac = (ConfigurableWebApplicationContext) this.context;
            if (!cwac.isActive()) {
                // The context has not yet been refreshed -> provide services such as
                // setting the parent context, setting the application context id, etc
                // <3.1> 设置父容器
                if (cwac.getParent() == null) {
                    // The context instance was injected without an explicit parent ->
                    // determine parent for root web application context, if any.
                    ApplicationContext parent = loadParentContext(servletContext);
                    cwac.setParent(parent);
                }
                // <3.2> 配置并初始化 WebApplicationContext
                configureAndRefreshWebApplicationContext(cwac, servletContext);
            }
        }
        // <4> 设置到 ServletContext 中
        servletContext.setAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE, this.context);

        // <5> 设置到当前线程中
        ClassLoader ccl = Thread.currentThread().getContextClassLoader();
        if (ccl == ContextLoader.class.getClassLoader()) {
            currentContext = this.context;
        } else if (ccl != null) {
            currentContextPerThread.put(ccl, this.context);
        }

        // 记录日志
        if (logger.isInfoEnabled()) {
            long elapsedTime = System.currentTimeMillis() - startTime;
            logger.info("Root WebApplicationContext initialized in " + elapsedTime + " ms");
        }

        return this.context;
    } catch (RuntimeException | Error ex) {
        logger.error("Context initialization failed", ex);
        servletContext.setAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE, ex);
        throw ex;
    }
}
```

- `<1>` 处，如果已经存在 Root WebApplicationContext 容器，则抛出 IllegalStateException 异常。也就是说，Root WebApplicationContext 容器，只能有一个。
- `<2>` 处，如果不存在 `context` 上下文，则调用 `#createWebApplicationContext(ServletContext sc)` 方法，进行创建。
- `<3>` 处，如果是 ConfigurableWebApplicationContext 类型的，并且未激活，则进行配置和初始化。
  - `<3.1>` 处，设置父容器。默认情况下，父容器为 `null` 。当然，此处有可能会设置，可参见 `#loadParentContext(ServletContext servletContext)` 方法。
  - `<3.2>` 处，调用 `#configureAndRefreshWebApplicationContext(ConfigurableWebApplicationContext wac, ServletContext sc)` 方法，配置并初始化 WebApplicationContext 。
- `<4>` 处，设置到 ServletContext 中。
- `<5>` 处，设置到当前线程中。

### 4.1.1 createWebApplicationContext

`#createWebApplicationContext(ServletContext sc)` 方法，创建 Root WebApplicationContext 对象。代码如下：

```java
// ContextLoader.java

protected WebApplicationContext createWebApplicationContext(ServletContext sc) {
    // <1> 获得 context 的类
    Class<?> contextClass = determineContextClass(sc);
    // <2> 判断 contextClass 是否是 ConfigurableWebApplicationContext 的子类
    if (!ConfigurableWebApplicationContext.class.isAssignableFrom(contextClass)) {
        throw new ApplicationContextException("Custom context class [" + contextClass.getName() +
                "] is not of type [" + ConfigurableWebApplicationContext.class.getName() + "]");
    }
    // <3> 创建 contextClass 对应的对象
    return (ConfigurableWebApplicationContext) BeanUtils.instantiateClass(contextClass);
}
```

- `<1>` 处，调用 `#determineContextClass(ServletContext servletContext)` 方法，获得 context 的类。代码如下：

  ```java
  // ContextLoader.java
  
  protected Class<?> determineContextClass(ServletContext servletContext) {
      // 获得 servletContext 的 contextClass 属性
      String contextClassName = servletContext.getInitParameter(CONTEXT_CLASS_PARAM);
      // 如果配置，则使用该配置的类
      if (contextClassName != null) {
          try {
              return ClassUtils.forName(contextClassName, ClassUtils.getDefaultClassLoader());
          } catch (ClassNotFoundException ex) {
              throw new ApplicationContextException(
                      "Failed to load custom context class [" + contextClassName + "]", ex);
          }
      // 如果未配置，则使用 defaultStrategies 默认的配置的类
      } else {
          contextClassName = defaultStrategies.getProperty(WebApplicationContext.class.getName());
          try {
              return ClassUtils.forName(contextClassName, ContextLoader.class.getClassLoader());
          } catch (ClassNotFoundException ex) {
              throw new ApplicationContextException(
                      "Failed to load default context class [" + contextClassName + "]", ex);
          }
      }
  }
  ```

  - 默认情况下，`contextClassName` 为 `null` ，所以会使用 `defaultStrategies` 默认的配置的类。而 `defaultStrategies` 的配置如下：

    ```properties
    org.springframework.web.context.WebApplicationContext=org.springframework.web.context.support.XmlWebApplicationContext
    ```

    - 所以，创建的 Root WebApplicationContext 容器，类型为 XmlWebApplicationContext 。

- `<2>` 处，判断 `contextClass` 是否是 ConfigurableWebApplicationContext 的子类。因为，创建的 WebApplicationContext 容器，必须是 ConfigurableWebApplicationContext 的子类。

- `<3>` 处，创建 `contextClass` 对应的对象。

### 4.1.2 configureAndRefreshWebApplicationContext

`#configureAndRefreshWebApplicationContext(ConfigurableWebApplicationContext wac, ServletContext sc)` 方法，配置并初始化 WebApplicationContext 。代码如下：

```java
// ContextLoader.java

protected void configureAndRefreshWebApplicationContext(ConfigurableWebApplicationContext wac, ServletContext sc) {
    // <1> 如果 wac 使用了默认的编号，则重新设置 id 属性
    if (ObjectUtils.identityToString(wac).equals(wac.getId())) {
        // The application context id is still set to its original default value
        // -> assign a more useful id based on available information
        String idParam = sc.getInitParameter(CONTEXT_ID_PARAM);
        if (idParam != null) {
            wac.setId(idParam);
        } else {
            // Generate default id...
            wac.setId(ConfigurableWebApplicationContext.APPLICATION_CONTEXT_ID_PREFIX +
                    ObjectUtils.getDisplayString(sc.getContextPath()));
        }
    }

    // <2> 设置 ServletContext 属性
    wac.setServletContext(sc);
    // <3> 获得 contextConfigLocation 属性，即 Spring 配置文件的地址
    String configLocationParam = sc.getInitParameter(CONFIG_LOCATION_PARAM);
    if (configLocationParam != null) {
        wac.setConfigLocation(configLocationParam);
    }

    // The wac environment's #initPropertySources will be called in any case when the context
    // is refreshed; do it eagerly here to ensure servlet property sources are in place for
    // use in any post-processing or initialization that occurs below prior to #refresh
    // <4> 获得 ConfigurableEnvironment 对象，并设置 property sources 属性
    ConfigurableEnvironment env = wac.getEnvironment();
    if (env instanceof ConfigurableWebEnvironment) {
        ((ConfigurableWebEnvironment) env).initPropertySources(sc, null);
    }

    // <5> 执行自定义的 context 初始化
    customizeContext(sc, wac);

    // <6> 刷新容器，即初始化
    wac.refresh();
}
```

- `<1>` 处，如果 `wac` 使用了默认的编号，则重新设置 `id` 属性。
- `<2>` 处，设置 ServletContext 属性。
- `<3>` 处，获得 `contextConfigLocation` 属性，即 Spring 配置文件的地址。例如：`contextConfigLocation` 对应的为 `/WEB-INF/applicationContext.xml` 。
- `<4>` 处，获得 ConfigurableEnvironment 对象，并设置 `property sources` 属性。
- `<5>` 处，调用 `#customizeContext(ServletContext sc, ConfigurableWebApplicationContext wac)` 方法，执行自定义的 context 初始化。代码如下：

  ```java
  // ContextLoader.java
  
  protected void customizeContext(ServletContext sc, ConfigurableWebApplicationContext wac) {
      // 获得 contextInitializerClasses 属性
  	List<Class<ApplicationContextInitializer<ConfigurableApplicationContext>>> initializerClasses =
  			determineContextInitializerClasses(sc);
  	
      // 创建 ApplicationContextInitializer 对象数组
  	for (Class<ApplicationContextInitializer<ConfigurableApplicationContext>> initializerClass : initializerClasses) {
  		Class<?> initializerContextClass =
  				GenericTypeResolver.resolveTypeArgument(initializerClass, ApplicationContextInitializer.class);
  		if (initializerContextClass != null && !initializerContextClass.isInstance(wac)) {
  			throw new ApplicationContextException(String.format(
  					"Could not apply context initializer [%s] since its generic parameter [%s] " +
  					"is not assignable from the type of application context used by this " +
  					"context loader: [%s]", initializerClass.getName(), initializerContextClass.getName(),
  					wac.getClass().getName()));
  		}
  		this.contextInitializers.add(BeanUtils.instantiateClass(initializerClass));
  	}
  
  	// 初始化 ApplicationContextInitializer 对象数组
  	AnnotationAwareOrderComparator.sort(this.contextInitializers);
  	for (ApplicationContextInitializer<ConfigurableApplicationContext> initializer : this.contextInitializers) {
  		initializer.initialize(wac);
  	}
  }
  ```

  - 一般情况下，我们不会配置 `contextInitializerClasses` 属性。

- `<6>` 处，调用 `ConfigurableWebApplicationContext#refresh()` 方法，刷新容器，即初始化。关于该方法，我们在 [《精尽 Spring MVC 源码分析 —— 容器的初始化（一）之 Servlet WebApplicationContext 容器》](http://svip.iocoder.cn/Spring-MVC/context-init-Servlet-WebApplicationContext) 的 [「4.1.4 refresh」](http://svip.iocoder.cn/Spring-MVC/context-init-Root-WebApplicationContext/#) 中，已经详细解析。

## 4.2 closeWebApplicationContext

`#closeWebApplicationContext(ServletContext servletContext)` 方法，关闭 Root WebApplicationContext 容器。代码如下：

```java
// ContextLoader.java

public void closeWebApplicationContext(ServletContext servletContext) {
    servletContext.log("Closing Spring root WebApplicationContext");
    try {
        if (this.context instanceof ConfigurableWebApplicationContext) {
            ((ConfigurableWebApplicationContext) this.context).close();
        }
    } finally {
        ClassLoader ccl = Thread.currentThread().getContextClassLoader();
        if (ccl == ContextLoader.class.getClassLoader()) {
            currentContext = null;
        } else if (ccl != null) {
            currentContextPerThread.remove(ccl);
        }
        servletContext.removeAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE);
    }
}
```

- 代码比较简单，胖友自己瞅瞅。

# 5. 小结

至此，Root WebApplicationContext 容器也已经初始化完成。

另外，Servlet WebApplicationContext 容器和 Root WebApplicationContext 容器，初始化的逻辑是**基本一致**的。所以，可以回看 [《精尽 Spring MVC 源码分析 —— 容器的初始化（一）之 Servlet WebApplicationContext 容器》](http://svip.iocoder.cn/Spring-MVC/context-init-Servlet-WebApplicationContext) 的 [「5. 小结」](http://sv

2025-08-25 13:19:17,114 - evaluation_logger_Flights-6 - INFO - Complete Result: {'score': 0, 'reason': 'The response does not address any of the requested information about economy class for the specified flights.'}
2025-08-25 13:19:23,677 - evaluation_logger_Flights-6 - INFO - Correct Result: {'score': 0, 'reason': 'All information in the response is incorrect.'}
2025-08-25 13:19:23,677 - evaluation_logger_Flights-6 - INFO - Message: Success.
2025-08-25 13:19:23,677 - evaluation_logger_Flights-6 - INFO - Success turn num = 2
2025-08-25 13:19:23,677 - evaluation_logger_Flights-6 - INFO - ----------------------------------------------------------------------------------------------------
