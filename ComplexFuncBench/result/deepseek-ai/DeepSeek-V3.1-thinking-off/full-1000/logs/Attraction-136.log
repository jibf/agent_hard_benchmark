2025-08-25 13:12:48,945 - evaluation_logger_Attraction-136 - INFO - Test Example Attraction-136
2025-08-25 13:12:48,945 - evaluation_logger_Attraction-136 - INFO - Query: Our family is planning a vacation from December 25, 2024, to January 7, 2025, and we're trying to choose between New York and Los Angeles. Can you check the ticket availability for attractions that offer free entry for our five-year-old on December 29 in both places?
2025-08-25 13:12:57,677 - evaluation_logger_Attraction-136 - INFO - Function Calls: 
[
    {
        "name": "Search_Attraction_Location",
        "arguments": {
            "query": "New York"
        }
    },
    {
        "name": "Search_Attraction_Location",
        "arguments": {
            "query": "Los Angeles"
        }
    }
]

2025-08-25 13:12:57,677 - evaluation_logger_Attraction-136 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Attraction_Location",
        "arguments": {
            "query": "New York"
        }
    },
    {
        "name": "Search_Attraction_Location",
        "arguments": {
            "query": "Los Angeles"
        }
    },
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOjIwMDg4MzI1fQ=="
        }
    },
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOjIwMDE0MTgxfQ=="
        }
    }
]

2025-08-25 13:12:57,677 - evaluation_logger_Attraction-136 - INFO - Start compare_single_call: 
{'name': 'Search_Attraction_Location', 'arguments': {'query': 'New York'}}
{'name': 'Search_Attraction_Location', 'arguments': {'query': 'New York'}}
2025-08-25 13:12:57,677 - evaluation_logger_Attraction-136 - INFO - Rule-based compare success.
2025-08-25 13:12:57,677 - evaluation_logger_Attraction-136 - INFO - Start compare_single_call: 
{'name': 'Search_Attraction_Location', 'arguments': {'query': 'Los Angeles'}}
{'name': 'Search_Attraction_Location', 'arguments': {'query': 'Los Angeles'}}
2025-08-25 13:12:57,677 - evaluation_logger_Attraction-136 - INFO - Rule-based compare success.
2025-08-25 13:12:57,677 - evaluation_logger_Attraction-136 - INFO - Success matched: [{'name': 'Search_Attraction_Location', 'arguments': {'query': 'New York'}}, {'name': 'Search_Attraction_Location', 'arguments': {'query': 'Los Angeles'}}]
2025-08-25 13:12:57,677 - evaluation_logger_Attraction-136 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "destinations": [
                {
                    "id": "eyJ1ZmkiOjIwMDg4MzI1fQ==",
                    "__typename": "AttractionsSearchDestinationSuggestion",
                    "ufi": 20088325,
                    "country": "United States",
                    "cityName": "New York",
                    "productCount": 1816,
                    "cc1": "us"
                },
                {
                    "id": "eyJ1ZmkiOjIwMDg4MzEyfQ==",
                    "__typename": "AttractionsSearchDestinationSuggestion",
                    "ufi": 20088312,
                    "country": "United States",
                    "cityName": "New Rochelle",
                    "productCount": 1816,
                    "cc1": "us"
                }
            ]
        }
    },
    {
        "status": true,
        "message": "Success",
        "data": {
            "destinations": [
                {
                    "id": "eyJ1ZmkiOjIwMDE0MTgxfQ==",
                    "__typename": "AttractionsSearchDestinationSuggestion",
                    "ufi": 20014181,
                    "country": "United States",
                    "cityName": "Los Angeles",
                    "productCount": 1086,
                    "cc1": "us"
                }
            ]
        }
    }
]

2025-08-25 13:13:08,174 - evaluation_logger_Attraction-136 - INFO - Function Calls: 
[
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOjIwMDg4MzI1fQ=="
        }
    },
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOjIwMDE0MTgxfQ=="
        }
    }
]

2025-08-25 13:13:08,174 - evaluation_logger_Attraction-136 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOjIwMDg4MzI1fQ=="
        }
    },
    {
        "name": "Search_Attractions",
        "arguments": {
            "id": "eyJ1ZmkiOjIwMDE0MTgxfQ=="
        }
    },
    {
        "name": "Get_Attraction_Details",
        "arguments": {
            "slug": "prcmokyuz7um-summit-one-vanderbilt-tickets"
        }
    },
    {
        "name": "Get_Attraction_Details",
        "arguments": {
            "slug": "prgumd7aggw6-universal-studios-hollywood-general-admission"
        }
    }
]

2025-08-25 13:13:08,174 - evaluation_logger_Attraction-136 - INFO - Start compare_single_call: 
{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOjIwMDg4MzI1fQ=='}}
{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOjIwMDg4MzI1fQ=='}}
2025-08-25 13:13:08,174 - evaluation_logger_Attraction-136 - INFO - Rule-based compare success.
2025-08-25 13:13:08,174 - evaluation_logger_Attraction-136 - INFO - Start compare_single_call: 
{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOjIwMDE0MTgxfQ=='}}
{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOjIwMDE0MTgxfQ=='}}
2025-08-25 13:13:08,174 - evaluation_logger_Attraction-136 - INFO - Rule-based compare success.
2025-08-25 13:13:08,175 - evaluation_logger_Attraction-136 - INFO - Success matched: [{'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOjIwMDg4MzI1fQ=='}}, {'name': 'Search_Attractions', 'arguments': {'id': 'eyJ1ZmkiOjIwMDE0MTgxfQ=='}}]
2025-08-25 13:13:08,175 - evaluation_logger_Attraction-136 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "__typename": "AttractionsProductSearchResponse",
            "products": [
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": true
                    },
                    "id": "PRCMOkYUz7Um",
                    "name": "SUMMIT One Vanderbilt Tickets",
                    "slug": "prcmokyuz7um-summit-one-vanderbilt-tickets",
                    "shortDescription": "Digital art installations and views of New York from a skyscraper terrace",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 46.82,
                        "currency": "USD",
                        "publicAmount": 46.82
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 1312,
                        "percentage": "96%",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.7,
                            "total": 2467
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "New York",
                        "ufi": 20088325
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIeMCbRjNgmr"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIvFKbAYjwLY"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIfUGWEmdWzI"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIqn0SXffVJg"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OImwt60hz2zK"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIAI6L6KhvTa"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIL3pgiPlpZ0"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIekOTxXZSJa"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI7j4P1brxYK"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestseller",
                            "value": true,
                            "rank": 1
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerInMonth",
                            "value": true,
                            "rank": 1
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerInWeek",
                            "value": true,
                            "rank": 1
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerOnWeekends",
                            "value": true,
                            "rank": 1
                        },
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestsellerForMuseums",
                            "value": true,
                            "rank": 1
                        }
                    ]
                }
            ],
            "filterStats": {
                "__typename": "FilterStats",
                "unfilteredProductCount": 1816,
                "filteredProductCount": 1816
            },
            "sorters": [
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Our top picks",
                    "value": "trending"
                },
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Most popular",
                    "value": "attr_book_score"
                },
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Lowest price",
                    "value": "lowest_price"
                },
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Best reviewed",
                    "value": "highest_weighted_rating"
                }
            ],
            "defaultSorter": {
                "__typename": "AttractionsSorterOption",
                "name": "Our top picks",
                "value": "trending"
            },
            "filterOptions": {
                "__typename": "FilterOptions",
                "typeFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Tours",
                        "tagname": "tours",
                        "productCount": 521
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Nature & outdoor",
                        "tagname": "nature-outdoor",
                        "productCount": 361
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Museums, arts & culture",
                        "tagname": "museums-arts-culture",
                        "productCount": 254
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Entertainment & tickets",
                        "tagname": "entertainment-tickets",
                        "productCount": 207
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Food & drinks",
                        "tagname": "food-drinks",
                        "productCount": 55
                    }
                ],
                "labelFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Free cancellation",
                        "tagname": "free_cancellation",
                        "productCount": 1534
                    }
                ],
                "ufiFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "New York",
                        "tagname": "20088325",
                        "productCount": 1664
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Brooklyn",
                        "tagname": "20085207",
                        "productCount": 81
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Newark",
                        "tagname": "20081957",
                        "productCount": 53
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Jersey City",
                        "tagname": "20081509",
                        "productCount": 11
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Westchester",
                        "tagname": "20090608",
                        "productCount": 7
                    }
                ],
                "priceFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "US$0 - US$22",
                        "tagname": "b0",
                        "productCount": 147
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$22 - US$44",
                        "tagname": "b1",
                        "productCount": 305
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$44 - US$83",
                        "tagname": "b2",
                        "productCount": 450
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$83 - US$138",
                        "tagname": "b3",
                        "productCount": 364
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$138+",
                        "tagname": "b4",
                        "productCount": 697
                    }
                ]
            }
        }
    },
    {
        "status": true,
        "message": "Success",
        "data": {
            "__typename": "AttractionsProductSearchResponse",
            "products": [
                {
                    "__typename": "AttractionsProduct",
                    "cancellationPolicy": {
                        "__typename": "AttractionsCancellationPolicy",
                        "hasFreeCancellation": false
                    },
                    "id": "PRgumD7AGgw6",
                    "name": "Universal Studios Hollywood General Admission Ticket",
                    "slug": "prgumd7aggw6-universal-studios-hollywood-general-admission",
                    "shortDescription": "A one-day ticket providing admission to Universal Studios Hollywood",
                    "representativePrice": {
                        "__typename": "AttractionsPrice",
                        "chargeAmount": 109.05,
                        "currency": "USD",
                        "publicAmount": 109.05
                    },
                    "reviewsStats": {
                        "__typename": "AttractionsProductReviewStats",
                        "allReviewsCount": 8,
                        "percentage": "88%",
                        "combinedNumericStats": {
                            "__typename": "AttractionsProductCombinedReviewStats",
                            "average": 4.4,
                            "total": 392
                        }
                    },
                    "ufiDetails": {
                        "__typename": "AttractionLocationResponse",
                        "bCityName": "Los Angeles",
                        "ufi": 20014181
                    },
                    "offers": [
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OI8pkVO05Rr3"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OINLc2YBzABz"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIO0xe6hsjvq"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIqwCPJm0s1U"
                                }
                            ]
                        },
                        {
                            "__typename": "Offer",
                            "items": [
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIsgwmp3gOUw"
                                },
                                {
                                    "__typename": "OfferItem",
                                    "id": "OIqYt6fLR2qw"
                                }
                            ]
                        }
                    ],
                    "supportedFeatures": {
                        "__typename": "AttractionsProductSupportedFeatures",
                        "nativeApp": true
                    },
                    "flags": [
                        {
                            "__typename": "AttractionsProductFlags",
                            "flag": "bestseller",
                            "value": true,
                            "rank": 1
                        }
                    ]
                }
            ],
            "filterStats": {
                "__typename": "FilterStats",
                "unfilteredProductCount": 1086,
                "filteredProductCount": 1086
            },
            "sorters": [
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Our top picks",
                    "value": "trending"
                },
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Most popular",
                    "value": "attr_book_score"
                },
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Lowest price",
                    "value": "lowest_price"
                },
                {
                    "__typename": "AttractionsSorterOption",
                    "name": "Best reviewed",
                    "value": "highest_weighted_rating"
                }
            ],
            "defaultSorter": {
                "__typename": "AttractionsSorterOption",
                "name": "Our top picks",
                "value": "trending"
            },
            "filterOptions": {
                "__typename": "FilterOptions",
                "typeFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Tours",
                        "tagname": "tours",
                        "productCount": 254
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Nature & outdoor",
                        "tagname": "nature-outdoor",
                        "productCount": 160
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Entertainment & tickets",
                        "tagname": "entertainment-tickets",
                        "productCount": 135
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Museums, arts & culture",
                        "tagname": "museums-arts-culture",
                        "productCount": 98
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Food & drinks",
                        "tagname": "food-drinks",
                        "productCount": 43
                    }
                ],
                "labelFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Free cancellation",
                        "tagname": "free_cancellation",
                        "productCount": 973
                    }
                ],
                "ufiFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "Los Angeles",
                        "tagname": "20014181",
                        "productCount": 543
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Santa Barbara",
                        "tagname": "20015794",
                        "productCount": 87
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Buena Park",
                        "tagname": "20011850",
                        "productCount": 69
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Palm Springs",
                        "tagname": "20015057",
                        "productCount": 69
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "Santa Monica",
                        "tagname": "20015803",
                        "productCount": 69
                    }
                ],
                "priceFilters": [
                    {
                        "__typename": "FilterOption",
                        "name": "US$0 - US$22",
                        "tagname": "b0",
                        "productCount": 162
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$22 - US$44",
                        "tagname": "b1",
                        "productCount": 166
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$44 - US$83",
                        "tagname": "b2",
                        "productCount": 151
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$83 - US$138",
                        "tagname": "b3",
                        "productCount": 149
                    },
                    {
                        "__typename": "FilterOption",
                        "name": "US$138+",
                        "tagname": "b4",
                        "productCount": 484
                    }
                ]
            }
        }
    }
]

2025-08-25 13:13:21,135 - evaluation_logger_Attraction-136 - INFO - Function Calls: 
[
    {
        "name": "Get_Availability",
        "arguments": {
            "slug": "prcmokyuz7um-summit-one-vanderbilt-tickets",
            "date": "2024-12-29"
        }
    },
    {
        "name": "Get_Availability",
        "arguments": {
            "slug": "prgumd7aggw6-universal-studios-hollywood-general-admission",
            "date": "2024-12-29"
        }
    }
]

2025-08-25 13:13:21,136 - evaluation_logger_Attraction-136 - INFO - Golden Function Call: 
[
    {
        "name": "Get_Attraction_Details",
        "arguments": {
            "slug": "prcmokyuz7um-summit-one-vanderbilt-tickets"
        }
    },
    {
        "name": "Get_Attraction_Details",
        "arguments": {
            "slug": "prgumd7aggw6-universal-studios-hollywood-general-admission"
        }
    },
    {
        "name": "Get_Availability",
        "arguments": {
            "slug": "prcmokyuz7um-summit-one-vanderbilt-tickets",
            "date": "2024-12-29"
        }
    }
]

2025-08-25 13:13:21,790 - evaluation_logger_Attraction-136 - INFO - Start compare_single_call: 
{'name': 'Get_Availability', 'arguments': {'date': '2024-12-29', 'slug': 'prcmokyuz7um-summit-one-vanderbilt-tickets'}}
{'name': 'Get_Availability', 'arguments': {'date': '2024-12-29', 'slug': 'prcmokyuz7um-summit-one-vanderbilt-tickets'}}
2025-08-25 13:13:21,790 - evaluation_logger_Attraction-136 - INFO - Rule-based compare success.
2025-08-25 13:13:21,790 - evaluation_logger_Attraction-136 - INFO - Start compare_single_call: 
{'name': 'Get_Availability', 'arguments': {'date': '2024-12-29', 'slug': 'prgumd7aggw6-universal-studios-hollywood-general-admission'}}
{'name': 'Get_Attraction_Details', 'arguments': {'slug': 'prgumd7aggw6-universal-studios-hollywood-general-admission'}}
2025-08-25 13:13:21,791 - evaluation_logger_Attraction-136 - INFO - {'error_type': 'func_error', 'content': 'Do not call the correct function.'}
2025-08-25 13:13:21,791 - evaluation_logger_Attraction-136 - INFO - Success matched: [{'name': 'Get_Availability', 'arguments': {'date': '2024-12-29', 'slug': 'prcmokyuz7um-summit-one-vanderbilt-tickets'}}]
2025-08-25 13:13:21,791 - evaluation_logger_Attraction-136 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "__typename": "AttractionTimeSlot",
                "fullDay": false,
                "start": "2024-12-29T22:00:00-05:00",
                "timeSlotId": "TSXJkv2ibrvA",
                "timeSlotOffers": [
                    {
                        "__typename": "AttractionTimeSlotOffer",
                        "benefits": {
                            "__typename": "Benefits"
                        },
                        "id": "OFgo9yD3iOP3",
                        "items": [
                            {
                                "__typename": "AttractionTimeSlotOfferItem",
                                "cancellationPolicy": {
                                    "__typename": "AttractionsCancellationPolicy",
                                    "comparedTo": "start",
                                    "hasFreeCancellation": true,
                                    "isStillRefundable": true,
                                    "percentage": 100,
                                    "period": "P1D"
                                },
                                "constraint": {
                                    "__typename": "Constraint",
                                    "label": "(age 13+)"
                                },
                                "id": "TOkZmcXtBJvM",
                                "offerItemId": "OIfUGWEmdWzI",
                                "type": "adult",
                                "tieredPricing": false,
                                "price": {
                                    "__typename": "AttractionsPrice",
                                    "chargeAmount": 57.71,
                                    "currency": "USD",
                                    "publicAmount": 57.71
                                },
                                "ticketsAvailable": 10000,
                                "maxPerReservation": 15,
                                "minPerReservation": 1,
                                "label": "Adult"
                            },
                            {
                                "__typename": "AttractionTimeSlotOfferItem",
                                "cancellationPolicy": {
                                    "__typename": "AttractionsCancellationPolicy",
                                    "comparedTo": "start",
                                    "hasFreeCancellation": true,
                                    "isStillRefundable": true,
                                    "percentage": 100,
                                    "period": "P1D"
                                },
                                "constraint": {
                                    "__typename": "Constraint",
                                    "label": "(age 6-12)"
                                },
                                "id": "TO0tKniF9VBd",
                                "offerItemId": "OIL3pgiPlpZ0",
                                "type": "children",
                                "tieredPricing": false,
                                "price": {
                                    "__typename": "AttractionsPrice",
                                    "chargeAmount": 51.18,
                                    "currency": "USD",
                                    "publicAmount": 51.18
                                },
                                "ticketsAvailable": 10000,
                                "maxPerReservation": 15,
                                "minPerReservation": 1,
                                "label": "Child"
                            }
                        ],
                        "label": "Entrance ticket",
                        "reservationRestrictions": {
                            "__typename": "ReservationRestrictions",
                            "adultRequiredForReservation": false,
                            "minOfferItemsPerReservation": 0
                        },
                        "typicalDuration": {
                            "__typename": "Value",
                            "label": "Duration: 2 hours",
                            "value": "PT2H"
                        }
                    }
                ]
            }
        ]
    },
    {
        "api_status": true,
        "content": "There is a problem with your api call, please double-check for possible problems."
    }
]

2025-08-25 13:13:33,636 - evaluation_logger_Attraction-136 - INFO - Function Calls: 
[
    {
        "name": "Get_Attraction_Details",
        "arguments": {
            "slug": "prcmokyuz7um-summit-one-vanderbilt-tickets"
        }
    },
    {
        "name": "Get_Attraction_Details",
        "arguments": {
            "slug": "prgumd7aggw6-universal-studios-hollywood-general-admission"
        }
    }
]

2025-08-25 13:13:33,636 - evaluation_logger_Attraction-136 - INFO - Golden Function Call: 
[
    {
        "name": "Get_Attraction_Details",
        "arguments": {
            "slug": "prcmokyuz7um-summit-one-vanderbilt-tickets"
        }
    },
    {
        "name": "Get_Attraction_Details",
        "arguments": {
            "slug": "prgumd7aggw6-universal-studios-hollywood-general-admission"
        }
    }
]

2025-08-25 13:13:33,636 - evaluation_logger_Attraction-136 - INFO - Start compare_single_call: 
{'name': 'Get_Attraction_Details', 'arguments': {'slug': 'prcmokyuz7um-summit-one-vanderbilt-tickets'}}
{'name': 'Get_Attraction_Details', 'arguments': {'slug': 'prcmokyuz7um-summit-one-vanderbilt-tickets'}}
2025-08-25 13:13:33,636 - evaluation_logger_Attraction-136 - INFO - Rule-based compare success.
2025-08-25 13:13:33,636 - evaluation_logger_Attraction-136 - INFO - Start compare_single_call: 
{'name': 'Get_Attraction_Details', 'arguments': {'slug': 'prgumd7aggw6-universal-studios-hollywood-general-admission'}}
{'name': 'Get_Attraction_Details', 'arguments': {'slug': 'prgumd7aggw6-universal-studios-hollywood-general-admission'}}
2025-08-25 13:13:33,636 - evaluation_logger_Attraction-136 - INFO - Rule-based compare success.
2025-08-25 13:13:33,636 - evaluation_logger_Attraction-136 - INFO - Success matched: [{'name': 'Get_Attraction_Details', 'arguments': {'slug': 'prcmokyuz7um-summit-one-vanderbilt-tickets'}}, {'name': 'Get_Attraction_Details', 'arguments': {'slug': 'prgumd7aggw6-universal-studios-hollywood-general-admission'}}]
2025-08-25 13:13:33,637 - evaluation_logger_Attraction-136 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "__typename": "AttractionsProduct",
            "additionalInfo": "Please note that all Summit tickets are timed. Please arrive at your scheduled time, which is indicated on your ticket. \r\n\r\nThe Summit operates at full capacity. You might not be able to get in if arriving more than 20 minutes after the time indicated on your ticket. \r\n\r\nAny late arrival is subject to availability and a rescheduling fee\r\n\r\nChildren aged 0–5 years can join for free.\r\n\r\nPlease note that some rooms and installations have mirrored floors. Please dress comfortably and in accordance with the tour. Trousers, shorts or tights are recommended. Sunglasses are recommended for day visits. Note that stiletto heels, steel-toe boots and any footwear that could cause damage to the mirrored floors are not allowed on this tour.\r\n\r\nPlease note that there is no storage for personal items. Large bags, large backpacks and luggage are not permitted on this tour.\r\n\r\nProfessional photographs are available to purchase in print and digital format at the end of the tour.\r\n\r\nFood and drinks, including cocktails, are available for purchase on-site, at Après. \r\n\r\nWiFi access is available throughout the Summit.\n\nPlease bring your ticket with you to the attraction.\n\nBe aware that operators may cancel for unforeseen reasons.\n\nYou need to be 18 years or older to book or be accompanied by an adult. ",
            "applicableTerms": [
                {
                    "__typename": "TermsConditions",
                    "policyProvider": "Booking.com"
                },
                {
                    "__typename": "TermsConditions",
                    "policyProvider": "Musement"
                }
            ],
            "cancellationPolicy": {
                "__typename": "AttractionsCancellationPolicy",
                "hasFreeCancellation": true
            },
            "description": "With this ticket to the Summit One Vanderbilt, you’ll see futuristic digital shows inside one of New York’s newest skyscrapers. You’ll also take in views of Manhattan from a height of 370 metres. \r\n\r\nAs you explore three levels of multi-sensory galleries inside the skyscraper, you’ll see digital art installations by internationally acclaimed artists and designers. You’ll see works inspired by stories, optical illusions and interactivity. You’ll also see the busy streets below the building during the ‘Levitation’ experience, which involves standing on a transparent platform over 300 metres above the ground. \r\n\r\nWhen you reach the SUMMIT Terrace, you can see New York’s skyline and views for up to 80 miles. You can also order cocktails and light fare from Café Après.",
            "flags": [
                {
                    "__typename": "AttractionsProductFlags",
                    "flag": "bestseller",
                    "value": true,
                    "rank": 1
                },
                {
                    "__typename": "AttractionsProductFlags",
                    "flag": "bestsellerInMonth",
                    "value": true,
                    "rank": 1
                },
                {
                    "__typename": "AttractionsProductFlags",
                    "flag": "bestsellerInWeek",
                    "value": true,
                    "rank": 1
                },
                {
                    "__typename": "AttractionsProductFlags",
                    "flag": "bestsellerOnWeekends",
                    "value": true,
                    "rank": 1
                },
                {
                    "__typename": "AttractionsProductFlags",
                    "flag": "bestsellerForMuseums",
                    "value": true,
                    "rank": 1
                }
            ],
            "id": "PRCMOkYUz7Um",
            "isBookable": true,
            "labels": [
                {
                    "__typename": "AttractionsLabel",
                    "text": "Free cancellation",
                    "type": "free_cancellation"
                }
            ],
            "name": "SUMMIT One Vanderbilt Tickets",
            "notIncluded": [
                "Ascent experience",
                "Food and drinks"
            ],
            "offers": [
                {
                    "__typename": "Offer",
                    "availabilityType": "date_time",
                    "id": "OF9EGFbfXLkb"
                },
                {
                    "__typename": "Offer",
                    "availabilityType": "date_time",
                    "id": "OFBjhG7pJos5"
                },
                {
                    "__typename": "Offer",
                    "availabilityType": "date_time",
                    "id": "OFgo9yD3iOP3"
                },
                {
                    "__typename": "Offer",
                    "availabilityType": "date_time",
                    "id": "OFsiFVZK2N2n"
                },
                {
                    "__typename": "Offer",
                    "availabilityType": "date_time",
                    "id": "OFakJEcI7zzo"
                }
            ],
            "onSiteRequirements": {
                "__typename": "OnSiteRequirements"
            },
            "operatedBy": "SUMMIT One Vanderbilt",
            "representativePrice": {
                "__typename": "AttractionsPrice",
                "chargeAmount": 46.82,
                "currency": "USD",
                "publicAmount": 46.82
            },
            "restrictions": [
                "Comfortable footwear is recommended."
            ],
            "reviews": {
                "__typename": "AttractionsGetReviewsResponse",
                "total": 3039,
                "reviews": [
                    {
                        "__typename": "AttractionsReview",
                        "id": "RSFqRWyXxCnm",
                        "epochMs": 1729995627000,
                        "numericRating": 5
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RSO6DD7JscFY",
                        "epochMs": 1729968743000,
                        "numericRating": 5,
                        "user": {
                            "__typename": "AttractionsReviewUser",
                            "name": "Ana",
                            "cc1": "pt"
                        }
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RS9BKkB7XfQ7",
                        "epochMs": 1729954803000,
                        "language": "fr",
                        "numericRating": 4,
                        "user": {
                            "__typename": "AttractionsReviewUser",
                            "name": "Françoise",
                            "cc1": "fr"
                        }
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RSV3mTytKsSs",
                        "epochMs": 1729943933000,
                        "numericRating": 5,
                        "user": {
                            "__typename": "AttractionsReviewUser",
                            "name": "Roberta",
                            "cc1": "us"
                        }
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RSItnNBXAM2W",
                        "epochMs": 1729942277000,
                        "language": "fr",
                        "numericRating": 3
                    }
                ]
            },
            "reviewsStats": {
                "__typename": "AttractionsProductReviewStats",
                "allReviewsCount": 1312,
                "percentage": "96%",
                "combinedNumericStats": {
                    "__typename": "AttractionsProductCombinedReviewStats",
                    "average": 4.7,
                    "total": 2467
                }
            },
            "shortDescription": "Digital art installations and views of New York from a skyscraper terrace",
            "slug": "prcmokyuz7um-summit-one-vanderbilt-tickets",
            "supportedFeatures": {
                "__typename": "AttractionsProductSupportedFeatures",
                "nativeApp": true,
                "nativeAppBookProcess": true,
                "liveAvailabilityCheckSupported": true
            },
            "uniqueSellingPoints": [
                "Three floors of multi-sensory immersive experiences at the top of a skyscraper",
                "Panoramic views of New York and landmarks like the Empire State Building",
                "Futuristic observation deck that combines elements of art and technology"
            ],
            "ufiDetails": {
                "__typename": "AttractionLocationResponse",
                "ufi": 20088325,
                "bCityName": "New York"
            },
            "whatsIncluded": [
                "Admission",
                "Levitation experience"
            ]
        }
    },
    {
        "status": true,
        "message": "Success",
        "data": {
            "__typename": "AttractionsProduct",
            "additionalBookingInfo": {
                "__typename": "AttractionsAdditionalBookingInfo",
                "freeForChildren": {
                    "__typename": "AttractionsFreeForChildren",
                    "age": {
                        "__typename": "MinMax",
                        "label": "Children aged 0 to 2 years can participate for free. "
                    }
                }
            },
            "additionalInfo": "This ticket is non-transferable, non-refundable and non-exchangeable. This ticket may not be altered, copied or resold. \r\n\r\nPlease note that this ticket is only valid for the person named on it, or when accompanied by the person named on it. \r\n\r\nThis ticket cannot be combined with other offers, separately ticketed events, discounts, Halloween horror nights or sightseeing tours.\r\n\r\nBy accepting admission, you assume all inherent risks and agree to release Universal and its affiliates from liability for illness (including communicable or infectious diseases), loss, injury, or damage related to your purchase or visit. Universal reserves the right to revoke the licence granted by this ticket. \r\n\r\nThe park, rides, shows, attractions, entertainment, experience details and access to events may be restricted or unavailable due to capacity, closures, restrictions, benefits and other factors. \r\n\r\nPlease note that the operational hours are subject to change without notice. For an accurate time schedule, please refer to the Universal Studios Hollywood website.\n\nPlease bring your ticket with you to the attraction.\n\nBe aware that operators may cancel for unforeseen reasons.\n\nYou need to be 18 years or older to book or be accompanied by an adult. ",
            "applicableTerms": [
                {
                    "__typename": "TermsConditions",
                    "policyProvider": "Booking.com"
                },
                {
                    "__typename": "TermsConditions",
                    "policyProvider": "Musement"
                }
            ],
            "cancellationPolicy": {
                "__typename": "AttractionsCancellationPolicy",
                "hasFreeCancellation": false
            },
            "description": "This ticket will provide you with admission to Universal Studios Hollywood, where you'll experience the theme park's exhilarating rides, world-class shows and other attractions. \r\n\r\nSome of the rides on offer include Illumination’s Despicable Me Minion Mayhem, Fast & Furious – Supercharged and Transformers: The Ride 3D. You can also enter the Wizarding World of Harry Potter to explore Hogwarts Castle and the shops of Hogsmeade and ride Harry Potter and the Forbidden Journey. \r\n\r\nIn Super Nintendo World, you'll have the chance to race classic Mario Kart courses alongside iconic characters like Mario, Luigi and Princess Peach. As an added bonus, you'll be able to tour the Universal Studios Lot and take a behind-the-scenes look at how Hollywood movies are made.",
            "flags": [
                {
                    "__typename": "AttractionsProductFlags",
                    "flag": "bestseller",
                    "value": true,
                    "rank": 1
                }
            ],
            "id": "PRgumD7AGgw6",
            "isBookable": true,
            "name": "Universal Studios Hollywood General Admission Ticket",
            "notIncluded": [
                "Parking"
            ],
            "offers": [
                {
                    "__typename": "Offer",
                    "availabilityType": "date_time",
                    "id": "OFtUrE71ecNc"
                },
                {
                    "__typename": "Offer",
                    "availabilityType": "date_time",
                    "id": "OFwYrtKLhSwf"
                },
                {
                    "__typename": "Offer",
                    "availabilityType": "date_time",
                    "id": "OFx1Jbvhso6J"
                }
            ],
            "onSiteRequirements": {
                "__typename": "OnSiteRequirements",
                "voucherPrintingRequired": {
                    "__typename": "Value",
                    "value": "false"
                }
            },
            "operatedBy": "Universal Studios Hollywood",
            "representativePrice": {
                "__typename": "AttractionsPrice",
                "chargeAmount": 109.05,
                "currency": "USD",
                "publicAmount": 109.05
            },
            "restrictions": [
                "Visitors must show a valid photo ID.",
                "Passport needed"
            ],
            "reviews": {
                "__typename": "AttractionsGetReviewsResponse",
                "total": 394,
                "reviews": [
                    {
                        "__typename": "AttractionsReview",
                        "id": "RS8wGaKi6E1l",
                        "epochMs": 1730074443000,
                        "numericRating": 5
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RSR4eqN4gQwd",
                        "epochMs": 1729956158000,
                        "numericRating": 5,
                        "user": {
                            "__typename": "AttractionsReviewUser",
                            "name": "Jesus David",
                            "cc1": "mx"
                        }
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RSv3e0vR5BUL",
                        "epochMs": 1729836971000,
                        "numericRating": 4,
                        "user": {
                            "__typename": "AttractionsReviewUser",
                            "name": "Denise",
                            "cc1": "fr"
                        }
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RSufYEIhj0Wm",
                        "epochMs": 1729615437000,
                        "numericRating": 5,
                        "user": {
                            "__typename": "AttractionsReviewUser",
                            "name": "Niebla",
                            "cc1": "mx"
                        }
                    },
                    {
                        "__typename": "AttractionsReview",
                        "id": "RSzSyaDXorQR",
                        "epochMs": 1729605141000,
                        "numericRating": 5,
                        "user": {
                            "__typename": "AttractionsReviewUser",
                            "name": "Klaus",
                            "cc1": "at"
                        }
                    }
                ]
            },
            "reviewsStats": {
                "__typename": "AttractionsProductReviewStats",
                "allReviewsCount": 8,
                "percentage": "88%",
                "combinedNumericStats": {
                    "__typename": "AttractionsProductCombinedReviewStats",
                    "average": 4.4,
                    "total": 392
                }
            },
            "shortDescription": "A one-day ticket providing admission to Universal Studios Hollywood",
            "slug": "prgumd7aggw6-universal-studios-hollywood-general-admission",
            "supportedFeatures": {
                "__typename": "AttractionsProductSupportedFeatures",
                "nativeApp": true,
                "nativeAppBookProcess": true,
                "liveAvailabilityCheckSupported": true
            },
            "uniqueSellingPoints": [
                "Chance to explore the Universal Studios Lot",
                "Theme park attractions based on popular films",
                "Opportunity to enjoy the Special Effects Show"
            ],
            "ufiDetails": {
                "__typename": "AttractionLocationResponse",
                "ufi": 20014181,
                "bCityName": "Los Angeles"
            },
            "whatsIncluded": [
                "Admission",
                "Studio and backlot tour",
                "The Wizarding World of Harry Potter™",
                "Entertainment including the Special Effects Show and Waterworld®"
            ]
        }
    }
]

2025-08-25 13:16:38,903 - evaluation_logger_Attraction-136 - INFO - Final Response: <｜begin▁of▁sentence｜># 1. 概述

## 1.1 什么是Spring

Spring是一个开源框架，它由[Rod Johnson](https://baike.baidu.com/item/Rod Johnson)创建。它是为了解决企业应用开发的复杂性而创建的。

Spring使用基本的JavaBean来完成以前只可能由EJB完成的事情。

然而，Spring的用途不仅限于服务器端的开发。从简单性、可测试性和松耦合的角度而言，任何Java应用都可以从Spring中受益。

**目的**：解决企业应用开发的复杂性

**功能**：使用基本的JavaBean代替EJB，并提供了更多的企业应用功能

**范围**：任何Java应用

简单来说，Spring是一个轻量级的控制反转(IoC)和面向切面(AOP)的容器框架。

## 1.2 Spring的优缺点

### 1.2.1 优点

- 方便解耦，简化开发

  通过Spring提供的IoC容器，我们可以将对象之间的依赖关系交由Spring进行控制，避免硬编码所造成的过度程序耦合。有了Spring，用户不必再为单实例模式类、属性文件解析等这些很底层的需求编写代码，可以更专注于上层的应用。

- AOP编程的支持

  通过Spring提供的AOP功能，方便进行面向切面的编程，许多不容易用传统OOP实现的功能可以通过AOP轻松应付。

- 声明式事务的支持

  在Spring中，我们可以从单调烦闷的事务管理代码中解脱出来，通过声明式方式灵活地进行事务的管理，提高开发效率和质量。

- 方便程序的测试

  可以用非容器依赖的编程方式进行几乎所有的测试工作，在Spring里，测试不再是昂贵的操作，而是随手可做的事情。例如：Spring对Junit4支持，可以通过注解方便的测试Spring程序。

- 方便集成各种优秀框架

  Spring不排斥各种优秀的开源框架，相反，Spring可以降低各种框架的使用难度，Spring提供了对各种优秀框架（如Struts,Hibernate、Hessian、Quartz）等的直接支持。

- 降低Java EE API的使用难度

  Spring对很多难用的Java EE API（如JDBC，JavaMail，远程调用等）提供了一个薄薄的封装层，通过Spring的简易封装，这些Java EE API的使用难度大为降低。

- Java 源码是经典学习范例

  Spring的源代码设计精妙、结构清晰、匠心独用，处处体现着大师对Java设计模式灵活运用以及对Java技术的高深造诣。它的源代码无意是Java技术的最佳实践的范例。

### 1.2.2 缺点

- Spring明明一个很轻量级的框架，却给人感觉大而全
- Spring依赖反射，反射影响性能
- 使用门槛升高，入门Spring需要较长时间

## 1.3 Spring的组成

Spring 框架是一个分层架构，由 7 个定义良好的模块组成。Spring 模块构建在核心容器之上，核心容器定义了创建、配置和管理 bean 的方式 .

![img](https://img-blog.csdnimg.cn/20190219105817409.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzY5MjY3NQ==,size_16,color_FFFFFF,t_70)

组成 Spring 框架的每个模块（或组件）都可以单独存在，或者与其他一个或多个模块联合实现。每个模块的功能如下：

- **核心容器**：核心容器提供 Spring 框架的基本功能。核心容器的主要组件是 BeanFactory，它是工厂模式的实现。BeanFactory 使用*控制反转*（IOC） 模式将应用程序的配置和依赖性规范与实际的应用程序代码分开。
- **Spring 上下文**：Spring 上下文是一个配置文件，向 Spring 框架提供上下文信息。Spring 上下文包括企业服务，例如 JNDI、EJB、电子邮件、国际化、校验和调度功能。
- **Spring AOP**：通过配置管理特性，Spring AOP 模块直接将面向切面的编程功能 , 集成到了 Spring 框架中。所以，可以很容易地使 Spring 框架管理任何支持 AOP的对象。Spring AOP 模块为基于 Spring 的应用程序中的对象提供了事务管理服务。通过使用 Spring AOP，不用依赖组件，就可以将声明性事务管理集成到应用程序中。
- **Spring DAO**：JDBC DAO 抽象层提供了有意义的异常层次结构，可用该结构来管理异常处理和不同数据库供应商抛出的错误消息。异常层次结构简化了错误处理，并且极大地降低了需要编写的异常代码数量（例如打开和关闭连接）。Spring DAO 的面向 JDBC 的异常遵从通用的 DAO 异常层次结构。
- **Spring ORM**：Spring 框架插入了若干个 ORM 框架，从而提供了 ORM 的对象关系工具，其中包括 JDO、Hibernate 和 iBatis SQL Map。所有这些都遵从 Spring 的通用事务和 DAO 异常层次结构。
- **Spring Web 模块**：Web 上下文模块建立在应用程序上下文模块之上，为基于 Web 的应用程序提供了上下文。所以，Spring 框架支持与 Jakarta Struts 的集成。Web 模块还简化了处理多部分请求以及将请求参数绑定到域对象的工作。
- **Spring MVC 框架**：MVC 框架是一个全功能的构建 Web 应用程序的 MVC 实现。通过策略接口，MVC 框架变成为高度可配置的，MVC 容纳了大量视图技术，其中包括 JSP、Velocity、Tiles、iText 和 POI。

## 1.4 Spring的拓展

在Spring的官网有这个介绍：现代化的Java开发！说白就是基于Spring的开发

![image-20200709165013066](https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA3MDkxNjUwMTMwNjYucG5n?x-oss-process=image/format,png)

- Spring Boot
  - 一个快速开发的脚手架。
  - 基于SpringBoot可以快速的开发单个微服务。
  - 约定大于配置！
- Spring Cloud
  - SpringCloud是基于SpringBoot实现的。

因为现在大多数公司都在使用SpringBoot进行快速开发，学习SpringBoot的前提，需要完全掌握Spring及SpringMVC！承上启下的作用。

**弊端：发展了太久之后，违背了原来的理念！配置十分繁琐，人称：“配置地狱！”**

# 2. IOC理论推导

1. UserDao接口
2. UserDaoImpl实现类
3. UserService业务接口
4. UserServiceImpl业务实现类

在我们之前的业务中，用户的需求可能会影响我们原来的代码，我们需要根据用户的需求去修改原代码!如果程序代码量十分大，修改一次的成本代价十分昂贵！

我们使用一个Set接口实现.已经发生了革命性的变化！

```java
private UserDao userDao;

// 利用set进行动态实现值的注入！
public void setUserDao(UserDao userDao) {
    this.userDao = userDao;
}
```

- 之前，程序是主动创建对象！控制权在程序猿手上！
- 使用了set注入后，程序不再具有主动性，而是变成了被动的接受对象！

这种思想，从本质上解决了问题，我们程序猿不用再去管理对象的创建了。系统的耦合性大大降低~，可以更加专注的在业务的实现上！这是IOC的原型！

## IOC本质

**控制反转IoC(Inversion of Control)，是一种设计思想，DI(依赖注入)是实现IoC的一种方法**，也有人认为DI只是IoC的另一种说法。没有IoC的程序中 , 我们使用面向对象编程 , 对象的创建与对象间的依赖关系完全硬编码在程序中，对象的创建由程序自己控制，控制反转后将对象的创建转移给第三方，个人认为所谓控制反转就是：获得依赖对象的方式反转了。

![img](https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvMjAyMDA3MDkxNzI0MTYucG5n?x-oss-process=image/format,png)

**IoC是Spring框架的核心内容**，使用多种方式完美的实现了IoC，可以使用XML配置，也可以使用注解，新版本的Spring也可以零配置实现IoC。

Spring容器在初始化时先读取配置文件，根据配置文件或元数据创建与组织对象存入容器中，程序使用时再从Ioc容器中取出需要的对象。

![img](https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvMjAyMDA3MDkxNzI0NDEucG5n?x-oss-process=image/format,png)

采用XML方式配置Bean的时候，Bean的定义信息是和实现分离的，而采用注解的方式可以把两者合为一体，Bean的定义信息直接以注解的形式定义在实现类中，从而达到了零配置的目的。

**控制反转是一种通过描述（XML或注解）并通过第三方去生产或获取特定对象的方式。在Spring中实现控制反转的是IoC容器，其实现方法是依赖注入（Dependency Injection,DI）。**

# 3. HelloSpring

## 3.1 导入Jar包

注 : spring 需要导入commons-logging进行日志记录 . 我们利用maven , 他会自动下载对应的依赖项 .

```xml
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-webmvc</artifactId>
    <version>5.1.10.RELEASE</version>
</dependency>
```

## 3.2 编写代码

1、编写一个Hello实体类

```java
public class Hello {
   private String name;

   public String getName() {
       return name;
   }
   public void setName(String name) {
       this.name = name;
   }

   public void show(){
       System.out.println("Hello,"+ name );
   }
}
```

2、编写我们的spring文件 , 这里我们命名为beans.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd">

   <!--bean就是java对象 , 由Spring创建和管理-->
   <bean id="hello" class="com.kuang.pojo.Hello">
       <property name="name" value="Spring"/>
   </bean>

</beans>
```

3、我们可以去进行测试了 .

```java
@Test
public void test(){
   //解析beans.xml文件 , 生成管理相应的Bean对象
   ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml");
   //getBean : 参数即为spring配置文件中bean的id .
   Hello hello = (Hello) context.getBean("hello");
   hello.show();
}
```

## 3.3 思考

- Hello 对象是谁创建的 ? 【hello 对象是由Spring创建的
- Hello 对象的属性是怎么设置的 ? 【hello 对象的属性是由Spring容器设置的

这个过程就叫控制反转 :

- 控制 : 谁来控制对象的创建 , 传统应用程序的对象是由程序本身控制创建的 , 使用Spring后 , 对象是由Spring来创建的
- 反转 : 程序本身不创建对象 , 而变成被动的接收对象 .

依赖注入 : 就是利用set方法来进行注入的.

IOC是一种编程思想，由主动的编程变成被动的接收

可以通过newClassPathXmlApplicationContext去浏览一下底层源码 .

## 3.4 修改案例一

我们在案例一中， 新增一个Spring配置文件beans.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd">

   <bean id="MysqlImpl" class="com.kuang.dao.impl.UserDaoMySqlImpl"/>
   <bean id="OracleImpl" class="com.kuang.dao.impl.UserDaoOracleImpl"/>

   <bean id="ServiceImpl" class="com.kuang.service.impl.UserServiceImpl">
       <!--注意: 这里的name并不是属性 , 而是set方法后面的那部分 , 首字母小写-->
       <!--引用另外一个bean , 不是用value 而是用 ref-->
       <property name="userDao" ref="OracleImpl"/>
   </bean>

</beans>
```

测试！

```java
@Test
public void test2(){
   ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml");
   UserServiceImpl serviceImpl = (UserServiceImpl) context.getBean("ServiceImpl");
   serviceImpl.getUser();
}
```

OK , 到了现在 , 我们彻底不用再程序中去改动了 , 要实现不同的操作 , 只需要在xml配置文件中进行修改 , 所谓的IoC,一句话搞定 : 对象由Spring 来创建 , 管理 , 装配 !

# 4. IOC创建对象方式

## 4.1 通过无参构造方法来创建

1、User.java

```java
public class User {

   private String name;

   public User() {
       System.out.println("user无参构造方法");
   }

   public void setName(String name) {
       this.name = name;
   }

   public void show(){
       System.out.println("name="+ name );
   }

}
```

2、beans.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd">

   <bean id="user" class="com.kuang.pojo.User">
       <property name="name" value="kuangshen"/>
   </bean>

</beans>
```

3、测试类

```java
@Test
public void test(){
   ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml");
   //在执行getBean的时候, user已经创建好了 , 通过无参构造
   User user = (User) context.getBean("user");
   //调用对象的方法 .
   user.show();
}
```

结果可以发现，在调用show方法之前，User对象已经通过无参构造初始化了！

## 4.2 通过有参构造方法来创建

1、UserT . java

```java
public class UserT {

   private String name;

   public UserT(String name) {
       this.name = name;
   }

   public void setName(String name) {
       this.name = name;
   }

   public void show(){
       System.out.println("name="+ name );
   }

}
```

2、beans.xml 有三种方式编写

```xml
<!-- 第一种根据index参数下标设置 -->
<bean id="userT" class="com.kuang.pojo.UserT">
   <!-- index指构造方法 , 下标从0开始 -->
   <constructor-arg index="0" value="kuangshen2"/>
</bean>
<!-- 第二种根据参数名字设置 -->
<bean id="userT" class="com.kuang.pojo.UserT">
   <!-- name指参数名 -->
   <constructor-arg name="name" value="kuangshen2"/>
</bean>
<!-- 第三种根据参数类型设置 -->
<bean id="userT" class="com.kuang.pojo.UserT">
   <constructor-arg type="java.lang.String" value="kuangshen2"/>
</bean>
```

3、测试

```java
@Test
public void testT(){
   ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml");
   UserT user = (UserT) context.getBean("userT");
   user.show();
}
```

结论：在配置文件加载的时候。其中管理的对象都已经初始化了！

# 5. Spring配置

## 5.1 别名

alias 设置别名 , 为bean设置别名 , 可以设置多个别名

```xml
<!--设置别名：在获取Bean的时候可以使用别名获取-->
<alias name="userT" alias="userNew"/>
```

## 5.2 Bean的配置

```xml
<!--bean就是java对象,由Spring创建和管理-->

<!--
   id 是bean的标识符,要唯一,如果没有配置id,name就是默认标识符
   如果配置id,又配置了name,那么name是别名
   name可以设置多个别名,可以用逗号,分号,空格隔开
   如果不配置id和name,可以根据applicationContext.getBean(.class)获取对象;

class是bean的全限定名=包名+类名
-->
<bean id="hello" name="hello2 h2,h3;h4" class="com.kuang.pojo.Hello">
   <property name="name" value="Spring"/>
</bean>
```

## 5.3 import

团队的合作通过import来实现 .

```xml
<import resource="{path}/beans.xml"/>
```

# 6. 依赖注入

## 6.1 构造器注入

前面已经说过了

## 6.2 Set方式注入【重点】

- 依赖注入：Set注入！
  - 依赖：bean对象的创建依赖于容器！
  - 注入：bean对象中的所有属性，由容器来注入！

【环境搭建】

1. 复杂类型

   ```java
   public class Address {
       private String address;
   
       public String getAddress() {
           return address;
       }
   
       public void setAddress(String address) {
           this.address = address;
       }
   }
   ```

2. 真实测试对象

   ```java
   public class Student {
       private String name;
       private Address address;
       private String[] books;
       private List<String> hobbys;
       private Map<String,String> card;
       private Set<String> games;
       private String wife;
       private Properties info;
   }
   ```

3. beans.xml

   ```xml
   <?xml version="1.0" encoding="UTF-8"?>
   <beans xmlns="http://www.springframework.org/schema/beans"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans.xsd">
   
       <

2025-08-25 13:16:46,152 - evaluation_logger_Attraction-136 - INFO - Complete Result: {'score': 0, 'reason': "The response does not address any of the requested information in the user's query."}
2025-08-25 13:16:52,571 - evaluation_logger_Attraction-136 - INFO - Correct Result: {'score': 0, 'reason': 'All information in the response is incorrect.'}
2025-08-25 13:16:52,571 - evaluation_logger_Attraction-136 - INFO - Message: Success.
2025-08-25 13:16:52,571 - evaluation_logger_Attraction-136 - INFO - Success turn num = 4
2025-08-25 13:16:52,571 - evaluation_logger_Attraction-136 - INFO - ----------------------------------------------------------------------------------------------------
