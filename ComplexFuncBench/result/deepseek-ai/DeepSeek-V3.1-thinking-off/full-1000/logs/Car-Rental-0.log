2025-08-25 11:04:24,514 - evaluation_logger_Car-Rental-0 - INFO - Test Example Car-Rental-0
2025-08-25 11:04:24,514 - evaluation_logger_Car-Rental-0 - INFO - Query: Today is October 13th, 2024. I want to rent a car for a day at the San Diego Marriott La Jolla. Could you compare the price differences for picking up the car at 8 AM tomorrow and the day after tomorrow at the same place for a 24-hour rental?
2025-08-25 11:04:33,228 - evaluation_logger_Car-Rental-0 - INFO - Function Calls: 
[
    {
        "name": "Search_Car_Location",
        "arguments": {
            "query": "San Diego Marriott La Jolla"
        }
    }
]

2025-08-25 11:04:33,228 - evaluation_logger_Car-Rental-0 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Car_Location",
        "arguments": {
            "query": "San Diego Marriott La Jolla"
        }
    },
    {
        "name": "Search_Car_Rentals",
        "arguments": {
            "pick_up_latitude": 32.873055,
            "pick_up_longitude": -117.215935,
            "drop_off_latitude": 32.873055,
            "drop_off_longitude": -117.215935,
            "pick_up_date": "2024-10-14",
            "drop_off_date": "2024-10-15",
            "pick_up_time": "08:00",
            "drop_off_time": "08:00"
        }
    },
    {
        "name": "Search_Car_Rentals",
        "arguments": {
            "pick_up_latitude": 32.873055,
            "pick_up_longitude": -117.215935,
            "drop_off_latitude": 32.873055,
            "drop_off_longitude": -117.215935,
            "pick_up_date": "2024-10-15",
            "drop_off_date": "2024-10-16",
            "pick_up_time": "08:00",
            "drop_off_time": "08:00"
        }
    }
]

2025-08-25 11:04:33,228 - evaluation_logger_Car-Rental-0 - INFO - Start compare_single_call: 
{'name': 'Search_Car_Location', 'arguments': {'query': 'San Diego Marriott La Jolla'}}
{'name': 'Search_Car_Location', 'arguments': {'query': 'San Diego Marriott La Jolla'}}
2025-08-25 11:04:33,228 - evaluation_logger_Car-Rental-0 - INFO - Rule-based compare success.
2025-08-25 11:04:33,228 - evaluation_logger_Car-Rental-0 - INFO - Success matched: [{'name': 'Search_Car_Location', 'arguments': {'query': 'San Diego Marriott La Jolla'}}]
2025-08-25 11:04:33,228 - evaluation_logger_Car-Rental-0 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "city": "San Diego",
                "coordinates": {
                    "longitude": -117.215935,
                    "latitude": 32.873055
                },
                "country": "United States",
                "name": "San Diego Marriott La Jolla"
            }
        ]
    }
]

2025-08-25 11:04:50,635 - evaluation_logger_Car-Rental-0 - INFO - Function Calls: 
[
    {
        "name": "Search_Car_Rentals",
        "arguments": {
            "pick_up_latitude": 32.873055,
            "pick_up_longitude": -117.215935,
            "drop_off_latitude": 32.873055,
            "drop_off_longitude": -117.215935,
            "pick_up_date": "2024-10-14",
            "drop_off_date": "2024-10-15",
            "pick_up_time": "08:00",
            "drop_off_time": "08:00"
        }
    },
    {
        "name": "Search_Car_Rentals",
        "arguments": {
            "pick_up_latitude": 32.873055,
            "pick_up_longitude": -117.215935,
            "drop_off_latitude": 32.873055,
            "drop_off_longitude": -117.215935,
            "pick_up_date": "2024-10-15",
            "drop_off_date": "2024-10-16",
            "pick_up_time": "08:00",
            "drop_off_time": "08:00"
        }
    }
]

2025-08-25 11:04:50,636 - evaluation_logger_Car-Rental-0 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Car_Rentals",
        "arguments": {
            "drop_off_date": "2024-10-15",
            "drop_off_latitude": 32.873055,
            "drop_off_longitude": -117.215935,
            "drop_off_time": "08:00",
            "pick_up_date": "2024-10-14",
            "pick_up_latitude": 32.873055,
            "pick_up_longitude": -117.215935,
            "pick_up_time": "08:00"
        }
    },
    {
        "name": "Search_Car_Rentals",
        "arguments": {
            "drop_off_date": "2024-10-16",
            "drop_off_latitude": 32.873055,
            "drop_off_longitude": -117.215935,
            "drop_off_time": "08:00",
            "pick_up_date": "2024-10-15",
            "pick_up_latitude": 32.873055,
            "pick_up_longitude": -117.215935,
            "pick_up_time": "08:00"
        }
    }
]

2025-08-25 11:04:50,636 - evaluation_logger_Car-Rental-0 - INFO - Start compare_single_call: 
{'name': 'Search_Car_Rentals', 'arguments': {'drop_off_date': '2024-10-15', 'drop_off_latitude': 32.873055, 'drop_off_longitude': -117.215935, 'drop_off_time': '08:00', 'pick_up_date': '2024-10-14', 'pick_up_latitude': 32.873055, 'pick_up_longitude': -117.215935, 'pick_up_time': '08:00'}}
{'name': 'Search_Car_Rentals', 'arguments': {'drop_off_date': '2024-10-15', 'drop_off_latitude': 32.873055, 'drop_off_longitude': -117.215935, 'drop_off_time': '08:00', 'pick_up_date': '2024-10-14', 'pick_up_latitude': 32.873055, 'pick_up_longitude': -117.215935, 'pick_up_time': '08:00'}}
2025-08-25 11:04:50,636 - evaluation_logger_Car-Rental-0 - INFO - Rule-based compare success.
2025-08-25 11:04:50,636 - evaluation_logger_Car-Rental-0 - INFO - Start compare_single_call: 
{'name': 'Search_Car_Rentals', 'arguments': {'drop_off_date': '2024-10-16', 'drop_off_latitude': 32.873055, 'drop_off_longitude': -117.215935, 'drop_off_time': '08:00', 'pick_up_date': '2024-10-15', 'pick_up_latitude': 32.873055, 'pick_up_longitude': -117.215935, 'pick_up_time': '08:00'}}
{'name': 'Search_Car_Rentals', 'arguments': {'drop_off_date': '2024-10-16', 'drop_off_latitude': 32.873055, 'drop_off_longitude': -117.215935, 'drop_off_time': '08:00', 'pick_up_date': '2024-10-15', 'pick_up_latitude': 32.873055, 'pick_up_longitude': -117.215935, 'pick_up_time': '08:00'}}
2025-08-25 11:04:50,636 - evaluation_logger_Car-Rental-0 - INFO - Rule-based compare success.
2025-08-25 11:04:50,636 - evaluation_logger_Car-Rental-0 - INFO - Success matched: [{'name': 'Search_Car_Rentals', 'arguments': {'drop_off_date': '2024-10-15', 'drop_off_latitude': 32.873055, 'drop_off_longitude': -117.215935, 'drop_off_time': '08:00', 'pick_up_date': '2024-10-14', 'pick_up_latitude': 32.873055, 'pick_up_longitude': -117.215935, 'pick_up_time': '08:00'}}, {'name': 'Search_Car_Rentals', 'arguments': {'drop_off_date': '2024-10-16', 'drop_off_latitude': 32.873055, 'drop_off_longitude': -117.215935, 'drop_off_time': '08:00', 'pick_up_date': '2024-10-15', 'pick_up_latitude': 32.873055, 'pick_up_longitude': -117.215935, 'pick_up_time': '08:00'}}]
2025-08-25 11:04:50,637 - evaluation_logger_Car-Rental-0 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "title": "Car rentals",
            "search_context": {
                "searchId": "b59e5fcd-ae7a-4c2d-9061-01b3805c1d3a",
                "recommendationsSearchUniqueId": "72f78a69-364a-4f08-a6f1-25c30abe3f24",
                "searchKey": "eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMC0xNVQwODowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6IjMyLjg3MzA1NSwtMTE3LjIxNTkzNSIsImRyb3BPZmZMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicGlja1VwRGF0ZVRpbWUiOiIyMDI0LTEwLTE0VDA4OjAwOjAwIiwicGlja1VwTG9jYXRpb24iOiIzMi44NzMwNTUsLTExNy4yMTU5MzUiLCJwaWNrVXBMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicmVudGFsRHVyYXRpb25JbkRheXMiOjEsInNlcnZpY2VGZWF0dXJlcyI6WyJOT19PUEFRVUVTIiwiU1VQUkVTU19GSVhFRF9QUklDRV9WRUhJQ0xFUyIsIklOQ0xVREVfUFJPRFVDVF9SRUxBVElPTlNISVBTIiwiSU5DTFVERV9FWFRSQVNfQ09OVEFJTklOR19GRUVTIl19"
            },
            "meta": {
                "response_code": 200
            },
            "search_key": "eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMC0xNVQwODowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6IjMyLjg3MzA1NSwtMTE3LjIxNTkzNSIsImRyb3BPZmZMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicGlja1VwRGF0ZVRpbWUiOiIyMDI0LTEwLTE0VDA4OjAwOjAwIiwicGlja1VwTG9jYXRpb24iOiIzMi44NzMwNTUsLTExNy4yMTU5MzUiLCJwaWNrVXBMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicmVudGFsRHVyYXRpb25JbkRheXMiOjEsInNlcnZpY2VGZWF0dXJlcyI6WyJOT19PUEFRVUVTIiwiU1VQUkVTU19GSVhFRF9QUklDRV9WRUhJQ0xFUyIsIklOQ0xVREVfUFJPRFVDVF9SRUxBVElPTlNISVBTIiwiSU5DTFVERV9FWFRSQVNfQ09OVEFJTklOR19GRUVTIl19",
            "provider": "rentalcars",
            "sort": [
                {
                    "name": "Recommended – best first",
                    "title_tag": "tr.searchresults.sortBy.recommended",
                    "identifier": "recommended"
                },
                {
                    "title_tag": "tr.searchresults.sortBy.price.lowHigh",
                    "identifier": "price_low_to_high",
                    "name": "Price - lowest first"
                },
                {
                    "name": "Review score - highest first",
                    "identifier": "review_score",
                    "title_tag": "tr.searchresults.sortBy.reviews.highLow"
                }
            ],
            "count": 56,
            "content": {
                "items": [
                    {
                        "type": "SHELL_REGION_VIEW",
                        "content": {
                            "contentType": "carsSearchResultsSecondaryPromotional"
                        },
                        "positionInList": 3
                    }
                ],
                "filters": {
                    "countLabel": "56 results"
                }
            },
            "is_genius_location": false,
            "search_results": [
                {
                    "vehicle_id": "637318066",
                    "fee_info": {
                        "fee": 0,
                        "tax": 0
                    },
                    "freebies": [
                        "Amendments"
                    ],
                    "accessibility": {
                        "pick_up_location": "Pick-up information: Downtown",
                        "supplier_rating": "At this location, our customers have rated Hertz as 7.8 out of 10, Good.",
                        "transmission": "Automatic gearbox",
                        "fuel_policy": "Fuel policy is: Like for like"
                    },
                    "route_info": {
                        "dropoff": {
                            "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037",
                            "name": "San Diego - Marriott La Jolla",
                            "longitude": "-117.216334",
                            "country_code": "US",
                            "latitude": "32.873046",
                            "location_type": "DOWNTOWN",
                            "location_id": "3889719"
                        },
                        "pickup": {
                            "location_id": "3889719",
                            "latitude": "32.873046",
                            "location_type": "DOWNTOWN",
                            "name": "San Diego - Marriott La Jolla",
                            "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037",
                            "longitude": "-117.216334",
                            "country_code": "US"
                        }
                    },
                    "vehicle_info": {
                        "group": "Economy",
                        "airbags": 1,
                        "fuel_type": "N/A",
                        "doors": "4",
                        "unlimited_mileage": 1,
                        "aircon": 1,
                        "free_cancellation": 1,
                        "seats": "4",
                        "v_name": "Hyundai Veloster",
                        "fuel_policy": "Like for like",
                        "mileage": "Unlimited mileage",
                        "suitcases": {
                            "small": "2",
                            "big": "0"
                        },
                        "transmission": "Automatic",
                        "cma_compliant": -1,
                        "label": "Economy car with:",
                        "v_id": "637318066"
                    },
                    "supplier_info": {
                        "dropoff_instructions": "-",
                        "may_require_credit_card_guarantee": false,
                        "longitude": "-117.216334",
                        "name": "Hertz",
                        "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037",
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/137_logo_200.png",
                        "location_type": "Downtown",
                        "latitude": "32.873046",
                        "pickup_instructions": "-"
                    },
                    "content": {
                        "badges": [
                            {
                                "text": "Free cancellation",
                                "type": "CONSTRUCTIVE",
                                "variation": "DEFAULT"
                            }
                        ],
                        "supplier": {
                            "rating": {
                                "subtitle": "4 reviews",
                                "average": "7.8",
                                "localisedRating": {
                                    "rawValue": 7.8,
                                    "displayValue": "7.8"
                                },
                                "title": "Good"
                            },
                            "name": "Hertz"
                        }
                    },
                    "rating_info": {
                        "dropoff_time": 9,
                        "no_of_ratings": 4,
                        "condition": 7.5,
                        "pickup_time": 5.3,
                        "average": 7.8,
                        "average_text": "Very good",
                        "efficiency": 9.2,
                        "cleanliness": 8.5,
                        "location": 8.6,
                        "value_for_money": 7.2
                    },
                    "pricing_info": {
                        "discount": 0,
                        "base_currency": "INR",
                        "currency": "USD",
                        "pay_when": "PAY_NOW",
                        "deposit": 58.7,
                        "base_deposit": 4911.76,
                        "base_price": 4911.76,
                        "drive_away_price_is_approx": true,
                        "fee_breakdown": {
                            "known_fees": [
                                {
                                    "is_tax_included": 1,
                                    "type": "THEFT_EXCESS",
                                    "amount": 0,
                                    "max_amount": 0,
                                    "min_amount": 0,
                                    "currency": "USD",
                                    "is_always_payable": 0
                                },
                                {
                                    "currency": "USD",
                                    "is_always_payable": 0,
                                    "min_amount": 256.38,
                                    "max_amount": 640.96,
                                    "type": "DEPOSIT",
                                    "amount": 640.96,
                                    "is_tax_included": 1
                                },
                                {
                                    "min_amount": 0,
                                    "is_always_payable": 0,
                                    "currency": "USD",
                                    "max_amount": 0,
                                    "is_tax_included": 1,
                                    "amount": 0,
                                    "type": "DAMAGE_EXCESS"
                                },
                                {
                                    "is_always_payable": 0,
                                    "distance_allowed": {
                                        "is_km": 0,
                                        "is_unlimited": 1
                                    },
                                    "type": "MILEAGE"
                                }
                            ],
                            "fuel_policy": {
                                "amount": 0,
                                "type": "RETURN_SAME"
                            }
                        },
                        "quote_allowed": 1,
                        "price": 58.7,
                        "drive_away_price": 58.7
                    }
                },
                {
                    "vehicle_id": "637361566",
                    "route_info": {
                        "dropoff": {
                            "latitude": "32.873046",
                            "location_type": "DOWNTOWN",
                            "location_id": "3889719",
                            "name": "San Diego - Marriott La Jolla",
                            "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037",
                            "country_code": "US",
                            "longitude": "-117.216334"
                        },
                        "pickup": {
                            "country_code": "US",
                            "longitude": "-117.216334",
                            "name": "San Diego - Marriott La Jolla",
                            "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037",
                            "location_id": "3889719",
                            "location_type": "DOWNTOWN",
                            "latitude": "32.873046"
                        }
                    },
                    "accessibility": {
                        "transmission": "Automatic gearbox",
                        "supplier_rating": "At this location, our customers have rated Hertz as 7.8 out of 10, Good.",
                        "pick_up_location": "Pick-up information: Downtown",
                        "fuel_policy": "Fuel policy is: Like for like"
                    },
                    "freebies": [
                        "Amendments"
                    ],
                    "fee_info": {
                        "tax": 0,
                        "fee": 0
                    },
                    "pricing_info": {
                        "base_deposit": 5405.71,
                        "pay_when": "PAY_NOW",
                        "deposit": 64.6,
                        "currency": "USD",
                        "base_currency": "INR",
                        "discount": 0,
                        "drive_away_price": 64.6,
                        "price": 64.6,
                        "fee_breakdown": {
                            "fuel_policy": {
                                "amount": 0,
                                "type": "RETURN_SAME"
                            },
                            "known_fees": [
                                {
                                    "max_amount": 0,
                                    "is_always_payable": 0,
                                    "currency": "USD",
                                    "min_amount": 0,
                                    "amount": 0,
                                    "type": "THEFT_EXCESS",
                                    "is_tax_included": 1
                                },
                                {
                                    "type": "DEPOSIT",
                                    "amount": 640.96,
                                    "is_tax_included": 1,
                                    "currency": "USD",
                                    "is_always_payable": 0,
                                    "min_amount": 256.38,
                                    "max_amount": 640.96
                                },
                                {
                                    "amount": 0,
                                    "type": "DAMAGE_EXCESS",
                                    "is_tax_included": 1,
                                    "max_amount": 0,
                                    "is_always_payable": 0,
                                    "currency": "USD",
                                    "min_amount": 0
                                },
                                {
                                    "distance_allowed": {
                                        "is_unlimited": 1,
                                        "is_km": 0
                                    },
                                    "type": "MILEAGE",
                                    "is_always_payable": 0
                                }
                            ]
                        },
                        "quote_allowed": 1,
                        "base_price": 5405.71,
                        "drive_away_price_is_approx": true
                    },
                    "rating_info": {
                        "average_text": "Very good",
                        "pickup_time": 5.3,
                        "average": 7.8,
                        "cleanliness": 8.5,
                        "efficiency": 9.2,
                        "value_for_money": 7.2,
                        "location": 8.6,
                        "dropoff_time": 9,
                        "condition": 7.5,
                        "no_of_ratings": 4
                    },
                    "supplier_info": {
                        "may_require_credit_card_guarantee": false,
                        "dropoff_instructions": "-",
                        "name": "Hertz",
                        "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037",
                        "longitude": "-117.216334",
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/137_logo_200.png",
                        "latitude": "32.873046",
                        "location_type": "Downtown",
                        "pickup_instructions": "-"
                    },
                    "content": {
                        "badges": [
                            {
                                "type": "CONSTRUCTIVE",
                                "text": "Free cancellation",
                                "variation": "DEFAULT"
                            }
                        ],
                        "supplier": {
                            "rating": {
                                "localisedRating": {
                                    "displayValue": "7.8",
                                    "rawValue": 7.8
                                },
                                "title": "Good",
                                "subtitle": "4 reviews",
                                "average": "7.8"
                            },
                            "name": "Hertz"
                        }
                    },
                    "vehicle_info": {
                        "v_id": "637361566",
                        "label": "Intermediate car with:",
                        "cma_compliant": -1,
                        "transmission": "Automatic",
                        "mileage": "Unlimited mileage",
                        "suitcases": {
                            "small": "3",
                            "big": "0"
                        },
                        "fuel_policy": "Like for like",
                        "v_name": "Toyota Corolla",
                        "seats": "5",
                        "free_cancellation": 1,
                        "aircon": 1,
                        "doors": "2/4",
                        "unlimited_mileage": 1,
                        "fuel_type": "N/A",
                        "airbags": 1,
                        "group": "Intermediate"
                    }
                },
                {
                    "vehicle_id": "637317356",
                    "supplier_info": {
                        "pickup_instructions": "-",
                        "latitude": "32.83165851",
                        "location_type": "Downtown",
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/137_logo_200.png",
                        "name": "Hertz",
                        "address": "7337 Clairemont Mesa Blvd, Kearny Mesa, USA, 92111",
                        "longitude": "-117.1599769",
                        "may_require_credit_card_guarantee": false,
                        "dropoff_instructions": "-"
                    },
                    "content": {
                        "supplier": {
                            "name": "Hertz"
                        },
                        "badges": [
                            {
                                "variation": "DEFAULT",
                                "type": "CONSTRUCTIVE",
                                "text": "Free cancellation"
                            }
                        ]
                    },
                    "pricing_info": {
                        "pay_when": "PAY_NOW",
                        "deposit": 58.7,
                        "currency": "USD",
                        "base_currency": "INR",
                        "discount": 0,
                        "base_deposit": 4911.76,
                        "price": 58.7,
                        "fee_breakdown": {
                            "fuel_policy": {
                                "type": "RETURN_SAME",
                                "amount": 0
                            },
                            "known_fees": [
                                {
                                    "is_tax_included": 1,
                                    "type": "THEFT_EXCESS",
                                    "amount": 0,
                                    "min_amount": 0,
                                    "currency": "USD",
                                    "is_always_payable": 0,
                                    "max_amount": 0
                                },
                                {
                                    "max_amount": 640.96,
                                    "is_always_payable": 0,
                                    "currency": "USD",
                                    "min_amount": 256.38,
                                    "amount": 640.96,
                                    "type": "DEPOSIT",
                                    "is_tax_included": 1
                                },
                                {
                                    "max_amount": 0,
                                    "is_always_payable": 0,
                                    "currency": "USD",
                                    "min_amount": 0,
                                    "amount": 0,
                                    "type": "DAMAGE_EXCESS",
                                    "is_tax_included": 1
                                },
                                {
                                    "is_always_payable": 0,
                                    "distance_allowed": {
                                        "is_km": 0,
                                        "is_unlimited": 1
                                    },
                                    "type": "MILEAGE"
                                }
                            ]
                        },
                        "quote_allowed": 1,
                        "base_price": 4911.76,
                        "drive_away_price_is_approx": true,
                        "drive_away_price": 58.7
                    },
                    "rating_info": {
                        "location": 0,
                        "value_for_money": 0,
                        "efficiency": 0,
                        "cleanliness": 0,
                        "pickup_time": 0,
                        "average": 0,
                        "no_of_ratings": 0,
                        "condition": 0,
                        "dropoff_time": 0
                    },
                    "vehicle_info": {
                        "group": "Economy",
                        "airbags": 1,
                        "fuel_type": "N/A",
                        "unlimited_mileage": 1,
                        "doors": "4",
                        "aircon": 1,
                        "free_cancellation": 1,
                        "seats": "4",
                        "suitcases": {
                            "big": "0",
                            "small": "2"
                        },
                        "mileage": "Unlimited mileage",
                        "v_name": "Hyundai Veloster",
                        "fuel_policy": "Like for like",
                        "transmission": "Automatic",
                        "label": "Economy car with:",
                        "cma_compliant": -1,
                        "v_id": "637317356"
                    },
                    "route_info": {
                        "dropoff": {
                            "name": "Kearney Mesa Downtown",
                            "address": "7337 Clairemont Mesa Blvd, Kearny Mesa, USA, 92111",
                            "longitude": "-117.1599769",
                            "country_code": "US",
                            "location_id": "3889576",
                            "latitude": "32.83165851",
                            "location_type": "DOWNTOWN"
                        },
                        "pickup": {
                            "longitude": "-117.1599769",
                            "country_code": "US",
                            "address": "7337 Clairemont Mesa Blvd, Kearny Mesa, USA, 92111",
                            "name": "Kearney Mesa Downtown",
                            "location_type": "DOWNTOWN",
                            "latitude": "32.83165851",
                            "location_id": "3889576"
                        }
                    },
                    "accessibility": {
                        "fuel_policy": "Fuel policy is: Like for like",
                        "pick_up_location": "Pick-up information: Downtown",
                        "supplier_rating": "At this location, our customers have rated Hertz as {rating_number} out of 10, {rating_name}.",
                        "transmission": "Automatic gearbox"
                    },
                    "freebies": [
                        "Amendments"
                    ],
                    "fee_info": {
                        "fee": 0,
                        "tax": 0
                    }
                },
                {
                    "vehicle_id": "768092056",
                    "pricing_info": {
                        "base_deposit": 8647.92,
                        "discount": 0,
                        "base_currency": "INR",
                        "currency": "USD",
                        "deposit": 103.34,
                        "pay_when": "PAY_NOW",
                        "drive_away_price": 103.34,
                        "base_price": 8647.92,
                        "drive_away_price_is_approx": true,
                        "quote_allowed": 1,
                        "fee_breakdown": {
                            "fuel_policy": {
                                "amount": 0,
                                "type": "RETURN_SAME"
                            },
                            "known_fees": [
                                {
                                    "type": "THEFT_EXCESS",
                                    "amount": 0,
                                    "is_tax_included": 1,
                                    "currency": "USD",
                                    "is_always_payable": 0,
                                    "min_amount": 0,
                                    "max_amount": 0
                                },
                                {
                                    "type": "DEPOSIT",
                                    "amount": 640.96,
                                    "is_tax_included": 1,
                                    "max_amount": 640.96,
                                    "currency": "USD",
                                    "is_always_payable": 0,
                                    "min_amount": 256.38
                                },
                                {
                                    "is_tax_included": 1,
                                    "type": "DAMAGE_EXCESS",
                                    "amount": 0,
                                    "min_amount": 0,
                                    "currency": "USD",
                                    "is_always_payable": 0,
                                    "max_amount": 0
                                },
                                {
                                    "is_always_payable": 0,
                                    "type": "MILEAGE",
                                    "distance_allowed": {
                                        "is_unlimited": 1,
                                        "is_km": 0
                                    }
                                }
                            ]
                        },
                        "price": 103.34
                    },
                    "rating_info": {
                        "average_text": "Very good",
                        "pickup_time": 5.3,
                        "average": 7.8,
                        "cleanliness": 8.5,
                        "efficiency": 9.2,
                        "value_for_money": 7.2,
                        "location": 8.6,
                        "dropoff_time": 9,
                        "condition": 7.5,
                        "no_of_ratings": 4
                    },
                    "supplier_info": {
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/137_logo_200.png",
                        "location_type": "Downtown",
                        "latitude": "32.873046",
                        "pickup_instructions": "-",
                        "dropoff_instructions": "-",
                        "may_require_credit_card_guarantee": false,
                        "longitude": "-117.216334",
                        "name": "Hertz",
                        "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037"
                    },
                    "content": {
                        "badges": [
                            {
                                "type": "OUTLINED",
                                "text": "Featured",
                                "variation": "DEFAULT"
                            },
                            {
                                "text": "Free cancellation",
                                "type": "CONSTRUCTIVE",
                                "variation": "DEFAULT"
                            },
                            {
                                "text": "Fully electric",
                                "type": "ACCENT",
                                "variation": "DEFAULT"
                            }
                        ],
                        "supplier": {
                            "rating": {
                                "subtitle": "4 reviews",
                                "average": "7.8",
                                "localisedRating": {
                                    "displayValue": "7.8",
                                    "rawValue": 7.8
                                },
                                "title": "Good"
                            },
                            "name": "Hertz"
                        }
                    },
                    "vehicle_info": {
                        "group": "Premium",
                        "airbags": 1,
                        "fuel_type": "N/A",
                        "unlimited_mileage": 1,
                        "doors": "5",
                        "aircon": 1,
                        "free_cancellation": 1,
                        "seats": "5",
                        "badges": {
                            "greenVehicle": "Fully electric"
                        },
                        "mileage": "Unlimited mileage",
                        "suitcases": {
                            "small": "4",
                            "big": "0"
                        },
                        "v_name": "Polestar 2",
                        "fuel_policy": "Like for like",
                        "transmission": "Automatic",
                        "label": "Premium car with:",
                        "cma_compliant": -1,
                        "v_id": "768092056"
                    },
                    "route_info": {
                        "pickup": {
                            "location_id": "3889719",
                            "latitude": "32.873046",
                            "location_type": "DOWNTOWN",
                            "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037",
                            "name": "San Diego - Marriott La Jolla",
                            "longitude": "-117.216334",
                            "country_code": "US"
                        },
                        "dropoff": {
                            "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037",
                            "name": "San Diego - Marriott La Jolla",
                            "country_code": "US",
                            "longitude": "-117.216334",
                            "location_id": "3889719",
                            "latitude": "32.873046",
                            "location_type": "DOWNTOWN"
                        }
                    },
                    "accessibility": {
                        "fuel_policy": "Fuel policy is: Like for like",
                        "pick_up_location": "Pick-up information: Downtown",
                        "transmission": "Automatic gearbox",
                        "supplier_rating": "At this location, our customers have rated Hertz as 7.8 out of 10, Good."
                    },
                    "freebies": [
                        "Amendments"
                    ],
                    "fee_info": {
                        "fee": 0,
                        "tax": 0
                    }
                },
                {
                    "vehicle_id": "637339816",
                    "accessibility": {
                        "supplier_rating": "At this location, our customers have rated Hertz as 7.8 out of 10, Good.",
                        "transmission": "Automatic gearbox",
                        "pick_up_location": "Pick-up information: Downtown",
                        "fuel_policy": "Fuel policy is: Like for like"
                    },
                    "route_info": {
                        "pickup": {
                            "location_id": "3889719",
                            "location_type": "DOWNTOWN",
                            "latitude": "32.873046",
                            "country_code": "US",
                            "longitude": "-117.216334",
                            "name": "San Diego - Marriott La Jolla",
                            "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037"
                        },
                        "dropoff": {
                            "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037",
                            "name": "San Diego - Marriott La Jolla",
                            "longitude": "-117.216334",
                            "country_code": "US",
                            "latitude": "32.873046",
                            "location_type": "DOWNTOWN",
                            "location_id": "3889719"
                        }
                    },
                    "fee_info": {
                        "fee": 0,
                        "tax": 0
                    },
                    "freebies": [
                        "Amendments"
                    ],
                    "vehicle_info": {
                        "label": "Compact car with:",
                        "cma_compliant": -1,
                        "v_id": "637339816",
                        "mileage": "Unlimited mileage",
                        "suitcases": {
                            "big": "0",
                            "small": "2"
                        },
                        "v_name": "Nissan Versa  ",
                        "fuel_policy": "Like for like",
                        "transmission": "Automatic",
                        "aircon": 1,
                        "free_cancellation": 1,
                        "seats": "5",
                        "group": "Compact",
                        "airbags": 1,
                        "fuel_type": "N/A",
                        "doors": "2/4",
                        "unlimited_mileage": 1
                    },
                    "supplier_info": {
                        "name": "Hertz",
                        "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037",
                        "longitude": "-117.216334",
                        "may_require_credit_card_guarantee": false,
                        "dropoff_instructions": "-",
                        "pickup_instructions": "-",
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/137_logo_200.png",
                        "latitude": "32.873046",
                        "location_type": "Downtown"
                    },
                    "content": {
                        "badges": [
                            {
                                "variation": "DEFAULT",
                                "type": "CONSTRUCTIVE",
                                "text": "Free cancellation"
                            }
                        ],
                        "supplier": {
                            "rating": {
                                "average": "7.8",
                                "subtitle": "4 reviews",
                                "title": "Good",
                                "localisedRating": {
                                    "displayValue": "7.8",
                                    "rawValue": 7.8
                                }
                            },
                            "name": "Hertz"
                        }
                    },
                    "pricing_info": {
                        "discount": 0,
                        "base_currency": "INR",
                        "currency": "USD",
                        "deposit": 60.64,
                        "pay_when": "PAY_NOW",
                        "base_deposit": 5074.39,
                        "base_price": 5074.39,
                        "drive_away_price_is_approx": true,
                        "quote_allowed": 1,
                        "fee_breakdown": {
                            "fuel_policy": {
                                "type": "RETURN_SAME",
                                "amount": 0
                            },
                            "known_fees": [
                                {
                                    "is_tax_included": 1,
                                    "amount": 0,
                                    "type": "THEFT_EXCESS",
                                    "min_amount": 0,
                                    "is_always_payable": 0,
                                    "currency": "USD",
                                    "max_amount": 0
                                },
                                {
                                    "amount": 640.96,
                                    "type": "DEPOSIT",
                                    "is_tax_included": 1,
                                    "is_always_payable": 0,
                                    "currency": "USD",
                                    "min_amount": 256.38,
                                    "max_amount": 640.96
                                },
                                {
                                    "type": "DAMAGE_EXCESS",
                                    "amount": 0,
                                    "is_tax_included": 1,
                                    "currency": "USD",
                                    "is_always_payable": 0,
                                    "min_amount": 0,
                                    "max_amount": 0
                                },
                                {
                                    "distance_allowed": {
                                        "is_unlimited": 1,
                                        "is_km": 0
                                    },
                                    "type": "MILEAGE",
                                    "is_always_payable": 0
                                }
                            ]
                        },
                        "price": 60.64,
                        "drive_away_price": 60.64
                    },
                    "rating_info": {
                        "dropoff_time": 9,
                        "no_of_ratings": 4,
                        "condition": 7.5,
                        "average_text": "Very good",
                        "average": 7.8,
                        "pickup_time": 5.3,
                        "value_for_money": 7.2,
                        "location": 8.6,
                        "cleanliness": 8.5,
                        "efficiency": 9.2
                    }
                }
            ],
            "type": "cars",
            "filter": [
                {
                    "id": "carCategory",
                    "type": "multiple_union",
                    "layout": {
                        "is_collapsed": "true",
                        "collapsed_count": 5,
                        "layout_type": "list",
                        "is_collapsable": "true"
                    },
                    "title": "Car Type",
                    "categories": [
                        {
                            "id": "carCategory::small",
                            "nameWithCount": "Small (6)",
                            "count": 6,
                            "name": "Small"
                        },
                        {
                            "name": "Medium",
                            "id": "carCategory::medium",
                            "count": 20,
                            "nameWithCount": "Medium (20)"
                        },
                        {
                            "id": "carCategory::large",
                            "nameWithCount": "Large (36)",
                            "count": 36,
                            "name": "Large"
                        },
                        {
                            "id": "carCategory::premium",
                            "nameWithCount": "Premium (8)",
                            "count": 8,
                            "name": "Premium"
                        },
                        {
                            "id": "carCategory::carriers",
                            "count": 6,
                            "nameWithCount": "People carriers (6)",
                            "name": "People carriers"
                        }
                    ]
                },
                {
                    "type": "multiple_union",
                    "id": "supplier",
                    "categories": [
                        {
                            "nameWithCount": "Avis (32)",
                            "count": 32,
                            "id": "supplier::Avis",
                            "name": "Avis"
                        },
                        {
                            "name": "Hertz",
                            "nameWithCount": "Hertz (24)",
                            "count": 24,
                            "id": "supplier::Hertz"
                        }
                    ],
                    "title": "Supplier",
                    "layout": {
                        "layout_type": "list",
                        "collapsed_count": 5,
                        "is_collapsed": "true",
                        "is_collapsable": "true"
                    }
                },
                {
                    "title": "Price per day",
                    "layout": {
                        "is_collapsable": "false",
                        "is_collapsed": "false",
                        "collapsed_count": 5,
                        "layout_type": "list"
                    },
                    "categories": [
                        {
                            "count": 0,
                            "nameWithCount": "US$0 - US$50 (0)",
                            "id": "pricePerDayBuckets::BUCKET_1",
                            "name": "US$0 - US$50"
                        },
                        {
                            "name": "US$50 - US$100",
                            "nameWithCount": "US$50 - US$100 (30)",
                            "count": 30,
                            "id": "pricePerDayBuckets::BUCKET_2"
                        },
                        {
                            "id": "pricePerDayBuckets::BUCKET_3",
                            "count": 26,
                            "nameWithCount": "US$100 - US$150 (26)",
                            "name": "US$100 - US$150"
                        },
                        {
                            "name": "US$150 - US$200",
                            "nameWithCount": "US$150 - US$200 (0)",
                            "count": 0,
                            "id": "pricePerDayBuckets::BUCKET_4"
                        },
                        {
                            "name": "US$200+",
                            "id": "pricePerDayBuckets::BUCKET_5",
                            "nameWithCount": "US$200+ (0)",
                            "count": 0
                        }
                    ],
                    "type": "multiple_union",
                    "id": "pricePerDayBuckets"
                },
                {
                    "type": "multiple_union",
                    "id": "transmission",
                    "title": "Transmission",
                    "layout": {
                        "collapsed_count": 5,
                        "is_collapsed": "true",
                        "layout_type": "list",
                        "is_collapsable": "true"
                    },
                    "categories": [
                        {
                            "name": "Automatic",
                            "count": 56,
                            "nameWithCount": "Automatic (56)",
                            "id": "transmission::AUTOMATIC"
                        }
                    ]
                },
                {
                    "id": "hasAirConditioning",
                    "type": "single_option",
                    "layout": {
                        "layout_type": "list"
                    },
                    "title": "Air Conditioning",
                    "categories": [
                        {
                            "nameWithCount": "Air Conditioning (56)",
                            "count": 56,
                            "id": "hasAirConditioning::true"
                        }
                    ]
                }
            ]
        }
    },
    {
        "status": true,
        "message": "Success",
        "data": {
            "sort": [
                {
                    "name": "Recommended – best first",
                    "title_tag": "tr.searchresults.sortBy.recommended",
                    "identifier": "recommended"
                },
                {
                    "title_tag": "tr.searchresults.sortBy.price.lowHigh",
                    "identifier": "price_low_to_high",
                    "name": "Price - lowest first"
                },
                {
                    "title_tag": "tr.searchresults.sortBy.reviews.highLow",
                    "identifier": "review_score",
                    "name": "Review score - highest first"
                }
            ],
            "count": 56,
            "search_results": [
                {
                    "vehicle_id": "637318066",
                    "vehicle_info": {
                        "free_cancellation": 1,
                        "cma_compliant": -1,
                        "airbags": 1,
                        "seats": "4",
                        "label": "Economy car with:",
                        "aircon": 1,
                        "group": "Economy",
                        "suitcases": {
                            "small": "2",
                            "big": "0"
                        },
                        "v_id": "637318066",
                        "fuel_type": "N/A",
                        "fuel_policy": "Like for like",
                        "mileage": "Unlimited mileage",
                        "v_name": "Hyundai Veloster",
                        "transmission": "Automatic",
                        "unlimited_mileage": 1,
                        "doors": "4"
                    },
                    "accessibility": {
                        "supplier_rating": "At this location, our customers have rated Hertz as 7.8 out of 10, Good.",
                        "transmission": "Automatic gearbox",
                        "pick_up_location": "Pick-up information: Downtown",
                        "fuel_policy": "Fuel policy is: Like for like"
                    },
                    "rating_info": {
                        "condition": 7.5,
                        "average": 7.8,
                        "pickup_time": 5.3,
                        "value_for_money": 7.2,
                        "dropoff_time": 9,
                        "efficiency": 9.2,
                        "average_text": "Very good",
                        "no_of_ratings": 4,
                        "location": 8.6,
                        "cleanliness": 8.5
                    },
                    "pricing_info": {
                        "drive_away_price": 58.7,
                        "base_currency": "INR",
                        "discount": 0,
                        "quote_allowed": 1,
                        "base_price": 4911.76,
                        "currency": "USD",
                        "pay_when": "PAY_NOW",
                        "fee_breakdown": {
                            "known_fees": [
                                {
                                    "min_amount": 0,
                                    "max_amount": 0,
                                    "currency": "USD",
                                    "amount": 0,
                                    "is_always_payable": 0,
                                    "is_tax_included": 1,
                                    "type": "THEFT_EXCESS"
                                },
                                {
                                    "type": "DEPOSIT",
                                    "amount": 640.96,
                                    "currency": "USD",
                                    "is_always_payable": 0,
                                    "max_amount": 640.96,
                                    "min_amount": 256.38,
                                    "is_tax_included": 1
                                },
                                {
                                    "is_tax_included": 1,
                                    "min_amount": 0,
                                    "max_amount": 0,
                                    "currency": "USD",
                                    "amount": 0,
                                    "is_always_payable": 0,
                                    "type": "DAMAGE_EXCESS"
                                },
                                {
                                    "type": "MILEAGE",
                                    "is_always_payable": 0,
                                    "distance_allowed": {
                                        "is_km": 0,
                                        "is_unlimited": 1
                                    }
                                }
                            ],
                            "fuel_policy": {
                                "type": "RETURN_SAME",
                                "amount": 0
                            }
                        },
                        "drive_away_price_is_approx": true,
                        "price": 58.7,
                        "deposit": 58.7,
                        "base_deposit": 4911.76
                    },
                    "content": {
                        "supplier": {
                            "rating": {
                                "subtitle": "4 reviews",
                                "localisedRating": {
                                    "displayValue": "7.8",
                                    "rawValue": 7.8
                                },
                                "average": "7.8",
                                "title": "Good"
                            },
                            "name": "Hertz"
                        },
                        "badges": [
                            {
                                "type": "CONSTRUCTIVE",
                                "text": "Free cancellation",
                                "variation": "DEFAULT"
                            }
                        ]
                    },
                    "freebies": [
                        "Amendments"
                    ],
                    "fee_info": {
                        "tax": 0,
                        "fee": 0
                    },
                    "route_info": {
                        "dropoff": {
                            "latitude": "32.873046",
                            "name": "San Diego - Marriott La Jolla",
                            "location_type": "DOWNTOWN",
                            "country_code": "US",
                            "longitude": "-117.216334",
                            "location_id": "3889719",
                            "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037"
                        },
                        "pickup": {
                            "location_id": "3889719",
                            "location_type": "DOWNTOWN",
                            "country_code": "US",
                            "longitude": "-117.216334",
                            "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037",
                            "name": "San Diego - Marriott La Jolla",
                            "latitude": "32.873046"
                        }
                    },
                    "supplier_info": {
                        "location_type": "Downtown",
                        "longitude": "-117.216334",
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/137_logo_200.png",
                        "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037",
                        "pickup_instructions": "-",
                        "latitude": "32.873046",
                        "name": "Hertz",
                        "dropoff_instructions": "-",
                        "may_require_credit_card_guarantee": false
                    }
                },
                {
                    "vehicle_id": "637361566",
                    "content": {
                        "badges": [
                            {
                                "variation": "DEFAULT",
                                "type": "CONSTRUCTIVE",
                                "text": "Free cancellation"
                            }
                        ],
                        "supplier": {
                            "name": "Hertz",
                            "rating": {
                                "subtitle": "4 reviews",
                                "title": "Good",
                                "average": "7.8",
                                "localisedRating": {
                                    "displayValue": "7.8",
                                    "rawValue": 7.8
                                }
                            }
                        }
                    },
                    "freebies": [
                        "Amendments"
                    ],
                    "fee_info": {
                        "tax": 0,
                        "fee": 0
                    },
                    "route_info": {
                        "pickup": {
                            "country_code": "US",
                            "longitude": "-117.216334",
                            "location_type": "DOWNTOWN",
                            "location_id": "3889719",
                            "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037",
                            "latitude": "32.873046",
                            "name": "San Diego - Marriott La Jolla"
                        },
                        "dropoff": {
                            "latitude": "32.873046",
                            "name": "San Diego - Marriott La Jolla",
                            "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037",
                            "longitude": "-117.216334",
                            "country_code": "US",
                            "location_type": "DOWNTOWN",
                            "location_id": "3889719"
                        }
                    },
                    "supplier_info": {
                        "latitude": "32.873046",
                        "name": "Hertz",
                        "may_require_credit_card_guarantee": false,
                        "dropoff_instructions": "-",
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/137_logo_200.png",
                        "longitude": "-117.216334",
                        "location_type": "Downtown",
                        "pickup_instructions": "-",
                        "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037"
                    },
                    "rating_info": {
                        "average_text": "Very good",
                        "location": 8.6,
                        "no_of_ratings": 4,
                        "cleanliness": 8.5,
                        "condition": 7.5,
                        "average": 7.8,
                        "pickup_time": 5.3,
                        "value_for_money": 7.2,
                        "efficiency": 9.2,
                        "dropoff_time": 9
                    },
                    "pricing_info": {
                        "base_deposit": 5405.71,
                        "deposit": 64.6,
                        "price": 64.6,
                        "drive_away_price_is_approx": true,
                        "fee_breakdown": {
                            "fuel_policy": {
                                "amount": 0,
                                "type": "RETURN_SAME"
                            },
                            "known_fees": [
                                {
                                    "type": "THEFT_EXCESS",
                                    "is_tax_included": 1,
                                    "currency": "USD",
                                    "is_always_payable": 0,
                                    "amount": 0,
                                    "max_amount": 0,
                                    "min_amount": 0
                                },
                                {
                                    "type": "DEPOSIT",
                                    "is_tax_included": 1,
                                    "max_amount": 640.96,
                                    "min_amount": 256.38,
                                    "currency": "USD",
                                    "amount": 640.96,
                                    "is_always_payable": 0
                                },
                                {
                                    "is_tax_included": 1,
                                    "amount": 0,
                                    "currency": "USD",
                                    "is_always_payable": 0,
                                    "min_amount": 0,
                                    "max_amount": 0,
                                    "type": "DAMAGE_EXCESS"
                                },
                                {
                                    "distance_allowed": {
                                        "is_unlimited": 1,
                                        "is_km": 0
                                    },
                                    "is_always_payable": 0,
                                    "type": "MILEAGE"
                                }
                            ]
                        },
                        "currency": "USD",
                        "pay_when": "PAY_NOW",
                        "base_price": 5405.71,
                        "quote_allowed": 1,
                        "discount": 0,
                        "drive_away_price": 64.6,
                        "base_currency": "INR"
                    },
                    "accessibility": {
                        "supplier_rating": "At this location, our customers have rated Hertz as 7.8 out of 10, Good.",
                        "pick_up_location": "Pick-up information: Downtown",
                        "fuel_policy": "Fuel policy is: Like for like",
                        "transmission": "Automatic gearbox"
                    },
                    "vehicle_info": {
                        "aircon": 1,
                        "label": "Intermediate car with:",
                        "group": "Intermediate",
                        "free_cancellation": 1,
                        "airbags": 1,
                        "seats": "5",
                        "cma_compliant": -1,
                        "transmission": "Automatic",
                        "doors": "2/4",
                        "unlimited_mileage": 1,
                        "v_id": "637361566",
                        "suitcases": {
                            "big": "0",
                            "small": "3"
                        },
                        "mileage": "Unlimited mileage",
                        "v_name": "Toyota Corolla",
                        "fuel_type": "N/A",
                        "fuel_policy": "Like for like"
                    }
                },
                {
                    "vehicle_id": "637339816",
                    "freebies": [
                        "Amendments"
                    ],
                    "content": {
                        "badges": [
                            {
                                "variation": "DEFAULT",
                                "type": "CONSTRUCTIVE",
                                "text": "Free cancellation"
                            }
                        ],
                        "supplier": {
                            "name": "Hertz",
                            "rating": {
                                "subtitle": "4 reviews",
                                "localisedRating": {
                                    "rawValue": 7.8,
                                    "displayValue": "7.8"
                                },
                                "average": "7.8",
                                "title": "Good"
                            }
                        }
                    },
                    "supplier_info": {
                        "longitude": "-117.216334",
                        "location_type": "Downtown",
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/137_logo_200.png",
                        "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037",
                        "pickup_instructions": "-",
                        "name": "Hertz",
                        "latitude": "32.873046",
                        "dropoff_instructions": "-",
                        "may_require_credit_card_guarantee": false
                    },
                    "fee_info": {
                        "fee": 0,
                        "tax": 0
                    },
                    "route_info": {
                        "dropoff": {
                            "country_code": "US",
                            "longitude": "-117.216334",
                            "location_type": "DOWNTOWN",
                            "location_id": "3889719",
                            "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037",
                            "latitude": "32.873046",
                            "name": "San Diego - Marriott La Jolla"
                        },
                        "pickup": {
                            "latitude": "32.873046",
                            "name": "San Diego - Marriott La Jolla",
                            "location_id": "3889719",
                            "country_code": "US",
                            "longitude": "-117.216334",
                            "location_type": "DOWNTOWN",
                            "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037"
                        }
                    },
                    "pricing_info": {
                        "base_deposit": 5074.39,
                        "deposit": 60.64,
                        "drive_away_price_is_approx": true,
                        "price": 60.64,
                        "pay_when": "PAY_NOW",
                        "currency": "USD",
                        "fee_breakdown": {
                            "fuel_policy": {
                                "amount": 0,
                                "type": "RETURN_SAME"
                            },
                            "known_fees": [
                                {
                                    "type": "THEFT_EXCESS",
                                    "is_tax_included": 1,
                                    "min_amount": 0,
                                    "max_amount": 0,
                                    "amount": 0,
                                    "currency": "USD",
                                    "is_always_payable": 0
                                },
                                {
                                    "type": "DEPOSIT",
                                    "min_amount": 256.38,
                                    "max_amount": 640.96,
                                    "currency": "USD",
                                    "amount": 640.96,
                                    "is_always_payable": 0,
                                    "is_tax_included": 1
                                },
                                {
                                    "is_tax_included": 1,
                                    "max_amount": 0,
                                    "min_amount": 0,
                                    "amount": 0,
                                    "currency": "USD",
                                    "is_always_payable": 0,
                                    "type": "DAMAGE_EXCESS"
                                },
                                {
                                    "type": "MILEAGE",
                                    "distance_allowed": {
                                        "is_unlimited": 1,
                                        "is_km": 0
                                    },
                                    "is_always_payable": 0
                                }
                            ]
                        },
                        "base_price": 5074.39,
                        "discount": 0,
                        "quote_allowed": 1,
                        "base_currency": "INR",
                        "drive_away_price": 60.64
                    },
                    "rating_info": {
                        "average_text": "Very good",
                        "location": 8.6,
                        "no_of_ratings": 4,
                        "cleanliness": 8.5,
                        "condition": 7.5,
                        "average": 7.8,
                        "value_for_money": 7.2,
                        "pickup_time": 5.3,
                        "efficiency": 9.2,
                        "dropoff_time": 9
                    },
                    "vehicle_info": {
                        "aircon": 1,
                        "label": "Compact car with:",
                        "group": "Compact",
                        "free_cancellation": 1,
                        "cma_compliant": -1,
                        "seats": "5",
                        "airbags": 1,
                        "transmission": "Automatic",
                        "unlimited_mileage": 1,
                        "doors": "2/4",
                        "v_id": "637339816",
                        "suitcases": {
                            "big": "0",
                            "small": "2"
                        },
                        "fuel_type": "N/A",
                        "fuel_policy": "Like for like",
                        "mileage": "Unlimited mileage",
                        "v_name": "Nissan Versa  "
                    },
                    "accessibility": {
                        "supplier_rating": "At this location, our customers have rated Hertz as 7.8 out of 10, Good.",
                        "transmission": "Automatic gearbox",
                        "pick_up_location": "Pick-up information: Downtown",
                        "fuel_policy": "Fuel policy is: Like for like"
                    }
                },
                {
                    "vehicle_id": "768092056",
                    "route_info": {
                        "dropoff": {
                            "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037",
                            "location_type": "DOWNTOWN",
                            "longitude": "-117.216334",
                            "country_code": "US",
                            "location_id": "3889719",
                            "latitude": "32.873046",
                            "name": "San Diego - Marriott La Jolla"
                        },
                        "pickup": {
                            "latitude": "32.873046",
                            "name": "San Diego - Marriott La Jolla",
                            "location_type": "DOWNTOWN",
                            "country_code": "US",
                            "longitude": "-117.216334",
                            "location_id": "3889719",
                            "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037"
                        }
                    },
                    "fee_info": {
                        "tax": 0,
                        "fee": 0
                    },
                    "supplier_info": {
                        "pickup_instructions": "-",
                        "address": "4240, La Jolla Village Drive, San Diego Marriott, La Jolla, USA, 92037",
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/137_logo_200.png",
                        "location_type": "Downtown",
                        "longitude": "-117.216334",
                        "may_require_credit_card_guarantee": false,
                        "dropoff_instructions": "-",
                        "name": "Hertz",
                        "latitude": "32.873046"
                    },
                    "content": {
                        "supplier": {
                            "rating": {
                                "localisedRating": {
                                    "displayValue": "7.8",
                                    "rawValue": 7.8
                                },
                                "title": "Good",
                                "average": "7.8",
                                "subtitle": "4 reviews"
                            },
                            "name": "Hertz"
                        },
                        "badges": [
                            {
                                "variation": "DEFAULT",
                                "type": "OUTLINED",
                                "text": "Featured"
                            },
                            {
                                "variation": "DEFAULT",
                                "type": "CONSTRUCTIVE",
                                "text": "Free cancellation"
                            },
                            {
                                "variation": "DEFAULT",
                                "type": "ACCENT",
                                "text": "Fully electric"
                            }
                        ]
                    },
                    "freebies": [
                        "Amendments"
                    ],
                    "pricing_info": {
                        "price": 103.34,
                        "drive_away_price_is_approx": true,
                        "base_deposit": 8647.92,
                        "deposit": 103.34,
                        "quote_allowed": 1,
                        "discount": 0,
                        "base_currency": "INR",
                        "drive_away_price": 103.34,
                        "fee_breakdown": {
                            "known_fees": [
                                {
                                    "type": "THEFT_EXCESS",
                                    "is_tax_included": 1,
                                    "max_amount": 0,
                                    "min_amount": 0,
                                    "amount": 0,
                                    "currency": "USD",
                                    "is_always_payable": 0
                                },
                                {
                                    "type": "DEPOSIT",
                                    "max_amount": 640.96,
                                    "min_amount": 256.38,
                                    "amount": 640.96,
                                    "currency": "USD",
                                    "is_always_payable": 0,
                                    "is_tax_included": 1
                                },
                                {
                                    "is_always_payable": 0,
                                    "currency": "USD",
                                    "amount": 0,
                                    "max_amount": 0,
                                    "min_amount": 0,
                                    "is_tax_included": 1,
                                    "type": "DAMAGE_EXCESS"
                                },
                                {
                                    "type": "MILEAGE",
                                    "distance_allowed": {
                                        "is_km": 0,
                                        "is_unlimited": 1
                                    },
                                    "is_always_payable": 0
                                }
                            ],
                            "fuel_policy": {
                                "amount": 0,
                                "type": "RETURN_SAME"
                            }
                        },
                        "pay_when": "PAY_NOW",
                        "currency": "USD",
                        "base_price": 8647.92
                    },
                    "rating_info": {
                        "average": 7.8,
                        "condition": 7.5,
                        "efficiency": 9.2,
                        "dropoff_time": 9,
                        "value_for_money": 7.2,
                        "pickup_time": 5.3,
                        "average_text": "Very good",
                        "cleanliness": 8.5,
                        "location": 8.6,
                        "no_of_ratings": 4
                    },
                    "vehicle_info": {
                        "free_cancellation": 1,
                        "badges": {
                            "greenVehicle": "Fully electric"
                        },
                        "seats": "5",
                        "airbags": 1,
                        "cma_compliant": -1,
                        "label": "Premium car with:",
                        "aircon": 1,
                        "group": "Premium",
                        "suitcases": {
                            "small": "4",
                            "big": "0"
                        },
                        "v_id": "768092056",
                        "mileage": "Unlimited mileage",
                        "v_name": "Polestar 2",
                        "fuel_policy": "Like for like",
                        "fuel_type": "N/A",
                        "transmission": "Automatic",
                        "doors": "5",
                        "unlimited_mileage": 1
                    },
                    "accessibility": {
                        "fuel_policy": "Fuel policy is: Like for like",
                        "pick_up_location": "Pick-up information: Downtown",
                        "transmission": "Automatic gearbox",
                        "supplier_rating": "At this location, our customers have rated Hertz as 7.8 out of 10, Good."
                    }
                },
                {
                    "vehicle_id": "637317356",
                    "content": {
                        "supplier": {
                            "name": "Hertz"
                        },
                        "badges": [
                            {
                                "variation": "DEFAULT",
                                "type": "CONSTRUCTIVE",
                                "text": "Free cancellation"
                            }
                        ]
                    },
                    "freebies": [
                        "Amendments"
                    ],
                    "fee_info": {
                        "fee": 0,
                        "tax": 0
                    },
                    "route_info": {
                        "dropoff": {
                            "latitude": "32.83165851",
                            "name": "Kearney Mesa Downtown",
                            "location_id": "3889576",
                            "longitude": "-117.1599769",
                            "country_code": "US",
                            "location_type": "DOWNTOWN",
                            "address": "7337 Clairemont Mesa Blvd, Kearny Mesa, USA, 92111"
                        },
                        "pickup": {
                            "address": "7337 Clairemont Mesa Blvd, Kearny Mesa, USA, 92111",
                            "location_id": "3889576",
                            "location_type": "DOWNTOWN",
                            "longitude": "-117.1599769",
                            "country_code": "US",
                            "latitude": "32.83165851",
                            "name": "Kearney Mesa Downtown"
                        }
                    },
                    "supplier_info": {
                        "may_require_credit_card_guarantee": false,
                        "dropoff_instructions": "-",
                        "latitude": "32.83165851",
                        "name": "Hertz",
                        "pickup_instructions": "-",
                        "address": "7337 Clairemont Mesa Blvd, Kearny Mesa, USA, 92111",
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/137_logo_200.png",
                        "longitude": "-117.1599769",
                        "location_type": "Downtown"
                    },
                    "rating_info": {
                        "cleanliness": 0,
                        "no_of_ratings": 0,
                        "location": 0,
                        "average": 0,
                        "condition": 0,
                        "efficiency": 0,
                        "dropoff_time": 0,
                        "value_for_money": 0,
                        "pickup_time": 0
                    },
                    "pricing_info": {
                        "base_price": 4911.76,
                        "currency": "USD",
                        "pay_when": "PAY_NOW",
                        "fee_breakdown": {
                            "known_fees": [
                                {
                                    "type": "THEFT_EXCESS",
                                    "is_tax_included": 1,
                                    "max_amount": 0,
                                    "min_amount": 0,
                                    "amount": 0,
                                    "currency": "USD",
                                    "is_always_payable": 0
                                },
                                {
                                    "type": "DEPOSIT",
                                    "is_tax_included": 1,
                                    "max_amount": 640.96,
                                    "min_amount": 256.38,
                                    "is_always_payable": 0,
                                    "currency": "USD",
                                    "amount": 640.96
                                },
                                {
                                    "min_amount": 0,
                                    "max_amount": 0,
                                    "amount": 0,
                                    "currency": "USD",
                                    "is_always_payable": 0,
                                    "is_tax_included": 1,
                                    "type": "DAMAGE_EXCESS"
                                },
                                {
                                    "type": "MILEAGE",
                                    "is_always_payable": 0,
                                    "distance_allowed": {
                                        "is_km": 0,
                                        "is_unlimited": 1
                                    }
                                }
                            ],
                            "fuel_policy": {
                                "type": "RETURN_SAME",
                                "amount": 0
                            }
                        },
                        "drive_away_price": 58.7,
                        "base_currency": "INR",
                        "discount": 0,
                        "quote_allowed": 1,
                        "deposit": 58.7,
                        "base_deposit": 4911.76,
                        "drive_away_price_is_approx": true,
                        "price": 58.7
                    },
                    "accessibility": {
                        "supplier_rating": "At this location, our customers have rated Hertz as {rating_number} out of 10, {rating_name}.",
                        "pick_up_location": "Pick-up information: Downtown",
                        "fuel_policy": "Fuel policy is: Like for like",
                        "transmission": "Automatic gearbox"
                    },
                    "vehicle_info": {
                        "transmission": "Automatic",
                        "doors": "4",
                        "unlimited_mileage": 1,
                        "suitcases": {
                            "big": "0",
                            "small": "2"
                        },
                        "v_id": "637317356",
                        "mileage": "Unlimited mileage",
                        "v_name": "Hyundai Veloster",
                        "fuel_policy": "Like for like",
                        "fuel_type": "N/A",
                        "label": "Economy car with:",
                        "aircon": 1,
                        "group": "Economy",
                        "free_cancellation": 1,
                        "airbags": 1,
                        "seats": "4",
                        "cma_compliant": -1
                    }
                }
            ],
            "search_context": {
                "recommendationsSearchUniqueId": "f98e9c10-5ce7-4469-bb62-ac27ccb56e47",
                "searchId": "81155a33-f4dd-4c90-86a1-cf4d5bd4ce02",
                "searchKey": "eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMC0xNlQwODowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6IjMyLjg3MzA1NSwtMTE3LjIxNTkzNSIsImRyb3BPZmZMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicGlja1VwRGF0ZVRpbWUiOiIyMDI0LTEwLTE1VDA4OjAwOjAwIiwicGlja1VwTG9jYXRpb24iOiIzMi44NzMwNTUsLTExNy4yMTU5MzUiLCJwaWNrVXBMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicmVudGFsRHVyYXRpb25JbkRheXMiOjEsInNlcnZpY2VGZWF0dXJlcyI6WyJOT19PUEFRVUVTIiwiU1VQUkVTU19GSVhFRF9QUklDRV9WRUhJQ0xFUyIsIklOQ0xVREVfUFJPRFVDVF9SRUxBVElPTlNISVBTIiwiSU5DTFVERV9FWFRSQVNfQ09OVEFJTklOR19GRUVTIl19"
            },
            "search_key": "eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMC0xNlQwODowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6IjMyLjg3MzA1NSwtMTE3LjIxNTkzNSIsImRyb3BPZmZMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicGlja1VwRGF0ZVRpbWUiOiIyMDI0LTEwLTE1VDA4OjAwOjAwIiwicGlja1VwTG9jYXRpb24iOiIzMi44NzMwNTUsLTExNy4yMTU5MzUiLCJwaWNrVXBMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicmVudGFsRHVyYXRpb25JbkRheXMiOjEsInNlcnZpY2VGZWF0dXJlcyI6WyJOT19PUEFRVUVTIiwiU1VQUkVTU19GSVhFRF9QUklDRV9WRUhJQ0xFUyIsIklOQ0xVREVfUFJPRFVDVF9SRUxBVElPTlNISVBTIiwiSU5DTFVERV9FWFRSQVNfQ09OVEFJTklOR19GRUVTIl19",
            "is_genius_location": false,
            "content": {
                "filters": {
                    "countLabel": "56 results"
                },
                "items": [
                    {
                        "type": "SHELL_REGION_VIEW",
                        "content": {
                            "contentType": "carsSearchResultsSecondaryPromotional"
                        },
                        "positionInList": 3
                    }
                ]
            },
            "type": "cars",
            "title": "Car rentals",
            "filter": [
                {
                    "type": "multiple_union",
                    "title": "Car Type",
                    "id": "carCategory",
                    "categories": [
                        {
                            "count": 6,
                            "nameWithCount": "Small (6)",
                            "id": "carCategory::small",
                            "name": "Small"
                        },
                        {
                            "id": "carCategory::medium",
                            "name": "Medium",
                            "count": 20,
                            "nameWithCount": "Medium (20)"
                        },
                        {
                            "id": "carCategory::large",
                            "name": "Large",
                            "nameWithCount": "Large (36)",
                            "count": 36
                        },
                        {
                            "id": "carCategory::premium",
                            "name": "Premium",
                            "count": 8,
                            "nameWithCount": "Premium (8)"
                        },
                        {
                            "name": "People carriers",
                            "id": "carCategory::carriers",
                            "count": 6,
                            "nameWithCount": "People carriers (6)"
                        }
                    ],
                    "layout": {
                        "is_collapsed": "true",
                        "collapsed_count": 5,
                        "is_collapsable": "true",
                        "layout_type": "list"
                    }
                },
                {
                    "categories": [
                        {
                            "id": "supplier::Avis",
                            "name": "Avis",
                            "count": 32,
                            "nameWithCount": "Avis (32)"
                        },
                        {
                            "name": "Hertz",
                            "id": "supplier::Hertz",
                            "nameWithCount": "Hertz (24)",
                            "count": 24
                        }
                    ],
                    "layout": {
                        "layout_type": "list",
                        "is_collapsable": "true",
                        "collapsed_count": 5,
                        "is_collapsed": "true"
                    },
                    "type": "multiple_union",
                    "title": "Supplier",
                    "id": "supplier"
                },
                {
                    "categories": [
                        {
                            "id": "pricePerDayBuckets::BUCKET_1",
                            "name": "US$0 - US$50",
                            "nameWithCount": "US$0 - US$50 (0)",
                            "count": 0
                        },
                        {
                            "id": "pricePerDayBuckets::BUCKET_2",
                            "name": "US$50 - US$100",
                            "count": 30,
                            "nameWithCount": "US$50 - US$100 (30)"
                        },
                        {
                            "id": "pricePerDayBuckets::BUCKET_3",
                            "name": "US$100 - US$150",
                            "nameWithCount": "US$100 - US$150 (26)",
                            "count": 26
                        },
                        {
                            "nameWithCount": "US$150 - US$200 (0)",
                            "count": 0,
                            "name": "US$150 - US$200",
                            "id": "pricePerDayBuckets::BUCKET_4"
                        },
                        {
                            "name": "US$200+",
                            "id": "pricePerDayBuckets::BUCKET_5",
                            "nameWithCount": "US$200+ (0)",
                            "count": 0
                        }
                    ],
                    "layout": {
                        "is_collapsable": "false",
                        "layout_type": "list",
                        "is_collapsed": "false",
                        "collapsed_count": 5
                    },
                    "type": "multiple_union",
                    "id": "pricePerDayBuckets",
                    "title": "Price per day"
                },
                {
                    "categories": [
                        {
                            "name": "Automatic",
                            "id": "transmission::AUTOMATIC",
                            "count": 56,
                            "nameWithCount": "Automatic (56)"
                        }
                    ],
                    "layout": {
                        "is_collapsed": "true",
                        "collapsed_count": 5,
                        "is_collapsable": "true",
                        "layout_type": "list"
                    },
                    "type": "multiple_union",
                    "id": "transmission",
                    "title": "Transmission"
                },
                {
                    "categories": [
                        {
                            "id": "hasAirConditioning::true",
                            "nameWithCount": "Air Conditioning (56)",
                            "count": 56
                        }
                    ],
                    "layout": {
                        "layout_type": "list"
                    },
                    "type": "single_option",
                    "title": "Air Conditioning",
                    "id": "hasAirConditioning"
                }
            ],
            "provider": "rentalcars",
            "meta": {
                "response_code": 200
            }
        }
    }
]

2025-08-25 11:08:06,876 - evaluation_logger_Car-Rental-0 - INFO - Final Response: <｜begin▁of▁sentence｜># 1. 概述

本文，我们来分享 MyBatis 的日志模块，对应 `logging` 包。如下图所示：[![`logging` 包](http://static.iocoder.cn/images/MyBatis/2020_02_01/01.png)](http://static.iocoder.cn/images/MyBatis/2020_02_01/01.png)`logging` 包

在 [《精尽 MyBatis 源码解析 —— 项目结构一览》](http://svip.iocoder.cn/MyBatis/intro) 中，简单介绍了这个模块如下：

> 无论在开发测试环境中，还是在线上生产环境中，日志在整个系统中的地位都是非常重要的。良好的日志功能可以帮助开发人员和测试人员快速定位 Bug 代码，也可以帮助运维人员快速定位性能瓶颈等问题。目前的 Java 世界中存在很多优秀的日志框架，例如 Log4j、 Log4j2、Slf4j 等。
>
> MyBatis 作为一个设计优良的框架，除了提供详细的日志输出信息，还要能够集成多种日志框架，其日志模块的一个主要功能就是**集成第三方日志框架**。

本文涉及的类如下图所示：<img src="http://ahaolin-public-img.oss-cn-hangzhou.aliyuncs.com/img/202202141646773.png" alt="类图" style="zoom:150%;" />

- 从图的**上面**部分，我们可以看到，MyBatis 直接提供了多种日志框架的实现，直接使用对应的日志框架的打印 API 即可。
- 从图的**下面**部分，我们可以看到，MyBatis 提供了 `slf4j` 的集成方式，即 `Slf4jImpl` ，通过适配的方式，满足 `slf4j` 的打印 API 即可。

下面，我们逐小节来分享。

# 2. Log

`org.apache.ibatis.logging.Log` ，MyBatis Log 接口。代码如下：

```java
// Log.java

public interface Log {

    boolean isDebugEnabled();

    boolean isTraceEnabled();

    void error(String s, Throwable e);

    void error(String s);

    void debug(String s);

    void trace(String s);

    void warn(String s);

}
```

## 2.1 LogFactory

`org.apache.ibatis.logging.LogFactory` ，Log 工厂类。代码如下：

```java
// LogFactory.java

public final class LogFactory {

    /**
     * Marker to be used by logging implementations that support markers.
     */
    public static final String MARKER = "MYBATIS";

    /**
     * 使用的 Log 的构造方法
     */
    private static Constructor<? extends Log> logConstructor;

    static {
        // <1> 尝试逐个初始化，直到成功
        tryImplementation(LogFactory::useSlf4jLogging);
        tryImplementation(LogFactory::useCommonsLogging);
        tryImplementation(LogFactory::useLog4J2Logging);
        tryImplementation(LogFactory::useLog4JLogging);
        tryImplementation(LogFactory::useJdkLogging);
        tryImplementation(LogFactory::useNoLogging);
    }

    private LogFactory() {
        // disable construction
    }

    public static Log getLog(Class<?> aClass) {
        return getLog(aClass.getName());
    }

    public static Log getLog(String logger) {
        try {
            return logConstructor.newInstance(logger);
        } catch (Throwable t) {
            throw new LogException("Error creating logger for logger " + logger + ".  Cause: " + t, t);
        }
    }

    public static synchronized void useCustomLogging(Class<? extends Log> clazz) {
        setImplementation(clazz);
    }

    public static synchronized void useSlf4jLogging() {
        setImplementation(org.apache.ibatis.logging.slf4j.Slf4jImpl.class);
    }

    public static synchronized void useCommonsLogging() {
        setImplementation(org.apache.ibatis.logging.commons.JakartaCommonsLoggingImpl.class);
    }

    public static synchronized void useLog4JLogging() {
        setImplementation(org.apache.ibatis.logging.log4j.Log4jImpl.class);
    }

    public static synchronized void useLog4J2Logging() {
        setImplementation(org.apache.ibatis.logging.log4j2.Log4j2Impl.class);
    }

    public static synchronized void useJdkLogging() {
        setImplementation(org.apache.ibatis.logging.jdk14.Jdk14LoggingImpl.class);
    }

    public static synchronized void useNoLogging() {
        setImplementation(org.apache.ibatis.logging.nologging.NoLoggingImpl.class);
    }

    private static void tryImplementation(Runnable runnable) {
        if (logConstructor == null) {
            try {
                runnable.run();
            } catch (Throwable t) {
                // ignore
            }
        }
    }

    private static void setImplementation(Class<? extends Log> implClass) {
        try {
            // 获得参数为 String 的构造方法
            Constructor<? extends Log> candidate = implClass.getConstructor(String.class);
            // 创建 Log 对象
            Log log = candidate.newInstance(LogFactory.class.getName());
            if (log.isDebugEnabled()) {
                log.debug("Logging initialized using '" + implClass + "' adapter.");
            }
            // 创建成功，意味着可以使用，设置为 logConstructor
            logConstructor = candidate;
        } catch (Throwable t) {
            throw new LogException("Error setting Log implementation.  Cause: " + t, t);
        }
    }

}
```

- `<1>` 处，在静态代码块中，会尝试逐个初始化，直到成功。而初始化的方式，是调用 `#setImplementation(Class<? extends Log> implClass)` 方法，设置使用的 Log 的构造方法。而初始化的顺序为：SLF4J、CommonsLogging、Log4J2、Log4J、JdkLogging、NoLogging 。也就是说，**MyBatis 会根据 classpath 下的日志框架，来自动选择对应的日志框架**。

- `#setImplementation(Class<? extends Log> implClass)` 方法，会创建指定类的 Log 对象，成功后，并设置为 `logConstructor` 。😈 也就是说，`logConstructor` 属性，就是**使用的 Log 的构造方法**。

- `#getLog(...)` 方法，创建指定类的 Log 对象。例如说，`org.apache.ibatis.logging.commons.JakartaCommonsLoggingImpl` 类。

  > 注意，传入的 `logger` 参数，在日志框架中，一般作为日志的**名字**，从而可以配置不同的日志级别。

## 2.2 静态 Logger

实际上，MyBatis 的日志，不仅仅在 `logging` 包中使用，在其它包中，也会使用。例如说，`org.apache.ibatis.datasource` 包中，如下图所示：<img src="http://ahaolin-public-img.oss-cn-hangzhou.aliyuncs.com/img/202202141646794.png" alt="`datasource` 包" style="zoom:150%;" />

- 每个类中，都定义了一个静态的 Logger 对象，通过 `LogFactory#getLog(Class clazz)` 方法创建。

# 3. 适配器

在 `logging` 包下，有多个包，分别对应多种日志框架。每个包下，基本都有一个 `XxxImpl` 类，实现 Log 接口，作为对应日志框架的适配器。而 `XxxImpl` 类中，会包对应日志框架的 Logger 对象，所有日志的打印，都是通过该 Logger 对象来实现。

因为每个 `XxxImpl` 的实现基本一致，所以下面，我们以 `commons` 包下的 `JakartaCommonsLoggingImpl` 作为示例。代码如下：

```java
// JakartaCommonsLoggingImpl.java

public class JakartaCommonsLoggingImpl implements Log {

    /**
     * 日志对象
     */
    private Log log;

    public JakartaCommonsLoggingImpl(String clazz) {
        // 创建 org.apache.commons.logging.Log 对象
        log = LogFactory.getLog(clazz);
    }

    @Override
    public boolean isDebugEnabled() {
        return log.isDebugEnabled();
    }

    @Override
    public boolean isTraceEnabled() {
        return log.isTraceEnabled();
    }

    @Override
    public void error(String s, Throwable e) {
        log.error(s, e);
    }

    @Override
    public void error(String s) {
        log.error(s);
    }

    @Override
    public void debug(String s) {
        log.debug(s);
    }

    @Override
    public void trace(String s) {
        log.trace(s);
    }

    @Override
    public void warn(String s) {
        log.warn(s);
    }

}
```

- 在 `JakartaCommonsLoggingImpl` 的构造方法中，会创建 `org.apache.commons.logging.Log` 对象。
- 在实现 Log 接口的每个方法中，直接调用 `org.apache.commons.logging.Log` 的对应的方法。

其它 `XxxImpl` 类，胖友自己查看。

# 4. JDBC 日志

考虑到，我们经常需要日志来调试 SQL 。而 `logging` 包下的 `jdbc` 包，**负责打印 SQL 日志**。

## 4.1 BaseJdbcLogger

`org.apache.ibatis.logging.jdbc.BaseJdbcLogger` ，抽象类，为其它 JdbcLogger 抽象类。代码如下：

```java
// BaseJdbcLogger.java

public abstract class BaseJdbcLogger {

    /**
     * SET 方法的前缀
     */
    protected static final String SET_METHOD_PREFIX = "set";
    /**
     * 执行 SQL 类型的方法的前缀
     */
    protected static final String EXECUTE_METHOD_PREFIX = "execute";
    /**
     * 设置参数的 Method 数组
     */
    protected final Set<String> setMethods = new HashSet<>();
    /**
     * 执行 SQL 的 Method 数组
     */
    protected final Set<String> executeMethods = new HashSet<>();
    /**
     * Log 对象
     */
    protected Log statementLog;
    /**
     * 日志的层级
     */
    protected int queryStack;

    /**
     * Default constructor
     */
    public BaseJdbcLogger(Log log, int queryStack) {
        this.statementLog = log;
        if (queryStack == 0) {
            this.queryStack = 1;
        } else {
            this.queryStack = queryStack;
        }
    }

    protected void setColumn(String key, Object value) {
        // 目前是空方法。子类有实现
    }

    protected void removeColumn(String key) {
        // 目前是空方法。子类有实现
    }

    protected void clearColumn() {
        // 目前是空方法。子类有实现
    }

    protected String getParameterValueString() {
        // 目前是空方法。子类有实现
        return null;
    }

    protected String getColumnString() {
        // 目前是空方法。子类有实现
        return null;
    }

    protected void debug(String text, boolean input) {
        if (statementLog.isDebugEnabled()) {
            statementLog.debug(prefix(input) + text);
        }
    }

    protected void trace(String text, boolean input) {
        if (statementLog.isTraceEnabled()) {
            statementLog.trace(prefix(input) + text);
        }
    }

    private String prefix(boolean isInput) {
        char[] buffer = new char[queryStack * 2 + 2];
        Arrays.fill(buffer, '=');
        buffer[queryStack * 2 + 1] = ' ';
        if (isInput) {
            buffer[queryStack * 2] = '>';
        } else {
            buffer[0] = '<';
        }
        return new String(buffer);
    }

}
```

- 代码比较简单，胖友自己看看注释。

## 4.2 ConnectionLogger

`org.apache.ibatis.logging.jdbc.ConnectionLogger` ，继承 BaseJdbcLogger 类，Connection 的日志增强类，负责打印 Connection 的日志。代码如下：

```java
// ConnectionLogger.java

public final class ConnectionLogger extends BaseJdbcLogger implements InvocationHandler {

    /**
     * Connection 对象
     */
    private final Connection connection;

    private ConnectionLogger(Connection conn, Log statementLog, int queryStack) {
        super(statementLog, queryStack);
        this.connection = conn;
    }

    @Override
    public Object invoke(Object proxy, Method method, Object[] params) throws Throwable {
        try {
            // 如果来自 Object 的方法，直接调用
            if (Object.class.equals(method.getDeclaringClass())) {
                return method.invoke(this, params);
            }
            // 如果调用的是 prepareStatement 方法
            if ("prepareStatement".equals(method.getName())) {
                if (isDebugEnabled()) {
                    debug(" Preparing: " + removeBreakingWhitespace((String) params[0]), true);
                }
                // 执行 prepareStatement 方法
                PreparedStatement stmt = (PreparedStatement) method.invoke(connection, params);
                // 创建 PreparedStatementLogger 对象
                stmt = PreparedStatementLogger.newInstance(stmt, statementLog, queryStack);
                return stmt;
            // 如果调用的是 prepareCall 方法
            } else if ("prepareCall".equals(method.getName())) {
                if (isDebugEnabled()) {
                    debug(" Preparing: " + removeBreakingWhitespace((String) params[0]), true);
                }
                // 执行 prepareCall 方法
                PreparedStatement stmt = (PreparedStatement) method.invoke(connection, params);
                // 创建 PreparedStatementLogger 对象
                stmt = PreparedStatementLogger.newInstance(stmt, statementLog, queryStack);
                return stmt;
            // 如果调用的是 createStatement 方法
            } else if ("createStatement".equals(method.getName())) {
                // 执行 createStatement 方法
                Statement stmt = (Statement) method.invoke(connection, params);
                // 创建 StatementLogger 对象
                stmt = StatementLogger.newInstance(stmt, statementLog, queryStack);
                return stmt;
            } else {
                return method.invoke(connection, params);
            }
        } catch (Throwable t) {
            throw ExceptionUtil.unwrapThrowable(t);
        }
    }

    /**
     * Creates a logging version of a connection.
     *
     * @param conn - the original connection
     * @return - the connection with logging
     */
    public static Connection newInstance(Connection conn, Log statementLog, int queryStack) {
        // 创建 Connection 的 InvocationHandler 对象
        InvocationHandler handler = new ConnectionLogger(conn, statementLog, queryStack);
        ClassLoader cl = Connection.class.getClassLoader();
        // 创建 Connection 的代理对象
        return (Connection) Proxy.newProxyInstance(cl, new Class[]{Connection.class}, handler);
    }

    /**
     * return the wrapped connection.
     *
     * @return the connection
     */
    public Connection getConnection() {
        return connection;
    }

}
```

- 在 `#invoke(Object proxy, Method method, Object[] params)` 方法中，当调用 `#prepareStatement(...)`、`#prepareCall(...)`、`#createStatement(...)` 方法时，不仅会执行对应的方法，还会创建对应的增强对象。这样，后续对该对象的方法的调用，也会被日志进行增强打印。

- `#newInstance(Connection conn, Log statementLog, int queryStack)` **静态**方法，会创建 Connection 的代理对象。其中 InvocationHandler 参数为 ConnectionLogger 对象。

  > 注意，`queryStack` 参数，在 `BaseJdbcLogger` 的构造方法中，我们可以看到，最小为 1 。也就是说，即使 `queryStack` 参数为 0 ，实际也会设置为 1 。那什么时候 `queryStack` 参数会大于 1 呢？答案在 `BaseExecutor` 中。代码如下：
  >
  > ```java
  > // BaseExecutor.java
  > 
  > protected Connection getConnection(Log statementLog) throws SQLException {
  >     Connection connection = transaction.getConnection();
  >     if (statementLog.isDebugEnabled()) {
  >         // 传入的是 queryStack 属性
  >         return ConnectionLogger.newInstance(connection, statementLog, queryStack);
  >     } else {
  >         return connection;
  >     }
  > }
  > ```
  >
  > - 那么 `queryStack` 属性，什么时候会大于 1 呢？例如说，`<select />` 标签中，调用存储过程，而存储过程中，还有 SQL 的查询。所以，`queryStack` 属性，用于表达**递归**的层级。

## 4.3 PreparedStatementLogger

`org.apache.ibatis.logging.jdbc.PreparedStatementLogger` ，继承 BaseJdbcLogger 类，PreparedStatement 的日志增强类，负责打印 PreparedStatement 的日志。代码如下：

```java
// PreparedStatementLogger.java

public final class PreparedStatementLogger extends BaseJdbcLogger implements InvocationHandler {

    /**
     * PreparedStatement 对象
     */
    private final PreparedStatement statement;

    private PreparedStatementLogger(PreparedStatement stmt, Log statementLog, int queryStack) {
        super(statementLog, queryStack);
        this.statement = stmt;
    }

    @Override
    public Object invoke(Object proxy, Method method, Object[] params) throws Throwable {
        try {
            // 如果来自 Object 的方法，直接调用
            if (Object.class.equals(method.getDeclaringClass())) {
                return method.invoke(this, params);
            }
            // 如果调用的是 execute 相关的方法
            if (EXECUTE_METHODS.contains(method.getName())) {
                if (isDebugEnabled()) {
                    debug("Parameters: " + getParameterValueString(), true);
                }
                // 清空 columnMap、columnNames、columnValues
                clearColumnInfo();
                if ("executeQuery".equals(method.getName())) {
                    // 执行方法
                    ResultSet rs = (ResultSet) method.invoke(statement, params);
                    // 创建 ResultSetLogger 对象
                    return rs == null ? null : ResultSetLogger.newInstance(rs, statementLog, queryStack);
                } else {
                    return method.invoke(statement, params);
                }
            // 如果调用的是 set 相关方法
            } else if (SET_METHODS.contains(method.getName())) {
                // 设置参数
                if ("setNull".equals(method.getName())) {
                    setColumn(params[0], null);
                } else {
                    setColumn(params[0], params[1]);
                }
                return method

2025-08-25 11:08:14,130 - evaluation_logger_Car-Rental-0 - INFO - Complete Result: {'score': 0, 'reason': 'The response does not address any of the requested information about car rental price differences.'}
2025-08-25 11:08:20,920 - evaluation_logger_Car-Rental-0 - INFO - Correct Result: {'score': 0, 'reason': 'All information in the response is incorrect.'}
2025-08-25 11:08:20,920 - evaluation_logger_Car-Rental-0 - INFO - Message: Success.
2025-08-25 11:08:20,920 - evaluation_logger_Car-Rental-0 - INFO - Success turn num = 2
2025-08-25 11:08:20,920 - evaluation_logger_Car-Rental-0 - INFO - ----------------------------------------------------------------------------------------------------
