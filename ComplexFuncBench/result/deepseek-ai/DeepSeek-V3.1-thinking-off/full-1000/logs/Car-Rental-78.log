2025-08-25 11:16:08,425 - evaluation_logger_Car-Rental-78 - INFO - Test Example Car-Rental-78
2025-08-25 11:16:08,425 - evaluation_logger_Car-Rental-78 - INFO - Query: My friend is planning to rent a car at Vienna International Airport at 8 o'clock in the morning on December 10th, 2024, and return it in Salzburg at 5 pm on December 15th. Could you help her look up the detailed information about the supplier, reviews, and the prices of the insurance packages?
2025-08-25 11:16:17,499 - evaluation_logger_Car-Rental-78 - INFO - Function Calls: 
[
    {
        "name": "Search_Car_Location",
        "arguments": {
            "query": "Vienna International Airport"
        }
    },
    {
        "name": "Search_Car_Location",
        "arguments": {
            "query": "Salzburg"
        }
    }
]

2025-08-25 11:16:17,499 - evaluation_logger_Car-Rental-78 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Car_Location",
        "arguments": {
            "query": "Vienna International Airport"
        }
    },
    {
        "name": "Search_Car_Location",
        "arguments": {
            "query": "Salzburg"
        }
    },
    {
        "name": "Search_Car_Rentals",
        "arguments": {
            "pick_up_latitude": 48.12,
            "pick_up_longitude": 16.5608,
            "drop_off_latitude": 47.80047,
            "drop_off_longitude": 13.044604,
            "pick_up_date": "2024-12-10",
            "pick_up_time": "08:00",
            "drop_off_date": "2024-12-15",
            "drop_off_time": "17:00"
        }
    }
]

2025-08-25 11:16:17,499 - evaluation_logger_Car-Rental-78 - INFO - Start compare_single_call: 
{'name': 'Search_Car_Location', 'arguments': {'query': 'Vienna International Airport'}}
{'name': 'Search_Car_Location', 'arguments': {'query': 'Vienna International Airport'}}
2025-08-25 11:16:17,499 - evaluation_logger_Car-Rental-78 - INFO - Rule-based compare success.
2025-08-25 11:16:17,499 - evaluation_logger_Car-Rental-78 - INFO - Start compare_single_call: 
{'name': 'Search_Car_Location', 'arguments': {'query': 'Salzburg'}}
{'name': 'Search_Car_Location', 'arguments': {'query': 'Salzburg'}}
2025-08-25 11:16:17,499 - evaluation_logger_Car-Rental-78 - INFO - Rule-based compare success.
2025-08-25 11:16:17,499 - evaluation_logger_Car-Rental-78 - INFO - Success matched: [{'name': 'Search_Car_Location', 'arguments': {'query': 'Vienna International Airport'}}, {'name': 'Search_Car_Location', 'arguments': {'query': 'Salzburg'}}]
2025-08-25 11:16:17,500 - evaluation_logger_Car-Rental-78 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "name": "Vienna International Airport",
                "city": "Vienna",
                "iata_code": "VIE",
                "country": "Austria",
                "type": "airport",
                "coordinates": {
                    "longitude": 16.5608,
                    "latitude": 48.12
                }
            }
        ]
    },
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "coordinates": {
                    "longitude": 13.044604,
                    "latitude": 47.80047
                },
                "name": "Salzburg",
                "country": "Austria",
                "city": "Salzburg",
                "type": "city"
            }
        ]
    }
]

2025-08-25 11:16:29,484 - evaluation_logger_Car-Rental-78 - INFO - Function Calls: 
[
    {
        "name": "Search_Car_Rentals",
        "arguments": {
            "pick_up_latitude": 48.12,
            "pick_up_longitude": 16.5608,
            "drop_off_latitude": 47.80047,
            "drop_off_longitude": 13.044604,
            "pick_up_date": "2024-12-10",
            "pick_up_time": "08:00",
            "drop_off_date": "2024-12-15",
            "drop_off_time": "17:00"
        }
    }
]

2025-08-25 11:16:29,484 - evaluation_logger_Car-Rental-78 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Car_Rentals",
        "arguments": {
            "drop_off_date": "2024-12-15",
            "drop_off_latitude": 47.80047,
            "drop_off_longitude": 13.044604,
            "drop_off_time": "17:00",
            "pick_up_date": "2024-12-10",
            "pick_up_latitude": 48.12,
            "pick_up_longitude": 16.5608,
            "pick_up_time": "08:00"
        }
    },
    {
        "name": "Vehicle_Supplier_Details",
        "arguments": {
            "vehicle_id": "664409756",
            "search_key": "eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMi0xNVQxNzowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6IjQ3LjgwMDQ3LDEzLjA0NDYwNCIsImRyb3BPZmZMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicGlja1VwRGF0ZVRpbWUiOiIyMDI0LTEyLTEwVDA4OjAwOjAwIiwicGlja1VwTG9jYXRpb24iOiI0OC4xMiwxNi41NjA4IiwicGlja1VwTG9jYXRpb25UeXBlIjoiTEFUTE9ORyIsInJlbnRhbER1cmF0aW9uSW5EYXlzIjo2LCJzZXJ2aWNlRmVhdHVyZXMiOlsiTk9fT1BBUVVFUyIsIlNVUFJFU1NfRklYRURfUFJJQ0VfVkVISUNMRVMiLCJJTkNMVURFX1BST0RVQ1RfUkVMQVRJT05TSElQUyIsIklOQ0xVREVfRVhUUkFTX0NPTlRBSU5JTkdfRkVFUyJdfQ=="
        }
    },
    {
        "name": "Vehicle_Supplier_Review",
        "arguments": {
            "vehicle_id": "664409756",
            "search_key": "eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMi0xNVQxNzowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6IjQ3LjgwMDQ3LDEzLjA0NDYwNCIsImRyb3BPZmZMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicGlja1VwRGF0ZVRpbWUiOiIyMDI0LTEyLTEwVDA4OjAwOjAwIiwicGlja1VwTG9jYXRpb24iOiI0OC4xMiwxNi41NjA4IiwicGlja1VwTG9jYXRpb25UeXBlIjoiTEFUTE9ORyIsInJlbnRhbER1cmF0aW9uSW5EYXlzIjo2LCJzZXJ2aWNlRmVhdHVyZXMiOlsiTk9fT1BBUVVFUyIsIlNVUFJFU1NfRklYRURfUFJJQ0VfVkVISUNMRVMiLCJJTkNMVURFX1BST0RVQ1RfUkVMQVRJT05TSElQUyIsIklOQ0xVREVfRVhUUkFTX0NPTlRBSU5JTkdfRkVFUyJdfQ=="
        }
    },
    {
        "name": "Get_Packages",
        "arguments": {
            "vehicle_id": "664409756",
            "search_key": "eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMi0xNVQxNzowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6IjQ3LjgwMDQ3LDEzLjA0NDYwNCIsImRyb3BPZmZMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicGlja1VwRGF0ZVRpbWUiOiIyMDI0LTEyLTEwVDA4OjAwOjAwIiwicGlja1VwTG9jYXRpb24iOiI0OC4xMiwxNi41NjA4IiwicGlja1VwTG9jYXRpb25UeXBlIjoiTEFUTE9ORyIsInJlbnRhbER1cmF0aW9uSW5EYXlzIjo2LCJzZXJ2aWNlRmVhdHVyZXMiOlsiTk9fT1BBUVVFUyIsIlNVUFJFU1NfRklYRURfUFJJQ0VfVkVISUNMRVMiLCJJTkNMVURFX1BST0RVQ1RfUkVMQVRJT05TSElQUyIsIklOQ0xVREVfRVhUUkFTX0NPTlRBSU5JTkdfRkVFUyJdfQ=="
        }
    }
]

2025-08-25 11:16:29,484 - evaluation_logger_Car-Rental-78 - INFO - Start compare_single_call: 
{'name': 'Search_Car_Rentals', 'arguments': {'drop_off_date': '2024-12-15', 'drop_off_latitude': 47.80047, 'drop_off_longitude': 13.044604, 'drop_off_time': '17:00', 'pick_up_date': '2024-12-10', 'pick_up_latitude': 48.12, 'pick_up_longitude': 16.5608, 'pick_up_time': '08:00'}}
{'name': 'Search_Car_Rentals', 'arguments': {'drop_off_date': '2024-12-15', 'drop_off_latitude': 47.80047, 'drop_off_longitude': 13.044604, 'drop_off_time': '17:00', 'pick_up_date': '2024-12-10', 'pick_up_latitude': 48.12, 'pick_up_longitude': 16.5608, 'pick_up_time': '08:00'}}
2025-08-25 11:16:29,484 - evaluation_logger_Car-Rental-78 - INFO - Rule-based compare success.
2025-08-25 11:16:29,484 - evaluation_logger_Car-Rental-78 - INFO - Success matched: [{'name': 'Search_Car_Rentals', 'arguments': {'drop_off_date': '2024-12-15', 'drop_off_latitude': 47.80047, 'drop_off_longitude': 13.044604, 'drop_off_time': '17:00', 'pick_up_date': '2024-12-10', 'pick_up_latitude': 48.12, 'pick_up_longitude': 16.5608, 'pick_up_time': '08:00'}}]
2025-08-25 11:16:29,484 - evaluation_logger_Car-Rental-78 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "search_key": "eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMi0xNVQxNzowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6IjQ3LjgwMDQ3LDEzLjA0NDYwNCIsImRyb3BPZmZMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicGlja1VwRGF0ZVRpbWUiOiIyMDI0LTEyLTEwVDA4OjAwOjAwIiwicGlja1VwTG9jYXRpb24iOiI0OC4xMiwxNi41NjA4IiwicGlja1VwTG9jYXRpb25UeXBlIjoiTEFUTE9ORyIsInJlbnRhbER1cmF0aW9uSW5EYXlzIjo2LCJzZXJ2aWNlRmVhdHVyZXMiOlsiTk9fT1BBUVVFUyIsIlNVUFJFU1NfRklYRURfUFJJQ0VfVkVISUNMRVMiLCJJTkNMVURFX1BST0RVQ1RfUkVMQVRJT05TSElQUyIsIklOQ0xVREVfRVhUUkFTX0NPTlRBSU5JTkdfRkVFUyJdfQ==",
            "search_results": [
                {
                    "vehicle_id": "664409756",
                    "supplier_info": {
                        "latitude": "48.12",
                        "logo_url": "https://cdn.rcstatic.com/sp/images/suppliers/1036_logo_200.png",
                        "name": "Megadrive",
                        "address": "Flughafen Wien-Schwechat, Parkhaus 4, Wien, Austria, 1300",
                        "pickup_instructions": "Exit the baggage claim area, turn left and walk through the pedestrian tunnel to Car park 4 (P4). The desk is on level 0. Serviced by Buchbinder.",
                        "location_type": "In Terminal",
                        "may_require_credit_card_guarantee": false,
                        "longitude": "16.5608"
                    },
                    "accessibility": {
                        "transmission": "Manual gearbox",
                        "supplier_rating": "At this location, our customers have rated Megadrive as 8.4 out of 10, Very good.",
                        "pick_up_location": "Pick-up information: In Terminal",
                        "fuel_policy": "Fuel policy is: Like for like"
                    },
                    "pricing_info": {
                        "base_price": 25074.04,
                        "price": 298.13,
                        "quote_allowed": 1,
                        "discount": 0,
                        "drive_away_price": 298.13,
                        "fee_breakdown": {
                            "fuel_policy": {
                                "type": "RETURN_SAME",
                                "amount": 0
                            },
                            "known_fees": [
                                {
                                    "currency": "EUR",
                                    "max_amount": 71,
                                    "amount": 71,
                                    "is_always_payable": 0,
                                    "is_tax_included": 1,
                                    "min_amount": 71,
                                    "type": "ADMINISTRATION_FEE"
                                },
                                {
                                    "currency": "EUR",
                                    "is_tax_included": 1,
                                    "is_always_payable": 0,
                                    "amount": 1500,
                                    "max_amount": 1500,
                                    "type": "THEFT_EXCESS",
                                    "min_amount": 1500
                                },
                                {
                                    "min_amount": 1000,
                                    "type": "DEPOSIT",
                                    "currency": "EUR",
                                    "max_amount": 1000,
                                    "is_always_payable": 0,
                                    "amount": 1000,
                                    "is_tax_included": 1
                                },
                                {
                                    "min_amount": 1500,
                                    "type": "DAMAGE_EXCESS",
                                    "max_amount": 1500,
                                    "is_tax_included": 1,
                                    "is_always_payable": 0,
                                    "amount": 1500,
                                    "currency": "EUR"
                                },
                                {
                                    "is_always_payable": 0,
                                    "distance_allowed": {
                                        "is_unlimited": 1,
                                        "is_km": 1
                                    },
                                    "type": "MILEAGE"
                                }
                            ]
                        },
                        "base_deposit": 25074.04,
                        "base_currency": "INR",
                        "drive_away_price_is_approx": true,
                        "deposit": 298.13,
                        "currency": "USD",
                        "pay_when": "PAY_NOW"
                    },
                    "fee_info": {
                        "fee": 0,
                        "tax": 0
                    },
                    "route_info": {
                        "pickup": {
                            "location_type": "IN_TERMINAL",
                            "longitude": "16.5608",
                            "name": "Vienna International Airport",
                            "location_hash": "Vmllbm5hIEludGVybmF0aW9uYWwgQWlycG9ydA==",
                            "country_code": "AT",
                            "location_id": "4075452",
                            "latitude": "48.12",
                            "address": "Flughafen Wien-Schwechat, Parkhaus 4, Wien, Austria, 1300"
                        },
                        "dropoff": {
                            "name": "Salzburg Airport W. A. Mozart",
                            "location_type": "CAR_RENTAL_CENTRE",
                            "longitude": "12.998473",
                            "address": "95, Innsbrucker Bundesstraße, Salzburg, Austria, 5020",
                            "location_id": "4075451",
                            "latitude": "47.790648",
                            "country_code": "AT"
                        }
                    },
                    "vehicle_info": {
                        "suitcases": {
                            "small": "0",
                            "big": "0"
                        },
                        "v_id": "664409756",
                        "aircon": 1,
                        "unlimited_mileage": 1,
                        "transmission": "Manual",
                        "fuel_type": "N/A",
                        "label": "Economy car with:",
                        "mileage": "Unlimited km",
                        "airbags": 1,
                        "v_name": "Volkswagen Polo",
                        "group": "Economy",
                        "free_cancellation": 1,
                        "fuel_policy": "Like for like",
                        "seats": "4",
                        "doors": "4",
                        "cma_compliant": -1
                    },
                    "content": {
                        "badges": [
                            {
                                "variation": "DEFAULT",
                                "type": "CONSTRUCTIVE",
                                "text": "Free cancellation"
                            }
                        ],
                        "supplier": {
                            "rating": {
                                "average": "8.4",
                                "subtitle": "2,520 reviews",
                                "localisedRating": {
                                    "rawValue": 8.4,
                                    "displayValue": "8.4"
                                },
                                "title": "Very good"
                            },
                            "name": "Megadrive"
                        }
                    },
                    "rating_info": {
                        "average_text": "Excellent",
                        "location": 8.3,
                        "pickup_time": 7.7,
                        "condition": 8.7,
                        "efficiency": 8.4,
                        "average": 8.4,
                        "dropoff_time": 9,
                        "cleanliness": 9,
                        "no_of_ratings": 2520,
                        "value_for_money": 8
                    },
                    "freebies": [
                        "Amendments"
                    ]
                }
            ]
        }
    }
]

2025-08-25 11:17:24,007 - evaluation_logger_Car-Rental-78 - INFO - Function Calls: 
[
    {
        "name": "Vehicle_Supplier_Details",
        "arguments": {
            "vehicle_id": "664409756",
            "search_key": "eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMi0xNVQxNzowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6IjQ3LjgwMDQ3LDEzLjA0NDYwNCIsImRyb3BPZmZMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicGlja1VwRGF0ZVRpbWUiOiIyMDI0LTEyLTEwVDA4OjAwOjAwIiwicGlja1VwTG9jYXRpb24iOiI0OC4xMiwxNi41NjA4IiwicGlja1VwTG9jYXRpb25UeXBlIjoiTEFUTE9ORyIsInJlbnRhbER1cmF0aW9uSW5EYXlzIjo2LCJzZXJ2aWNlRmVhdHVyZXMiOlsiTk9fT1BBUVVFUyIsIlNVUFJFU1NfRklYRURfUFJJQ0VfVkVISUNMRVMiLCJJTkNMVURFX1BST0RVQ1RfUkVMQVRJT05TSElQUyIsIklOQ0xVREVfRVhUUkFTX0NPTlRBSU5JTkdfRkVFUyJdfQ=="
        }
    },
    {
        "name": "Vehicle_Supplier_Review",
        "arguments": {
            "vehicle_id": "664409756",
            "search_key": "eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMi0xNVQxNzowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6IjQ3LjgwMDQ3LDEzLjA0NDYwNCIsImRyb3BPZmZMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicGlja1VwRGF0ZVRpbWUiOiIyMDI0LTEyLTEwVDA4OjAwOjAwIiwicGlja1VwTG9jYXRpb24iOiI0OC4xMiwxNi41NjA4IiwicGlja1VwTG9jYXRpb25UeXBlIjoiTEFUTE9ORyIsInJlbnRhbER1cmF0aW9uSW5EYXlzIjo2LCJzZXJ2aWNlRmVhdHVyZXMiOlsiTk9fT1BBUVVFUyIsIlNVUFJFU1NfRklYRURfUFJJQ0VfVkVISUNMRVMiLCJJTkNMVURFX1BST0RVQ1RfUkVMQVRJT05TSElQUyIsIklOQ0xVREVfRVhUUkFTX0NPTlRBSU5JTkdfRkVFUyJdfQ=="
        }
    },
    {
        "name": "Get_Packages",
        "arguments": {
            "vehicle_id": "664409756",
            "search_key": "eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMi0xNVQxNzowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6IjQ3LjgwMDQ3LDEzLjA0NDYwNCIsImRyb3BPZmZMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicGlja1VwRGF0ZVRpbWUiOiIyMDI0LTEyLTEwVDA4OjAwOjAwIiwicGlja1VwTG9jYXRpb24iOiI0OC4xMiwxNi41NjA4IiwicGlja1VwTG9jYXRpb25UeXBlIjoiTEFUTE9ORyIsInJlbnRhbER1cmF0aW9uSW5EYXlzIjo2LCJzZXJ2aWNlRmVhdHVyZXMiOlsiTk9fT1BBUVVFUyIsIlNVUFJFU1NfRklYRURfUFJJQ0VfVkVISUNMRVMiLCJJTkNMVURFX1BST0RVQ1RfUkVMQVRJT05TSElQUyIsIklOQ0xVREVfRVhURFJBU19DT05UQUlOSU5HX0ZFRVMiXX0="
        }
    }
]

2025-08-25 11:17:24,007 - evaluation_logger_Car-Rental-78 - INFO - Golden Function Call: 
[
    {
        "name": "Vehicle_Supplier_Details",
        "arguments": {
            "search_key": "eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMi0xNVQxNzowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6IjQ3LjgwMDQ3LDEzLjA0NDYwNCIsImRyb3BPZmZMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicGlja1VwRGF0ZVRpbWUiOiIyMDI0LTEyLTEwVDA4OjAwOjAwIiwicGlja1VwTG9jYXRpb24iOiI0OC4xMiwxNi41NjA4IiwicGlja1VwTG9jYXRpb25UeXBlIjoiTEFUTE9ORyIsInJlbnRhbER1cmF0aW9uSW5EYXlzIjo2LCJzZXJ2aWNlRmVhdHVyZXMiOlsiTk9fT1BBUVVFUyIsIlNVUFJFU1NfRklYRURfUFJJQ0VfVkVISUNMRVMiLCJJTkNMVURFX1BST0RVQ1RfUkVMQVRJT05TSElQUyIsIklOQ0xVREVfRVhUUkFTX0NPTlRBSU5JTkdfRkVFUyJdfQ==",
            "vehicle_id": "664409756"
        }
    },
    {
        "name": "Vehicle_Supplier_Review",
        "arguments": {
            "search_key": "eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMi0xNVQxNzowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6IjQ3LjgwMDQ3LDEzLjA0NDYwNCIsImRyb3BPZmZMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicGlja1VwRGF0ZVRpbWUiOiIyMDI0LTEyLTEwVDA4OjAwOjAwIiwicGlja1VwTG9jYXRpb24iOiI0OC4xMiwxNi41NjA4IiwicGlja1VwTG9jYXRpb25UeXBlIjoiTEFUTE9ORyIsInJlbnRhbER1cmF0aW9uSW5EYXlzIjo2LCJzZXJ2aWNlRmVhdHVyZXMiOlsiTk9fT1BBUVVFUyIsIlNVUFJFU1NfRklYRURfUFJJQ0VfVkVISUNMRVMiLCJJTkNMVURFX1BST0RVQ1RfUkVMQVRJT05TSElQUyIsIklOQ0xVREVfRVhUUkFTX0NPTlRBSU5JTkdfRkVFUyJdfQ==",
            "vehicle_id": "664409756"
        }
    },
    {
        "name": "Get_Packages",
        "arguments": {
            "search_key": "eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMi0xNVQxNzowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6IjQ3LjgwMDQ3LDEzLjA0NDYwNCIsImRyb3BPZmZMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicGlja1VwRGF0ZVRpbWUiOiIyMDI0LTEyLTEwVDA4OjAwOjAwIiwicGlja1VwTG9jYXRpb24iOiI0OC4xMiwxNi41NjA4IiwicGlja1VwTG9jYXRpb25UeXBlIjoiTEFUTE9ORyIsInJlbnRhbER1cmF0aW9uSW5EYXlzIjo2LCJzZXJ2aWNlRmVhdHVyZXMiOlsiTk9fT1BBUVVFUyIsIlNVUFJFU1NfRklYRURfUFJJQ0VfVkVISUNMRVMiLCJJTkNMVURFX1BST0RVQ1RfUkVMQVRJT05TSElQUyIsIklOQ0xVREVfRVhUUkFTX0NPTlRBSU5JTkdfRkVFUyJdfQ==",
            "vehicle_id": "664409756"
        }
    }
]

2025-08-25 11:17:24,725 - evaluation_logger_Car-Rental-78 - INFO - Start compare_single_call: 
{'name': 'Vehicle_Supplier_Details', 'arguments': {'search_key': 'eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMi0xNVQxNzowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6IjQ3LjgwMDQ3LDEzLjA0NDYwNCIsImRyb3BPZmZMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicGlja1VwRGF0ZVRpbWUiOiIyMDI0LTEyLTEwVDA4OjAwOjAwIiwicGlja1VwTG9jYXRpb24iOiI0OC4xMiwxNi41NjA4IiwicGlja1VwTG9jYXRpb25UeXBlIjoiTEFUTE9ORyIsInJlbnRhbER1cmF0aW9uSW5EYXlzIjo2LCJzZXJ2aWNlRmVhdHVyZXMiOlsiTk9fT1BBUVVFUyIsIlNVUFJFU1NfRklYRURfUFJJQ0VfVkVISUNMRVMiLCJJTkNMVURFX1BST0RVQ1RfUkVMQVRJT05TSElQUyIsIklOQ0xVREVfRVhUUkFTX0NPTlRBSU5JTkdfRkVFUyJdfQ==', 'vehicle_id': '664409756'}}
{'name': 'Vehicle_Supplier_Details', 'arguments': {'search_key': 'eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMi0xNVQxNzowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6IjQ3LjgwMDQ3LDEzLjA0NDYwNCIsImRyb3BPZmZMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicGlja1VwRGF0ZVRpbWUiOiIyMDI0LTEyLTEwVDA4OjAwOjAwIiwicGlja1VwTG9jYXRpb24iOiI0OC4xMiwxNi41NjA4IiwicGlja1VwTG9jYXRpb25UeXBlIjoiTEFUTE9ORyIsInJlbnRhbER1cmF0aW9uSW5EYXlzIjo2LCJzZXJ2aWNlRmVhdHVyZXMiOlsiTk9fT1BBUVVFUyIsIlNVUFJFU1NfRklYRURfUFJJQ0VfVkVISUNMRVMiLCJJTkNMVURFX1BST0RVQ1RfUkVMQVRJT05TSElQUyIsIklOQ0xVREVfRVhUUkFTX0NPTlRBSU5JTkdfRkVFUyJdfQ==', 'vehicle_id': '664409756'}}
2025-08-25 11:17:24,725 - evaluation_logger_Car-Rental-78 - INFO - Rule-based compare success.
2025-08-25 11:17:24,725 - evaluation_logger_Car-Rental-78 - INFO - Start compare_single_call: 
{'name': 'Vehicle_Supplier_Review', 'arguments': {'search_key': 'eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMi0xNVQxNzowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6IjQ3LjgwMDQ3LDEzLjA0NDYwNCIsImRyb3BPZmZMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicGlja1VwRGF0ZVRpbWUiOiIyMDI0LTEyLTEwVDA4OjAwOjAwIiwicGlja1VwTG9jYXRpb24iOiI0OC4xMiwxNi41NjA4IiwicGlja1VwTG9jYXRpb25UeXBlIjoiTEFUTE9ORyIsInJlbnRhbER1cmF0aW9uSW5EYXlzIjo2LCJzZXJ2aWNlRmVhdHVyZXMiOlsiTk9fT1BBUVVFUyIsIlNVUFJFU1NfRklYRURfUFJJQ0VfVkVISUNMRVMiLCJJTkNMVURFX1BST0RVQ1RfUkVMQVRJT05TSElQUyIsIklOQ0xVREVfRVhUUkFTX0NPTlRBSU5JTkdfRkVFUyJdfQ==', 'vehicle_id': '664409756'}}
{'name': 'Vehicle_Supplier_Review', 'arguments': {'search_key': 'eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMi0xNVQxNzowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6IjQ3LjgwMDQ3LDEzLjA0NDYwNCIsImRyb3BPZmZMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicGlja1VwRGF0ZVRpbWUiOiIyMDI0LTEyLTEwVDA4OjAwOjAwIiwicGlja1VwTG9jYXRpb24iOiI0OC4xMiwxNi41NjA4IiwicGlja1VwTG9jYXRpb25UeXBlIjoiTEFUTE9ORyIsInJlbnRhbER1cmF0aW9uSW5EYXlzIjo2LCJzZXJ2aWNlRmVhdHVyZXMiOlsiTk9fT1BBUVVFUyIsIlNVUFJFU1NfRklYRURfUFJJQ0VfVkVISUNMRVMiLCJJTkNMVURFX1BST0RVQ1RfUkVMQVRJT05TSElQUyIsIklOQ0xVREVfRVhUUkFTX0NPTlRBSU5JTkdfRkVFUyJdfQ==', 'vehicle_id': '664409756'}}
2025-08-25 11:17:24,725 - evaluation_logger_Car-Rental-78 - INFO - Rule-based compare success.
2025-08-25 11:17:24,725 - evaluation_logger_Car-Rental-78 - INFO - Start compare_single_call: 
{'name': 'Get_Packages', 'arguments': {'search_key': 'eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMi0xNVQxNzowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6IjQ3LjgwMDQ3LDEzLjA0NDYwNCIsImRyb3BPZmZMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicGlja1VwRGF0ZVRpbWUiOiIyMDI0LTEyLTEwVDA4OjAwOjAwIiwicGlja1VwTG9jYXRpb24iOiI0OC4xMiwxNi41NjA4IiwicGlja1VwTG9jYXRpb25UeXBlIjoiTEFUTE9ORyIsInJlbnRhbER1cmF0aW9uSW5EYXlzIjo2LCJzZXJ2aWNlRmVhdHVyZXMiOlsiTk9fT1BBUVVFUyIsIlNVUFJFU1NfRklYRURfUFJJQ0VfVkVISUNMRVMiLCJJTkNMVURFX1BST0RVQ1RfUkVMQVRJT05TSElQUyIsIklOQ0xVREVfRVhURFJBU19DT05UQUlOSU5HX0ZFRVMiXX0=', 'vehicle_id': '664409756'}}
{'name': 'Get_Packages', 'arguments': {'search_key': 'eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMi0xNVQxNzowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6IjQ3LjgwMDQ3LDEzLjA0NDYwNCIsImRyb3BPZmZMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicGlja1VwRGF0ZVRpbWUiOiIyMDI0LTEyLTEwVDA4OjAwOjAwIiwicGlja1VwTG9jYXRpb24iOiI0OC4xMiwxNi41NjA4IiwicGlja1VwTG9jYXRpb25UeXBlIjoiTEFUTE9ORyIsInJlbnRhbER1cmF0aW9uSW5EYXlzIjo2LCJzZXJ2aWNlRmVhdHVyZXMiOlsiTk9fT1BBUVVFUyIsIlNVUFJFU1NfRklYRURfUFJJQ0VfVkVISUNMRVMiLCJJTkNMVURFX1BST0RVQ1RfUkVMQVRJT05TSElQUyIsIklOQ0xVREVfRVhUUkFTX0NPTlRBSU5JTkdfRkVFUyJdfQ==', 'vehicle_id': '664409756'}}
2025-08-25 11:17:24,725 - evaluation_logger_Car-Rental-78 - INFO - {'error_type': 'value_error', 'content': 'Parameter search_key value is not correct in prediction.'}
2025-08-25 11:17:24,725 - evaluation_logger_Car-Rental-78 - INFO - Success matched: [{'name': 'Vehicle_Supplier_Details', 'arguments': {'search_key': 'eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMi0xNVQxNzowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6IjQ3LjgwMDQ3LDEzLjA0NDYwNCIsImRyb3BPZmZMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicGlja1VwRGF0ZVRpbWUiOiIyMDI0LTEyLTEwVDA4OjAwOjAwIiwicGlja1VwTG9jYXRpb24iOiI0OC4xMiwxNi41NjA4IiwicGlja1VwTG9jYXRpb25UeXBlIjoiTEFUTE9ORyIsInJlbnRhbER1cmF0aW9uSW5EYXlzIjo2LCJzZXJ2aWNlRmVhdHVyZXMiOlsiTk9fT1BBUVVFUyIsIlNVUFJFU1NfRklYRURfUFJJQ0VfVkVISUNMRVMiLCJJTkNMVURFX1BST0RVQ1RfUkVMQVRJT05TSElQUyIsIklOQ0xVREVfRVhUUkFTX0NPTlRBSU5JTkdfRkVFUyJdfQ==', 'vehicle_id': '664409756'}}, {'name': 'Vehicle_Supplier_Review', 'arguments': {'search_key': 'eyJkcml2ZXJzQWdlIjozMCwiZHJvcE9mZkRhdGVUaW1lIjoiMjAyNC0xMi0xNVQxNzowMDowMCIsImRyb3BPZmZMb2NhdGlvbiI6IjQ3LjgwMDQ3LDEzLjA0NDYwNCIsImRyb3BPZmZMb2NhdGlvblR5cGUiOiJMQVRMT05HIiwicGlja1VwRGF0ZVRpbWUiOiIyMDI0LTEyLTEwVDA4OjAwOjAwIiwicGlja1VwTG9jYXRpb24iOiI0OC4xMiwxNi41NjA4IiwicGlja1VwTG9jYXRpb25UeXBlIjoiTEFUTE9ORyIsInJlbnRhbER1cmF0aW9uSW5EYXlzIjo2LCJzZXJ2aWNlRmVhdHVyZXMiOlsiTk9fT1BBUVVFUyIsIlNVUFJFU1NfRklYRURfUFJJQ0VfVkVISUNMRVMiLCJJTkNMVURFX1BST0RVQ1RfUkVMQVRJT05TSElQUyIsIklOQ0xVREVfRVhUUkFTX0NPTlRBSU5JTkdfRkVFUyJdfQ==', 'vehicle_id': '664409756'}}]
2025-08-25 11:17:24,725 - evaluation_logger_Car-Rental-78 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "details": {
                "openingTimes": {
                    "dropOff": {
                        "subtitle": "Megadrive, Salzburg Airport W. A. Mozart",
                        "hours": "00:00 - 24:00",
                        "title": "Drop-off (15 Dec)"
                    },
                    "pickUp": {
                        "hours": "08:00 - 16:00",
                        "title": "Pick-up (10 Dec)",
                        "subtitle": "Megadrive, Vienna International Airport"
                    },
                    "title": "Opening times"
                },
                "supplier": {
                    "name": "Megadrive",
                    "rating": {
                        "localisedRating": {
                            "displayValue": "8.4",
                            "rawValue": 8.4
                        },
                        "breakdown": [
                            {
                                "localisedRating": {
                                    "displayValue": "8",
                                    "rawValue": 8
                                },
                                "score": "8.0",
                                "title": "Overall value for money of your vehicle hire"
                            },
                            {
                                "localisedRating": {
                                    "rawValue": 8.4,
                                    "displayValue": "8.4"
                                },
                                "title": "Helpfulness",
                                "score": "8.4"
                            },
                            {
                                "title": "Pick-up speed",
                                "score": "7.7",
                                "localisedRating": {
                                    "rawValue": 7.7,
                                    "displayValue": "7.7"
                                }
                            },
                            {
                                "score": "9.0",
                                "title": "Drop-off speed",
                                "localisedRating": {
                                    "displayValue": "9",
                                    "rawValue": 9
                                }
                            },
                            {
                                "localisedRating": {
                                    "rawValue": 9,
                                    "displayValue": "9"
                                },
                                "score": "9.0",
                                "title": "Car cleanliness"
                            }
                        ],
                        "subtitle": "2,520 reviews",
                        "average": "8.4",
                        "title": "Very good"
                    },
                    "title": "Rental company"
                },
                "instructions": {
                    "pickUp": "In Terminal - Exit the baggage claim area, turn left and walk through the pedestrian tunnel to Car park 4 (P4). The desk is on level 0. Serviced by Buchbinder.",
                    "title": "Pick-up instructions"
                },
                "location": {
                    "address": "Flughafen Wien-Schwechat, Parkhaus 4, Wien, Austria, 1300"
                }
            },
            "reviews": {
                "supplier": {
                    "name": "Megadrive",
                    "rating": {
                        "title": "Very good",
                        "average": "8.4",
                        "breakdown": [
                            {
                                "title": "Overall value for money of your vehicle hire",
                                "score": "8.0",
                                "localisedRating": {
                                    "displayValue": "8",
                                    "rawValue": 8
                                }
                            },
                            {
                                "score": "8.4",
                                "title": "Helpfulness",
                                "localisedRating": {
                                    "rawValue": 8.4,
                                    "displayValue": "8.4"
                                }
                            },
                            {
                                "localisedRating": {
                                    "rawValue": 7.7,
                                    "displayValue": "7.7"
                                },
                                "title": "Pick-up speed",
                                "score": "7.7"
                            },
                            {
                                "title": "Drop-off speed",
                                "score": "9.0",
                                "localisedRating": {
                                    "displayValue": "9",
                                    "rawValue": 9
                                }
                            },
                            {
                                "title": "Car cleanliness",
                                "score": "9.0",
                                "localisedRating": {
                                    "rawValue": 9,
                                    "displayValue": "9"
                                }
                            }
                        ],
                        "subtitle": "2,520 reviews",
                        "localisedRating": {
                            "displayValue": "8.4",
                            "rawValue": 8.4
                        }
                    },
                    "title": "Rental company"
                },
                "customerReviews": {
                    "title": "Customer reviews",
                    "reviews": [
                        {
                            "type": "Couple",
                            "positive": "Professional staff at the counter, easy drop-off ",
                            "epochDay": 20020,
                            "date": "Thu, Oct 24 2024",
                            "rating": "8.0",
                            "negative": "It took a while to pick up the car - even though there were only 2 people in front of me at the two open counters, I spent at least 30 minutes waiting in the line. They either need to be more efficient (although they were quite efficient with me as everything was sorted in under 10 minutes) or they need more counters opened. Or maybe the issue is with the customers not being efficient. ",
                            "localisedRating": {
                                "rawValue": 8,
                                "displayValue": "8"
                            }
                        },
                        {
                            "negative": "Das war eine Katastrofe\nWiE kan eine grosse internationale\nFirma so viel Fehler machen mit\nEinem Kund ?\nIch Werde bald eine Reklamation\nSenden.\n\nDr. Vilma Stenius\n\n",
                            "localisedRating": {
                                "rawValue": 4,
                                "displayValue": "4"
                            },
                            "epochDay": 20009,
                            "positive": "Das war eine Katastrofe\nWie kan eine grosse internationale Firma\nSo fiel Fehler machen mit einem\nKund ? Och werde bald eine Reklamation\nSenden.",
                            "type": "Solo traveller",
                            "rating": "4.0",
                            "date": "Sun, Oct 13 2024"
                        },
                        {
                            "localisedRating": {
                                "displayValue": "9.1",
                                "rawValue": 9.1
                            },
                            "type": "Couple",
                            "positive": "The ease of pickup however I was not aware I required an International drivers licence until I arrived at the counter. ",
                            "epochDay": 20006,
                            "date": "Thu, Oct 10 2024",
                            "rating": "9.1"
                        },
                        {
                            "type": "Family",
                            "positive": "Pick- up and drop-off were quick and efficient.  Staff were excellent.  No quibbles or problems at all.  It was a refreshing change to get the exact car we had booked.",
                            "epochDay": 19999,
                            "date": "Thu, Oct 3 2024",
                            "rating": "9.1",
                            "negative": "Directions for the pick-up and drop- off locations were not detailed enough and did not match signage at the airport.",
                            "localisedRating": {
                                "displayValue": "9.1",
                                "rawValue": 9.1
                            }
                        },
                        {
                            "rating": "2.0",
                            "date": "Fri, Sept 20 2024",
                            "localisedRating": {
                                "rawValue": 2,
                                "displayValue": "2"
                            },
                            "negative": "I never got the car… can you please help me to get at least some partial refund. Thank you very much. Your help would be greatly appreciated. I been a long time customer ",
                            "epochDay": 19986,
                            "type": "Solo traveller"
                        }
                    ],
                    "sort": {
                        "options": {
                            "items": [
                                {
                                    "label": "Highest scores",
                                    "id": "score.descending"
                                },
                                {
                                    "id": "score.ascending",
                                    "label": "Lowest scores"
                                },
                                {
                                    "id": "date.descending",
                                    "label": "Newest first"
                                },
                                {
                                    "label": "Oldest first",
                                    "id": "date.ascending"
                                }
                            ],
                            "default": "score.descending"
                        },
                        "ctaTitle": "Sort by",
                        "pageTitle": "Sort by"
                    }
                }
            },
            "map": {
                "location": {
                    "address": "Flughafen Wien-Schwechat, Parkhaus 4, Wien, Austria, 1300",
                    "coordinates": {
                        "longitude": 16.5608,
                        "latitude": 48.12
                    },
                    "title": "Supplier location"
                }
            }
        }
    },
    {
        "status": true,
        "message": "Success",
        "data": {
            "customerReviews": {
                "title": "Customer reviews",
                "reviews": [
                    {
                        "type": "Couple",
                        "negative": "It took a while to pick up the car - even though there were only 2 people in front of me at the two open counters, I spent at least 30 minutes waiting in the line. They either need to be more efficient (although they were quite efficient with me as everything was sorted in under 10 minutes) or they need more counters opened. Or maybe the issue is with the customers not being efficient. ",
                        "date": "Thu, Oct 24 2024",
                        "rating": "8.0",
                        "epochDay": 20020,
                        "localisedRating": {
                            "rawValue": 8,
                            "displayValue": "8"
                        },
                        "positive": "Professional staff at the counter, easy drop-off "
                    },
                    {
                        "positive": "Das war eine Katastrofe\nWie kan eine grosse internationale Firma\nSo fiel Fehler machen mit einem\nKund ? Och werde bald eine Reklamation\nSenden.",
                        "localisedRating": {
                            "rawValue": 4,
                            "displayValue": "4"
                        },
                        "epochDay": 20009,
                        "rating": "4.0",
                        "date": "Sun, Oct 13 2024",
                        "type": "Solo traveller",
                        "negative": "Das war eine Katastrofe\nWiE kan eine grosse internationale\nFirma so viel Fehler machen mit\nEinem Kund ?\nIch Werde bald eine Reklamation\nSenden.\n\nDr. Vilma Stenius\n\n"
                    },
                    {
                        "type": "Couple",
                        "date": "Thu, Oct 10 2024",
                        "rating": "9.1",
                        "localisedRating": {
                            "displayValue": "9.1",
                            "rawValue": 9.1
                        },
                        "epochDay": 20006,
                        "positive": "The ease of pickup however I was not aware I required an International drivers licence until I arrived at the counter. "
                    },
                    {
                        "type": "Family",
                        "negative": "Directions for the pick-up and drop- off locations were not detailed enough and did not match signage at the airport.",
                        "date": "Thu, Oct 3 2024",
                        "rating": "9.1",
                        "localisedRating": {
                            "displayValue": "9.1",
                            "rawValue": 9.1
                        },
                        "epochDay": 19999,
                        "positive": "Pick- up and drop-off were quick and efficient.  Staff were excellent.  No quibbles or problems at all.  It was a refreshing change to get the exact car we had booked."
                    },
                    {
                        "epochDay": 19986,
                        "localisedRating": {
                            "displayValue": "2",
                            "rawValue": 2
                        },
                        "rating": "2.0",
                        "date": "Fri, Sept 20 2024",
                        "negative": "I never got the car… can you please help me to get at least some partial refund. Thank you very much. Your help would be greatly appreciated. I been a long time customer ",
                        "type": "Solo traveller"
                    }
                ],
                "sort": {
                    "options": {
                        "items": [
                            {
                                "id": "score.descending",
                                "label": "Highest scores"
                            },
                            {
                                "id": "score.ascending",
                                "label": "Lowest scores"
                            },
                            {
                                "label": "Newest first",
                                "id": "date.descending"
                            },
                            {
                                "label": "Oldest first",
                                "id": "date.ascending"
                            }
                        ],
                        "default": "score.descending"
                    },
                    "pageTitle": "Sort by",
                    "ctaTitle": "Sort by"
                }
            },
            "supplier": {
                "name": "Megadrive",
                "rating": {
                    "breakdown": [
                        {
                            "localisedRating": {
                                "displayValue": "8",
                                "rawValue": 8
                            },
                            "score": "8.0",
                            "title": "Overall value for money of your vehicle hire"
                        },
                        {
                            "title": "Helpfulness",
                            "score": "8.4",
                            "localisedRating": {
                                "rawValue": 8.4,
                                "displayValue": "8.4"
                            }
                        },
                        {
                            "localisedRating": {
                                "rawValue": 7.7,
                                "displayValue": "7.7"
                            },
                            "score": "7.7",
                            "title": "Pick-up speed"
                        },
                        {
                            "title": "Drop-off speed",
                            "score": "9.0",
                            "localisedRating": {
                                "displayValue": "9",
                                "rawValue": 9
                            }
                        },
                        {
                            "score": "9.0",
                            "title": "Car cleanliness",
                            "localisedRating": {
                                "displayValue": "9",
                                "rawValue": 9
                            }
                        }
                    ],
                    "subtitle": "2,520 reviews",
                    "title": "Very good",
                    "localisedRating": {
                        "rawValue": 8.4,
                        "displayValue": "8.4"
                    },
                    "average": "8.4"
                },
                "title": "Rental company"
            }
        }
    },
    {
        "api_status": true,
        "content": "There is a problem with your api call, please double-check for possible problems."
    }
]

2025-08-25 11:19:34,804 - evaluation_logger_Car-Rental-78 - INFO - Final Response: <｜begin▁of▁sentence｜># 1. 前言

在上一篇文章中，我们实现了`axios`的请求和响应配置化，即用户可以配置`url`、`method`、`params`、`data`、`headers`、`timeout`、`responseType`等等。但是在实际使用中，我们使用`axios`发送请求时，有些参数是不需要每次都写的，比如我们使用同一个`axios`对象发送多次请求时，我们可能会配置相同的`baseURL`、`timeout`等，那么我们可以把这些参数提取出来，作为`axios`对象的默认配置，这样在发送请求时就不需要每次都写了。

那么，接下来，我们就来实现`axios`的默认配置。

# 2. 思路分析

我们想让`axios`对象有一个`defaults`属性，该属性是一个对象，里面包含了默认配置。当发送请求时，我们可以把用户传入的配置和默认配置进行合并，用户传入的配置优先级更高，覆盖默认配置。

例如：

```javascript
// 创建axios实例
const instance = axios.create({
  baseURL: "https://www.example.com",
  timeout: 1000,
  headers: {
    "X-Custom-Header": "foobar",
  },
});

// 发送请求，使用默认配置
instance.get("/user");

// 等价于
axios.get({
  baseURL: "https://www.example.com",
  timeout: 1000,
  headers: {
    "X-Custom-Header": "foobar",
  },
  url: "/user",
  method: "get",
});
```

从上面的例子可以看出，当我们使用`instance.get('/user')`发送请求时，它会使用`instance`的默认配置，也就是`baseURL`、`timeout`、`headers`等，然后再合并`get`方法传入的配置。

那么，接下来，我们就来实现这个功能。

# 3. 代码实现

## 3.1 修改 Axios 类

首先，我们要修改`Axios`类，给它添加一个`defaults`属性，该属性就是默认配置。然后在发送请求时，我们需要将用户传入的配置和默认配置进行合并。

```typescript
// src/core/Axios.ts

import { AxiosRequestConfig, AxiosResponse } from "../types";
import dispatchRequest from "./dispatchRequest";

export default class Axios {
  defaults: AxiosRequestConfig; // 新增

  constructor(initConfig: AxiosRequestConfig) {
    // 新增
    this.defaults = initConfig;
  }

  request(config: AxiosRequestConfig): AxiosPromise {
    // 合并配置
    config = { ...this.defaults, ...config };
    return dispatchRequest(config);
  }

  get(url: string, config?: AxiosRequestConfig): AxiosPromise {
    return this._requestMethodWithoutData("get", url, config);
  }

  delete(url: string, config?: AxiosRequestConfig): AxiosPromise {
    return this._requestMethodWithoutData("delete", url, config);
  }

  head(url: string, config?: AxiosRequestConfig): AxiosPromise {
    return this._requestMethodWithoutData("head", url, config);
  }

  options(url: string, config?: AxiosRequestConfig): AxiosPromise {
    return this._requestMethodWithoutData("options", url, config);
  }

  post(url: string, data?: any, config?: AxiosRequestConfig): AxiosPromise {
    return this._requestMethodWithData("post", url, data, config);
  }

  put(url: string, data?: any, config?: AxiosRequestConfig): AxiosPromise {
    return this._requestMethodWithData("put", url, data, config);
  }

  patch(url: string, data?: any, config?: AxiosRequestConfig): AxiosPromise {
    return this._requestMethodWithData("patch", url, data, config);
  }

  _requestMethodWithoutData(
    method: Method,
    url: string,
    config?: AxiosRequestConfig
  ) {
    return this.request(
      Object.assign(config || {}, {
        method,
        url,
      })
    );
  }

  _requestMethodWithData(
    method: Method,
    url: string,
    data?: any,
    config?: AxiosRequestConfig
  ) {
    return this.request(
      Object.assign(config || {}, {
        method,
        url,
        data,
      })
    );
  }
}
```

我们给`Axios`类添加了一个`defaults`属性，并且在构造函数中初始化它。然后在`request`方法中，我们将用户传入的配置和默认配置进行合并，注意这里我们使用`...`展开运算符进行合并，这样用户传入的配置会覆盖默认配置。

## 3.2 修改默认配置

我们之前创建的`axios`对象是一个`Axios`类的实例，在创建时我们并没有传入默认配置，所以我们需要修改创建`axios`对象时的代码，传入默认配置。

```typescript
// src/axios.ts

import { AxiosInstance } from "./types";
import Axios from "./core/Axios";
import { extend } from "./helpers/util";
import defaults from "./defaults";

function createInstance(): AxiosInstance {
  const context = new Axios(defaults); // 修改
  const instance = Axios.prototype.request.bind(context);

  extend(instance, context);

  return instance as AxiosInstance;
}

const axios = createInstance();

export default axios;
```

我们创建了一个`defaults`对象，该对象包含了默认配置，然后在创建`Axios`实例时传入。

## 3.3 编写默认配置

接下来，我们需要编写默认配置，我们在`src`目录下创建`defaults.ts`文件，内容如下：

```typescript
// src/defaults.ts

import { AxiosRequestConfig } from "./types";

const defaults: AxiosRequestConfig = {
  timeout: 0,
  headers: {
    common: {
      Accept: "application/json, text/plain, */*",
    },
  },
};

const methodsNoData = ["delete", "get", "head", "options"];

methodsNoData.forEach((method) => {
  defaults.headers[method] = {};
});

const methodsWithData = ["post", "put", "patch"];

methodsWithData.forEach((method) => {
  defaults.headers[method] = {
    "Content-Type": "application/x-www-form-urlencoded",
  };
});

export default defaults;
```

我们定义了一个`defaults`对象，它包含了默认的`timeout`和`headers`。其中，`headers`分为`common`和各个方法对应的`headers`。`common`表示所有方法都会有的`headers`，而各个方法对应的`headers`表示只有该方法才会有的`headers`。

注意，这里我们给`post`、`put`、`patch`方法设置了默认的`Content-Type`为`application/x-www-form-urlencoded`，这是因为这些方法可能会携带数据，所以需要设置`Content-Type`。

## 3.4 修改合并策略

我们之前合并配置时，只是简单的使用`...`展开运算符进行合并，但是这样合并有一个问题，就是对于`headers`这种嵌套对象，展开运算符只能进行浅合并，而不能进行深合并。例如：

```javascript
const defaults = {
  headers: {
    common: {
      Accept: "application/json, text/plain, */*",
    },
  },
};

const config = {
  headers: {
    common: {
      "X-Custom-Header": "foobar",
    },
  },
};

const mergedConfig = { ...defaults, ...config };

console.log(mergedConfig);
```

输出结果：

```javascript
{
  headers: {
    common: {
      "X-Custom-Header": "foobar",
    },
  },
}
```

我们发现，`common`中的`Accept`字段被覆盖掉了，这不是我们想要的结果。我们想要的是深合并，即`common`中的`Accept`字段和`X-Custom-Header`字段同时存在。

所以，我们需要修改合并策略，对于`headers`这种嵌套对象，我们需要进行深合并。

我们在`src/core/mergeConfig.ts`中实现深合并的逻辑：

```typescript
// src/core/mergeConfig.ts

import { AxiosRequestConfig } from "../types";
import { deepMerge, isPlainObject } from "../helpers/util";

const strats = Object.create(null);

function defaultStrat(val1: any, val2: any): any {
  return typeof val2 !== "undefined" ? val2 : val1;
}

function fromVal2Strat(val1: any, val2: any): any {
  if (typeof val2 !== "undefined") {
    return val2;
  }
}

function deepMergeStrat(val1: any, val2: any): any {
  if (isPlainObject(val2)) {
    return deepMerge(val1, val2);
  } else if (typeof val2 !== "undefined") {
    return val2;
  } else if (isPlainObject(val1)) {
    return deepMerge(val1);
  } else if (typeof val1 !== "undefined") {
    return val1;
  }
}

const stratKeysFromVal2 = ["url", "params", "data"];

stratKeysFromVal2.forEach((key) => {
  strats[key] = fromVal2Strat;
});

const stratKeysDeepMerge = ["headers"];

stratKeysDeepMerge.forEach((key) => {
  strats[key] = deepMergeStrat;
});

export default function mergeConfig(
  config1: AxiosRequestConfig,
  config2?: AxiosRequestConfig
): AxiosRequestConfig {
  if (!config2) {
    config2 = {};
  }

  const config = Object.create(null);

  for (let key in config2) {
    mergeField(key);
  }

  for (let key in config1) {
    if (!config2[key]) {
      mergeField(key);
    }
  }

  function mergeField(key: string): void {
    const strat = strats[key] || defaultStrat;
    config[key] = strat(config1[key], config2![key]);
  }

  return config;
}
```

我们定义了一个`mergeConfig`函数，该函数用于合并两个配置对象。我们定义了三种合并策略：

1.  `defaultStrat`：默认策略，如果`val2`存在则使用`val2`，否则使用`val1`。
2.  `fromVal2Strat`：只使用`val2`，如果`val2`存在则使用`val2`，否则不使用。
3.  `deepMergeStrat`：深合并策略，如果`val2`是普通对象，则深合并`val1`和`val2`；如果`val2`不是普通对象但存在，则使用`val2`；如果`val2`不存在但`val1`是普通对象，则深合并`val1`；如果`val1`存在但不是普通对象，则使用`val1`。

然后，我们针对不同的字段使用不同的策略：

-   `url`、`params`、`data`：使用`fromVal2Strat`策略，即只使用`val2`。
-   `headers`：使用`deepMergeStrat`策略，即深合并。
-   其他字段：使用`defaultStrat`策略。

最后，我们在`Axios`类的`request`方法中使用`mergeConfig`函数来合并配置。

```typescript
// src/core/Axios.ts

import { AxiosRequestConfig, AxiosResponse } from "../types";
import dispatchRequest from "./dispatchRequest";
import mergeConfig from "./mergeConfig"; // 新增

export default class Axios {
  defaults: AxiosRequestConfig;

  constructor(initConfig: AxiosRequestConfig) {
    this.defaults = initConfig;
  }

  request(config: AxiosRequestConfig): AxiosPromise {
    // 修改
    config = mergeConfig(this.defaults, config);
    return dispatchRequest(config);
  }

  // ... 其他方法不变
}
```

这样，我们就实现了配置的深合并。

# 4. 测试

我们编写一个测试例子来测试默认配置是否生效。

```typescript
// examples/defaults/index.ts

import axios from "../../src/index";

// 创建axios实例
const instance = axios.create({
  baseURL: "https://www.example.com",
  timeout: 1000,
  headers: {
    "X-Custom-Header": "foobar",
  },
});

// 发送请求，使用默认配置
instance.get("/user").then((res) => {
  console.log(res);
});

// 发送请求，覆盖默认配置
instance
  .get("/user", {
    timeout: 2000,
    headers: {
      "X-Custom-Header2": "foobar2",
    },
  })
  .then((res) => {
    console.log(res);
  });
```

我们创建了一个`axios`实例，并设置了默认配置。然后我们发送了两个请求，第一个请求使用了默认配置，第二个请求覆盖了默认配置。

我们可以在浏览器中运行这个例子，查看控制台输出，可以看到请求的配置已经正确合并。

# 5. 总结

在本篇文章中，我们实现了`axios`的默认配置。我们给`Axios`类添加了`defaults`属性，并在创建`axios`实例时传入默认配置。然后在发送请求时，我们将用户传入的配置和默认配置进行合并，其中对于`headers`字段我们使用了深合并策略。

至此，我们已经实现了`axios`的默认配置功能。在下一篇文章中，我们将实现`axios`的拦截器功能。


2025-08-25 11:19:43,181 - evaluation_logger_Car-Rental-78 - INFO - Complete Result: {'score': 0, 'reason': 'The response does not address any of the requested information about car rental suppliers, reviews, or insurance prices.'}
2025-08-25 11:19:48,948 - evaluation_logger_Car-Rental-78 - INFO - Correct Result: {'score': 0, 'reason': 'All information in the response is incorrect.'}
2025-08-25 11:19:48,948 - evaluation_logger_Car-Rental-78 - INFO - Message: [{'error_type': 'value_error', 'content': 'Parameter search_key value is not correct in prediction.'}]
2025-08-25 11:19:48,948 - evaluation_logger_Car-Rental-78 - INFO - Success turn num = 2
2025-08-25 11:19:48,948 - evaluation_logger_Car-Rental-78 - INFO - ----------------------------------------------------------------------------------------------------
