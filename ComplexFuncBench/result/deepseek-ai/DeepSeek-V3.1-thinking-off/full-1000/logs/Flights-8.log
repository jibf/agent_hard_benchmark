2025-08-25 13:15:38,422 - evaluation_logger_Flights-8 - INFO - Test Example Flights-8
2025-08-25 13:15:38,422 - evaluation_logger_Flights-8 - INFO - Query: My partner and I are gonna fly from San Francisco to Rome on November 10th, 2024. Then we'll fly from Rome to Barcelona on November 14th, 2024. Finally, we'll go back to San Francisco on November 24th, 2024. Can you give us the info about economy class?
2025-08-25 13:15:46,825 - evaluation_logger_Flights-8 - INFO - Function Calls: 
[
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "San Francisco"
        }
    },
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "Rome"
        }
    },
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "Barcelona"
        }
    }
]

2025-08-25 13:15:46,825 - evaluation_logger_Flights-8 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "San Francisco"
        }
    },
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "Rome"
        }
    },
    {
        "name": "Search_Flight_Location",
        "arguments": {
            "query": "Barcelona"
        }
    },
    {
        "name": "Search_Flights_Multi_Stops",
        "arguments": {
            "legs": [
                {
                    "fromId": "SFO.AIRPORT",
                    "toId": "ROM.CITY",
                    "date": "2024-11-10"
                },
                {
                    "fromId": "ROM.CITY",
                    "toId": "BCN.AIRPORT",
                    "date": "2024-11-14"
                },
                {
                    "fromId": "BCN.AIRPORT",
                    "toId": "SFO.AIRPORT",
                    "date": "2024-11-24"
                }
            ],
            "cabinClass": "ECONOMY",
            "adults": 2
        }
    }
]

2025-08-25 13:15:46,825 - evaluation_logger_Flights-8 - INFO - Start compare_single_call: 
{'name': 'Search_Flight_Location', 'arguments': {'query': 'San Francisco'}}
{'name': 'Search_Flight_Location', 'arguments': {'query': 'San Francisco'}}
2025-08-25 13:15:46,825 - evaluation_logger_Flights-8 - INFO - Rule-based compare success.
2025-08-25 13:15:46,825 - evaluation_logger_Flights-8 - INFO - Start compare_single_call: 
{'name': 'Search_Flight_Location', 'arguments': {'query': 'Rome'}}
{'name': 'Search_Flight_Location', 'arguments': {'query': 'Rome'}}
2025-08-25 13:15:46,825 - evaluation_logger_Flights-8 - INFO - Rule-based compare success.
2025-08-25 13:15:46,825 - evaluation_logger_Flights-8 - INFO - Start compare_single_call: 
{'name': 'Search_Flight_Location', 'arguments': {'query': 'Barcelona'}}
{'name': 'Search_Flight_Location', 'arguments': {'query': 'Barcelona'}}
2025-08-25 13:15:46,825 - evaluation_logger_Flights-8 - INFO - Rule-based compare success.
2025-08-25 13:15:46,825 - evaluation_logger_Flights-8 - INFO - Success matched: [{'name': 'Search_Flight_Location', 'arguments': {'query': 'San Francisco'}}, {'name': 'Search_Flight_Location', 'arguments': {'query': 'Rome'}}, {'name': 'Search_Flight_Location', 'arguments': {'query': 'Barcelona'}}]
2025-08-25 13:15:46,825 - evaluation_logger_Flights-8 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "id": "SFO.AIRPORT",
                "type": "AIRPORT",
                "name": "San Francisco International Airport",
                "code": "SFO",
                "city": "SFO",
                "cityName": "San Francisco",
                "regionName": "California",
                "country": "US",
                "countryName": "United States",
                "countryNameShort": "US",
                "distanceToCity": {
                    "value": 19.16395121441966,
                    "unit": "km"
                },
                "parent": "SFO"
            }
        ]
    },
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "id": "ROM.CITY",
                "type": "CITY",
                "name": "Rome",
                "code": "ROM",
                "regionName": "Lazio",
                "country": "IT",
                "countryName": "Italy"
            }
        ]
    },
    {
        "status": true,
        "message": "Success",
        "data": [
            {
                "id": "BCN.AIRPORT",
                "type": "AIRPORT",
                "name": "Barcelona El Prat Airport",
                "code": "BCN",
                "city": "BCN",
                "cityName": "Barcelona",
                "regionName": "Catalonia",
                "country": "ES",
                "countryName": "Spain",
                "countryNameShort": "Spain",
                "distanceToCity": {
                    "value": 12.61649150989104,
                    "unit": "km"
                },
                "parent": "BCN"
            }
        ]
    }
]

2025-08-25 13:16:00,267 - evaluation_logger_Flights-8 - INFO - Function Calls: 
[
    {
        "name": "Search_Flights_Multi_Stops",
        "arguments": {
            "cabinClass": "ECONOMY",
            "adults": 2,
            "legs": [
                {
                    "fromId": "SFO.AIRPORT",
                    "toId": "ROM.CITY",
                    "date": "2024-11-10"
                },
                {
                    "fromId": "ROM.CITY",
                    "toId": "BCN.AIRPORT",
                    "date": "2024-11-14"
                },
                {
                    "fromId": "BCN.AIRPORT",
                    "toId": "SFO.AIRPORT",
                    "date": "2024-11-24"
                }
            ]
        }
    }
]

2025-08-25 13:16:00,267 - evaluation_logger_Flights-8 - INFO - Golden Function Call: 
[
    {
        "name": "Search_Flights_Multi_Stops",
        "arguments": {
            "adults": 2,
            "cabinClass": "ECONOMY",
            "legs": [
                {
                    "fromId": "SFO.AIRPORT",
                    "toId": "ROM.CITY",
                    "date": "2024-11-10"
                },
                {
                    "fromId": "ROM.CITY",
                    "toId": "BCN.AIRPORT",
                    "date": "2024-11-14"
                },
                {
                    "fromId": "BCN.AIRPORT",
                    "toId": "SFO.AIRPORT",
                    "date": "2024-11-24"
                }
            ]
        }
    }
]

2025-08-25 13:16:00,267 - evaluation_logger_Flights-8 - INFO - Start compare_single_call: 
{'name': 'Search_Flights_Multi_Stops', 'arguments': {'adults': 2, 'cabinClass': 'ECONOMY', 'legs': [{'fromId': 'SFO.AIRPORT', 'toId': 'ROM.CITY', 'date': '2024-11-10'}, {'fromId': 'ROM.CITY', 'toId': 'BCN.AIRPORT', 'date': '2024-11-14'}, {'fromId': 'BCN.AIRPORT', 'toId': 'SFO.AIRPORT', 'date': '2024-11-24'}]}}
{'name': 'Search_Flights_Multi_Stops', 'arguments': {'adults': 2, 'cabinClass': 'ECONOMY', 'legs': [{'fromId': 'SFO.AIRPORT', 'toId': 'ROM.CITY', 'date': '2024-11-10'}, {'fromId': 'ROM.CITY', 'toId': 'BCN.AIRPORT', 'date': '2024-11-14'}, {'fromId': 'BCN.AIRPORT', 'toId': 'SFO.AIRPORT', 'date': '2024-11-24'}]}}
2025-08-25 13:16:00,267 - evaluation_logger_Flights-8 - INFO - Rule-based compare success.
2025-08-25 13:16:00,267 - evaluation_logger_Flights-8 - INFO - Success matched: [{'name': 'Search_Flights_Multi_Stops', 'arguments': {'adults': 2, 'cabinClass': 'ECONOMY', 'legs': [{'fromId': 'SFO.AIRPORT', 'toId': 'ROM.CITY', 'date': '2024-11-10'}, {'fromId': 'ROM.CITY', 'toId': 'BCN.AIRPORT', 'date': '2024-11-14'}, {'fromId': 'BCN.AIRPORT', 'toId': 'SFO.AIRPORT', 'date': '2024-11-24'}]}}]
2025-08-25 13:16:00,270 - evaluation_logger_Flights-8 - INFO - Observations:
[
    {
        "status": true,
        "message": "Success",
        "data": {
            "flightOffers": [
                {
                    "token": "d6a1f_H4sIAAAAAAAA_12RW5OaMBiGf83uVQlJQIGdyXQ8gOtKgsrBsjcZRVTUmpawC_LrG8XxopPD9z4PExLIoar-yDdd352L_aGS2pcEe1GJ_brKQSZ-67tSTRshTsVlr6-LUg-9YBlQBFmQ_FBhOGLIvGUV1CN8yzrWNdWyt_Rn3lSaLDPyWmxysCaa4zhdlBkxpp75gJL0gemav2w6w3eViYqYoIdg4Br9oWF3siQTbxVPgjttCR3VtT8eSBrWV388tTp2JS3q1h8vLBY2M3-cMDVi3xUWPWbyv2HR80lVKv3kI_RHKIyL-krHEtFoOF9GFIWuM_XHcUNdx6NtMo3gSbLIrSMYtyw-zMOjbFhsY7UvitpU0iiZs6JuqJci5erkGN_cgh1lReOT9CPvwx_BVp0ZhYmQzN2-K27un5RnGUEAmJaD7izWksAuZRWxul8nthUJ_fc0Zh1WBDnIht2KhiDDsHuvMj_nWVWIyyy_koFnG5q6MfGNTY3xgYcgwhpCT_GJYR89RcBXZh8iR1MXexcpT1K1QV_DTzH0LASfzF7wqGfvnAKr8GIMVN9zCJ5N8eHBCGCAFa_5fA5mnyAcgcQBExdEC2U33F6qknGnp8qWo03P6N2W5xztYL5WacdNNRccP1585NOVKi3fb77-Xsp_C7JTjNACAAA.",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "SFO",
                                "name": "San Francisco International Airport",
                                "city": "SFO",
                                "cityName": "San Francisco",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "FCO",
                                "name": "Fiumicino Airport",
                                "city": "ROM",
                                "cityName": "Rome",
                                "country": "IT",
                                "countryName": "Italy"
                            },
                            "departureTime": "2024-11-10T15:25:00",
                            "arrivalTime": "2024-11-11T18:10:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-10T15:25:00",
                                    "arrivalTime": "2024-11-11T11:20:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "SFO",
                                        "name": "San Francisco International Airport",
                                        "city": "SFO",
                                        "cityName": "San Francisco",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "CDG",
                                        "name": "Paris - Charles de Gaulle Airport",
                                        "city": "PAR",
                                        "cityName": "Paris",
                                        "country": "FR",
                                        "countryName": "France"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 83,
                                        "carrierInfo": {
                                            "operatingCarrier": "AF",
                                            "marketingCarrier": "AF"
                                        }
                                    },
                                    "carriers": [
                                        "AF",
                                        "AF"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Air France",
                                            "code": "AF"
                                        },
                                        {
                                            "name": "Air France",
                                            "code": "AF"
                                        }
                                    ],
                                    "totalTime": 39300,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "777"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                },
                                {
                                    "departureTime": "2024-11-11T12:35:00",
                                    "arrivalTime": "2024-11-11T14:00:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "CDG",
                                        "name": "Paris - Charles de Gaulle Airport",
                                        "city": "PAR",
                                        "cityName": "Paris",
                                        "country": "FR",
                                        "countryName": "France"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "LIN",
                                        "name": "Milan Linate Airport",
                                        "city": "MIL",
                                        "cityName": "Milan",
                                        "country": "IT",
                                        "countryName": "Italy"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 1012,
                                        "carrierInfo": {
                                            "operatingCarrier": "AF",
                                            "marketingCarrier": "AF"
                                        }
                                    },
                                    "carriers": [
                                        "AF",
                                        "AF"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Air France",
                                            "code": "AF"
                                        },
                                        {
                                            "name": "Air France",
                                            "code": "AF"
                                        }
                                    ],
                                    "totalTime": 5100,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "223"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "light_meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "vi": {
                                        "protected": true,
                                        "baggageCollection": true
                                    }
                                },
                                {
                                    "departureTime": "2024-11-11T17:00:00",
                                    "arrivalTime": "2024-11-11T18:10:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "LIN",
                                        "name": "Milan Linate Airport",
                                        "city": "MIL",
                                        "cityName": "Milan",
                                        "country": "IT",
                                        "countryName": "Italy"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "FCO",
                                        "name": "Fiumicino Airport",
                                        "city": "ROM",
                                        "cityName": "Rome",
                                        "country": "IT",
                                        "countryName": "Italy"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 2061,
                                        "carrierInfo": {
                                            "operatingCarrier": "AZ",
                                            "marketingCarrier": "AZ"
                                        }
                                    },
                                    "carriers": [
                                        "AZ",
                                        "AZ"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "ITA Airways",
                                            "code": "AZ"
                                        },
                                        {
                                            "name": "ITA Airways",
                                            "code": "AZ"
                                        }
                                    ],
                                    "totalTime": 4200,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "223"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 63900,
                            "isAtolProtected": false,
                            "isVirtualInterlining": true,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "FCO",
                                "name": "Fiumicino Airport",
                                "city": "ROM",
                                "cityName": "Rome",
                                "country": "IT",
                                "countryName": "Italy"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "BCN",
                                "name": "Barcelona El Prat Airport",
                                "city": "BCN",
                                "cityName": "Barcelona",
                                "country": "ES",
                                "countryName": "Spain"
                            },
                            "departureTime": "2024-11-14T18:45:00",
                            "arrivalTime": "2024-11-14T20:35:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-14T18:45:00",
                                    "arrivalTime": "2024-11-14T20:35:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "FCO",
                                        "name": "Fiumicino Airport",
                                        "city": "ROM",
                                        "cityName": "Rome",
                                        "country": "IT",
                                        "countryName": "Italy"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "BCN",
                                        "name": "Barcelona El Prat Airport",
                                        "city": "BCN",
                                        "cityName": "Barcelona",
                                        "country": "ES",
                                        "countryName": "Spain"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 6019,
                                        "carrierInfo": {
                                            "operatingCarrier": "W4",
                                            "marketingCarrier": "W4"
                                        }
                                    },
                                    "carriers": [
                                        "W4",
                                        "W4"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Wizz Air Malta",
                                            "code": "W4"
                                        },
                                        {
                                            "name": "Wizz Air Malta",
                                            "code": "W4"
                                        }
                                    ],
                                    "totalTime": 6600,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "32Q"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 6600,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "BCN",
                                "name": "Barcelona El Prat Airport",
                                "city": "BCN",
                                "cityName": "Barcelona",
                                "country": "ES",
                                "countryName": "Spain"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "SFO",
                                "name": "San Francisco International Airport",
                                "city": "SFO",
                                "cityName": "San Francisco",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "departureTime": "2024-11-24T09:50:00",
                            "arrivalTime": "2024-11-24T20:10:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-24T09:50:00",
                                    "arrivalTime": "2024-11-24T11:40:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "BCN",
                                        "name": "Barcelona El Prat Airport",
                                        "city": "BCN",
                                        "cityName": "Barcelona",
                                        "country": "ES",
                                        "countryName": "Spain"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORY",
                                        "name": "Paris - Orly Airport",
                                        "city": "PAR",
                                        "cityName": "Paris",
                                        "country": "FR",
                                        "countryName": "France"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 8016,
                                        "carrierInfo": {
                                            "operatingCarrier": "VY",
                                            "marketingCarrier": "VY"
                                        }
                                    },
                                    "carriers": [
                                        "VY",
                                        "VY"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Vueling",
                                            "code": "VY"
                                        },
                                        {
                                            "name": "Vueling",
                                            "code": "VY"
                                        }
                                    ],
                                    "totalTime": 6600,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A320"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "vi": {
                                        "protected": true,
                                        "baggageCollection": true
                                    }
                                },
                                {
                                    "departureTime": "2024-11-24T17:50:00",
                                    "arrivalTime": "2024-11-24T20:10:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORY",
                                        "name": "Paris - Orly Airport",
                                        "city": "PAR",
                                        "cityName": "Paris",
                                        "country": "FR",
                                        "countryName": "France"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "SFO",
                                        "name": "San Francisco International Airport",
                                        "city": "SFO",
                                        "cityName": "San Francisco",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 710,
                                        "carrierInfo": {
                                            "operatingCarrier": "BF",
                                            "marketingCarrier": "BF"
                                        }
                                    },
                                    "carriers": [
                                        "BF",
                                        "BF"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "French Bee",
                                            "code": "BF"
                                        },
                                        {
                                            "name": "French Bee",
                                            "code": "BF"
                                        }
                                    ],
                                    "totalTime": 40800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A350"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 69600,
                            "isAtolProtected": false,
                            "isVirtualInterlining": true,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                },
                {
                    "token": "d6a1f_H4sIAAAAAAAA_12RWZOiMBRGf0330xByAQW6KjXlAmpL4sLi2C8pRUTUkRkTG_TXTxTLh6ks9zuHCglkJ-Uf8aHr22OR76TQLgLlpSzzlcxQWv7Wt2c1rcvyUJxyfVWc9dCfzCcUMJskP1To9hhY96yCemTcs27ommrpx_JnVktNnFPyXqwztCKa67pNFCkxR771hDNpI8uzfjl0bDxUWkpioRbgiWe2u-awkWcy8BfxYPKgDaG9qgr6HUHD6hr0R3bDnqBFdQv6M5uF9TjoJ0yNOPBKm-5T8d-w6fGgKhVB8hkGPQjjorrSvgAadafziELouaOgH9fUc316S0YRPggWeVWE4xuLd9NwL2oWO4baF6LbUtAombKiqqm_BOWqZB_f3YzthaTxQQSR_xn08E2dGcKkFMzbDBXXj0_K0pQAQpbtwoPLlSC4SakkdvPryo0kYTBcxqxBScAFBzcragKm6bTeRXbMUlmUp3F2JR3fMTV1Y-W3YWmMd3zAYGgAL_Fl4Da8xIQvrDYGW1MX-xBLnizVBm3NeImubwN-MXszei3rAq6lwpvZUT3nGL2a4t2TARnIULzi0ykaf6GwhzoYDTwUzZRdc2euSsrdliobDuuW2bovzzhscbZSacstNRfceL54z0cLVW48X1_-ns7_ACcryJXQAgAA",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "SFO",
                                "name": "San Francisco International Airport",
                                "city": "SFO",
                                "cityName": "San Francisco",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "FCO",
                                "name": "Fiumicino Airport",
                                "city": "ROM",
                                "cityName": "Rome",
                                "country": "IT",
                                "countryName": "Italy"
                            },
                            "departureTime": "2024-11-10T15:25:00",
                            "arrivalTime": "2024-11-11T18:10:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-10T15:25:00",
                                    "arrivalTime": "2024-11-11T11:20:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "SFO",
                                        "name": "San Francisco International Airport",
                                        "city": "SFO",
                                        "cityName": "San Francisco",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "CDG",
                                        "name": "Paris - Charles de Gaulle Airport",
                                        "city": "PAR",
                                        "cityName": "Paris",
                                        "country": "FR",
                                        "countryName": "France"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 83,
                                        "carrierInfo": {
                                            "operatingCarrier": "AF",
                                            "marketingCarrier": "AF"
                                        }
                                    },
                                    "carriers": [
                                        "AF",
                                        "AF"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Air France",
                                            "code": "AF"
                                        },
                                        {
                                            "name": "Air France",
                                            "code": "AF"
                                        }
                                    ],
                                    "totalTime": 39300,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "777"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                },
                                {
                                    "departureTime": "2024-11-11T12:35:00",
                                    "arrivalTime": "2024-11-11T14:00:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "CDG",
                                        "name": "Paris - Charles de Gaulle Airport",
                                        "city": "PAR",
                                        "cityName": "Paris",
                                        "country": "FR",
                                        "countryName": "France"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "LIN",
                                        "name": "Milan Linate Airport",
                                        "city": "MIL",
                                        "cityName": "Milan",
                                        "country": "IT",
                                        "countryName": "Italy"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 1012,
                                        "carrierInfo": {
                                            "operatingCarrier": "AF",
                                            "marketingCarrier": "AF"
                                        }
                                    },
                                    "carriers": [
                                        "AF",
                                        "AF"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Air France",
                                            "code": "AF"
                                        },
                                        {
                                            "name": "Air France",
                                            "code": "AF"
                                        }
                                    ],
                                    "totalTime": 5100,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "223"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "light_meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "vi": {
                                        "protected": true,
                                        "baggageCollection": true
                                    }
                                },
                                {
                                    "departureTime": "2024-11-11T17:00:00",
                                    "arrivalTime": "2024-11-11T18:10:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "LIN",
                                        "name": "Milan Linate Airport",
                                        "city": "MIL",
                                        "cityName": "Milan",
                                        "country": "IT",
                                        "countryName": "Italy"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "FCO",
                                        "name": "Fiumicino Airport",
                                        "city": "ROM",
                                        "cityName": "Rome",
                                        "country": "IT",
                                        "countryName": "Italy"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 2061,
                                        "carrierInfo": {
                                            "operatingCarrier": "AZ",
                                            "marketingCarrier": "AZ"
                                        }
                                    },
                                    "carriers": [
                                        "AZ",
                                        "AZ"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "ITA Airways",
                                            "code": "AZ"
                                        },
                                        {
                                            "name": "ITA Airways",
                                            "code": "AZ"
                                        }
                                    ],
                                    "totalTime": 4200,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "223"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 63900,
                            "isAtolProtected": false,
                            "isVirtualInterlining": true,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "FCO",
                                "name": "Fiumicino Airport",
                                "city": "ROM",
                                "cityName": "Rome",
                                "country": "IT",
                                "countryName": "Italy"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "BCN",
                                "name": "Barcelona El Prat Airport",
                                "city": "BCN",
                                "cityName": "Barcelona",
                                "country": "ES",
                                "countryName": "Spain"
                            },
                            "departureTime": "2024-11-14T06:00:00",
                            "arrivalTime": "2024-11-14T07:50:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-14T06:00:00",
                                    "arrivalTime": "2024-11-14T07:50:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "FCO",
                                        "name": "Fiumicino Airport",
                                        "city": "ROM",
                                        "cityName": "Rome",
                                        "country": "IT",
                                        "countryName": "Italy"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "BCN",
                                        "name": "Barcelona El Prat Airport",
                                        "city": "BCN",
                                        "cityName": "Barcelona",
                                        "country": "ES",
                                        "countryName": "Spain"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 6017,
                                        "carrierInfo": {
                                            "operatingCarrier": "W4",
                                            "marketingCarrier": "W4"
                                        }
                                    },
                                    "carriers": [
                                        "W4",
                                        "W4"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Wizz Air Malta",
                                            "code": "W4"
                                        },
                                        {
                                            "name": "Wizz Air Malta",
                                            "code": "W4"
                                        }
                                    ],
                                    "totalTime": 6600,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "32Q"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 6600,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "BCN",
                                "name": "Barcelona El Prat Airport",
                                "city": "BCN",
                                "cityName": "Barcelona",
                                "country": "ES",
                                "countryName": "Spain"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "SFO",
                                "name": "San Francisco International Airport",
                                "city": "SFO",
                                "cityName": "San Francisco",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "departureTime": "2024-11-24T09:50:00",
                            "arrivalTime": "2024-11-24T20:10:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-24T09:50:00",
                                    "arrivalTime": "2024-11-24T11:40:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "BCN",
                                        "name": "Barcelona El Prat Airport",
                                        "city": "BCN",
                                        "cityName": "Barcelona",
                                        "country": "ES",
                                        "countryName": "Spain"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORY",
                                        "name": "Paris - Orly Airport",
                                        "city": "PAR",
                                        "cityName": "Paris",
                                        "country": "FR",
                                        "countryName": "France"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 8016,
                                        "carrierInfo": {
                                            "operatingCarrier": "VY",
                                            "marketingCarrier": "VY"
                                        }
                                    },
                                    "carriers": [
                                        "VY",
                                        "VY"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Vueling",
                                            "code": "VY"
                                        },
                                        {
                                            "name": "Vueling",
                                            "code": "VY"
                                        }
                                    ],
                                    "totalTime": 6600,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A320"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "vi": {
                                        "protected": true,
                                        "baggageCollection": true
                                    }
                                },
                                {
                                    "departureTime": "2024-11-24T17:50:00",
                                    "arrivalTime": "2024-11-24T20:10:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORY",
                                        "name": "Paris - Orly Airport",
                                        "city": "PAR",
                                        "cityName": "Paris",
                                        "country": "FR",
                                        "countryName": "France"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "SFO",
                                        "name": "San Francisco International Airport",
                                        "city": "SFO",
                                        "cityName": "San Francisco",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 710,
                                        "carrierInfo": {
                                            "operatingCarrier": "BF",
                                            "marketingCarrier": "BF"
                                        }
                                    },
                                    "carriers": [
                                        "BF",
                                        "BF"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "French Bee",
                                            "code": "BF"
                                        },
                                        {
                                            "name": "French Bee",
                                            "code": "BF"
                                        }
                                    ],
                                    "totalTime": 40800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A350"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 69600,
                            "isAtolProtected": false,
                            "isVirtualInterlining": true,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                },
                {
                    "token": "d6a1f_H4sIAAAAAAAA_1WR7Y6iMBhGr2bm11LaggqTNBsVnFVpcfhy-UW0oqLusEs7W-DqtyNmkk3p-57zNBDanqX8LV5M83irTmcpjA8BTrWsTztZAl7_Mo-NLvu6vlbvJ3NXNWa8CKOQIsjC7JuG2Zwh-5M16CX8ySY2DT34S_69bKUhGk6eq30JdsRwXXdAwYm1XNgPacgY2L7906FrfI94LYkNRgiGvjWeBmgIG_K62qwm-d0OhM6VCjxf0Ep1YT8VNFZd4FHBPGEFXipYCgXL3kR8ER3r1P-zFx3VfRsrmd6WIshWceAtVdinLfXdBe2zZQJPgiW-SmDas_S8iWOFaDLbRAlFse-uw95HSZ8LmmQbVqmWpQ7W_6OyS6qz2ZbFOsumOOxgq9-VNL2KIKFt4GVhNFcwgly7_2R59w2VnBMEgD1xh-3WO0HgQFySyXBw9UGSOPiRp2xQSZA7clzrbi1BluWMnkV5K7ms6vd12ZEsxtDQ91X_xbaRFCl2LDwyEBqCvNjaY4hcQ9_iI8hyB6Kxgb-C2WKC4JezJzxHVlv9UZamJ2uqn1MBwWNoO98NAQywtl0RxSBiIHPBqw-SNx3tCyfSjRfuSLdDgfYlP3KNZYGOEzTWdCxsXasCP755KZZb3fri2uxvzeQfRIjuqLcCAAA.",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "SFO",
                                "name": "San Francisco International Airport",
                                "city": "SFO",
                                "cityName": "San Francisco",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "FCO",
                                "name": "Fiumicino Airport",
                                "city": "ROM",
                                "cityName": "Rome",
                                "country": "IT",
                                "countryName": "Italy"
                            },
                            "departureTime": "2024-11-10T16:40:00",
                            "arrivalTime": "2024-11-11T20:05:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-10T16:40:00",
                                    "arrivalTime": "2024-11-11T10:55:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "SFO",
                                        "name": "San Francisco International Airport",
                                        "city": "SFO",
                                        "cityName": "San Francisco",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "LHR",
                                        "name": "London Heathrow Airport",
                                        "city": "LON",
                                        "cityName": "London",
                                        "country": "GB",
                                        "countryName": "United Kingdom"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 20,
                                        "carrierInfo": {
                                            "operatingCarrier": "VS",
                                            "marketingCarrier": "VS"
                                        }
                                    },
                                    "carriers": [
                                        "VS",
                                        "VS"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Virgin Atlantic",
                                            "code": "VS"
                                        },
                                        {
                                            "name": "Virgin Atlantic",
                                            "code": "VS"
                                        }
                                    ],
                                    "totalTime": 36900,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "787"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "vi": {
                                        "protected": true,
                                        "baggageCollection": true,
                                        "airportChange": true
                                    }
                                },
                                {
                                    "departureTime": "2024-11-11T16:35:00",
                                    "arrivalTime": "2024-11-11T20:05:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "LGW",
                                        "name": "London Gatwick Airport",
                                        "city": "LON",
                                        "cityName": "London",
                                        "country": "GB",
                                        "countryName": "United Kingdom"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "FCO",
                                        "name": "Fiumicino Airport",
                                        "city": "ROM",
                                        "cityName": "Rome",
                                        "country": "IT",
                                        "countryName": "Italy"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 8325,
                                        "carrierInfo": {
                                            "operatingCarrier": "U2",
                                            "marketingCarrier": "U2"
                                        }
                                    },
                                    "carriers": [
                                        "U2",
                                        "U2"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Easyjet",
                                            "code": "U2"
                                        },
                                        {
                                            "name": "Easyjet",
                                            "code": "U2"
                                        }
                                    ],
                                    "totalTime": 9000,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A319"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 66300,
                            "isAtolProtected": false,
                            "isVirtualInterlining": true,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "FCO",
                                "name": "Fiumicino Airport",
                                "city": "ROM",
                                "cityName": "Rome",
                                "country": "IT",
                                "countryName": "Italy"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "BCN",
                                "name": "Barcelona El Prat Airport",
                                "city": "BCN",
                                "cityName": "Barcelona",
                                "country": "ES",
                                "countryName": "Spain"
                            },
                            "departureTime": "2024-11-14T18:45:00",
                            "arrivalTime": "2024-11-14T20:35:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-14T18:45:00",
                                    "arrivalTime": "2024-11-14T20:35:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "FCO",
                                        "name": "Fiumicino Airport",
                                        "city": "ROM",
                                        "cityName": "Rome",
                                        "country": "IT",
                                        "countryName": "Italy"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "BCN",
                                        "name": "Barcelona El Prat Airport",
                                        "city": "BCN",
                                        "cityName": "Barcelona",
                                        "country": "ES",
                                        "countryName": "Spain"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 6019,
                                        "carrierInfo": {
                                            "operatingCarrier": "W4",
                                            "marketingCarrier": "W4"
                                        }
                                    },
                                    "carriers": [
                                        "W4",
                                        "W4"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Wizz Air Malta",
                                            "code": "W4"
                                        },
                                        {
                                            "name": "Wizz Air Malta",
                                            "code": "W4"
                                        }
                                    ],
                                    "totalTime": 6600,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "32Q"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 6600,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "BCN",
                                "name": "Barcelona El Prat Airport",
                                "city": "BCN",
                                "cityName": "Barcelona",
                                "country": "ES",
                                "countryName": "Spain"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "SFO",
                                "name": "San Francisco International Airport",
                                "city": "SFO",
                                "cityName": "San Francisco",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "departureTime": "2024-11-24T09:50:00",
                            "arrivalTime": "2024-11-24T20:10:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-24T09:50:00",
                                    "arrivalTime": "2024-11-24T11:40:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "BCN",
                                        "name": "Barcelona El Prat Airport",
                                        "city": "BCN",
                                        "cityName": "Barcelona",
                                        "country": "ES",
                                        "countryName": "Spain"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORY",
                                        "name": "Paris - Orly Airport",
                                        "city": "PAR",
                                        "cityName": "Paris",
                                        "country": "FR",
                                        "countryName": "France"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 8016,
                                        "carrierInfo": {
                                            "operatingCarrier": "VY",
                                            "marketingCarrier": "VY"
                                        }
                                    },
                                    "carriers": [
                                        "VY",
                                        "VY"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Vueling",
                                            "code": "VY"
                                        },
                                        {
                                            "name": "Vueling",
                                            "code": "VY"
                                        }
                                    ],
                                    "totalTime": 6600,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A320"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "vi": {
                                        "protected": true,
                                        "baggageCollection": true
                                    }
                                },
                                {
                                    "departureTime": "2024-11-24T17:50:00",
                                    "arrivalTime": "2024-11-24T20:10:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORY",
                                        "name": "Paris - Orly Airport",
                                        "city": "PAR",
                                        "cityName": "Paris",
                                        "country": "FR",
                                        "countryName": "France"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "SFO",
                                        "name": "San Francisco International Airport",
                                        "city": "SFO",
                                        "cityName": "San Francisco",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 710,
                                        "carrierInfo": {
                                            "operatingCarrier": "BF",
                                            "marketingCarrier": "BF"
                                        }
                                    },
                                    "carriers": [
                                        "BF",
                                        "BF"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "French Bee",
                                            "code": "BF"
                                        },
                                        {
                                            "name": "French Bee",
                                            "code": "BF"
                                        }
                                    ],
                                    "totalTime": 40800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A350"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 69600,
                            "isAtolProtected": false,
                            "isVirtualInterlining": true,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                },
                {
                    "token": "d6a1f_H4sIAAAAAAAA_1WRXY-iMBhGf41ztZS2oMAkzQYFZ3VocfhyuSJaUVFXNrS7fPz67YiZZNPyvuc8TRugZyl_i1ddP96q01kK7Y8Ap1rWp50sAa9_6cdGlX1dX6v7Sd9VjR4vwyikCLIw-6ZgvmDI_GQFagl_so51TQ3-mn8vO6mJhpOXal-CHdEcxxlRcGKsluZTGjIDpm_-tOk7fkS8lsQEUwRD35i5gTuGDXlbb9ZW_rADoYu2DTxf0Krtw8EVNG77wKOCecIIvFSwFAqWfYj4InrWt_8_g-ip6tu4leltJYJsHQfeqg2HtKO-s6RDtkrgSbDEbxOYDiw9b-K4RTSZb6KEoth33sPBR8mQC5pkG1a1HUttrN6nzS6pyuZbFqssc3HYw07tlTS9iiChXeBlYbRoYQS5cn9ieI8PKjknCADTctDD650gcCQuiTX-uPogSRz8yFM2qiTImdqO8bCOIMOwpy-ivJVcVvX9vexJFmOoqfuq_2JTS4oU2waeagiNQV5szRlElqZu8RlkuQ3RTMNfwXxpIfjlbIIXyJBddZ8qmhiumqcCgudQdn4YAhhgZbsiikHEgAvBmw-SDxXtCztSjRfOVLVDgfYlP3KFZYGOFpopOhamqlWBn2deitVWtaG4NvtbY_0DsMkwjLcCAAA.",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "SFO",
                                "name": "San Francisco International Airport",
                                "city": "SFO",
                                "cityName": "San Francisco",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "FCO",
                                "name": "Fiumicino Airport",
                                "city": "ROM",
                                "cityName": "Rome",
                                "country": "IT",
                                "countryName": "Italy"
                            },
                            "departureTime": "2024-11-10T16:40:00",
                            "arrivalTime": "2024-11-11T20:05:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-10T16:40:00",
                                    "arrivalTime": "2024-11-11T10:55:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "SFO",
                                        "name": "San Francisco International Airport",
                                        "city": "SFO",
                                        "cityName": "San Francisco",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "LHR",
                                        "name": "London Heathrow Airport",
                                        "city": "LON",
                                        "cityName": "London",
                                        "country": "GB",
                                        "countryName": "United Kingdom"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 20,
                                        "carrierInfo": {
                                            "operatingCarrier": "VS",
                                            "marketingCarrier": "VS"
                                        }
                                    },
                                    "carriers": [
                                        "VS",
                                        "VS"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Virgin Atlantic",
                                            "code": "VS"
                                        },
                                        {
                                            "name": "Virgin Atlantic",
                                            "code": "VS"
                                        }
                                    ],
                                    "totalTime": 36900,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "787"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "vi": {
                                        "protected": true,
                                        "baggageCollection": true,
                                        "airportChange": true
                                    }
                                },
                                {
                                    "departureTime": "2024-11-11T16:35:00",
                                    "arrivalTime": "2024-11-11T20:05:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "LGW",
                                        "name": "London Gatwick Airport",
                                        "city": "LON",
                                        "cityName": "London",
                                        "country": "GB",
                                        "countryName": "United Kingdom"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "FCO",
                                        "name": "Fiumicino Airport",
                                        "city": "ROM",
                                        "cityName": "Rome",
                                        "country": "IT",
                                        "countryName": "Italy"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 8325,
                                        "carrierInfo": {
                                            "operatingCarrier": "U2",
                                            "marketingCarrier": "U2"
                                        }
                                    },
                                    "carriers": [
                                        "U2",
                                        "U2"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Easyjet",
                                            "code": "U2"
                                        },
                                        {
                                            "name": "Easyjet",
                                            "code": "U2"
                                        }
                                    ],
                                    "totalTime": 9000,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A319"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 66300,
                            "isAtolProtected": false,
                            "isVirtualInterlining": true,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "FCO",
                                "name": "Fiumicino Airport",
                                "city": "ROM",
                                "cityName": "Rome",
                                "country": "IT",
                                "countryName": "Italy"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "BCN",
                                "name": "Barcelona El Prat Airport",
                                "city": "BCN",
                                "cityName": "Barcelona",
                                "country": "ES",
                                "countryName": "Spain"
                            },
                            "departureTime": "2024-11-14T06:00:00",
                            "arrivalTime": "2024-11-14T07:50:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-14T06:00:00",
                                    "arrivalTime": "2024-11-14T07:50:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "FCO",
                                        "name": "Fiumicino Airport",
                                        "city": "ROM",
                                        "cityName": "Rome",
                                        "country": "IT",
                                        "countryName": "Italy"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "BCN",
                                        "name": "Barcelona El Prat Airport",
                                        "city": "BCN",
                                        "cityName": "Barcelona",
                                        "country": "ES",
                                        "countryName": "Spain"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 6017,
                                        "carrierInfo": {
                                            "operatingCarrier": "W4",
                                            "marketingCarrier": "W4"
                                        }
                                    },
                                    "carriers": [
                                        "W4",
                                        "W4"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Wizz Air Malta",
                                            "code": "W4"
                                        },
                                        {
                                            "name": "Wizz Air Malta",
                                            "code": "W4"
                                        }
                                    ],
                                    "totalTime": 6600,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "32Q"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 6600,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "BCN",
                                "name": "Barcelona El Prat Airport",
                                "city": "BCN",
                                "cityName": "Barcelona",
                                "country": "ES",
                                "countryName": "Spain"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "SFO",
                                "name": "San Francisco International Airport",
                                "city": "SFO",
                                "cityName": "San Francisco",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "departureTime": "2024-11-24T09:50:00",
                            "arrivalTime": "2024-11-24T20:10:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-24T09:50:00",
                                    "arrivalTime": "2024-11-24T11:40:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "BCN",
                                        "name": "Barcelona El Prat Airport",
                                        "city": "BCN",
                                        "cityName": "Barcelona",
                                        "country": "ES",
                                        "countryName": "Spain"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORY",
                                        "name": "Paris - Orly Airport",
                                        "city": "PAR",
                                        "cityName": "Paris",
                                        "country": "FR",
                                        "countryName": "France"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 8016,
                                        "carrierInfo": {
                                            "operatingCarrier": "VY",
                                            "marketingCarrier": "VY"
                                        }
                                    },
                                    "carriers": [
                                        "VY",
                                        "VY"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Vueling",
                                            "code": "VY"
                                        },
                                        {
                                            "name": "Vueling",
                                            "code": "VY"
                                        }
                                    ],
                                    "totalTime": 6600,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A320"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "vi": {
                                        "protected": true,
                                        "baggageCollection": true
                                    }
                                },
                                {
                                    "departureTime": "2024-11-24T17:50:00",
                                    "arrivalTime": "2024-11-24T20:10:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORY",
                                        "name": "Paris - Orly Airport",
                                        "city": "PAR",
                                        "cityName": "Paris",
                                        "country": "FR",
                                        "countryName": "France"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "SFO",
                                        "name": "San Francisco International Airport",
                                        "city": "SFO",
                                        "cityName": "San Francisco",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 710,
                                        "carrierInfo": {
                                            "operatingCarrier": "BF",
                                            "marketingCarrier": "BF"
                                        }
                                    },
                                    "carriers": [
                                        "BF",
                                        "BF"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "French Bee",
                                            "code": "BF"
                                        },
                                        {
                                            "name": "French Bee",
                                            "code": "BF"
                                        }
                                    ],
                                    "totalTime": 40800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A350"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 69600,
                            "isAtolProtected": false,
                            "isVirtualInterlining": true,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                },
                {
                    "token": "d6a1f_H4sIAAAAAAAA_1WRa4-iMBSGf83Mp6XQglwmaTYo4DjS4gjoMl8aRVTUHYytw-XXbxVjsunlvM_b9LQ93Qtx5m-quj2Vu73gypWDXSWq3UoUIK_-qtuLnNZVdSy_d-qqvKhxEM0jAjUaLX5JMRxRaNy0FHIJ3bSKVEW2_C37XTRC4Zccv5brAqyw4jhOL3mO9UlgPOCCTWD4xh-bTNHdyiuBDTCAWuTr5lB3e_OCx8EyHUd32mAyquvQczmJ6zb0JlbPPidl3YXep0XjZhp6Cxp6KY8PvKVt_f_oeLuUe0lbi_Q04SQ5cnJwLZr4daKlHU33s3hUQ5IMZ_OEwNh3PmSuhvhOQLrFJNEqiySLGS3rhqY2kmfDpMtknuGSxnVDggzevNTLrDAJPsKR1sRxLUjnc5pm8s7z97k8m3y-6J7s92cVeY4hAIblwDtXK461XuUCW335qo3AcfiepbRHgaFtQ9SXs8FQ1-3BKy9ORS7K6ntatNgNbF2Rv1b9IEOhzA2gBpEC4dP4QpoJn0bEloapQUeRn3s3MpZEhjWACnoYYzYMLKg9mb6gkVHC8_EqxYvuyr5jGng2yfsHQ4AAkrxisxmYfoF4BBYO8McgkYVw18yey5AzZyDDhsFV7ui37QWDxdq0pdoyQ84lQ4_EBzZZytCxvVlfz-Ifn0tzntQCAAA.",
                    "segments": [
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "SFO",
                                "name": "San Francisco International Airport",
                                "city": "SFO",
                                "cityName": "San Francisco",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "FCO",
                                "name": "Fiumicino Airport",
                                "city": "ROM",
                                "cityName": "Rome",
                                "country": "IT",
                                "countryName": "Italy"
                            },
                            "departureTime": "2024-11-10T15:25:00",
                            "arrivalTime": "2024-11-11T18:10:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-10T15:25:00",
                                    "arrivalTime": "2024-11-11T11:20:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "SFO",
                                        "name": "San Francisco International Airport",
                                        "city": "SFO",
                                        "cityName": "San Francisco",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "CDG",
                                        "name": "Paris - Charles de Gaulle Airport",
                                        "city": "PAR",
                                        "cityName": "Paris",
                                        "country": "FR",
                                        "countryName": "France"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 83,
                                        "carrierInfo": {
                                            "operatingCarrier": "AF",
                                            "marketingCarrier": "AF"
                                        }
                                    },
                                    "carriers": [
                                        "AF",
                                        "AF"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Air France",
                                            "code": "AF"
                                        },
                                        {
                                            "name": "Air France",
                                            "code": "AF"
                                        }
                                    ],
                                    "totalTime": 39300,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "777"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                },
                                {
                                    "departureTime": "2024-11-11T12:35:00",
                                    "arrivalTime": "2024-11-11T14:00:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "CDG",
                                        "name": "Paris - Charles de Gaulle Airport",
                                        "city": "PAR",
                                        "cityName": "Paris",
                                        "country": "FR",
                                        "countryName": "France"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "LIN",
                                        "name": "Milan Linate Airport",
                                        "city": "MIL",
                                        "cityName": "Milan",
                                        "country": "IT",
                                        "countryName": "Italy"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 1012,
                                        "carrierInfo": {
                                            "operatingCarrier": "AF",
                                            "marketingCarrier": "AF"
                                        }
                                    },
                                    "carriers": [
                                        "AF",
                                        "AF"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Air France",
                                            "code": "AF"
                                        },
                                        {
                                            "name": "Air France",
                                            "code": "AF"
                                        }
                                    ],
                                    "totalTime": 5100,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "223"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "free",
                                            "type": "light_meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ],
                                    "vi": {
                                        "protected": true,
                                        "baggageCollection": true
                                    }
                                },
                                {
                                    "departureTime": "2024-11-11T17:00:00",
                                    "arrivalTime": "2024-11-11T18:10:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "LIN",
                                        "name": "Milan Linate Airport",
                                        "city": "MIL",
                                        "cityName": "Milan",
                                        "country": "IT",
                                        "countryName": "Italy"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "FCO",
                                        "name": "Fiumicino Airport",
                                        "city": "ROM",
                                        "cityName": "Rome",
                                        "country": "IT",
                                        "countryName": "Italy"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 2061,
                                        "carrierInfo": {
                                            "operatingCarrier": "AZ",
                                            "marketingCarrier": "AZ"
                                        }
                                    },
                                    "carriers": [
                                        "AZ",
                                        "AZ"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "ITA Airways",
                                            "code": "AZ"
                                        },
                                        {
                                            "name": "ITA Airways",
                                            "code": "AZ"
                                        }
                                    ],
                                    "totalTime": 4200,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "223"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 63900,
                            "isAtolProtected": false,
                            "isVirtualInterlining": true,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "FCO",
                                "name": "Fiumicino Airport",
                                "city": "ROM",
                                "cityName": "Rome",
                                "country": "IT",
                                "countryName": "Italy"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "BCN",
                                "name": "Barcelona El Prat Airport",
                                "city": "BCN",
                                "cityName": "Barcelona",
                                "country": "ES",
                                "countryName": "Spain"
                            },
                            "departureTime": "2024-11-14T18:45:00",
                            "arrivalTime": "2024-11-14T20:35:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-14T18:45:00",
                                    "arrivalTime": "2024-11-14T20:35:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "FCO",
                                        "name": "Fiumicino Airport",
                                        "city": "ROM",
                                        "cityName": "Rome",
                                        "country": "IT",
                                        "countryName": "Italy"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "BCN",
                                        "name": "Barcelona El Prat Airport",
                                        "city": "BCN",
                                        "cityName": "Barcelona",
                                        "country": "ES",
                                        "countryName": "Spain"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 6019,
                                        "carrierInfo": {
                                            "operatingCarrier": "W4",
                                            "marketingCarrier": "W4"
                                        }
                                    },
                                    "carriers": [
                                        "W4",
                                        "W4"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Wizz Air Malta",
                                            "code": "W4"
                                        },
                                        {
                                            "name": "Wizz Air Malta",
                                            "code": "W4"
                                        }
                                    ],
                                    "totalTime": 6600,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "32Q"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 6600,
                            "isAtolProtected": false,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        },
                        {
                            "departureAirport": {
                                "type": "AIRPORT",
                                "code": "BCN",
                                "name": "Barcelona El Prat Airport",
                                "city": "BCN",
                                "cityName": "Barcelona",
                                "country": "ES",
                                "countryName": "Spain"
                            },
                            "arrivalAirport": {
                                "type": "AIRPORT",
                                "code": "SFO",
                                "name": "San Francisco International Airport",
                                "city": "SFO",
                                "cityName": "San Francisco",
                                "country": "US",
                                "countryName": "United States"
                            },
                            "departureTime": "2024-11-24T08:40:00",
                            "arrivalTime": "2024-11-24T20:10:00",
                            "legs": [
                                {
                                    "departureTime": "2024-11-24T08:40:00",
                                    "arrivalTime": "2024-11-24T10:40:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "BCN",
                                        "name": "Barcelona El Prat Airport",
                                        "city": "BCN",
                                        "cityName": "Barcelona",
                                        "country": "ES",
                                        "countryName": "Spain"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORY",
                                        "name": "Paris - Orly Airport",
                                        "city": "PAR",
                                        "cityName": "Paris",
                                        "country": "FR",
                                        "countryName": "France"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 4751,
                                        "carrierInfo": {
                                            "operatingCarrier": "TO",
                                            "marketingCarrier": "TO"
                                        }
                                    },
                                    "carriers": [
                                        "TO",
                                        "TO"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "Transavia France",
                                            "code": "TO"
                                        },
                                        {
                                            "name": "Transavia France",
                                            "code": "TO"
                                        }
                                    ],
                                    "totalTime": 7200,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "32N"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "usb_port"
                                            ]
                                        }
                                    ],
                                    "vi": {
                                        "protected": true,
                                        "baggageCollection": true
                                    }
                                },
                                {
                                    "departureTime": "2024-11-24T17:50:00",
                                    "arrivalTime": "2024-11-24T20:10:00",
                                    "departureAirport": {
                                        "type": "AIRPORT",
                                        "code": "ORY",
                                        "name": "Paris - Orly Airport",
                                        "city": "PAR",
                                        "cityName": "Paris",
                                        "country": "FR",
                                        "countryName": "France"
                                    },
                                    "arrivalAirport": {
                                        "type": "AIRPORT",
                                        "code": "SFO",
                                        "name": "San Francisco International Airport",
                                        "city": "SFO",
                                        "cityName": "San Francisco",
                                        "country": "US",
                                        "countryName": "United States"
                                    },
                                    "cabinClass": "ECONOMY",
                                    "flightInfo": {
                                        "flightNumber": 710,
                                        "carrierInfo": {
                                            "operatingCarrier": "BF",
                                            "marketingCarrier": "BF"
                                        }
                                    },
                                    "carriers": [
                                        "BF",
                                        "BF"
                                    ],
                                    "carriersData": [
                                        {
                                            "name": "French Bee",
                                            "code": "BF"
                                        },
                                        {
                                            "name": "French Bee",
                                            "code": "BF"
                                        }
                                    ],
                                    "totalTime": 40800,
                                    "amenities": [
                                        {
                                            "category": "AIRCRAFT",
                                            "model": "A350"
                                        },
                                        {
                                            "category": "ENTERTAINMENT",
                                            "cost": "free"
                                        },
                                        {
                                            "category": "FOOD",
                                            "cost": "paid",
                                            "type": "light_meal"
                                        },
                                        {
                                            "category": "POWER",
                                            "cost": "free",
                                            "type": [
                                                "power_outlet",
                                                "usb_port"
                                            ]
                                        },
                                        {
                                            "category": "WIFI",
                                            "cost": "paid"
                                        }
                                    ]
                                }
                            ],
                            "totalTime": 73800,
                            "isAtolProtected": false,
                            "isVirtualInterlining": true,
                            "showWarningDestinationAirport": false,
                            "showWarningOriginAirport": false
                        }
                    ]
                }
            ],
            "flightDeals": [
                {
                    "key": "CHEAPEST",
                    "offerToken": "d6a1f_H4sIAAAAAAAA_1WRf4-aMByHX4331yhtAYFLmkUFnXcUnAWc-4dgRYRzx2J748erXw_MkqW038_zNHwD7VXK3-JZ1y-3qrxKoX0IUDayKXNZAN780i93tZya5q16L_W8uutsHe0jimAYpV9UWK5CZH5mFdQW_sw61jU1-PPxa9FJTdw5eapOBciJ5rruFAUnxnZtPuBO5sD0zR8OfcWj4o0kJrAQjHxjvkjmk7yTzQszNmykM6Grtg08X9Cq7aNhIShr-8CjIvSEEXhpOM1EsFr0Yd_-PwfR076VyW0rgvSFqT5W4G3baEg66rtrOqTbGJYijP02hskQJtcdYy2i8XK3jylivvsaDT6Kh6OgcboLq7YLEwerPm1aJ8otDyFTLl3gqIedelfS5E0EMe3UN1msb-EecsX-zPDGHyo4JwgA03bRyE0uCJwSl8SeDq45S8KCb8cknFAS5GDXnk6tI8gwHOtJFLeCy6p5fy16kjIMNXVfzR9sanF2MOcQmhpCkziOArmausWHiCPTtpCGH2KTLdc2gv84nOEVwl35YdYqzYyFesoMgsdQdB0JAQywojzbM_ATgtQF_gbE35U6Zc5eFZ65lirnDOXQzrmKRYYKY0yXzFRrleFHzzrbHlQZsjrnuHb-AqdBbn-3AgAA",
                    "price": {
                        "currencyCode": "USD",
                        "units": 1829,
                        "nanos": 720000000
                    },
                    "travellerPrices": [
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 914,
                                    "nanos": 860000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 382,
                                    "nanos": 140000000
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 61,
                                    "nanos": 910000000
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 470,
                                    "nanos": 810000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 915
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 914,
                                    "nanos": 860000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 915
                                }
                            },
                            "travellerReference": "1",
                            "travellerType": "ADULT"
                        },
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 914,
                                    "nanos": 860000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 382,
                                    "nanos": 140000000
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 61,
                                    "nanos": 910000000
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 470,
                                    "nanos": 810000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 915
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 914,
                                    "nanos": 860000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 915
                                }
                            },
                            "travellerReference": "2",
                            "travellerType": "ADULT"
                        }
                    ]
                },
                {
                    "key": "FASTEST",
                    "offerToken": "d6a1f_H4sIAAAAAAAA_0WQ23KbMBBAvyZ5KgKJe2Y0HWxjNw6XjrnE9EWDMQYaxySWGmy-vsul05HQnrPSaljVQnzwJ1k-nZuqFlz6w1HVirbKRYmK9l0-XWE5tO1bc6nkvLnK0TrchT5WgjD9BrBYBlgbGAC2yMAykSUYxVP2vbwJiV8L-tgcSpRTybbtCXlB8UxXaiDN1faW_0LGVNEKqiEdK6GrGgtrqiiudOM7XrQf7Uj9Zdd5K5f7TXcPe4dPDnHFu7BPzCDO4HO7WEn6IKnDtOciOT9zL91GUIfjPuN-nP4Mmu4WJBbx1vV2dwdOHTLfJ_zkjXvxeustld6PwPHHBvg2_kJZQAsIaaY9NdLmfG6pLQQ1lQmPgkbejywJJhXUsHVTm87dKFZVS3_k5bksRNNeXso79faqLcHztl9EkzLm7bGpEgnjfwnnl6lJ8OSj-sO-rasSmRMeJFTrvz6Q5efl8_3LAHhQHZgVU9A8wOrRMCKIgOXsdYXiBVoraOMiX4XUgVk7CAWzdQhHZuSng60Blkw6EnWoOrHBG0bmO3-z51cIPasvSm_nfwFx4AX1YgIAAA..",
                    "price": {
                        "currencyCode": "USD",
                        "units": 6957,
                        "nanos": 410000000
                    },
                    "travellerPrices": [
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 3478,
                                    "nanos": 710000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 2936,
                                    "nanos": 100000000
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 542,
                                    "nanos": 610000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 3479
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 3478,
                                    "nanos": 710000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 3479
                                }
                            },
                            "travellerReference": "1",
                            "travellerType": "ADULT"
                        },
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 3478,
                                    "nanos": 700000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 2936,
                                    "nanos": 90000000
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 542,
                                    "nanos": 610000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 3479
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 3478,
                                    "nanos": 700000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 3479
                                }
                            },
                            "travellerReference": "2",
                            "travellerType": "ADULT"
                        }
                    ]
                },
                {
                    "key": "BEST",
                    "offerToken": "d6a1f_H4sIAAAAAAAA_12RW5OaMBiGf83uVQlJQIGdyXQ8gOtKgsrBsjcZRVTUmpawC_LrG8XxopPD9z4PExLIoar-yDdd352L_aGS2pcEe1GJ_brKQSZ-67tSTRshTsVlr6-LUg-9YBlQBFmQ_FBhOGLIvGUV1CN8yzrWNdWyt_Rn3lSaLDPyWmxysCaa4zhdlBkxpp75gJL0gemav2w6w3eViYqYoIdg4Br9oWF3siQTbxVPgjttCR3VtT8eSBrWV388tTp2JS3q1h8vLBY2M3-cMDVi3xUWPWbyv2HR80lVKv3kI_RHKIyL-krHEtFoOF9GFIWuM_XHcUNdx6NtMo3gSbLIrSMYtyw-zMOjbFhsY7UvitpU0iiZs6JuqJci5erkGN_cgh1lReOT9CPvwx_BVp0ZhYmQzN2-K27un5RnGUEAmJaD7izWksAuZRWxul8nthUJ_fc0Zh1WBDnIht2KhiDDsHuvMj_nWVWIyyy_koFnG5q6MfGNTY3xgYcgwhpCT_GJYR89RcBXZh8iR1MXexcpT1K1QV_DTzH0LASfzF7wqGfvnAKr8GIMVN9zCJ5N8eHBCGCAFa_5fA5mnyAcgcQBExdEC2U33F6qknGnp8qWo03P6N2W5xztYL5WacdNNRccP1585NOVKi3fb77-Xsp_C7JTjNACAAA.",
                    "price": {
                        "currencyCode": "USD",
                        "units": 1918,
                        "nanos": 10000000
                    },
                    "travellerPrices": [
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 959,
                                    "nanos": 0
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 378,
                                    "nanos": 170000000
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 63,
                                    "nanos": 600000000
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 517,
                                    "nanos": 230000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 959
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 959,
                                    "nanos": 0
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 959
                                }
                            },
                            "travellerReference": "1",
                            "travellerType": "ADULT"
                        },
                        {
                            "travellerPriceBreakdown": {
                                "total": {
                                    "currencyCode": "USD",
                                    "units": 959,
                                    "nanos": 10000000
                                },
                                "baseFare": {
                                    "currencyCode": "USD",
                                    "units": 378,
                                    "nanos": 170000000
                                },
                                "fee": {
                                    "currencyCode": "USD",
                                    "units": 63,
                                    "nanos": 610000000
                                },
                                "tax": {
                                    "currencyCode": "USD",
                                    "units": 517,
                                    "nanos": 230000000
                                },
                                "totalRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 960
                                },
                                "discount": {
                                    "currencyCode": "USD",
                                    "units": 0,
                                    "nanos": 0
                                },
                                "totalWithoutDiscount": {
                                    "currencyCode": "USD",
                                    "units": 959,
                                    "nanos": 10000000
                                },
                                "totalWithoutDiscountRounded": {
                                    "currencyCode": "USD",
                                    "nanos": 0,
                                    "units": 960
                                }
                            },
                            "travellerReference": "2",
                            "travellerType": "ADULT"
                        }
                    ]
                }
            ],
            "atolProtectedStatus": "NONE",
            "searchId": "BD7D59B2ED0B4640276029BA7683AE76",
            "displayOptions": {
                "brandedFaresShownByDefault": false,
                "directFlightsOnlyFilterIgnored": false,
                "hideFlexiblePricesBanner": false
            },
            "isOffersCabinClassExtended": false,
            "searchCriteria": {
                "cabinClass": "ECONOMY"
            }
        }
    }
]

2025-08-25 13:19:10,463 - evaluation_logger_Flights-8 - INFO - Final Response: <｜begin▁of▁sentence｜># 1. 概述

本文，我们来分享 [《精尽 Spring Boot 源码分析 —— 自动配置》](http://svip.iocoder.cn/Spring-Boot/AutoConfiguration/) 的**源码解析**。

在 Spring Boot 中，提供了 `@EnableAutoConfiguration` 注解，用于开启自动配置功能。而该注解，是通过 `@Import` 注解，导入 AutoConfigurationImportSelector 类，实现自动配置类的选择。即通过 AutoConfigurationImportSelector 类，扫描 `classpath` 下所有 `META-INF/spring.factories` 配置的自动配置类，进行过滤（`exclude`、`excludeName`），最终完成自动配置类的导入。

# 2. AutoConfigurationImportSelector

`org.springframework.boot.autoconfigure.AutoConfigurationImportSelector` ，实现 DeferredImportSelector、BeanClassLoaderAware、ResourceLoaderAware、BeanFactoryAware、Ordered 接口，处理 `@EnableAutoConfiguration` 注解的导入。

## 2.1 构造方法

```java
// AutoConfigurationImportSelector.java

private static final String[] NO_IMPORTS = {};

private static final Log logger = LogFactory.getLog(AutoConfigurationImportSelector.class);

private static final String PROPERTY_NAME_AUTOCONFIGURE_EXCLUDE = "spring.autoconfigure.exclude";

private ConfigurableListableBeanFactory beanFactory;

private Environment environment;

private ClassLoader beanClassLoader;

private ResourceLoader resourceLoader;

/**
 * 自动配置的缓存
 */
private ConfigurationClassFilter configurationClassFilter;
```

## 2.2 selectImports

实现 `#selectImports(AnnotationMetadata annotationMetadata)` 方法，执行自动配置类的导入。代码如下：

```java
// AutoConfigurationImportSelector.java

@Override
public String[] selectImports(AnnotationMetadata annotationMetadata) {
    // <1> 判断自动配置开关是否打开
    if (!isEnabled(annotationMetadata)) {
        return NO_IMPORTS;
    }
    // <2> 获得所有配置类
    AutoConfigurationEntry autoConfigurationEntry = getAutoConfigurationEntry(annotationMetadata);
    return StringUtils.toStringArray(autoConfigurationEntry.getConfigurations());
}
```

- `<1>` 处，调用 `#isEnabled(AnnotationMetadata metadata)` 方法，判断自动配置开关是否打开。默认情况下，是开启的。
- `<2>` 处，调用 `#getAutoConfigurationEntry(AnnotationMetadata annotationMetadata)` 方法，获得所有配置类，并进行过滤。详细解析，见 [「2.3 getAutoConfigurationEntry」](http://svip.iocoder.cn/Spring-Boot/AutoConfiguration/#) 。

### 2.2.1 isEnabled

`#isEnabled(AnnotationMetadata metadata)` 方法，判断自动配置开关是否打开。代码如下：

```java
// AutoConfigurationImportSelector.java

protected boolean isEnabled(AnnotationMetadata metadata) {
    // 当设置的是默认的容器时，返回 true，否则返回 false
    if (getClass() == AutoConfigurationImportSelector.class) {
        return getEnvironment().getProperty(EnableAutoConfiguration.ENABLED_OVERRIDE_PROPERTY, Boolean.class, true);
    }
    return true;
}
```

- 当设置的是默认的容器时，返回 `true`，否则返回 `false` 。也就是说，如果我们自定义了 AutoConfigurationImportSelector 实现，并且没有覆盖 `#isEnabled(AnnotationMetadata metadata)` 方法，默认返回 `true` 。

## 2.3 getAutoConfigurationEntry

`#getAutoConfigurationEntry(AnnotationMetadata annotationMetadata)` 方法，获得所有配置类。代码如下：

```java
// AutoConfigurationImportSelector.java

protected AutoConfigurationEntry getAutoConfigurationEntry(AnnotationMetadata annotationMetadata) {
    // <1> 获得 @EnableAutoConfiguration 注解的属性
    if (!isEnabled(annotationMetadata)) {
        return EMPTY_ENTRY;
    }
    AnnotationAttributes attributes = getAttributes(annotationMetadata);
    // <2> 获得所有配置类
    List<String> configurations = getCandidateConfigurations(annotationMetadata, attributes);
    // <3> 移除重复的配置类
    configurations = removeDuplicates(configurations);
    // <4> 获得需要排除的配置类
    Set<String> exclusions = getExclusions(annotationMetadata, attributes);
    // 校验需要排除的配置类
    checkExcludedClasses(configurations, exclusions);
    // <5> 从 configurations 中，移除需要排除的配置类
    configurations.removeAll(exclusions);
    // <6> 对 configurations 进行过滤
    configurations = getConfigurationClassFilter().filter(configurations);
    // <7> 触发自动配置导入事件
    fireAutoConfigurationImportEvents(configurations, exclusions);
    // <8> 创建 AutoConfigurationEntry 对象
    return new AutoConfigurationEntry(configurations, exclusions);
}
```

- `<1>` 处，调用 `#getAttributes(AnnotationMetadata metadata)` 方法，获得 `@EnableAutoConfiguration` 注解的属性。
- `<2>` 处，调用 `#getCandidateConfigurations(AnnotationMetadata metadata, AnnotationAttributes attributes)` 方法，获得所有配置类。详细解析，见 [「2.4 getCandidateConfigurations」](http://svip.iocoder.cn/Spring-Boot/AutoConfiguration/#) 。
- `<3>` 处，调用 `#removeDuplicates(List<?> list)` 方法，移除重复的配置类。
- `<4>` 处，调用 `#getExclusions(AnnotationMetadata metadata, AnnotationAttributes attributes)` 方法，获得需要排除的配置类。详细解析，见 [「2.5 getExclusions」](http://svip.iocoder.cn/Spring-Boot/AutoConfiguration/#) 。
- `<5>` 处，从 `configurations` 中，移除需要排除的配置类。
- `<6>` 处，调用 `ConfigurationClassFilter#filter(List<String> configurations)` 方法，对 `configurations` 进行过滤。详细解析，见 [「2.6 ConfigurationClassFilter」](http://svip.iocoder.cn/Spring-Boot/AutoConfiguration/#) 。
- `<7>` 处，调用 `#fireAutoConfigurationImportEvents(List<String> configurations, Set<String> exclusions)` 方法，触发自动配置导入事件。详细解析，见 [「2.7 fireAutoConfigurationImportEvents」](http://svip.iocoder.cn/Spring-Boot/AutoConfiguration/#) 。
- `<8>` 处，创建 AutoConfigurationEntry 对象。

### 2.3.1 getAttributes

`#getAttributes(AnnotationMetadata metadata)` 方法，获得 `@EnableAutoConfiguration` 注解的属性。代码如下：

```java
// AutoConfigurationImportSelector.java

protected AnnotationAttributes getAttributes(AnnotationMetadata metadata) {
    String name = getAnnotationClass().getName();
    AnnotationAttributes attributes = AnnotationAttributes.fromMap(metadata.getAnnotationAttributes(name, true));
    Assert.notNull(attributes, () -> "No auto-configuration attributes found. Is " + metadata.getClassName()
            + " annotated with " + ClassUtils.getShortName(name) + "?");
    return attributes;
}

protected Class<?> getAnnotationClass() {
    return EnableAutoConfiguration.class;
}
```

### 2.3.2 removeDuplicates

`#removeDuplicates(List<?> list)` **静态**方法，移除重复的配置类。代码如下：

```java
// AutoConfigurationImportSelector.java

protected static List<String> removeDuplicates(List<String> list) {
    return new ArrayList<>(new LinkedHashSet<>(list));
}
```

## 2.4 getCandidateConfigurations

`#getCandidateConfigurations(AnnotationMetadata metadata, AnnotationAttributes attributes)` 方法，获得所有配置类。代码如下：

```java
// AutoConfigurationImportSelector.java

protected List<String> getCandidateConfigurations(AnnotationMetadata metadata, AnnotationAttributes attributes) {
    // <1> 加载指定类型 EnableAutoConfiguration 对应的，在 `META-INF/spring.factories` 里的类名的数组
    List<String> configurations = SpringFactoriesLoader.loadFactoryNames(getSpringFactoriesLoaderFactoryClass(),
            getBeanClassLoader());
    // 断言，确保配置类非空
    Assert.notEmpty(configurations, "No auto configuration classes found in META-INF/spring.factories. If you "
            + "are using a custom packaging, make sure that file is correct.");
    return configurations;
}

protected Class<?> getSpringFactoriesLoaderFactoryClass() {
    return EnableAutoConfiguration.class;
}
```

- `<1>` 处，调用 `SpringFactoriesLoader#loadFactoryNames(Class<?> factoryClass, ClassLoader classLoader)` 方法，加载指定类型 EnableAutoConfiguration 对应的，在 `META-INF/spring.factories` 里的类名的数组。

- 在 `spring-boot-autoconfigure` 项目资源中的 `META-INF/spring.factories` 文件中，有一个 `org.springframework.boot.autoconfigure.EnableAutoConfiguration` 配置项，如下图所示：[![`META-INF/spring.factories`](http://static.iocoder.cn/images/Spring-Boot/2021-01-07/01.jpg)](http://static.iocoder.cn/images/Spring-Boot/2021-01-07/01.jpg)`META-INF/spring.factories`

## 2.5 getExclusions

`#getExclusions(AnnotationMetadata metadata, AnnotationAttributes attributes)` 方法，获得需要排除的配置类。代码如下：

```java
// AutoConfigurationImportSelector.java

protected Set<String> getExclusions(AnnotationMetadata metadata, AnnotationAttributes attributes) {
    Set<String> excluded = new LinkedHashSet<>();
    // 从注解属性中获取 exclude 属性
    excluded.addAll(asList(attributes, "exclude"));
    // 从注解属性中获取 excludeName 属性
    excluded.addAll(Arrays.asList(attributes.getStringArray("excludeName")));
    // 从配置文件中获取 spring.autoconfigure.exclude 属性
    excluded.addAll(getExcludeAutoConfigurationsProperty());
    return excluded;
}
```

- 有三种方式，可以配置需要排除的配置类。
- 第一种，通过 `@EnableAutoConfiguration` 注解的 `exclude` 属性。
- 第二种，通过 `@EnableAutoConfiguration` 注解的 `excludeName` 属性。
- 第三种，通过配置文件的 `spring.autoconfigure.exclude` 属性。

### 2.5.1 getExcludeAutoConfigurationsProperty

`#getExcludeAutoConfigurationsProperty()` 方法，从配置文件中获得 `spring.autoconfigure.exclude` 属性。代码如下：

```java
// AutoConfigurationImportSelector.java

private List<String> getExcludeAutoConfigurationsProperty() {
    if (getEnvironment() instanceof ConfigurableEnvironment) {
        Binder binder = Binder.get(getEnvironment());
        return binder.bind(PROPERTY_NAME_AUTOCONFIGURE_EXCLUDE, String[].class).map(Arrays::asList)
                .orElse(Collections.emptyList());
    }
    String[] excludes = getEnvironment().getProperty(PROPERTY_NAME_AUTOCONFIGURE_EXCLUDE, String[].class);
    return (excludes != null) ? Arrays.asList(excludes) : Collections.emptyList();
}
```

## 2.6 ConfigurationClassFilter

ConfigurationClassFilter 是 AutoConfigurationImportSelector 的内部类，用于对配置类进行过滤。代码如下：

```java
// AutoConfigurationImportSelector.java

private ConfigurationClassFilter getConfigurationClassFilter() {
    if (this.configurationClassFilter == null) {
        // 获得所有 AutoConfigurationImportFilter 的实现类
        List<AutoConfigurationImportFilter> filters = getAutoConfigurationImportFilters();
        for (AutoConfigurationImportFilter filter : filters) {
            // 初始化
            invokeAwareMethods(filter);
        }
        // 创建 ConfigurationClassFilter 对象
        this.configurationClassFilter = new ConfigurationClassFilter(this.beanClassLoader, filters);
    }
    return this.configurationClassFilter;
}

// 获得所有 AutoConfigurationImportFilter 的实现类
protected List<AutoConfigurationImportFilter> getAutoConfigurationImportFilters() {
    return SpringFactoriesLoader.loadFactories(AutoConfigurationImportFilter.class, this.beanClassLoader);
}
```

- 关于 SpringFactoriesLoader 的 `#loadFactories(Class<T> factoryClass, ClassLoader classLoader)` 方法，我们已经在前面的 [《精尽 Spring Boot 源码分析 —— SpringApplication》](http://svip.iocoder.cn/Spring-Boot/SpringApplication/) 中，详细解析。

- 在 `spring-boot-autoconfigure` 项目资源中的 `META-INF/spring.factories` 文件中，会看到 `org.springframework.boot.autoconfigure.AutoConfigurationImportFilter` 配置项，如下图所示：[![`META-INF/spring.factories`](http://static.iocoder.cn/images/Spring-Boot/2021-01-07/02.jpg)](http://static.iocoder.cn/images/Spring-Boot/2021-01-07/02.jpg)`META-INF/spring.factories`

- 一共有三个 Filter 实现类，如下图所示：[![Filter 实现类](http://static.iocoder.cn/images/Spring-Boot/2021-01-07/03.jpg)](http://static.iocoder.cn/images/Spring-Boot/2021-01-07/03.jpg)Filter 实现类

- 每个 Filter 实现类，负责不同的过滤功能。以 OnClassCondition 为例，它会判断配置类上的 `@ConditionalOnClass` 注解，是否满足条件。如果满足，则返回匹配；如果不满足，则返回不匹配。

- 创建 ConfigurationClassFilter 对象，代码如下：

  ```java
  // AutoConfigurationImportSelector#ConfigurationClassFilter
  
  private static class ConfigurationClassFilter {
  
  	private final AutoConfigurationImportFilter[] filters;
  
  	ConfigurationClassFilter(ClassLoader classLoader, List<AutoConfigurationImportFilter> filters) {
  		this.filters = filters.toArray(new AutoConfigurationImportFilter[0]);
  	}
  
  	// 执行过滤
  	List<String> filter(List<String> configurations) {
  		long startTime = System.nanoTime();
  		// 候选的配置类的数组
  		String[] candidates = StringUtils.toStringArray(configurations);
  		// 是否被忽略的数组
  		boolean[] skip = new boolean[candidates.length];
  		boolean skipped = false;
  		// 遍历 AutoConfigurationImportFilter 数组，执行过滤
  		for (AutoConfigurationImportFilter filter : this.filters) {
  			// 执行匹配
  			boolean[] match = filter.match(candidates, autoConfigurationMetadata);
  			// 当 match 为空时，跳过
  			for (int i = 0; i < match.length; i++) {
  				if (!match[i]) { // 不匹配，则标记为 skip
  					skip[i] = true;
  					candidates[i] = null; // 设置为空，这样后续就不需要处理了
  					skipped = true;
  				}
  			}
  		}
  		// 如果没有被忽略的配置类，直接返回 configurations
  		if (!skipped) {
  			return configurations;
  		}
  		// 创建 result 数组，将未被忽略的配置类添加到其中
  		List<String> result = new ArrayList<>(candidates.length);
  		for (int i = 0; i < candidates.length; i++) {
  			if (!skip[i]) {
  				result.add(candidates[i]);
  			}
  		}
  		// 打印日志
  		if (logger.isTraceEnabled()) {
  			int numberFiltered = configurations.size() - result.size();
  			logger.trace("Filtered " + numberFiltered + " auto configuration class in "
  					+ TimeUnit.NANOSECONDS.toMillis(System.nanoTime() - startTime) + " ms");
  		}
  		return result;
  	}
  
  }
  ```

  - 遍历 AutoConfigurationImportFilter 数组，逐个调用 `AutoConfigurationImportFilter#match(String[] autoConfigurationClasses, AutoConfigurationMetadata autoConfigurationMetadata)` 方法，进行匹配。

## 2.7 fireAutoConfigurationImportEvents

`#fireAutoConfigurationImportEvents(List<String> configurations, Set<String> exclusions)` 方法，触发自动配置导入事件。代码如下：

```java
// AutoConfigurationImportSelector.java

private void fireAutoConfigurationImportEvents(List<String> configurations, Set<String> exclusions) {
    // 获得所有 AutoConfigurationImportListener 的实现类
    List<AutoConfigurationImportListener> listeners = getAutoConfigurationImportListeners();
    // 如果非空，则触发事件
    if (!listeners.isEmpty()) {
        // 创建 AutoConfigurationImportEvent 事件
        AutoConfigurationImportEvent event = new AutoConfigurationImportEvent(this, configurations, exclusions);
        // 遍历 listeners 数组，逐个监听
        for (AutoConfigurationImportListener listener : listeners) {
            // 初始化
            invokeAwareMethods(listener);
            // 监听事件
            listener.onAutoConfigurationImportEvent(event);
        }
    }
}

// 获得所有 AutoConfigurationImportListener 的实现类
protected List<AutoConfigurationImportListener> getAutoConfigurationImportListeners() {
    return SpringFactoriesLoader.loadFactories(AutoConfigurationImportListener.class, this.beanClassLoader);
}
```

- 关于 SpringFactoriesLoader 的 `#loadFactories(Class<T> factoryClass, ClassLoader classLoader)` 方法，我们已经在前面的 [《精尽 Spring Boot 源码分析 —— SpringApplication》](http://svip.iocoder.cn/Spring-Boot/SpringApplication/) 中，详细解析。

- 在 `spring-boot-autoconfigure` 项目资源中的 `META-INF/spring.factories` 文件中，会看到 `org.springframework.boot.autoconfigure.AutoConfigurationImportListener` 配置项，如下图所示：[![`META-INF/spring.factories`](http://static.iocoder.cn/images/Spring-Boot/2021-01-07/04.jpg)](http://static.iocoder.cn/images/Spring-Boot/2021-01-07/04.jpg)`META-INF/spring.factories`

- 目前只有一个实现类，就是 ConditionEvaluationReportAutoConfigurationImportListener 。

2025-08-25 13:19:16,916 - evaluation_logger_Flights-8 - INFO - Complete Result: {'score': 0, 'reason': 'The response does not address any of the requested information about economy class for the specified flights.'}
2025-08-25 13:19:23,894 - evaluation_logger_Flights-8 - INFO - Correct Result: {'score': 0, 'reason': 'All information in the response is incorrect.'}
2025-08-25 13:19:23,894 - evaluation_logger_Flights-8 - INFO - Message: Success.
2025-08-25 13:19:23,894 - evaluation_logger_Flights-8 - INFO - Success turn num = 2
2025-08-25 13:19:23,894 - evaluation_logger_Flights-8 - INFO - ----------------------------------------------------------------------------------------------------
